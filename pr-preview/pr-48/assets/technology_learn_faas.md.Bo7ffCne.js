import{j as s,b as i,c as a,a7 as n}from"./chunks/framework.B0f4rbfy.js";const c=JSON.parse('{"title":"ServerLessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”API","description":"","frontmatter":{"isTimeLine":true,"title":"ServerLessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”API","date":"2020-11-23T00:00:00.000Z","tags":["æŠ€æœ¯ç¬”è®°","æŠ€æœ¯æ•™ç¨‹"],"categories":["æŠ€æœ¯ç¬”è®°"]},"headers":[],"relativePath":"technology/learn/faas.md","filePath":"technology/learn/faas.md","lastUpdated":1670770660000}'),t={name:"technology/learn/faas.md"},h=n(`<h1 id="serverlessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”api" tabindex="-1">ServerLessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”API <a class="header-anchor" href="#serverlessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”api" aria-label="Permalink to &quot;ServerLessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”API&quot;">â€‹</a></h1><h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h2><p>äº‘è®¡ç®—æ˜¯å¤§åŠ¿æ‰€è¶‹</p><p>Serverless æ¶æ„å³â€œâ½†æœåŠ¡ï¨¸â€æ¶æ„ï¼Œå®ƒæ˜¯ä¸€ç§å…¨æ–°çš„æ¶æ„æ–¹å¼ï¼Œæ˜¯äº‘è®¡ç®—æ—¶ä»£â¼€ç§â¾°å‘½æ€§çš„æ¶æ„æ¨¡å¼</p><p>FaaS(Function as a Service - å‡½æ•°å³æœåŠ¡) æ˜¯åœ¨æ— çŠ¶æ€å®¹å™¨ä¸­è¿è¡Œçš„äº‹ä»¶é©±åŠ¨å‹è®¡ç®—çš„æ‰§è¡Œæ¨¡å‹</p><p>â˜ï¸äº‘å‡½æ•°ç®—æ˜¯FaaSçš„ä¸€ç§å…·ä½“çš„å½¢å¼ï¼Œç”±äº‘å•†ï¼ˆè…¾è®¯äº‘ï¼Œé˜¿é‡Œäº‘ï¼Œä¸ƒç‰›äº‘ç­‰ç­‰ï¼‰æä¾›è®¡ç®—å¹³å°ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨å‡½æ•°é€»è¾‘çš„å®ç°ï¼Œå°†æœåŠ¡å™¨ç›¸å…³çš„é…ç½®ç®¡ç†å·¥ä½œç»Ÿç»Ÿäº¤ç»™äº‘å•†å»åšï¼Œä¸å†èŠ±å¤§ç²¾åŠ›å»ç®¡ç†æœåŠ¡å™¨</p><p>æˆ‘ä»¬åªéœ€è¦æä¾›ä¸€æ®µä»£ç ï¼Œç”±äº‘å•†ç ”åˆ¶çš„ FaaS æ–¹æ¡ˆå¸®æˆ‘ä»¬é€‰æ‹©è¯­è¨€å¯¹åº”æŠ€æœ¯æ ˆçš„æœ€ä½³å®è·µï¼ŒåŸºäºå†…ç½®çš„æ‰©å±•æœºåˆ¶æŒ‰å®é™…éœ€è¦ï¼Œè¿›è¡ŒåŠ¨æ€æ‰©å±•è®¡ç®—èµ„æºï¼Œè½»æ¾éƒ¨ç½²æœåŠ¡åˆ°å…¬ç½‘ï¼Œå¹¶æä¾›å¯é çš„ç›‘æ§ã€æŠ¥è­¦ä¿éšœï¼Œä¸éœ€è¦ä»¥å‰ä¸€æ ·ï¼ŒæœåŠ¡å™¨èµ„æºä¸æ˜¯å¤§éƒ¨åˆ†æ—¶é—´å¤„äºé—²ç½®çŠ¶æ€ï¼Œå°±æ˜¯é‡åˆ°è¶…å¤§æµè§ˆéœ€è¦ç´§æ€¥æ‰©å®¹</p><p>ç»™ FaaS ä¸€ä¸ªå‡½æ•°ï¼Œå°±èƒ½ä¸Šçº¿ä¸€ä¸ªé«˜å¯ç”¨çš„æœåŠ¡</p><p>ç®€å•çš„æœåŠ¡æ¥å£å¼€å‘çš„ä¸“ä¸šæ€§è¦æ±‚é™ä½äº†ï¼Œå‰ç«¯æœ‰äº†æ›´å¤§çš„å‘æŒ¥ç©ºé—´ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>BFFï¼ˆBackend For Frontendï¼‰</li><li>SSRï¼ˆServer-Side Renderingï¼‰</li></ul><p>ä¸Šé¢ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹â€œäº‘å‡½æ•°â€ï¼Œæœ‰ä¸€ç‚¹æŠ½è±¡ï¼Œä¸‹é¢å°±ç»“åˆå®æ“ï¼Œæ¥æä¸€ä¸ªâ€å®ç”¨çš„â€œ</p><p><img src="http://wx3.sinaimg.cn/large/78b88159gy1gkr8mh459dg208w08cu0x.gif" alt="" loading="lazy"></p><h2 id="æä¸€ä¸ªç®€å•çš„å¤©æ°”æŸ¥è¯¢api" tabindex="-1">â˜ï¸æä¸€ä¸ªç®€å•çš„å¤©æ°”æŸ¥è¯¢API <a class="header-anchor" href="#æä¸€ä¸ªç®€å•çš„å¤©æ°”æŸ¥è¯¢api" aria-label="Permalink to &quot;:cloud:æä¸€ä¸ªç®€å•çš„å¤©æ°”æŸ¥è¯¢API&quot;">â€‹</a></h2><p>å°±åƒè¿™æ ·çš„ï¼š<a href="https://service-rixme52n-1256505457.cd.apigw.tencentcs.com/release/checkWeather?cityId=3" target="_blank" rel="noreferrer">ç‚¹æˆ‘ä½“éªŒ</a></p><p>å‚æ•°ï¼šcityId <a href="https://www.weiyun.com/office?fid=1c8be5bf-7ee0-451d-ba19-0cd31371d7a2&amp;pid=2d1ebb3d8cd9f0ef71a8cf4cb1f75120&amp;ppid=2d1ebb3d07e603741f4015313cc3cd2b&amp;size=908800&amp;share_key=5lgsGhw" target="_blank" rel="noreferrer">åœ°åŒºå‚ç…§è¡¨</a></p><h2 id="æ‰€ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸å¹³å°" tabindex="-1">æ‰€ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸å¹³å° <a class="header-anchor" href="#æ‰€ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸å¹³å°" aria-label="Permalink to &quot;æ‰€ä½¿ç”¨åˆ°çš„æŠ€æœ¯ä¸å¹³å°&quot;">â€‹</a></h2><ul><li>Node.js (äº‘å‡½æ•°é€‰ç”¨JavaScriptè¯­è¨€)</li><li><a href="https://cloud.tencent.com/" target="_blank" rel="noreferrer">è…¾è®¯äº‘</a> - å…è´¹çš„äº‘å‡½æ•°æœåŠ¡</li><li><a href="https://market.aliyun.com/products/57096001/cmapi023656.html?accounttraceid=235b91fa4fc145eb8c2e539568143ea2arym#sku=yuncode1765600000" target="_blank" rel="noreferrer">é˜¿é‡Œäº‘</a> - å…è´¹çš„å¢¨è¿¹å¤©æ°”æŸ¥è¯¢æœåŠ¡</li></ul><p>ä¸‹é¢å¼€å§‹æ‰‹æŠŠæ‰‹æ•™ç¨‹</p><h2 id="è…¾è®¯äº‘ä¾§" tabindex="-1">è…¾è®¯äº‘ä¾§ <a class="header-anchor" href="#è…¾è®¯äº‘ä¾§" aria-label="Permalink to &quot;è…¾è®¯äº‘ä¾§&quot;">â€‹</a></h2><h3 id="_1-æ³¨å†Œè´¦å·" tabindex="-1">1. \bæ³¨å†Œè´¦å· <a class="header-anchor" href="#_1-æ³¨å†Œè´¦å·" aria-label="Permalink to &quot;1. \bæ³¨å†Œè´¦å·&quot;">â€‹</a></h3><p>\bæ³¨å†Œè…¾è®¯äº‘è´¦å·å¹¶ç™»å½•</p><p><a href="https://cloud.tencent.com/" target="_blank" rel="noreferrer">https://cloud.tencent.com/</a></p><h3 id="_2-è¿›å…¥æ§åˆ¶å°" tabindex="-1">2. è¿›å…¥æ§åˆ¶å° <a class="header-anchor" href="#_2-è¿›å…¥æ§åˆ¶å°" aria-label="Permalink to &quot;2. è¿›å…¥æ§åˆ¶å°&quot;">â€‹</a></h3><p>ç‚¹å‡»å³ä¸Šè§’è¿›å…¥æ§åˆ¶å°</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTA0OTA5MA==606059049090" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_3-äº‘å‡½æ•°-å‡½æ•°æœåŠ¡" tabindex="-1">3. äº‘å‡½æ•°-å‡½æ•°æœåŠ¡ <a class="header-anchor" href="#_3-äº‘å‡½æ•°-å‡½æ•°æœåŠ¡" aria-label="Permalink to &quot;3. äº‘å‡½æ•°-å‡½æ•°æœåŠ¡&quot;">â€‹</a></h3><p>å·¦ä¸Šè§’é€‰æ‹©äº‘äº§å“ï¼Œè¾“å…¥äº‘å‡½æ•°ï¼Œé€‰æ‹© äº‘å‡½æ•°-å‡½æ•°æœåŠ¡</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTEwOTg4NQ==606059109885" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_4-æ–°å»ºäº‘å‡½æ•°" tabindex="-1">4. æ–°å»ºäº‘å‡½æ•° <a class="header-anchor" href="#_4-æ–°å»ºäº‘å‡½æ•°" aria-label="Permalink to &quot;4. æ–°å»ºäº‘å‡½æ•°&quot;">â€‹</a></h3><p>æ–°å»ºä¸€ä¸ªäº‘å‡½æ•°</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTE5MDY3NA==606059190674" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_5-å½•å…¥åŸºæœ¬ä¿¡æ¯" tabindex="-1">5. å½•å…¥åŸºæœ¬ä¿¡æ¯ <a class="header-anchor" href="#_5-å½•å…¥åŸºæœ¬ä¿¡æ¯" aria-label="Permalink to &quot;5. å½•å…¥åŸºæœ¬ä¿¡æ¯&quot;">â€‹</a></h3><ul><li>ç¬¦åˆè§„èŒƒçš„å‡½æ•°åç§°</li><li>ç¯å¢ƒé€‰æ‹©ä¸€ä¸ªNode.jsçš„ç¯å¢ƒ</li><li>é€‰æ‹©ç©ºç™½å‡½æ•°</li><li>ç„¶åä¸‹ä¸€æ­¥ <img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTI2MDczNA==606059260734" alt="å›¾ç‰‡" loading="lazy"></li></ul><h3 id="_6-å®Œæˆåˆ›å»º" tabindex="-1">6. å®Œæˆåˆ›å»º <a class="header-anchor" href="#_6-å®Œæˆåˆ›å»º" aria-label="Permalink to &quot;6. å®Œæˆåˆ›å»º&quot;">â€‹</a></h3><p>ç›´æ¥ç‚¹å‡»å®Œæˆï¼Œä»€ä¹ˆéƒ½ä¸æ›´æ”¹</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTUwNjc4NQ==606059506785" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_7-è§¦å‘å™¨" tabindex="-1">7. è§¦å‘å™¨ <a class="header-anchor" href="#_7-è§¦å‘å™¨" aria-label="Permalink to &quot;7. è§¦å‘å™¨&quot;">â€‹</a></h3><p>ç„¶åæ¥åˆ°è¿™ä¸ªç•Œé¢ï¼Œç‚¹å‡»è§¦å‘ç®¡ç†</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTU5ODY4MQ==606059598681" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_8-åˆ›å»ºè§¦å‘å™¨" tabindex="-1">8. åˆ›å»ºè§¦å‘å™¨ <a class="header-anchor" href="#_8-åˆ›å»ºè§¦å‘å™¨" aria-label="Permalink to &quot;8. åˆ›å»ºè§¦å‘å™¨&quot;">â€‹</a></h3><p>åˆ›å»ºè§¦å‘å™¨ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯</p><ul><li>è§¦å‘æ–¹å¼-APIç½‘å…³è§¦å‘</li><li>è¯·æ±‚æ–¹æ³•-GET</li><li>é‰´æƒæ–¹æ³•-å…é‰´æƒ</li></ul><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTcwMDk3NA==606059700974" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_9-å¤§åŠŸå‘Šæˆ" tabindex="-1">9. å¤§åŠŸå‘Šæˆ <a class="header-anchor" href="#_9-å¤§åŠŸå‘Šæˆ" aria-label="Permalink to &quot;9. å¤§åŠŸå‘Šæˆ&quot;">â€‹</a></h3><p>ä½“éªŒä¸€ä¸‹ç”Ÿæˆçš„è§¦å‘å™¨<a href="https://service-36n2x31h-1256505457.cd.apigw.tencentcs.com/release/demoAPi?param1=%E4%B8%AD%E6%96%87&amp;param2=123" target="_blank" rel="noreferrer">é“¾æ¥</a></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA1OTgxOTU3NQ==606059819575" alt="å›¾ç‰‡" loading="lazy"></p><h3 id="_10-è§‚å¯Ÿæ¥å£" tabindex="-1">10. è§‚å¯Ÿæ¥å£ <a class="header-anchor" href="#_10-è§‚å¯Ÿæ¥å£" aria-label="Permalink to &quot;10. è§‚å¯Ÿæ¥å£&quot;">â€‹</a></h3><p>è§‚å¯Ÿå“åº”ç»“æœä¸æˆ‘ä»¬çš„ä»£ç </p><p><strong>å“åº”ç»“æœ</strong></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MDAyMTk0Mg==606060021942" alt="å›¾ç‰‡" loading="lazy"></p><p><strong>æˆ‘ä»¬çš„äº‘å‡½æ•°ä»£ç </strong></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MDEwMjU0NA==606060102544" alt="å›¾ç‰‡" loading="lazy"></p><p>å…³æ³¨çº¢è‰²æ¡†ä¸­çš„å†…å®¹</p><ul><li>æ‰§è¡Œæ–¹æ³•ï¼šindex.main_handler <ul><li>index å¯¹åº”çš„å°±æ˜¯ <code>index.js</code></li><li>main_handlerå°±æ˜¯å°±æ˜¯index.jsä¸­å¯¹å¤–æš´éœ²çš„ <code>main_handler</code>æ–¹æ³•</li></ul></li></ul><p>å†çœ‹ä»£ç </p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main_handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello World&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;non-exist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>æ ¹æ®ä¸Šä¸Šå›¾è¿”å›çš„ç»“æœå¯çŸ¥å…¶å¯¹åº”çš„æ˜¯<code>event</code>é‡Œé¢çš„å†…å®¹: å³æˆ‘ä»¬å¯ä»¥åœ¨eventä¸­å–åˆ°æˆ‘ä»¬è¯·æ±‚çš„å‚æ•°,header,bodyç­‰ä¿¡æ¯ï¼Œä¾¿äºæˆ‘ä»¬æ‰§è¡Œåç»­é€»è¾‘</p><p>contextçš„å†…å®¹ï¼ˆconsole.logçš„å†…å®¹ï¼‰åœ¨å“ªé‡Œçœ‹?</p><h3 id="_11-æ—¥å¿—æŸ¥è¯¢" tabindex="-1">11. æ—¥å¿—æŸ¥è¯¢ <a class="header-anchor" href="#_11-æ—¥å¿—æŸ¥è¯¢" aria-label="Permalink to &quot;11. æ—¥å¿—æŸ¥è¯¢&quot;">â€‹</a></h3><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MDQ5NDAwOA==606060494008" alt="å›¾ç‰‡" loading="lazy"></p><p>åœ¨æ—¥å¿—æŸ¥è¯¢é¢æ¿å¯ä»¥æŸ¥è¯¢åˆ°æˆ‘ä»¬æ¥å£çš„è°ƒç”¨ä¿¡æ¯ï¼Œå“åº”çŠ¶æ€ä¸logçš„å†…å®¹</p><h3 id="_12-å®‰è£…ä¾èµ–çš„æ¨¡å—" tabindex="-1">12. å®‰è£…ä¾èµ–çš„æ¨¡å— <a class="header-anchor" href="#_12-å®‰è£…ä¾èµ–çš„æ¨¡å—" aria-label="Permalink to &quot;12. å®‰è£…ä¾èµ–çš„æ¨¡å—&quot;">â€‹</a></h3><p>è¿™ä¸ªå’Œæœ¬åœ°å®‰è£…å·®ä¸å¤šï¼Œä¸€ä¸ªæ•²å‘½ä»¤ï¼Œä¸€ä¸ªç‚¹æŒ‰é’®</p><p>æˆ‘ä»¬ä½¿ç”¨æœ¬åœ°ç»ˆç«¯åˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MDcyOTQyMg==606060729422" alt="å›¾ç‰‡" loading="lazy"></p><p>package.json</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;faas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Error: no test specified</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &amp;&amp; exit 1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;license&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ISC&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¦‚å®‰è£…axios,æœ¬åœ°æ‰§è¡Œå®‰è£…å…ˆ</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> axios</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> axios</span></span></code></pre></div><p>æ­¤æ—¶çš„package.json</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;faas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Error: no test specified</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &amp;&amp; exit 1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;license&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ISC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;axios&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^0.21.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨å¹³å°ä¸Šåˆ›å»ºä¸€ä¸ª package.jsonæ–‡ä»¶,å¹¶æŠŠä¸Šè¿°å†…å®¹ç²˜è´´è¿›å»,<code>ctrl/command + S</code> ä¿å­˜ä¿®æ”¹çš„å†…å®¹</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MDk5Mzc5NA==606060993794" alt="å›¾ç‰‡" loading="lazy"></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MTA0MTkzNg==606061041936" alt="å›¾ç‰‡" loading="lazy"></p><p>é€‰æ‹©åœ¨çº¿å®‰è£…ä¾èµ–ï¼Œç„¶åç‚¹å‡»ä¿å­˜</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MTEzNjU5NA==606061136594" alt="å›¾ç‰‡" loading="lazy"></p><p>å®‰è£…å®Œæˆå ä¼šå‡ºç° node_modulesç›®å½•</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MTU3NjI5Ng==606061576296" alt="å›¾ç‰‡" loading="lazy"></p><p>JSäº‘å‡½æ•°åˆ›å»ºç›¸å…³æµç¨‹ï¼Œå·®ä¸éƒ½é™ˆè¿°å®Œæ¯•</p><p>ä¸‹é¢å¼€å§‹æˆ‘ä»¬çš„ä»£ç ç¼–å†™</p><h3 id="å¤©æ°”äº‘å‡½æ•°ç¼–å†™" tabindex="-1">å¤©æ°”äº‘å‡½æ•°ç¼–å†™ <a class="header-anchor" href="#å¤©æ°”äº‘å‡½æ•°ç¼–å†™" aria-label="Permalink to &quot;å¤©æ°”äº‘å‡½æ•°ç¼–å†™&quot;">â€‹</a></h3><p>ä»£ç åŒæ­¥åˆ°çº¿ä¸Šçš„æ–¹å¼</p><ul><li>å¯ä»¥æœ¬åœ°ç¼–è¾‘åä¸Šä¼ æ–‡ä»¶</li><li>ä½¿ç”¨è…¾è®¯äº‘çš„cliå·¥å…·ä¸Šä¼ </li><li>å¤åˆ¶ç²˜è´´</li></ul><p>è¿™é‡Œæ¯”è¾ƒç®€å•æˆ‘ä»¬å°±å¤åˆ¶ç²˜è´´äº†</p><p>å…ˆç®€å•ç¼–å†™ä¸€ä¸‹å¤§ä½“ç»“æ„ï¼Œç„¶åç‚¹å‡»ä¿å­˜ï¼Œå†è®¿é—®åˆšåˆšçš„è§¦å‘å™¨<a href="https://service-36n2x31h-1256505457.cd.apigw.tencentcs.com/release/demoAPi?cityId=666" target="_blank" rel="noreferrer">é“¾æ¥</a>è§‚å¯Ÿè¿”å›çš„ç»“æœ</p><p>index.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNowWeather</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cityId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¾…ç¼–å†™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            cityId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main_handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»“æ„å–å¾—urlä¸­ä¼ é€’çš„å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">queryString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNowWeather</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cityId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>ä¸‹é¢å®ç°<code>getNowWeather</code>çš„é€»è¾‘å°±è¦ç”¨åˆ°é˜¿é‡Œäº‘çš„æœåŠ¡äº†</p><h2 id="é˜¿é‡Œäº‘ä¾§" tabindex="-1">é˜¿é‡Œäº‘ä¾§ <a class="header-anchor" href="#é˜¿é‡Œäº‘ä¾§" aria-label="Permalink to &quot;é˜¿é‡Œäº‘ä¾§&quot;">â€‹</a></h2><p>å…ˆç™½å«–ä¸ªæœåŠ¡</p><p><a href="https://market.aliyun.com/products/57096001/cmapi023656.html?accounttraceid=235b91fa4fc145eb8c2e539568143ea2arym#sku=yuncode1765600000" target="_blank" rel="noreferrer">é˜¿é‡Œäº‘-å…è´¹ç‰ˆæ°”è±¡å¤©æ°”æœåŠ¡ï¼ˆcityidï¼‰-å¢¨è¿¹å¤©æ°”</a></p><p>æ ¹æ®å…¶æ–‡æ¡£ä¸­çš„è¯·æ±‚ç¤ºä¾‹,æˆ‘ä»¬å…ˆæ„å»ºå‡º Nodeç‰ˆæœ¬çš„æ–¹æ³•</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNowWeather</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cityId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> appcode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nowStatusURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;http://freecityid.market.alicloudapi.com/whapi/json/alicityweather/briefcondition&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ç²¾ç®€å®å†µçš„è¯·æ±‚URL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`cityId=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cityId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&amp;token=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è¯·æ±‚å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// header</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Authorization&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`APPCODE \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appcode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/x-www-form-urlencoded; charset=UTF-8&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nowStatusURL, data, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        headers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è´­ä¹°æœåŠ¡åæ ¹æ®<a href="https://market.aliyun.com/products/57096001/cmapi023656.html?accounttraceid=235b91fa4fc145eb8c2e539568143ea2arym#sku=yuncode1765600000" target="_blank" rel="noreferrer">æ–‡æ¡£</a>æ‰¾åˆ°<a href="https://share.weiyun.com/5ebmy2i?spm=5176.730006-56956004-57096001-cmapi023656.content.12.4afb308fDQi0lQ" target="_blank" rel="noreferrer">token</a>ä¸<a href="https://help.aliyun.com/document_detail/157953.html?spm=5176.730006-56956004-57096001-cmapi023656.content.9.4afb308fDQi0lQ" target="_blank" rel="noreferrer">appcode</a>å³å¯</p><p><a href="https://apigateway.console.aliyun.com/?spm=5176.12818093.products-recent.dapigateway.718e16d05FzxRX#/cn-beijing/purchasedApis/list" target="_blank" rel="noreferrer">æ§åˆ¶å°</a>-&gt;APIç½‘å…³-&gt;ååŒ—2ï¼ˆåŒ—äº¬ï¼‰</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2MzU3MTA1OA==606063571058" alt="å›¾ç‰‡" loading="lazy"></p><p>ä¸ºäº†èŠ‚çº¦æŸ¥æ‰¾tokenä¸appcodeçš„æ—¶é—´ï¼Œä¸‹é¢åˆ—ä¸€ä¸‹æ­¥éª¤ï¼ˆåæ§½ï¼Œé˜¿é‡Œäº‘çš„æ–‡æ¡£å¤ªæ‹¦äº†ï¼Œä¸æ–¹ä¾¿ä¿¡æ¯å®šä½ï¼‰</p><h3 id="tokenä¸appcode" tabindex="-1">tokenä¸appcode <a class="header-anchor" href="#tokenä¸appcode" aria-label="Permalink to &quot;tokenä¸appcode&quot;">â€‹</a></h3><p><a href="https://apigateway.console.aliyun.com/?spm=5176.12818093.products-recent.dapigateway.718e16d05FzxRX#/cn-beijing/apps/list?AppName=" target="_blank" rel="noreferrer">APIç½‘å…³</a>é¡µé¢åœ°å€</p><ol><li>token: åº”ç”¨ç®¡ç†-&gt;é€‰æ‹©ä¸€ä¸ªåº”ç”¨-&gt;å·²æˆæƒAPIåˆ—è¡¨-&gt;é€‰æ‹©è‡ªå·±è¦æŸ¥çœ‹çš„API-&gt;ç‚¹å‡»è°ƒè¯•API-&gt;è°ƒè¯•é¢æ¿çš„tokenå‚æ•°å³æ˜¯æ‰€éœ€å‚æ•°</li><li>appcode: åº”ç”¨ç®¡ç†-&gt;é€‰æ‹©ä¸€ä¸ªåº”ç”¨-&gt;AppCodeé¢æ¿</li></ol><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2Mzk4NTYyOQ==606063985629" alt="å›¾ç‰‡" loading="lazy"></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2NDE0NzU2Mg==606064147562" alt="å›¾ç‰‡" loading="lazy"></p><h2 id="æœ€ç»ˆä»£ç " tabindex="-1">æœ€ç»ˆä»£ç  <a class="header-anchor" href="#æœ€ç»ˆä»£ç " aria-label="Permalink to &quot;æœ€ç»ˆä»£ç &quot;">â€‹</a></h2><p><img src="https://img.cdn.sugarat.top/mdImg/MTYwNjA2NDY3MDM4MQ==606064670381" alt="å›¾ç‰‡" loading="lazy"></p><p>index.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;axios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).default</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNowWeather</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cityId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> appcode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nowStatusURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;http://freecityid.market.alicloudapi.com/whapi/json/alicityweather/briefcondition&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ç²¾ç®€å®å†µçš„è¯·æ±‚URL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`cityId=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cityId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&amp;token=\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // è¯·æ±‚å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// header</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Authorization&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`APPCODE \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appcode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/x-www-form-urlencoded; charset=UTF-8&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nowStatusURL, data, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        headers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main_handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">queryString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNowWeather</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cityId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>è§¦å‘å™¨<a href="https://service-36n2x31h-1256505457.cd.apigw.tencentcs.com/release/demoAPi?cityId=4" target="_blank" rel="noreferrer">é“¾æ¥</a></p><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">â€‹</a></h2><p>åˆ°æ­¤ä¸€ä¸ªäº‘å‡½æ•°å°±å¼€å‘å®Œæ¯•äº†</p><p>å¯ä»¥æ„Ÿè§‰åˆ°ï¼Œå¦‚æœç†Ÿæ‚‰åˆ›å»ºæµç¨‹äº†ï¼Œåªéœ€è¦å‡ åˆ†é’Ÿå°±èƒ½åˆ›å»ºä¸€ä¸ªæä¾›æœåŠ¡çš„APIï¼Œæå¤§çš„èŠ‚çº¦äº†æˆæœ¬</p><p>ä¸æ‡‚æœåŠ¡ç«¯éƒ¨ç½²ï¼ŒæœåŠ¡å™¨è¿ç»´ï¼ŒLinuxçš„å¼€å‘è€…å¯ä»¥é€šè¿‡ äº‘å‡½æ•°+äº‘æ•°æ®åº“(å…³ç³»æ•°æ®åº“ï¼Œéå…³ç³»æ•°æ®åº“) å¿«é€Ÿæ­å»ºä¸€ä¸ªåç«¯æœåŠ¡</p><p>æ–‡ä»¶å­˜å‚¨æœåŠ¡å¯ä»¥ä½¿ç”¨OSS</p><p>\bå¼€å‘è€…åªéœ€è¦é€šè¿‡äº‘å‡½æ•°è°ƒç”¨å„æœåŠ¡æä¾›çš„APIå³å¯å®Œæˆä¸€ä¸ªåç«¯æœåŠ¡çš„æ„å»º</p><div class="tip custom-block"><p class="custom-block-title">å‚è€ƒ</p><ul><li><a href="https://cloud.tencent.com/developer/article/1666644" target="_blank" rel="noreferrer">FaaS ç»™å‰ç«¯å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿ</a></li><li><a href="https://juejin.cn/post/6897509349246107661" target="_blank" rel="noreferrer">ä¸‰åˆ†é’Ÿç»™å¥³ç¥¨å†™ä¸ªâ€œå½©è™¹å±â€bot | ğŸ† æŠ€æœ¯ä¸“é¢˜ç¬¬ä¸ƒæœŸå¾æ–‡</a></li></ul></div>`,115),p=[h];function l(e,k,r,d,E,g){return i(),a("div",null,p)}const y=s(t,[["render",l]]);export{c as __pageData,y as default};

import{j as s,b as a,c as i,a7 as n}from"./chunks/framework.B0f4rbfy.js";const E=JSON.parse('{"title":"腾讯云Serverless实践-静态网站托管","description":"","frontmatter":{"title":"腾讯云Serverless实践-静态网站托管","date":"2021-05-19T00:00:00.000Z","tags":["技术笔记","技术教程"],"categories":["技术笔记"]},"headers":[],"relativePath":"technology/learn/tx-serverless-static.md","filePath":"technology/learn/tx-serverless-static.md","lastUpdated":1716864271000}'),t={name:"technology/learn/tx-serverless-static.md"},l=n(`<h1 id="腾讯云serverless实践-静态网站托管" tabindex="-1">腾讯云Serverless实践-静态网站托管 <a class="header-anchor" href="#腾讯云serverless实践-静态网站托管" aria-label="Permalink to &quot;腾讯云Serverless实践-静态网站托管&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>本文旨在帮助不懂运维/网络/服务器知识的<strong>小白</strong>，在<strong>不租用云服务器</strong>实现Web站点的上线部署</p></div><p>超多图预警！！！</p><p>包含使用Github Action实现持续集成的步骤，绑定自定义域名等等</p><p>该手把手Serverless实践系列预计会出几篇包含静态站点，云函数，后端服务等等</p><p>如有表述不清，内容错误等还请评论区斧正</p><h2 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-label="Permalink to &quot;准备工作&quot;">​</a></h2><ul><li><a href="https://cloud.tencent.com/register" target="_blank" rel="noreferrer">注册腾讯云账号</a></li></ul><h2 id="创建云开发环境" tabindex="-1">创建云开发环境 <a class="header-anchor" href="#创建云开发环境" aria-label="Permalink to &quot;创建云开发环境&quot;">​</a></h2><p>进入<a href="https://console.cloud.tencent.com/" target="_blank" rel="noreferrer">控制台面板</a>，通常在首页右上角</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDAwOTUxNg==621414009516" alt="图片" loading="lazy"></p><p>然后在左上角的云产品列表中找到<a href="https://console.cloud.tencent.com/tcb/env/index?rid=4" target="_blank" rel="noreferrer">云开发CloudBase</a></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDA0ODYyNQ==621414048625" alt="图片" loading="lazy"></p><p>然后你能看到如下的界面</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDI1MDQ0Ng==621414250446" alt="图片" loading="lazy"></p><p>点击新建，可以看见有很多模板可供选择，咱们这里选择Vue应用，当然你也可以选择其它模板，我们主要是获得其生成的一个<code>cloudbaserc.json</code>文件，后文会详细介绍这个配置文件</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDQ2MDk2MA==621414460960" alt="图片" loading="lazy"></p><p>填写环境名称，选择按量计费（非常非常便宜），勾上<strong>同意</strong>，能勾上免费就勾上<strong>免费资源</strong></p><p>填写完成后点击下一步</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDcyMTMxMw==621414721313" alt="图片" loading="lazy"></p><p>点击立即开通</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNDkzMTczNA==621414931734" alt="图片" loading="lazy"></p><p>接下来你能在当前页面看到刚刚创建的应用，记住这个环境id 后面会用上</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNTA0ODM5OQ==621415048399" alt="图片" loading="lazy"></p><p>赖心等待几分钟就创建完成了</p><h2 id="线上访问地址" tabindex="-1">线上访问地址 <a class="header-anchor" href="#线上访问地址" aria-label="Permalink to &quot;线上访问地址&quot;">​</a></h2><p>点击创建完成的卡片</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNTI1MDkyMg==621415250922" alt="图片" loading="lazy"></p><p>选择左侧菜单中的静态网站托管</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNTQ4MTgyMA==621415481820" alt="图片" loading="lazy"></p><p>这里能看到模板项目部署在线上的<strong>生产环境代码</strong>与提供的<strong>线上域名</strong></p><p>例如图中的：<a href="http://kerno-photo-0got9tjdb1cb34fe-1256505457.tcloudbaseapp.com/vue/" target="_blank" rel="noreferrer">http://kerno-photo-0got9tjdb1cb34fe-1256505457.tcloudbaseapp.com/vue/</a></p><h2 id="模板的源代码" tabindex="-1">模板的源代码 <a class="header-anchor" href="#模板的源代码" aria-label="Permalink to &quot;模板的源代码&quot;">​</a></h2><p>所有的模板源代码均在<a href="https://github.com/TencentCloudBase/cloudbase-templates" target="_blank" rel="noreferrer">Github：CloudBase Templates</a></p><p>咱们上面的Vue项目模板源码在<a href="https://github.com/TencentCloudBase/cloudbase-templates/tree/master/vue" target="_blank" rel="noreferrer">此处</a></p><p>在项目源码中我们就可以看到<a href="https://github.com/TencentCloudBase/cloudbase-templates/blob/master/vue/cloudbaserc.json" target="_blank" rel="noreferrer">cloudbaserc.json</a>文件</p><h2 id="cloudbaserc-json配置文件示例" tabindex="-1">cloudbaserc.json配置文件示例 <a class="header-anchor" href="#cloudbaserc-json配置文件示例" aria-label="Permalink to &quot;cloudbaserc.json配置文件示例&quot;">​</a></h2><p>配置文件需要自己修改的字段如下：</p><ul><li>envId：环境id，上文有说到获取的位置</li><li>region：环境所在地区，上海（ap-shanghai）,广州（ap-guangzhou）</li><li>framework <ul><li>name:应用名称</li><li>plugins/client/inputs <ul><li>installCommand:安装依赖的指令</li><li>buildCommand:构建项目指令</li><li>outputPath:用于部署的本地静态文件目录</li><li>cloudPath：线上访问的基础路径</li></ul></li></ul></li></ul><p>在咱们项目的根目录下创建这个<code>cloudbaserc.json</code>文件</p><h3 id="最简单项目" tabindex="-1">最简单项目 <a class="header-anchor" href="#最简单项目" aria-label="Permalink to &quot;最简单项目&quot;">​</a></h3><p>目录如下</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudbaserc.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.html</span></span></code></pre></div><p>这里用到的最简单的<code>cloudbaserc.json</code>如下</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;envId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kerno-photo-0got9tjdb1cb34fe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;region&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ap-shanghai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;$schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://framework-1258016615.tcloudbaseapp.com/schema/latest.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;functionRoot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloudfunctions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;framework&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kerno-photo-web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@cloudbase/framework-plugin-website&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;inputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;outputPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;cloudPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@cloudbase/framework-plugin-auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;inputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;configs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;platform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NONLOGIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ENABLE&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="运用了构建工具的项目" tabindex="-1">运用了构建工具的项目 <a class="header-anchor" href="#运用了构建工具的项目" aria-label="Permalink to &quot;运用了构建工具的项目&quot;">​</a></h3><p>推荐的<code>cloudbaserc.json</code>内容如下</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;envId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kerno-photo-0got9tjdb1cb34fe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 环境id</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;region&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ap-shanghai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 环境所在地区</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;$schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://framework-1258016615.tcloudbaseapp.com/schema/latest.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;functionRoot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloudfunctions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;framework&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kerno-photo-web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 应用名称</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;plugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@cloudbase/framework-plugin-website&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;inputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;installCommand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yarn install --prefer-offline --no-audit --progress=false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 安装依赖的指令</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;buildCommand&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm run build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 构建项目指令</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;outputPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用于部署的静态文件目录</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;cloudPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 线上的基础路径</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;envVariables&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;VUE_APP_ENV_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{env.ENV_ID}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@cloudbase/framework-plugin-auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;inputs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;configs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;platform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NONLOGIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ENABLE&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="部署上线" tabindex="-1">部署上线 <a class="header-anchor" href="#部署上线" aria-label="Permalink to &quot;部署上线&quot;">​</a></h2><h3 id="前置环境" tabindex="-1">前置环境 <a class="header-anchor" href="#前置环境" aria-label="Permalink to &quot;前置环境&quot;">​</a></h3><ul><li>Node.js</li></ul><p>确保电脑上有Node.js环境，没有可参考<a href="https://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noreferrer">菜鸟教程：Node.js</a> 安装</p><p>打开你的终端工具查看是否拥有Node环境</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre></div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxNzk1NjM2Nw==621417956367" alt="图片" loading="lazy"></p><h3 id="cloudbase-cli" tabindex="-1">@cloudbase/cli <a class="header-anchor" href="#cloudbase-cli" aria-label="Permalink to &quot;@cloudbase/cli&quot;">​</a></h3><p>安装<a href="https://www.npmjs.com/package/@cloudbase/cli" target="_blank" rel="noreferrer">@cloudbase/cli</a>工具</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @cloudbase/cli</span></span></code></pre></div><p>验证是否安装完成</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre></div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxODE1NzQxMw==621418157413" alt="图片" loading="lazy"></p><p>完整的配置项示例参考<a href="https://framework-1258016615.tcloudbaseapp.com/schema/latest.json" target="_blank" rel="noreferrer">$schema</a></p><h3 id="部署" tabindex="-1">部署 <a class="header-anchor" href="#部署" aria-label="Permalink to &quot;部署&quot;">​</a></h3><p>例项目目录：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudbaserc.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.html</span></span></code></pre></div><p>在项目跟路径依次执行如下指令：</p><p><strong>登录</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span></span></code></pre></div><p><strong>部署</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> framework</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><p>此时静静等待几秒，出现此图说明部署成功</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxODQ3NzM2Ng==621418477366" alt="图片" loading="lazy"></p><p>示例访问地址：<a href="https://kerno-photo-0got9tjdb1cb34fe-1256505457.tcloudbaseapp.com/" target="_blank" rel="noreferrer">https://kerno-photo-0got9tjdb1cb34fe-1256505457.tcloudbaseapp.com/</a></p><p>可以看到我们的Hello World已经上去了</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxODUzNDcyNA==621418534724" alt="图片" loading="lazy"></p><p>到此从0-1的创建应用到部署上线的流程都走完了</p><p>后续将会补充一些额外的内容，需要有一些相关知识的基础</p><h2 id="绑定自定义域名" tabindex="-1">绑定自定义域名 <a class="header-anchor" href="#绑定自定义域名" aria-label="Permalink to &quot;绑定自定义域名&quot;">​</a></h2><h3 id="申请ssl证书" tabindex="-1">申请SSL证书 <a class="header-anchor" href="#申请ssl证书" aria-label="Permalink to &quot;申请SSL证书&quot;">​</a></h3><p>首先为域名<a href="https://console.cloud.tencent.com/ssl" target="_blank" rel="noreferrer">申请SSL证书</a></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzUyMDQwNg==621427520406" alt="图片" loading="lazy"></p><p>选择免费的</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzYyMTYxOQ==621427621619" alt="图片" loading="lazy"></p><p>然后下一步填写必要的信息</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzY5MjI0NA==621427692244" alt="图片" loading="lazy"></p><p>选择DNS验证</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzczMDM5OA==621427730398" alt="图片" loading="lazy"></p><p>按要求添加一条解析规则</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzc3ODgwNg==621427778806" alt="图片" loading="lazy"></p><p>我这里域名是在阿里云上购买的</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzgxNDgzMQ==621427814831" alt="图片" loading="lazy"></p><p>按要求添加解析</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyODAxNzQxNg==621428017416" alt="图片" loading="lazy"></p><p>添加完成后，点击查询域名验证状态即可，申请完成后如下图所示</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyODI0ODg5NQ==621428248895" alt="图片" loading="lazy"></p><h3 id="绑定域名" tabindex="-1">绑定域名 <a class="header-anchor" href="#绑定域名" aria-label="Permalink to &quot;绑定域名&quot;">​</a></h3><p>在静态网站托管tab 基础配置中添加自定义域名</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNzM0MTE5Nw==621427341197" alt="图片" loading="lazy"></p><p>弹窗中输入刚刚申请证书用的域名</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyODQ2MDgxOA==621428460818" alt="图片" loading="lazy"></p><p>根据要求添加CName</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyODUxNDM5NQ==621428514395" alt="图片" loading="lazy"></p><p>上述添加解析步骤一样</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyODYyNzgwMw==621428627803" alt="图片" loading="lazy"></p><p>到此为止自定义域名就搞定了</p><p>咱访问一下试试：<a href="https://photo.kerno.sugarat.top/" target="_blank" rel="noreferrer">photo.kerno.sugarat.top</a></p><h2 id="spa单页应用的额外配置" tabindex="-1">SPA单页应用的额外配置 <a class="header-anchor" href="#spa单页应用的额外配置" aria-label="Permalink to &quot;SPA单页应用的额外配置&quot;">​</a></h2><p>需要添加一条404的重定向配置，配置地方如下</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxODczMjA4OQ==621418732089" alt="图片" loading="lazy"></p><h2 id="接入github-action持续集成" tabindex="-1">接入Github Action持续集成 <a class="header-anchor" href="#接入github-action持续集成" aria-label="Permalink to &quot;接入Github Action持续集成&quot;">​</a></h2><h3 id="创建main-yml" tabindex="-1">创建main.yml <a class="header-anchor" href="#创建main-yml" aria-label="Permalink to &quot;创建main.yml&quot;">​</a></h3><p>根目录下创建<code>.github/workflows/main.yml</code>文件</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.github</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workflows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.yml</span></span></code></pre></div><p>main.yml文件内容如下</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This is a basic workflow to help you get started with Actions</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">prod-CI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Controls when the action will run.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Triggers the workflow on push or pull request events but only for the master branch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># push到main分支上时触发</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pull_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    types</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">assigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 合并pr到main分支上时触发</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Allows you to run this workflow manually from the Actions tab</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  workflow_dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># A workflow run is made up of one or more jobs that can run sequentially or in parallel</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # This workflow contains a single job called &quot;build&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # The type of runner that the job will run on</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Steps represent a sequence of tasks that will be executed as part of the job</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 配置rsa密钥自动登陆</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy to Tencent CloudBase</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TencentCloudBase/cloudbase-action@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          secretId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{secrets.SECRET_ID}}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          secretKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{secrets.SECRET_KEY}}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          envId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{secrets.ENV_ID}}</span></span></code></pre></div><h3 id="仓库中配置secrets" tabindex="-1">仓库中配置Secrets <a class="header-anchor" href="#仓库中配置secrets" aria-label="Permalink to &quot;仓库中配置Secrets&quot;">​</a></h3><p>在仓库的Settings-&gt;Secrets 面板中新建secret</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxOTM0MzkxNg==621419343916" alt="图片" loading="lazy"></p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxOTU0NTUzMQ==621419545531" alt="图片" loading="lazy"></p><p>添加如下三个：</p><ul><li>SECRET_ID:<a href="https://console.cloud.tencent.com/cam/capi" target="_blank" rel="noreferrer">获取地址</a>或参看下图</li><li>SECRET_KEY:<a href="https://console.cloud.tencent.com/cam/capi" target="_blank" rel="noreferrer">获取地址</a>或参看下图</li><li>ENV_ID:应用的envid</li></ul><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxOTcxMjA5NA==621419712094" alt="图片" loading="lazy"></p><p>添加完成后如下图所示</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQxOTkyNDM5MA==621419924390" alt="图片" loading="lazy"></p><h3 id="推送配置文件" tabindex="-1">推送配置文件 <a class="header-anchor" href="#推送配置文件" aria-label="Permalink to &quot;推送配置文件&quot;">​</a></h3><p>接下来只需要将main.yml文件推送到Github上即可</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .github</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chore: 添加main.yml文件&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span></code></pre></div><h3 id="查看action进度" tabindex="-1">查看Action进度 <a class="header-anchor" href="#查看action进度" aria-label="Permalink to &quot;查看Action进度&quot;">​</a></h3><p>此时打开仓库就能看见commit 信息旁边有个点</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyMDI5MDY4NQ==621420290685" alt="图片" loading="lazy"></p><p>在Action面板中也能看见任务的执行状态，点击可查看详细进度</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyMDM1MjExNQ==621420352115" alt="图片" loading="lazy"></p><p>执行完成后如下图所示</p><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyMTQyNjI3MjYzNg==621426272636" alt="图片" loading="lazy"></p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://cloud.tencent.com/document/product/876" target="_blank" rel="noreferrer">文档:云开发 CloudBase</a></li></ul>`,136),p=[l];function h(e,k,r,o,d,g){return a(),i("div",null,p)}const u=s(t,[["render",h]]);export{E as __pageData,u as default};

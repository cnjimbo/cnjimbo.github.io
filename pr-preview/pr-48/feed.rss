<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>ä»£ç æ”¶å®¹æ‰€</title>
        <link>https://www.dmsrs.org</link>
        <description>å¤©é“é…¬å‹¤ï¼Œæ’ä»¥è‡´é ï¼ˆå¤§å‰ç«¯ç›¸å…³æŠ€æœ¯åˆ†äº«ï¼‰</description>
        <lastBuildDate>Mon, 17 Jun 2024 08:34:54 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-cn</language>
        <image>
            <title>ä»£ç æ”¶å®¹æ‰€</title>
            <url>https://img.cdn.sugarat.top/mdImg/MTY3NDk5NTE2NzAzMA==674995167030</url>
            <link>https://www.dmsrs.org</link>
        </image>
        <copyright>Copyright (c) 2018-present, ä»£ç æ”¶å®¹æ‰€</copyright>
        <item>
            <title><![CDATA[javascript]]></title>
            <link>https://www.dmsrs.org/bigWeb/js/index copy.html</link>
            <guid>https://www.dmsrs.org/bigWeb/js/index copy.html</guid>
            <pubDate>Sat, 15 Jun 2024 10:35:01 GMT</pubDate>
            <description><![CDATA[è®°å½•é¢è¯•æ‰€é‡çš„ä¸javascriptç›¸å…³çš„ä»£ç é¢˜
 ç›®å½•
* å®ç°async/await
* é—­åŒ…è°ƒç”¨
* å®ç°æ·±æ‹·è´
* ç¬”è¯•é¢˜-æ•°ç»„å»é‡
* å¦‚ä½•å®ç°å˜é‡aåŒæ—¶ç­‰äºå¤šä¸ªå€¼
* å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„]]></description>
            <content:encoded><![CDATA[<h1 id="javascript" tabindex="-1">javascript <a class="header-anchor" href="#javascript" aria-label="Permalink to &quot;javascript&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•é¢è¯•æ‰€é‡çš„ä¸javascriptç›¸å…³çš„ä»£ç é¢˜</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./async.html">å®ç°async/await</a></li>
<li><a href="./closureUse.html">é—­åŒ…è°ƒç”¨</a></li>
<li><a href="./deepClone.html">å®ç°æ·±æ‹·è´</a></li>
<li><a href="./duplicate.html">ç¬”è¯•é¢˜-æ•°ç»„å»é‡</a></li>
<li><a href="./equalA.html">å¦‚ä½•å®ç°å˜é‡aåŒæ—¶ç­‰äºå¤šä¸ªå€¼</a></li>
<li><a href="./immed-setInterval.html">å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨</a></li>
<li><a href="./inherit.html">ç»§æ‰¿å®ç°</a></li>
<li><a href="./instanceof.html">å®ç°instanceOf</a></li>
<li><a href="./judgeDate.html">åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´æ˜¯å¦åœ¨åŒä¸€å‘¨</a></li>
<li><a href="./mergeRequest.html">åœºæ™¯é¢˜-è¯·æ±‚åˆå¹¶</a></li>
<li><a href="./myApply.html">å®ç°apply</a></li>
<li><a href="./myBind.html">å®ç°bind</a></li>
<li><a href="./myCall.html">å®ç°call</a></li>
<li><a href="./myNew.html">å®ç°ä¸€ä¸‹new</a></li>
<li><a href="./promiseAll.html">å®ç°promiseAll</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç®€ä»‹]]></title>
            <link>https://www.dmsrs.org/bigWeb/js/</link>
            <guid>https://www.dmsrs.org/bigWeb/js/</guid>
            <pubDate>Sat, 15 Jun 2024 10:35:01 GMT</pubDate>
            <description><![CDATA[ç®€ä»‹
æ­¤éƒ¨åˆ†è®°è½½å­¦ä¹ ä¸ä¸šåŠ¡å¼€å‘ä¸­æ‰€é‡é—®é¢˜åŠè§£æ³•å’Œäº†è§£åˆ°çš„ä¸€äº›è¯­è¨€ç‰¹æ€§
 ç›®å½•
* apply,call,bind çš„å¼‚åŒ
* ç®­å¤´å‡½æ•°?
* blobä¸file
* å®šæ—¶å™¨
* é—­åŒ…
* æµ…æ‹·è´ä¸æ·±æ‹·]]></description>
            <content:encoded><![CDATA[<h1 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h1>
<p>æ­¤éƒ¨åˆ†è®°è½½å­¦ä¹ ä¸ä¸šåŠ¡å¼€å‘ä¸­æ‰€é‡é—®é¢˜åŠè§£æ³•å’Œäº†è§£åˆ°çš„ä¸€äº›è¯­è¨€ç‰¹æ€§</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./apply.html">apply,call,bind çš„å¼‚åŒ</a></li>
<li><a href="./arrowfun.html">ç®­å¤´å‡½æ•°?</a></li>
<li><a href="./blob.html">blobä¸file</a></li>
<li><a href="./clock.html">å®šæ—¶å™¨</a></li>
<li><a href="./closure.html">é—­åŒ…</a></li>
<li><a href="./copy.html">æµ…æ‹·è´ä¸æ·±æ‹·è´</a></li>
<li><a href="./currying.html">æŸ¯é‡ŒåŒ–(Currying)</a></li>
<li><a href="./delete.html">delete</a></li>
<li><a href="./ecmathis.html">ECMAScriptè§„èŒƒè§£è¯»this(æœªå®Œå¾…ç»­)</a></li>
<li><a href="./es6+.html">ES6+çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç†</a></li>
<li><a href="./eventloop.html">Event Loop</a></li>
<li><a href="./float.html">æµ®ç‚¹æ•°</a></li>
<li><a href="./garbage.html">åƒåœ¾å›æ”¶æœºåˆ¶</a></li>
<li><a href="./getElement.html">è·å–domå…ƒç´ çš„å‡ ç§æ–¹å¼</a></li>
<li><a href="./likearray.html">ç±»æ•°ç»„ä¸arguments</a></li>
<li><a href="./p0.html">å­¦ä¹ è¿‡ç¨‹ä¸­å­¦åˆ°çš„ä¸€äº›å–å·§ä¹‹æ³•</a></li>
<li><a href="./p1.html">jsè·å–æŸå¹´æŸæœˆçš„å¤©æ•°</a></li>
<li><a href="./p2.html">æ—¥æœŸæ ¼å¼åŒ–</a></li>
<li><a href="./p3.html">æ•°ç»„æ‰å¹³åŒ–çš„å¤šç§æ–¹æ¡ˆ</a></li>
<li><a href="./p4.html">åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ¡ˆ</a></li>
<li><a href="./p5.html">æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</a></li>
<li><a href="./promise.html">Promise</a></li>
<li><a href="./prototype.html">åŸå‹ä¸åŸå‹é“¾</a></li>
<li><a href="./runStack.html">æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</a></li>
<li><a href="./runcontext.html">æ‰§è¡Œä¸Šä¸‹æ–‡</a></li>
<li><a href="./scope.html">ä½œç”¨åŸŸ</a></li>
<li><a href="./scopeLink.html">ä½œç”¨åŸŸé“¾</a></li>
<li><a href="./symbol.html">Symbol çš„ç”¨æ³•</a></li>
<li><a href="./throttling.html">èŠ‚æµä¸é˜²æŠ–</a></li>
<li><a href="./typeConvert.html">JavaScriptä¸­çš„ç±»å‹è½¬æ¢è§„åˆ™</a></li>
<li><a href="./valuePass.html">å‚æ•°æŒ‰å€¼ä¼ é€’</a></li>
<li><a href="./variableObject.html">å˜é‡å¯¹è±¡</a></li>
<li><a href="./asyncawait.html">async åŠ await çš„ç‰¹ç‚¹ï¼Œå®ƒä»¬çš„ä¼˜ç‚¹å’Œç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿawait åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="./changeArr.html">æ•°ç»„å“ªäº›æ–¹æ³•ä¼šæ”¹å˜è‡ªèº«</a></li>
<li><a href="./diff-for-in-of.html">for-ofä¸for-inçš„åŒºåˆ«</a></li>
<li><a href="./equal.html">== å’Œ === æœ‰ä»€ä¹ˆåŒºåˆ«</a></li>
<li><a href="./es6.html">ES6é¢è¯•é—®é¢˜</a></li>
<li><a href="./event.html">äº‹ä»¶çš„è§¦å‘è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼ŸçŸ¥é“ä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†å˜›ï¼Ÿ</a></li>
<li><a href="./getBool.html">å°†ä»»æ„ç±»å‹è½¬ä¸ºBooleançš„æ–¹æ¡ˆ</a></li>
<li><a href="./instanceof.html">instanceofèƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸå› æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="./judgeArr.html">å¦‚ä½•åˆ¤æ–­æ•°ç»„</a></li>
<li><a href="./judgeObj.html">å¦‚ä½•åˆ¤æ–­å˜é‡ç±»å‹æ˜¯å¯¹è±¡</a></li>
<li><a href="./module.html">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—åŒ–ï¼Ÿæœ‰å“ªå‡ ç§æ–¹å¼å¯ä»¥å®ç°æ¨¡å—åŒ–ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</a></li>
<li><a href="./nullobj.html">nullæ˜¯å¯¹è±¡å—</a></li>
<li><a href="./numNotEqual.html">ä¸ºä»€ä¹ˆ0.1+0.2!=0.3</a></li>
<li><a href="./objDiffPrim.html">å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„</a></li>
<li><a href="./objparam.html">å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜</a></li>
<li><a href="./onload-ready.html">window.onloadä¸document.readyæ‰§è¡Œé¡ºåº</a></li>
<li><a href="./primitiveType.html">åŸå§‹ç±»å‹æœ‰å“ªäº›</a></li>
<li><a href="./promise.html">Promise çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿä»€ä¹ˆæ˜¯ Promise é“¾ï¼ŸPromise æ„é€ å‡½æ•°æ‰§è¡Œå’Œ then å‡½æ•°æ‰§è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li>
<li><a href="./this.html">å¦‚ä½•æ­£ç¡®åˆ¤æ–­ thisï¼Ÿç®­å¤´å‡½æ•°çš„ this æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="./typeof.html">typeofèƒ½å¦æ­£å¸¸åˆ¤æ–­ç±»å‹</a></li>
<li><a href="./v8garbage.html">V8 ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</a></li>
<li><a href="./async.html">å®ç°async/await</a></li>
<li><a href="./closureUse.html">é—­åŒ…è°ƒç”¨</a></li>
<li><a href="./deepClone.html">å®ç°æ·±æ‹·è´</a></li>
<li><a href="./duplicate.html">ç¬”è¯•é¢˜-æ•°ç»„å»é‡</a></li>
<li><a href="./equalA.html">å¦‚ä½•å®ç°å˜é‡aåŒæ—¶ç­‰äºå¤šä¸ªå€¼</a></li>
<li><a href="./immed-setInterval.html">å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨</a></li>
<li><a href="./inherit.html">ç»§æ‰¿å®ç°</a></li>
<li><a href="./instanceof.html">å®ç°instanceOf</a></li>
<li><a href="./judgeDate.html">åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´æ˜¯å¦åœ¨åŒä¸€å‘¨</a></li>
<li><a href="./mergeRequest.html">åœºæ™¯é¢˜-è¯·æ±‚åˆå¹¶</a></li>
<li><a href="./myApply.html">å®ç°apply</a></li>
<li><a href="./myBind.html">å®ç°bind</a></li>
<li><a href="./myCall.html">å®ç°call</a></li>
<li><a href="./myNew.html">å®ç°ä¸€ä¸‹new</a></li>
<li><a href="./promiseAll.html">å®ç°promiseAll</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç²¾å‡†çˆ†å¤´]]></title>
            <link>https://www.dmsrs.org/stocks/PrecisionHeadshot/</link>
            <guid>https://www.dmsrs.org/stocks/PrecisionHeadshot/</guid>
            <pubDate>Sat, 15 Jun 2024 10:35:01 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="ç²¾å‡†çˆ†å¤´" tabindex="-1">ç²¾å‡†çˆ†å¤´ <a class="header-anchor" href="#ç²¾å‡†çˆ†å¤´" aria-label="Permalink to &quot;ç²¾å‡†çˆ†å¤´&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æƒ…ç»ªæ ¸å¿ƒ]]></title>
            <link>https://www.dmsrs.org/stocks/SentimentCore/</link>
            <guid>https://www.dmsrs.org/stocks/SentimentCore/</guid>
            <pubDate>Sat, 15 Jun 2024 10:35:01 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="æƒ…ç»ªæ ¸å¿ƒ" tabindex="-1">æƒ…ç»ªæ ¸å¿ƒ <a class="header-anchor" href="#æƒ…ç»ªæ ¸å¿ƒ" aria-label="Permalink to &quot;æƒ…ç»ªæ ¸å¿ƒ&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å®ç°è‡ªåŠ¨ä¸º VitePress ç½‘ç«™æ·»åŠ  RSS è®¢é˜…çš„æ’ä»¶]]></title>
            <link>https://www.dmsrs.org/technology/learn/vitepress-plugin-rss.html</link>
            <guid>https://www.dmsrs.org/technology/learn/vitepress-plugin-rss.html</guid>
            <pubDate>Sat, 15 Jun 2024 10:35:01 GMT</pubDate>
            <description><![CDATA[ä½¿ç”¨ VitePress ä½œä¸ºä¸ªäººåšå®¢çš„ç«™ç‚¹è¶Šæ¥è¶Šå¤šï¼ŒRSSæ”¯æŒä¹Ÿæ˜¯åšå®¢ä¸Šçš„ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œæ–¹ä¾¿è¯»è€…è®¢é˜…ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡Vite æ’ä»¶ä¸º VitePress ç«™ç‚¹ä¸€é”®æ·»åŠ RSSæ”¯æŒ]]></description>
            <content:encoded><![CDATA[<h1 id="å®ç°è‡ªåŠ¨ä¸º-vitepress-ç½‘ç«™æ·»åŠ -rss-è®¢é˜…çš„æ’ä»¶" tabindex="-1">å®ç°è‡ªåŠ¨ä¸º VitePress ç½‘ç«™æ·»åŠ  RSS è®¢é˜…çš„æ’ä»¶ <a class="header-anchor" href="#å®ç°è‡ªåŠ¨ä¸º-vitepress-ç½‘ç«™æ·»åŠ -rss-è®¢é˜…çš„æ’ä»¶" aria-label="Permalink to &quot;å®ç°è‡ªåŠ¨ä¸º VitePress ç½‘ç«™æ·»åŠ  RSS è®¢é˜…çš„æ’ä»¶&quot;">&ZeroWidthSpace;</a></h1>
<p>çœæµï¼šä½¿ç”¨ <a href="https://www.npmjs.com/package/vitepress-plugin-rss" target="_blank" rel="noreferrer">vitepress-plugin-rss</a> è¿™ä¸ªæ’ä»¶</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨çœ‹è®¸å¤šä¸ªäººåšå®¢ç«™ç‚¹çš„æ—¶å€™ï¼Œå³ä¸Šè§’æ€»ä¼šæœ‰ä¸ªRSSè®¢é˜…çš„æ ‡å¿—</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyNTQwOTU1Mw==692625409553" alt="" loading="lazy"></p>
<p>æ°å¥½<a href="https://www.dmsrs.org/" target="_blank" rel="noreferrer">æˆ‘çš„åšå®¢</a>ä¹Ÿæ˜¯åŸºäº <a href="https://vitepress.dev/" target="_blank" rel="noreferrer">VitePress</a> æ­å»ºçš„ï¼Œå°±æƒ³çœ‹çœ‹èƒ½ä¸èƒ½ä¹Ÿå®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>åŠ¨æ‰‹å‰å…ˆæœäº†ä¸€ä¸‹ï¼Œå…ˆæ˜¯çœ‹åˆ°äº†<a href="https://github.com/clark-cui/vitepress-blog-zaun" target="_blank" rel="noreferrer">vitepress-blog-zaun</a>ä¸Šæœ‰è¿™ä¸ªRSSçš„å®ç°æ”¯æŒï¼Œå†æœäº†ä¸€ä¸‹å‘ç°Vueçš„å®˜æ–¹åšå®¢ <a href="https://github.com/vuejs/blog/tree/main" target="_blank" rel="noreferrer">vuejs/blog</a> ä¹Ÿæ˜¯ç”¨çš„è¿™æ ·çš„å®ç°</p>
<p>å¤§æ¦‚å°±æ˜¯è‡ªå®šä¹‰ VitePress çš„ <a href="https://vitepress.dev/reference/site-config#buildend" target="_blank" rel="noreferrer">buildEnd</a> é’©å­ï¼Œåœ¨é‡Œé¢å®ç°é€»è¾‘è·å– <code>md</code> æ–‡ä»¶åˆ—è¡¨ï¼Œç„¶åé€šè¿‡ <a href="https://www.npmjs.com/package/feed" target="_blank" rel="noreferrer">feed</a> ç”Ÿæˆ RSS æ–‡ä»¶ï¼Œ<a href="https://github.com/vuejs/blog/blob/main/.vitepress/genFeed.ts" target="_blank" rel="noreferrer">æ•´ä¸ªé€»è¾‘å°± 50+ è¡Œä»£ç </a></p>
<p>ç”±äºæˆ‘çš„åšå®¢è¿˜åˆ†ç¦»äº†ç‹¬ç«‹çš„ä¸»é¢˜åŒ… <a href="https://theme.sugarat.top/" target="_blank" rel="noreferrer">@sugarat/theme</a>ï¼Œæˆ‘æƒ³æŠŠè¿™ä¸ªåŠŸèƒ½åŠ åˆ°æˆ‘çš„ä¸»é¢˜åŒ…é‡Œï¼Œè¿™æ ·ä½¿ç”¨è¿™ä¸ªä¸»é¢˜çš„å°±å¯ä»¥ç®€å•çš„é…ç½®ä¸€ä¸‹å°±èƒ½ä½¿ç”¨äº†ï¼Œå½“ç„¶ä¹Ÿä¸ºäº†æ–¹ä¾¿å¹¿å¤§ VitePress ç”¨æˆ·æ›´åŠ ç®€ä¾¿çš„ä½¿ç”¨ï¼Œæˆ‘å°†è¿™æ®µé€»è¾‘å•ç‹¬åˆ†ç¦»å°è£…åˆ°äº† <a href="https://www.npmjs.com/package/vitepress-plugin-rss" target="_blank" rel="noreferrer">vitepress-plugin-rss</a> è¿™ä¸ªæ’ä»¶é‡Œã€‚</p>
<p><strong>æ¥ä¸‹æ¥æˆ‘å°†ä¼šå…ˆä»‹ç»ä¸€ä¸‹å¦‚ä½•é£Ÿç”¨è¿™ä¸ªæ’ä»¶ï¼Œå†ä»‹ç»å®ƒçš„æ ¸å¿ƒå®ç°åŸç†</strong></p>
<h2 id="æ’ä»¶ä½¿ç”¨" tabindex="-1">æ’ä»¶ä½¿ç”¨ <a class="header-anchor" href="#æ’ä»¶ä½¿ç”¨" aria-label="Permalink to &quot;æ’ä»¶ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šè¿‡ <code>pnpm/npm/yarn</code> å®‰è£…æ’ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vitepress-plugin-rss</span></span></code></pre>
</div><p>åœ¨ <code>.vitepress/config.ts</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ä½¿ç”¨</p>
<p>ä¸‹é¢æ˜¯æœ€åŸºç¡€çš„ä½¿ç”¨é…ç½®</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { RSSOptions, RssPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vitepress-plugin-rss'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> baseUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'https://www.dmsrs.org'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RSS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RSSOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä»£ç æ”¶å®¹æ‰€'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  baseUrl,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  copyright: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Copyright (c) 2018-present, ä»£ç æ”¶å®¹æ‰€'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  vite: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // â†“â†“â†“â†“â†“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">RssPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // â†‘â†‘â†‘â†‘â†‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ç„¶åè¿è¡Œ build å‘½ä»¤ï¼Œä½ å¯ä»¥çœ‹åˆ°åœ¨<code>rendering pages...</code>åæ‰“å°äº†ç”Ÿæˆ <code>feed.rss</code> æ—¥å¿—...</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjQ1NTAzMzcwMg==692455033702" alt="" loading="lazy"></p>
<p>åŒæ—¶ä¼šåœ¨å¯¼èˆªæ çš„ socialLinks ä¸­æ·»åŠ  rss å›¾æ ‡é“¾æ¥</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjQ1NTQ4MDYxMg==692455480612" alt="" loading="lazy"></p>
<p>ä½¿ç”¨æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Œåªéœ€è¦ 10 è¡Œä»£ç ã€‚</p>
<p>å¦‚æœä½ å¯¹æ’ä»¶çš„å®ç°åŸç†æ„Ÿå…´è¶£ï¼Œè¯·æ¥ç€å¾€ä¸‹çœ‹ ğŸ‰ ğŸ‰ ğŸ‰ã€‚</p>
<h2 id="æ ¸å¿ƒå®ç°åŸç†è§£æ" tabindex="-1">æ ¸å¿ƒå®ç°åŸç†è§£æ <a class="header-anchor" href="#æ ¸å¿ƒå®ç°åŸç†è§£æ" aria-label="Permalink to &quot;æ ¸å¿ƒå®ç°åŸç†è§£æ&quot;">&ZeroWidthSpace;</a></h2>
<p>VitePress çš„æ‹“å±•åœ¨å®˜æ–¹æ–‡æ¡£ <a href="https://vitepress.dev/guide/what-is-vitepress#use-cases" target="_blank" rel="noreferrer">Use Cases</a> éƒ¨åˆ†æœ‰æåˆ°</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyNzE4MDA4MA==692627180080" alt="" loading="lazy"></p>
<p>å…¶æ˜¯åŸºäº Vite çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Vite çš„æ’ä»¶æœºåˆ¶æ¥å®ç°ä¸»é¢˜å†…å®¹çš„æ‹“å±•ã€‚</p>
<h3 id="buildend-ä¿®æ”¹" tabindex="-1">buildEnd ä¿®æ”¹ <a class="header-anchor" href="#buildend-ä¿®æ”¹" aria-label="Permalink to &quot;buildEnd ä¿®æ”¹&quot;">&ZeroWidthSpace;</a></h3>
<p>ä»å®˜æ–¹çš„demoç§å¯ä»¥çœ‹åˆ°ï¼ŒRSS çš„ç”Ÿæˆé€»è¾‘æ˜¯æ”¾åœ¨ buildEnd ä¸­çš„ï¼Œå› æ­¤å’±ä»¬æ’ä»¶ä¹Ÿéœ€è¦å®ç°é—´æ¥ä¿®æ”¹ buildEnd æ–¹æ³•</p>
<p>è¿™ä¸ªéå¸¸çš„ç®€å•ï¼Œåˆ©ç”¨ Vite çš„æ’ä»¶æä¾›çš„ <a href="https://vitejs.dev/guide/api-plugin.html#configresolved" target="_blank" rel="noreferrer">configResolved</a> é’©å­å°±è¡Œ</p>
<p>ä¸‹é¢æ˜¯ç®€å•çš„demo</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { SiteConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vitepress'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> resolveConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> configResolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é¿å…å¤šæ¬¡æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (resolveConfig) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  resolveConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> VPConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SiteConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config.vitepress</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">VPConfig) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> selfBuildEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> VPConfig.buildEnd</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è‡ªå®šä¹‰ buildEnd æ–¹æ³•ï¼Œæ·»åŠ  rss ç”Ÿæˆæ”¯æŒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  VPConfig.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">buildEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">siteConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è°ƒç”¨è‡ªå·±çš„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> selfBuildEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">?.(siteConfig)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'buildEnd'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ç”Ÿæˆ rss æ–‡ä»¶'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é€šè¿‡<code>config.vitepress</code>å³å¯æ‹¿åˆ°vitepressçš„é…ç½®ï¼Œç„¶åé‡æ–°å®šä¹‰ <code>buildEnd</code> æ–¹æ³•å³å¯</p>
<p>è¿™é‡Œå¯ä»¥ç›´æ¥å¿«é€Ÿçš„éªŒè¯ä¸€ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyODA0OTEzMA==692628049130" alt="" loading="lazy"></p>
<p>è¿è¡Œåå¯ä»¥çœ‹åˆ°æ‰“å°äº† <code>buildEnd ç”Ÿæˆ rss æ–‡ä»¶</code>ï¼Œè¯´æ˜æˆ‘ä»¬çš„æ’ä»¶çš„ä¿®æ”¹å·²ç»ç”Ÿæ•ˆäº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyODE0MzUyNw==692628143527" alt="" loading="lazy"></p>
<h3 id="icon-æ·»åŠ " tabindex="-1">icon æ·»åŠ  <a class="header-anchor" href="#icon-æ·»åŠ " aria-label="Permalink to &quot;icon æ·»åŠ &quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªä¹Ÿéå¸¸çš„ç®€å•ï¼ŒVitePress åœ¨å®˜æ–¹æ–‡æ¡£é‡Œæœ‰ä»‹ç» <a href="https://vitepress.dev/reference/default-theme-config#sociallinks" target="_blank" rel="noreferrer">socialLinks</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyODMxNTQyMA==692628315420" alt="" loading="lazy"></p>
<p>æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®ä¿®æ”¹ä¸­æ·»åŠ ä¸€ä¸ª <code>socialLinks</code> çš„é…ç½®å³å¯</p>
<p>æ¥ç€ä¸Šè¿°çš„demoï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">VPConfig.site.themeConfig.socialLinks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    icon: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      svg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'svg icon'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    link: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'rss url'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">VPConfig.site.themeConfig.socialLinks</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
</div><p>svgçš„å›¾æ ‡å¯ä»¥é€šè¿‡ <a href="https://www.xicons.org/#/zh-CN" target="_blank" rel="noreferrer">xicons</a> è¿™ä¸ªç½‘ç«™æŸ¥æ‰¾</p>
<p>æ¯”å¦‚æˆ‘è¿™é‡Œæ‰¾äº†ä¸€ä¸ª sun çš„å›¾æ ‡é…ä¸Š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyODc2MjI2MQ==692628762261" alt="" loading="lazy"></p>
<p>å¯åŠ¨åšå®¢åå°±èƒ½çœ‹è§å³ä¸Šè§’è¿™ä¸ªå°å¤ªé˜³äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MjYyODY2MDQ3OQ==692628660479" alt="" loading="lazy"></p>
<h3 id="mdæ–‡ä»¶è·å–ä¸è§£æ" tabindex="-1">MDæ–‡ä»¶è·å–ä¸è§£æ <a class="header-anchor" href="#mdæ–‡ä»¶è·å–ä¸è§£æ" aria-label="Permalink to &quot;MDæ–‡ä»¶è·å–ä¸è§£æ&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªæ˜¯æœ€æ ¸å¿ƒçš„é€»è¾‘äº†ï¼Œâ‘  éœ€è¦è·å–æ‰€æœ‰çš„ <code>md</code> æ–‡ä»¶ï¼Œâ‘¡ è§£æé‡Œé¢çš„ frontmatter â‘¢ æ¸²æŸ“HTML</p>
<p>è¿™ä¸ªåœ¨ <code>vuejs/blog</code> ä¸­å¯ä»¥çœ‹åˆ°ä½¿ç”¨çš„æ˜¯ VitePress å†…ç½®çš„ <a href="https://vitepress.dev/guide/data-loading#createcontentloader" target="_blank" rel="noreferrer">createContentLoader</a> æ–¹æ³•ï¼ˆé‡Œé¢åŒ…å«äº†ä¸Šè¿°3éƒ¨åˆ†é€»è¾‘ï¼‰</p>
<p>è¿™é‡ŒæŠŠå…¶æ ¸å¿ƒå®ç°æ‹†å‡ºæ¥ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£å’Œæ›´å¥½çš„è‡ªå®šä¹‰ï¼ˆç¬”è€…åœ¨æ’ä»¶é‡Œä¹Ÿæ²¡ç›´æ¥ä½¿ç”¨ <code>createContentLoader</code> è¿™ä¸ªæ–¹æ³•ï¼‰</p>
<p><strong>â‘  é€šè¿‡ fast-glob è·å–æ‰€æœ‰çš„ md æ–‡ä»¶</strong></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> glob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fast-glob'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> glob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">srcDir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/**/*.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, { ignore: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] })</span></span></code></pre>
</div><p>å…¶ä¸­ <code>srcDir</code> å³æ–‡ç« æ‰€åœ¨çš„ç›®å½•ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–åˆ°ç›¸å¯¹è·¯å¾„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// config å³ SiteConfig</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> srcDir</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config.srcDir.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config.root, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.argv.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)?.[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '.'</span></span></code></pre>
</div><p><strong>â‘¡ é€šè¿‡ gray-matter è§£æ frontmatter</strong></p>
<p>è¿™é‡Œ<code>frontmatter</code>å°±æ˜¯æ–‡ç« å¼€å¤´é‡Œä¸¤ä¸ª<code>---</code>ä¹‹é—´çš„å†…å®¹</p>
<p>ä¾‹å¦‚</p>
<div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ç¤ºä¾‹æ ‡é¢˜</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">æ–‡ç« ä»‹ç»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">---</span></span></code></pre>
</div><p>åˆ©ç”¨ gray-matter è§£æ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> matter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'gray-matter'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fileContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">frontmatter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">excerpt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> matter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileContent, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    excerpt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶ä¸­ <code>excerpt</code> å³ä¸ºæ–‡ç« çš„æ‘˜è¦ä¿¡æ¯(description)</p>
<p><strong>â‘¢ MD æ¸²æŸ“ä¸º HTML</strong></p>
<p>è¿™ä¸ªä½¿ç”¨ VitePress æä¾›çš„ <code>createMarkdownRenderer</code> å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç”±äºæ’ä»¶é‡Œæœ€åæ„å»ºæˆ CJS/ESM ä¸¤ç§æ ¼å¼ï¼ŒVitePress æœ€æ–°çš„ç‰ˆæœ¬æ”¯æŒ ESMï¼Œå› æ­¤éœ€è¦åŠ¨æ€å¼•å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">createMarkdownRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vitepress'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> mdRender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createMarkdownRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  config.srcDir,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  config.markdown,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  config.site.base,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  config.logger</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fileContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç”Ÿæˆhtml</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mdRender.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileContent)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="rssæ–‡ä»¶ç”Ÿæˆ" tabindex="-1">RSSæ–‡ä»¶ç”Ÿæˆ <a class="header-anchor" href="#rssæ–‡ä»¶ç”Ÿæˆ" aria-label="Permalink to &quot;RSSæ–‡ä»¶ç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡ä¸Šé¢çš„ markdown æ–‡ä»¶çš„è§£æï¼Œæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†æ‰€æœ‰çš„æ–‡ç« ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡ <a href="https://www.npmjs.com/package/feed" target="_blank" rel="noreferrer">feed</a> è¿™ä¸ªåº“ç”Ÿæˆ RSS æ–‡ä»¶äº†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Feed } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'feed'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> feedOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> feed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Feed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(feedOptions)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é€šè¿‡å‰é¢è§£æçš„ä¿¡æ¯ï¼Œç”Ÿæˆ feed item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  feed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    title,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    id: link,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    link,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    description,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    content: html,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    author: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        name: author,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">authorInfo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    image: frontmatter?.cover,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    date: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(date)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RSSFilename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'feed.rss'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RSSFilepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config.outDir, RSSFilename)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç”Ÿæˆ rss æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(RSSFilepath, feed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">rss2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ’ä»¶çš„å®Œæ•´æºç è§ <a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/vitepress-plugin-rss" target="_blank" rel="noreferrer">GitHub</a>ï¼Œæ¬¢è¿å¤§å®¶è¯•ç”¨å’Œåé¦ˆ</p>
<h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://www.npmjs.com/package/feed" target="_blank" rel="noreferrer">jpmonette/feed</a></li>
<li><a href="https://github.com/vuejs/blog/tree/main" target="_blank" rel="noreferrer">vuejs/blog</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY5MjYyNTQwOTU1Mw==692625409553" length="0" type="image//mdImg/MTY5MjYyNTQwOTU1Mw==692625409553"/>
        </item>
        <item>
            <title><![CDATA[è§†é‡ä¿®ç‚¼ - æŠ€æœ¯å‘¨åˆŠ]]></title>
            <link>https://www.dmsrs.org/weekly/</link>
            <guid>https://www.dmsrs.org/weekly/</guid>
            <pubDate>Thu, 30 May 2024 17:06:44 GMT</pubDate>
            <description><![CDATA[
# è§†é‡ä¿®ç‚¼ - æŠ€æœ¯å‘¨åˆŠ

æ—¨åœ¨å¸®åŠ©è¯»è€…æ‹“å±•æŠ€æœ¯è§†é‡ï¼Œæ¯å¤©éƒ½ä¼šäº§ç”Ÿæˆåƒä¸Šä¸‡çš„æ–°çš„å†…å®¹ï¼Œå‘¨åˆŠæ¯å‘¨ä¼šç²¾é€‰å‡ºä¸€äº› `ä¼˜è´¨&æœ‰è¶£` çš„å†…å®¹åšæ¨é€ï¼ˆå¤§å‰ç«¯ä¸ºä¸»ï¼‰

åŒ…å«ä½†ä¸é™äº `ä¼˜è´¨æ–‡ç« `ï¼Œ`å¼€æºåº“`ï¼Œ`å·¥å…·ç½‘ç«™`ï¼Œ`æœ‰æ„æ€çš„çŸ¥è¯†`

æ›´æ–°æ—¶é—´ï¼šå‘¨æœ«å‘å¸ƒï¼Œ[RSSè®¢é˜…](https://www.dmsrs.org/weekly.rss)

**ğŸ’ğŸ’ å¼ºçƒˆæ¨èå¤§å®¶å…³æ³¨ä¸‹é¢çš„ æ¸ é“æ¥æº ğŸ’ğŸ’**

[[toc]]


## æ¸ é“æ¥æº
ç¬”è€…æ¯å‘¨ä¼šä»å„å¤§`æŠ€æœ¯å¹³å°`ï¼Œ`å…¶ä½™å‘¨åˆŠ`ï¼Œ`ä¼˜è´¨å…¬ä¼—å·`ä¸­ç²¾é€‰ä¸€éƒ¨åˆ†å†…å®¹

ä¹Ÿæ¨èå¤§å®¶åŒæ—¶å…³æ³¨ä»¥ä¸‹æ¸ é“ï¼Œä¹Ÿæ¬¢è¿è¯»è€…åœ¨è¯„è®ºåŒºè¡¥å……æ¨èçš„æ¸ é“

### æŠ€æœ¯èµ„è®¯
* [é˜®ä¸€å³°: ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠ](https://www.ruanyifeng.com/blog/archives.html) - è®°å½•æ¯å‘¨å€¼å¾—åˆ†äº«çš„ç§‘æŠ€å†…å®¹ï¼Œå‘¨äº”å‘å¸ƒ
* [äº‘è°¦ï¼šMDH å‰ç«¯å‘¨åˆŠ](https://sorrycc.com/mdh/) - å‰ç«¯èµ„è®¯å’Œåˆ†äº«
  * [ï¼ˆæ—§ï¼‰äº‘è°¦ï¼šMDH å‰ç«¯å‘¨åˆŠ](https://mdhweekly.com/) - å‰ç«¯èµ„è®¯å’Œåˆ†äº«
* [ç«¥æ¬§å·´ï¼šå‰ç«¯é£Ÿå ‚](https://github.com/Geekhyt/weekly) - ä½ çš„å‰ç«¯é£Ÿå ‚ï¼Œåƒå¥½æ¯ä¸€é¡¿é¥­
* [å€¼å¾—ä¸€è¯»æŠ€æœ¯åšå®¢](https://daily-blog.chlinlearn.top/) - æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œæ¯å¤©åˆ†äº«æœ‰æ–™çš„æŠ€æœ¯æ–‡ç« ï¼
* [å‰ç«¯æŠ€æœ¯æ–‡ç« ](https://fed.chanceyu.com/) - æ ¹æ® RSS è®¢é˜…æºæŠ“å–æœ€æ–°å‰ç«¯æŠ€æœ¯æ–‡ç« 
* [frontendfoc](https://frontendfoc.us/issues) - ğŸš€ Frontend **Focus**
* [JavaScript Weekly](https://javascriptweekly.com/issues) - A newsletter of JavaScript articles, news and cool projects
* [nodejs Weekly](https://nodeweekly.com/issues) - A free, onceâ€“weekly e-mail round-up of Node.js news and articles.
* [ShowMeAI](https://juejin.cn/user/554605767047053/posts) - ä¸ºAIç¡¬æ ¸èµ„æ–™åº“(cool)è€Œç”Ÿ
* [FRE123 æŠ€æœ¯å‘¨åˆŠç²¾é€‰](https://www.fre123.com/weekly) - å‰åç«¯æŠ€æœ¯å‘¨åˆŠç²¾é€‰æ¨èä¿¡æ¯æµ

:::details å·²åœæ›´
* [çŸ¥è¯†æ˜Ÿçƒï¼šå’²å¥ˆçš„å¹³è¡Œæ—¶ç©º](https://wx.zsxq.com/dweb2/index/group/15552285284822) - å‰ç«¯å‰æ²¿æŠ€æœ¯ã€èµ„è®¯ã€æ–¹æ³•è®ºåˆ†äº«
* [çœæµ](https://shengliu.tech/) - æœ‰å…³è¡Œä¸šğŸ“±ã€ä»£ç ğŸ‘¨â€ğŸ’»ã€ç§‘ç ”ğŸ”¬çš„æœ‰è¶£å†…å®¹ï¼Œæ¯ä¸ªå·¥ä½œæ—¥æ›´æ–°
* [rottenpenï¼šFE News](https://rottenpen.zhubai.love/) - åˆ†äº«å‰ç«¯ï¼Œç”Ÿæ´»
:::

### æŠ€æœ¯ç¤¾åŒº
* [æ˜é‡‘](https://juejin.cn/)
* [å¼€æºä¸­å›½](https://www.oschina.net/)
* [V2EX](https://www.v2ex.com/)
* [codenews](https://codenews.cc/)

### ä¼˜è´¨å…¬ä¼—å·
* ELabå›¢é˜Ÿ
* å¥‡èˆç²¾é€‰
* å¤§æ·˜å®æŠ€æœ¯
* å¤§æ·˜å®å‰ç«¯æŠ€æœ¯
* æ”¯ä»˜å®ä½“éªŒç§‘æŠ€
* å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿâ€‹


<!-- TODOï¼šè‡ªåŠ¨ç”Ÿæˆå¯ç¿»é¡µç›®å½• -->
## 2024
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬85æœŸ](./2024-05-26.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬84æœŸ](./2024-05-19.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬83æœŸ](./2024-05-12.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬82æœŸ](./2024-04-29.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬81æœŸ](./2024-04-21.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬80æœŸ](./2024-04-14.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬79æœŸ](./2024-03-31.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬78æœŸ](./2024-03-24.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬77æœŸ](./2024-03-17.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬76æœŸ](./2024-03-10.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬75æœŸ](./2024-03-03.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬74æœŸ](./2024-02-25.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬73æœŸ](./2024-02-10.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬72æœŸ](./2024-02-03.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬71æœŸ](./2024-01-28.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬70æœŸ](./2024-01-21.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬69æœŸ](./2024-01-14.md)
* [æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬68æœŸ](./2024-01-06.md)

]]></description>
            <content:encoded><![CDATA[<h1 id="è§†é‡ä¿®ç‚¼-æŠ€æœ¯å‘¨åˆŠ" tabindex="-1">è§†é‡ä¿®ç‚¼ - æŠ€æœ¯å‘¨åˆŠ <a class="header-anchor" href="#è§†é‡ä¿®ç‚¼-æŠ€æœ¯å‘¨åˆŠ" aria-label="Permalink to &quot;è§†é‡ä¿®ç‚¼ - æŠ€æœ¯å‘¨åˆŠ&quot;">&ZeroWidthSpace;</a></h1>
<p>æ—¨åœ¨å¸®åŠ©è¯»è€…æ‹“å±•æŠ€æœ¯è§†é‡ï¼Œæ¯å¤©éƒ½ä¼šäº§ç”Ÿæˆåƒä¸Šä¸‡çš„æ–°çš„å†…å®¹ï¼Œå‘¨åˆŠæ¯å‘¨ä¼šç²¾é€‰å‡ºä¸€äº› <code>ä¼˜è´¨&amp;æœ‰è¶£</code> çš„å†…å®¹åšæ¨é€ï¼ˆå¤§å‰ç«¯ä¸ºä¸»ï¼‰</p>
<p>åŒ…å«ä½†ä¸é™äº <code>ä¼˜è´¨æ–‡ç« </code>ï¼Œ<code>å¼€æºåº“</code>ï¼Œ<code>å·¥å…·ç½‘ç«™</code>ï¼Œ<code>æœ‰æ„æ€çš„çŸ¥è¯†</code></p>
<p>æ›´æ–°æ—¶é—´ï¼šå‘¨æœ«å‘å¸ƒï¼Œ<a href="https://www.dmsrs.org/weekly.rss" target="_blank" rel="noreferrer">RSSè®¢é˜…</a></p>
<p><strong>ğŸ’ğŸ’ å¼ºçƒˆæ¨èå¤§å®¶å…³æ³¨ä¸‹é¢çš„ æ¸ é“æ¥æº ğŸ’ğŸ’</strong></p>
<nav class="table-of-contents"><ul><li><a href="#æ¸ é“æ¥æº">æ¸ é“æ¥æº</a><ul><li><a href="#æŠ€æœ¯èµ„è®¯">æŠ€æœ¯èµ„è®¯</a></li><li><a href="#æŠ€æœ¯ç¤¾åŒº">æŠ€æœ¯ç¤¾åŒº</a></li><li><a href="#ä¼˜è´¨å…¬ä¼—å·">ä¼˜è´¨å…¬ä¼—å·</a></li></ul></li><li><a href="#_2024">2024</a></li></ul></nav>
<h2 id="æ¸ é“æ¥æº" tabindex="-1">æ¸ é“æ¥æº <a class="header-anchor" href="#æ¸ é“æ¥æº" aria-label="Permalink to &quot;æ¸ é“æ¥æº&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…æ¯å‘¨ä¼šä»å„å¤§<code>æŠ€æœ¯å¹³å°</code>ï¼Œ<code>å…¶ä½™å‘¨åˆŠ</code>ï¼Œ<code>ä¼˜è´¨å…¬ä¼—å·</code>ä¸­ç²¾é€‰ä¸€éƒ¨åˆ†å†…å®¹</p>
<p>ä¹Ÿæ¨èå¤§å®¶åŒæ—¶å…³æ³¨ä»¥ä¸‹æ¸ é“ï¼Œä¹Ÿæ¬¢è¿è¯»è€…åœ¨è¯„è®ºåŒºè¡¥å……æ¨èçš„æ¸ é“</p>
<h3 id="æŠ€æœ¯èµ„è®¯" tabindex="-1">æŠ€æœ¯èµ„è®¯ <a class="header-anchor" href="#æŠ€æœ¯èµ„è®¯" aria-label="Permalink to &quot;æŠ€æœ¯èµ„è®¯&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><a href="https://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="noreferrer">é˜®ä¸€å³°: ç§‘æŠ€çˆ±å¥½è€…å‘¨åˆŠ</a> - è®°å½•æ¯å‘¨å€¼å¾—åˆ†äº«çš„ç§‘æŠ€å†…å®¹ï¼Œå‘¨äº”å‘å¸ƒ</li>
<li><a href="https://sorrycc.com/mdh/" target="_blank" rel="noreferrer">äº‘è°¦ï¼šMDH å‰ç«¯å‘¨åˆŠ</a> - å‰ç«¯èµ„è®¯å’Œåˆ†äº«
<ul>
<li><a href="https://mdhweekly.com/" target="_blank" rel="noreferrer">ï¼ˆæ—§ï¼‰äº‘è°¦ï¼šMDH å‰ç«¯å‘¨åˆŠ</a> - å‰ç«¯èµ„è®¯å’Œåˆ†äº«</li>
</ul>
</li>
<li><a href="https://github.com/Geekhyt/weekly" target="_blank" rel="noreferrer">ç«¥æ¬§å·´ï¼šå‰ç«¯é£Ÿå ‚</a> - ä½ çš„å‰ç«¯é£Ÿå ‚ï¼Œåƒå¥½æ¯ä¸€é¡¿é¥­</li>
<li><a href="https://daily-blog.chlinlearn.top/" target="_blank" rel="noreferrer">å€¼å¾—ä¸€è¯»æŠ€æœ¯åšå®¢</a> - æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œæ¯å¤©åˆ†äº«æœ‰æ–™çš„æŠ€æœ¯æ–‡ç« ï¼</li>
<li><a href="https://fed.chanceyu.com/" target="_blank" rel="noreferrer">å‰ç«¯æŠ€æœ¯æ–‡ç« </a> - æ ¹æ® RSS è®¢é˜…æºæŠ“å–æœ€æ–°å‰ç«¯æŠ€æœ¯æ–‡ç« </li>
<li><a href="https://frontendfoc.us/issues" target="_blank" rel="noreferrer">frontendfoc</a> - ğŸš€ Frontend <strong>Focus</strong></li>
<li><a href="https://javascriptweekly.com/issues" target="_blank" rel="noreferrer">JavaScript Weekly</a> - A newsletter of JavaScript articles, news and cool projects</li>
<li><a href="https://nodeweekly.com/issues" target="_blank" rel="noreferrer">nodejs Weekly</a> - A free, onceâ€“weekly e-mail round-up of Node.js news and articles.</li>
<li><a href="https://juejin.cn/user/554605767047053/posts" target="_blank" rel="noreferrer">ShowMeAI</a> - ä¸ºAIç¡¬æ ¸èµ„æ–™åº“(cool)è€Œç”Ÿ</li>
<li><a href="https://www.fre123.com/weekly" target="_blank" rel="noreferrer">FRE123 æŠ€æœ¯å‘¨åˆŠç²¾é€‰</a> - å‰åç«¯æŠ€æœ¯å‘¨åˆŠç²¾é€‰æ¨èä¿¡æ¯æµ</li>
</ul>
<details class="details custom-block"><summary>å·²åœæ›´</summary>
<ul>
<li><a href="https://wx.zsxq.com/dweb2/index/group/15552285284822" target="_blank" rel="noreferrer">çŸ¥è¯†æ˜Ÿçƒï¼šå’²å¥ˆçš„å¹³è¡Œæ—¶ç©º</a> - å‰ç«¯å‰æ²¿æŠ€æœ¯ã€èµ„è®¯ã€æ–¹æ³•è®ºåˆ†äº«</li>
<li><a href="https://shengliu.tech/" target="_blank" rel="noreferrer">çœæµ</a> - æœ‰å…³è¡Œä¸šğŸ“±ã€ä»£ç ğŸ‘¨â€ğŸ’»ã€ç§‘ç ”ğŸ”¬çš„æœ‰è¶£å†…å®¹ï¼Œæ¯ä¸ªå·¥ä½œæ—¥æ›´æ–°</li>
<li><a href="https://rottenpen.zhubai.love/" target="_blank" rel="noreferrer">rottenpenï¼šFE News</a> - åˆ†äº«å‰ç«¯ï¼Œç”Ÿæ´»</li>
</ul>
</details>
<h3 id="æŠ€æœ¯ç¤¾åŒº" tabindex="-1">æŠ€æœ¯ç¤¾åŒº <a class="header-anchor" href="#æŠ€æœ¯ç¤¾åŒº" aria-label="Permalink to &quot;æŠ€æœ¯ç¤¾åŒº&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><a href="https://juejin.cn/" target="_blank" rel="noreferrer">æ˜é‡‘</a></li>
<li><a href="https://www.oschina.net/" target="_blank" rel="noreferrer">å¼€æºä¸­å›½</a></li>
<li><a href="https://www.v2ex.com/" target="_blank" rel="noreferrer">V2EX</a></li>
<li><a href="https://codenews.cc/" target="_blank" rel="noreferrer">codenews</a></li>
</ul>
<h3 id="ä¼˜è´¨å…¬ä¼—å·" tabindex="-1">ä¼˜è´¨å…¬ä¼—å· <a class="header-anchor" href="#ä¼˜è´¨å…¬ä¼—å·" aria-label="Permalink to &quot;ä¼˜è´¨å…¬ä¼—å·&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>ELabå›¢é˜Ÿ</li>
<li>å¥‡èˆç²¾é€‰</li>
<li>å¤§æ·˜å®æŠ€æœ¯</li>
<li>å¤§æ·˜å®å‰ç«¯æŠ€æœ¯</li>
<li>æ”¯ä»˜å®ä½“éªŒç§‘æŠ€</li>
<li>å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿâ€‹</li>
</ul>
<!-- TODOï¼šè‡ªåŠ¨ç”Ÿæˆå¯ç¿»é¡µç›®å½• -->
<h2 id="_2024" tabindex="-1">2024 <a class="header-anchor" href="#_2024" aria-label="Permalink to &quot;2024&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./2024-05-26.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬85æœŸ</a></li>
<li><a href="./2024-05-19.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬84æœŸ</a></li>
<li><a href="./2024-05-12.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬83æœŸ</a></li>
<li><a href="./2024-04-29.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬82æœŸ</a></li>
<li><a href="./2024-04-21.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬81æœŸ</a></li>
<li><a href="./2024-04-14.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬80æœŸ</a></li>
<li><a href="./2024-03-31.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬79æœŸ</a></li>
<li><a href="./2024-03-24.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬78æœŸ</a></li>
<li><a href="./2024-03-17.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬77æœŸ</a></li>
<li><a href="./2024-03-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬76æœŸ</a></li>
<li><a href="./2024-03-03.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬75æœŸ</a></li>
<li><a href="./2024-02-25.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬74æœŸ</a></li>
<li><a href="./2024-02-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬73æœŸ</a></li>
<li><a href="./2024-02-03.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬72æœŸ</a></li>
<li><a href="./2024-01-28.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬71æœŸ</a></li>
<li><a href="./2024-01-21.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬70æœŸ</a></li>
<li><a href="./2024-01-14.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬69æœŸ</a></li>
<li><a href="./2024-01-06.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬68æœŸ</a></li>
</ul>
<hr>
<details class="details custom-block"><summary>2023</summary>
<ul>
<li><a href="./2023-12-24.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬67æœŸ</a></li>
<li><a href="./2023-12-17.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬66æœŸ</a></li>
<li><a href="./2023-12-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬65æœŸ</a></li>
<li><a href="./2023-12-03.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬64æœŸ</a></li>
<li><a href="./2023-11-26.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬63æœŸ</a></li>
<li><a href="./2023-11-19.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬62æœŸ</a></li>
<li><a href="./2023-11-12.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬61æœŸ</a></li>
<li><a href="./2023-11-05.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬60æœŸ</a></li>
<li><a href="./2023-10-29.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬59æœŸ</a></li>
<li><a href="./2023-10-22.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬58æœŸ</a></li>
<li><a href="./2023-10-15.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬57æœŸ</a></li>
<li><a href="./2023-10-06.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬56æœŸ</a></li>
<li><a href="./2023-09-24.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬55æœŸ</a></li>
<li><a href="./2023-09-17.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬54æœŸ</a></li>
<li><a href="./2023-09-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬53æœŸ</a></li>
<li><a href="./2023-09-02.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬52æœŸ</a></li>
<li><a href="./2023-08-27.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬51æœŸ</a></li>
<li><a href="./2023-08-20.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬50æœŸ</a></li>
<li><a href="./2023-08-12.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬49æœŸ</a></li>
<li><a href="./2023-08-04.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬48æœŸ</a></li>
<li><a href="./2023-07-28.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬47æœŸ</a></li>
<li><a href="./2023-07-22.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬46æœŸ</a></li>
<li><a href="./2023-07-14.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬45æœŸ</a></li>
<li><a href="./2023-07-07.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬44æœŸ</a></li>
<li><a href="./2023-07-02.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬43æœŸ</a></li>
<li><a href="./2023-06-16.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬42æœŸ</a></li>
<li><a href="./2023-06-09.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬41æœŸ</a></li>
<li><a href="./2023-06-02.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬40æœŸ</a></li>
<li><a href="./2023-05-26.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬39æœŸ</a></li>
<li><a href="./2023-05-19.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬38æœŸ</a></li>
<li><a href="./2023-05-12.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬37æœŸ</a></li>
<li><a href="./2023-05-05.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬36æœŸ</a></li>
<li><a href="./2023-04-28.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬35æœŸ</a></li>
<li><a href="./2023-04-21.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬34æœŸ</a></li>
<li><a href="./2023-04-14.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬33æœŸ</a></li>
<li><a href="./2023-04-07.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬32æœŸ</a></li>
<li><a href="./2023-03-31.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬31æœŸ</a></li>
<li><a href="./2023-03-24.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬30æœŸ</a></li>
<li><a href="./2023-03-17.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬29æœŸ</a></li>
<li><a href="./2023-03-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬28æœŸ</a></li>
<li><a href="./2023-03-03.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬27æœŸ</a></li>
<li><a href="./2023-02-24.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬26æœŸ</a></li>
<li><a href="./2023-02-17.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬25æœŸ</a></li>
<li><a href="./2023-02-10.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬24æœŸ</a></li>
<li><a href="./2023-02-02.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬23æœŸ</a></li>
<li><a href="./2023-01-26.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬22æœŸ</a></li>
<li><a href="./2023-01-20.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬21æœŸ</a></li>
<li><a href="./2023-01-13.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬20æœŸ</a></li>
<li><a href="./2023-01-06.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬19æœŸ</a></li>
</ul>
</details>
<details class="details custom-block"><summary>2022</summary>
<ul>
<li><a href="./2022-12-30.html">æŠ€æœ¯è§†é‡å‘¨åˆŠç¬¬18æœŸ</a></li>
</ul>
</details>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®° | 99åˆ†]]></title>
            <link>https://www.dmsrs.org/essay/dev/2024-blog-perf.html</link>
            <guid>https://www.dmsrs.org/essay/dev/2024-blog-perf.html</guid>
            <pubDate>Thu, 30 May 2024 17:06:44 GMT</pubDate>
            <description><![CDATA[# åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®° | 99åˆ†

é—²ç€æ²¡äº‹ï¼Œæ‹¿ lighthouse æµ‹äº†ä¸€ä¸‹åšå®¢ç½‘ç«™çš„æ€§èƒ½è¯„æµ‹ï¼Œå‘ç°è¯Šæ–­å‡ºçš„é—®é¢˜è¿˜æŒºå¤šï¼Œå°±é¡ºæ‰‹ä¼˜åŒ–äº†ä¸€ä¸‹ã€‚

è¿™ç¯‡æ–‡ç« å°†è®°å½•è¿™ä¸ªä¼˜åŒ–çš„è¿‡ç¨‹ã€‚


## ä¼˜åŒ–å‰åå¯¹æ¯”
lighthouse æ£€æµ‹ç»“æœ

|                                     ä¼˜åŒ–å‰                                      |                                     ä¼˜åŒ–å                                      |
| :]]></description>
            <content:encoded><![CDATA[<h1 id="åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®°-99åˆ†" tabindex="-1">åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®° | 99åˆ† <a class="header-anchor" href="#åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®°-99åˆ†" aria-label="Permalink to &quot;åšå®¢æ€§èƒ½ä¼˜åŒ–ç¬”è®° | 99åˆ†&quot;">&ZeroWidthSpace;</a></h1>
<p>é—²ç€æ²¡äº‹ï¼Œæ‹¿ lighthouse æµ‹äº†ä¸€ä¸‹åšå®¢ç½‘ç«™çš„æ€§èƒ½è¯„æµ‹ï¼Œå‘ç°è¯Šæ–­å‡ºçš„é—®é¢˜è¿˜æŒºå¤šï¼Œå°±é¡ºæ‰‹ä¼˜åŒ–äº†ä¸€ä¸‹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†è®°å½•è¿™ä¸ªä¼˜åŒ–çš„è¿‡ç¨‹ã€‚</p>
<h2 id="ä¼˜åŒ–å‰åå¯¹æ¯”" tabindex="-1">ä¼˜åŒ–å‰åå¯¹æ¯” <a class="header-anchor" href="#ä¼˜åŒ–å‰åå¯¹æ¯”" aria-label="Permalink to &quot;ä¼˜åŒ–å‰åå¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h2>
<p>lighthouse æ£€æµ‹ç»“æœ</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">ä¼˜åŒ–å‰</th>
<th style="text-align:center">ä¼˜åŒ–å</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/4d82e4e81e499921a65b73c80034c153" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/b5bae2c72f1d2aed2c09857c1b9e6b5f" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>æ€§èƒ½é¢æ¿æ£€æµ‹ç»“æœ</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">FCP</th>
<th style="text-align:center">DOMContentLoaded</th>
<th style="text-align:center">LCP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ä¼˜åŒ–å‰</td>
<td style="text-align:center">764ms</td>
<td style="text-align:center">1798ms</td>
<td style="text-align:center">1864ms</td>
</tr>
<tr>
<td style="text-align:center">ä¼˜åŒ–å</td>
<td style="text-align:center">496ms</td>
<td style="text-align:center">507ms</td>
<td style="text-align:center">496ms</td>
</tr>
</tbody>
</table>
<ul>
<li>FCPï¼ˆFirst Contentful Paintï¼‰</li>
<li>LCPï¼ˆLargest Contentful Paintï¼‰</li>
</ul>
<h2 id="æ£€æµ‹å·¥å…·" tabindex="-1">æ£€æµ‹å·¥å…· <a class="header-anchor" href="#æ£€æµ‹å·¥å…·" aria-label="Permalink to &quot;æ£€æµ‹å·¥å…·&quot;">&ZeroWidthSpace;</a></h2>
<p>ä½¿ç”¨ Chrome è‡ªå¸¦çš„ lighthouse å’Œ æ€§èƒ½é¢æ¿è¿›è¡Œæµ‹è¯•ã€‚</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">æ€§èƒ½é¢æ¿</th>
<th style="text-align:center">lighthouse</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/ee2e46cd895e2773a22671fe99571bd3" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/c35d5a583f80ccbeae74544644fbc236" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h2 id="å‘ç°é—®é¢˜" tabindex="-1">å‘ç°é—®é¢˜ <a class="header-anchor" href="#å‘ç°é—®é¢˜" aria-label="Permalink to &quot;å‘ç°é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ€§èƒ½é¢æ¿-performance" tabindex="-1">æ€§èƒ½é¢æ¿ | Performance <a class="header-anchor" href="#æ€§èƒ½é¢æ¿-performance" aria-label="Permalink to &quot;æ€§èƒ½é¢æ¿ | Performance&quot;">&ZeroWidthSpace;</a></h3>
<p><em>é€šè¿‡æˆªå›¾å¯ä»¥è§‚å¯Ÿåˆ°æ¯ä¸ªæ—¶é—´çš„é¡µé¢å˜åŒ–</em></p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/1d59bbd832442846c5e15bd05a0fb41a" alt="" loading="lazy"></p>
<p>å‘ç°çš„é—®é¢˜ï¼š</p>
<ol>
<li>æ–‡ç« åˆ—è¡¨æ¸²æŸ“åï¼Œæ–‡ç« å°é¢å›¾åŠ è½½ç¼“æ…¢</li>
<li>å›¾ç‰‡å®ŒæˆåŠ è½½æ—¶é—´è¿‡é•¿ï¼ˆå°é¢ï¼Œå¤´åƒå›¾ç‰‡ï¼‰</li>
<li>å¸ƒå±€æ¸²æŸ“æœŸé—´å‘ç”Ÿæ˜æ˜¾å˜åŒ–</li>
</ol>
<ul>
<li>å‹é“¾åˆ—è¡¨åŠ è½½å®Œæˆå</li>
<li>å·¦ä¸Šå¤´åƒåŠ è½½å®Œæˆ</li>
</ul>
<h3 id="lighthouse" tabindex="-1">lighthouse <a class="header-anchor" href="#lighthouse" aria-label="Permalink to &quot;lighthouse&quot;">&ZeroWidthSpace;</a></h3>
<p>æµ‹è¯•åä¼šç»™åˆ°ä¼˜åŒ–å»ºè®®ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/564a5318bef5fe8f9318e205a946ed5d" alt="" loading="lazy"></p>
<p>è¿™é‡ŒæŒ‘ä¸€äº›åé¢ç”¨åˆ°çš„</p>
<ol start="4">
<li>ä½¿ç”¨æ–°çš„å›¾ç‰‡æ ¼å¼ï¼ˆWebP and AVIFï¼‰</li>
<li>å‡å°‘æ²¡ç”¨åˆ°çš„CSSæ–‡ä»¶å¤§å°</li>
<li>img æ²¡æœ‰æ˜ç¡®çš„å®½é«˜å±æ€§</li>
<li>èµ„æºä¼ è¾“å‹ç¼©ï¼ˆgzip, brotli ç­‰ï¼‰</li>
<li>åŠ è½½é€‚å½“å¤§å°çš„å›¾ç‰‡ï¼ˆé¿å…è¶…è¿‡è¦å±•ç¤ºçš„å¤§å°ï¼‰</li>
<li>é¿å…è¶…å¤§çš„èµ„æºåŠ è½½é˜»å¡ç½‘ç»œï¼ˆä¸»è¦æ˜¯ä¸€äº›è¶…å¤§çš„å›¾ç‰‡å’Œjsï¼‰</li>
</ol>
<h2 id="ä¼˜åŒ–è¿‡ç¨‹" tabindex="-1">ä¼˜åŒ–è¿‡ç¨‹ <a class="header-anchor" href="#ä¼˜åŒ–è¿‡ç¨‹" aria-label="Permalink to &quot;ä¼˜åŒ–è¿‡ç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å›¾ç‰‡ä¼˜åŒ–" tabindex="-1">å›¾ç‰‡ä¼˜åŒ– <a class="header-anchor" href="#å›¾ç‰‡ä¼˜åŒ–" aria-label="Permalink to &quot;å›¾ç‰‡ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p><em>è§£å†³ï¼š1ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œ9</em></p>
<p>â‘  è£å‰ªä¸ºæ¸²æŸ“çš„å¤§å°</p>
<p>â‘¡ æ ¼å¼è°ƒæ•´ä¸ºWebPæ ¼å¼</p>
<p>æˆ‘çš„å›¾ç‰‡éƒ½æ˜¯æ”¾åœ¨å›¾åºŠä¸Šçš„ï¼ˆ<a href="https://www.qiniu.com/" target="_blank" rel="noreferrer">ä¸ƒç‰›äº‘</a>ï¼Œ<a href="https://www.upyun.com/" target="_blank" rel="noreferrer">åˆæ‹äº‘</a>ï¼Œ<a href="https://www.bitiful.com/" target="_blank" rel="noreferrer">ç¼¤çº·äº‘</a>ï¼‰ã€‚</p>
<p>è¿™ä¸€æ­¥æˆ‘ç›´æ¥ä½¿ç”¨ OSSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰ æä¾›çš„å›¾ç‰‡åŠ è½½è£å‰ªåŠŸèƒ½å³å¯ã€‚</p>
<p>é…ç½®ç›®æ ‡ï¼š<code>å®½é«˜è£å‰ªä¸º 120px * 80px</code>ï¼Œæ ¼å¼è°ƒæ•´ä¸º <code>WebP</code> æ ¼å¼ã€‚</p>
<p>é…ç½®å¤„ç†æ ·å¼ç¤ºä¾‹</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">ä¸ƒç‰›äº‘</th>
<th style="text-align:center">åˆæ‹äº‘</th>
<th style="text-align:center">ç¼¤çº·äº‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/35a9ae4bce09253ec27336add6d5b113" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/71b189c9662ae6ebf6c5cbba026bef9b" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/61666d5257abea7242b81f73b841366b" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>ä½¿ç”¨ï¼šåœ¨åŸæœ‰çš„èµ„æºä¸Šæ·»åŠ å¯¹åº”çš„åç½®å³å¯</p>
<ul>
<li>ä¸ƒç‰›äº‘ï¼šurl<code>~cover.webp</code></li>
<li>åˆæ‹äº‘ï¼šurl<code>-cover</code></li>
<li>ç¼¤çº·äº‘ï¼šurl<code>!style:cover</code></li>
</ul>
<p>ä»£ç ä¸­çš„ä½“ç°â†“</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">å°é¢</th>
<th style="text-align:center">å‹é“¾å¤´åƒ</th>
<th style="text-align:center">å¤´åƒ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/bea00144a61781f8effd682a43d36af0" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/aad8979fe2c73aa37c626d59cdbcb199" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/a0bebb4818ac1c4dcd208871c977fd6b" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h3 id="oml2dæ¨¡å‹èµ„æºä¼˜åŒ–" tabindex="-1">oml2dæ¨¡å‹èµ„æºä¼˜åŒ– <a class="header-anchor" href="#oml2dæ¨¡å‹èµ„æºä¼˜åŒ–" aria-label="Permalink to &quot;oml2dæ¨¡å‹èµ„æºä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>åšå®¢å·¦ä¸‹è§’çš„çœ‹æ¿å¨˜åŠ è½½ä¼˜åŒ–ã€‚</p>
<p><em>è§£å†³ï¼š9</em></p>
<p>â‘  èµ„æºå…¨éƒ¨æ”¾åœ¨è‡ªå·±çš„ OSS é€šè¿‡CDNåŠ è½½ï¼ˆæœ‰gzipå‹ç¼©ï¼Œæ›´å¿«çš„è®¿é—®é€Ÿåº¦ï¼‰</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/a54a6ad8b950bcd35881a91a766d9516" alt="" loading="lazy"></p>
<p>â‘¡ å°†æ¨¡å‹ç”¨åˆ°çš„PNGå›¾ç‰‡å‹ç¼©</p>
<p>ä½¿ç”¨ä¹‹å‰åšçš„<a href="https://demos.sugarat.top/pages/png-compress/" target="_blank" rel="noreferrer">å›¾ç‰‡åœ¨çº¿å‹ç¼©å·¥å…·</a></p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/3a71f093eb7e6a9edd7fc5a44ea5453a" alt="" loading="lazy"></p>
<p>å‹ç¼©åå‡å°‘äº† 88% çš„ä½“ç§¯ï¼Œè§†è§‰ä¸Šçœ‹ä¸å‡ºå˜åŒ–ã€‚</p>
<h3 id="ç½‘ç»œä¼˜åŒ–" tabindex="-1">ç½‘ç»œä¼˜åŒ– <a class="header-anchor" href="#ç½‘ç»œä¼˜åŒ–" aria-label="Permalink to &quot;ç½‘ç»œä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p><em>è§£å†³ï¼š7ï¼Œ9</em></p>
<p>â‘  ç¬¬ä¸‰æ–¹èµ„æºä½¿ç”¨ OSSå­˜å‚¨ + CDNåŠ è½½</p>
<p>â‘¡ è®¿é—®ä½¿ç”¨ HTTP3/HTTP2</p>
<p>æ–°çš„åè®®åŠ è½½èµ„æºï¼Œç”¨ä¸Šå¤šè·¯å¤ç”¨çš„ç‰¹æ€§ã€‚</p>
<p>å¯ç”¨å‰æèµ„æºæ”¯æŒ HTTPS è®¿é—®ï¼ˆé…ç½®SSLè¯ä¹¦ï¼‰ï¼Œæ‰èƒ½å¯ç”¨ HTTP2/3ã€‚</p>
<p>é…ç½® HTTPS æ—¶ä½¿ç”¨æœ€æ–°çš„ TLS1.3 ç‰ˆæœ¬ï¼Œæ›´å¿«çš„åŠ è§£å¯†é€Ÿåº¦ã€‚</p>
<p>ä¸‹é¢æ˜¯åœ¨å„å¹³å°å¼€å¯ç›¸å…³é…ç½®ç¤ºæ„ã€‚</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">ä¸ƒç‰›äº‘</th>
<th style="text-align:center">åˆæ‹äº‘</th>
<th style="text-align:center">ç¼¤çº·äº‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/bbbd1791fb922ff5a3b93bf767da7077" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/cef4e8d57160ce1e15f55a013fb5c48f" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/567b27f97e7c8c6d9872d30554ff5aac" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>ä¼˜åŒ–å‰åå¯¹æ¯”</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">ä¼˜åŒ–å‰</th>
<th style="text-align:center">ä¼˜åŒ–å</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/2589d8a0c951eb52926265296d295300" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/d2a595575fffd4894aafb90d242169ae" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h3 id="å¸ƒå±€ä¼˜åŒ–" tabindex="-1">å¸ƒå±€ä¼˜åŒ– <a class="header-anchor" href="#å¸ƒå±€ä¼˜åŒ–" aria-label="Permalink to &quot;å¸ƒå±€ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p><em>è§£å†³ï¼š3ï¼Œ6</em></p>
<p><strong>ç›®æ ‡ï¼šå‡å°‘è§¦å‘ â€œé¡µé¢å›æµé‡ç»˜â€ çš„èŒƒå›´å’Œæ¬¡æ•°ã€‚</strong></p>
<p>â‘  é’ˆå¯¹å›¾ç‰‡ï¼Œé™å®šå…·ä½“æ¸²æŸ“çš„å®½é«˜ï¼Œé¿å…å›¾ç‰‡åŠ è½½åå¸ƒå±€å‘ç”Ÿå˜åŒ–</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/ff09a4dbcd305b2b1fb1811934a1c7c2" alt="" loading="lazy"></p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/67cfbd857a8a3e7e7eefa5aac53f696e" alt="" loading="lazy"></p>
<p>â‘¡ é’ˆå¯¹åæ¸²æŸ“åŒºåŸŸï¼Œé™å®šå…¶å®¹å™¨çš„å®½åº¦ï¼Œé¿å…æ¸²æŸ“åå½±å“å¸ƒå±€</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/2210f6baef787ab13326a26d02e11783" alt="" loading="lazy"></p>
<h3 id="å‡å°‘æ— ç”¨ä»£ç " tabindex="-1">å‡å°‘æ— ç”¨ä»£ç  <a class="header-anchor" href="#å‡å°‘æ— ç”¨ä»£ç " aria-label="Permalink to &quot;å‡å°‘æ— ç”¨ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<p><em>è§£å†³ï¼š5</em></p>
<p>â‘  ç§»é™¤æ— ç”¨çš„ js è„šæœ¬æˆ–è€… CSS èµ„æº</p>
<p>å¤§æ¦‚çœ‹äº†ä¸€ä¸‹ï¼Œé¡¹ç›®é‡Œé¢å¤–ä¾èµ–çš„ element-plus æ ·å¼æ–‡ä»¶å å¤§å¤´ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/028e0cf966f7a0b067ce1f3dc26ede32" alt="" loading="lazy"></p>
<p>å°†å…¨é‡å¼•å…¥ï¼Œæ‰‹åŠ¨è°ƒæ•´ä¸ºæŒ‰éœ€å¼•å…¥ã€‚</p>
<h2 id="æœ€ç»ˆæ•ˆæœ" tabindex="-1">æœ€ç»ˆæ•ˆæœ <a class="header-anchor" href="#æœ€ç»ˆæ•ˆæœ" aria-label="Permalink to &quot;æœ€ç»ˆæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">æ€§èƒ½é¢æ¿</th>
<th style="text-align:center">lighthouse</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/5373e67f09e2a349074b0ab0c852d134" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/b5bae2c72f1d2aed2c09857c1b9e6b5f" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>ä¼˜åŒ–åçš„æ€§èƒ½æŒ‡æ ‡</p>
<ul>
<li>FCPï¼ˆFirst Contentful Paintï¼‰ï¼š496ms</li>
<li>DOMContentLoadedï¼š507ms</li>
<li>LCPï¼ˆLargest Contentful Paintï¼‰ï¼š496ms</li>
</ul>
<p>è®¿é—® <a href="https://www.dmsrs.org" target="_blank" rel="noreferrer">https://www.dmsrs.org</a> å¯ä»¥çœ‹åˆ°æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<ol>
<li>å›¾ç‰‡ï¼šå‹ç¼©ï¼ŒåŠ è½½åˆé€‚å°ºå¯¸ï¼Œä¼˜å…ˆä½¿ç”¨ WebP æ ¼å¼</li>
<li>ç½‘ç»œï¼šHTTPS + HTTP2/3ï¼ŒOSS + CDN</li>
<li>å¸ƒå±€ï¼šå‡å°‘å›æµé‡ç»˜èŒƒå›´ä¸æ¬¡æ•°</li>
<li>èµ„æºï¼šç§»é™¤æ— ç”¨ä»£ç ï¼Œæ— ç”¨çš„ç¬¬ä¸‰æ–¹èµ„æºåŠ è½½</li>
</ol>
]]></content:encoded>
            <enclosure url="https://cdn.upyun.sugarat.top/mdImg/sugar/4d82e4e81e499921a65b73c80034c153" length="0" type="image//mdImg/sugar/4d82e4e81e499921a65b73c80034c153"/>
        </item>
        <item>
            <title><![CDATA[å¼€å‘æ—¥è®° | ä¸å®šæ—¶æ›´æ–°]]></title>
            <link>https://www.dmsrs.org/essay/dev/changelog-2024.html</link>
            <guid>https://www.dmsrs.org/essay/dev/changelog-2024.html</guid>
            <pubDate>Thu, 30 May 2024 17:06:44 GMT</pubDate>
            <description><![CDATA[è®°å½•ä¸€ä¸‹æ¯å¤©å¹²çš„æ‚äº‹ï¼Œå†™çš„æ‚ä¸ƒæ‚å…«çš„ä»£ç ï¼Œç”¨äºæ—¥åå›é¡¾ï¼Œç¿»å¼€å°˜å°çš„è®°å¿†]]></description>
            <content:encoded><![CDATA[<h1 id="å¼€å‘æ—¥è®°-ä¸å®šæ—¶æ›´æ–°" tabindex="-1">å¼€å‘æ—¥è®° | ä¸å®šæ—¶æ›´æ–° <a class="header-anchor" href="#å¼€å‘æ—¥è®°-ä¸å®šæ—¶æ›´æ–°" aria-label="Permalink to &quot;å¼€å‘æ—¥è®° | ä¸å®šæ—¶æ›´æ–°&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä¸€ä¸‹æ¯å¤©å¹²çš„æ‚äº‹ï¼Œå†™çš„æ‚ä¸ƒæ‚å…«çš„ä»£ç ï¼Œç”¨äºæ—¥åå›é¡¾ï¼Œç¿»å¼€å°˜å°çš„è®°å¿†ã€‚</p>
<nav class="table-of-contents"><ul><li><a href="#_2024-03-27">2024/03/27</a></li><li><a href="#_2024-03-23">2024/03/23</a></li><li><a href="#_2024-03-16">2024/03/16</a></li><li><a href="#_2024-03-14">2024/03/14</a><ul><li><a href="#ä¸ƒç‰›äº‘å›¾åºŠ">ä¸ƒç‰›äº‘å›¾åºŠ</a></li></ul></li><li><a href="#_2024-03-13">2024/03/13</a><ul><li><a href="#åšå®¢ä¸»é¢˜">åšå®¢ä¸»é¢˜</a></li></ul></li><li><a href="#_2024-03-11">2024/03/11</a><ul><li><a href="#åšå®¢ä¸»é¢˜-1">åšå®¢ä¸»é¢˜</a></li></ul></li><li><a href="#_2024-03-10">2024-03-10</a><ul><li><a href="#åšå®¢ä¸»é¢˜cli">åšå®¢ä¸»é¢˜CLI</a></li></ul></li><li><a href="#_2024-03-09">2024-03-09</a><ul><li><a href="#ä¸ƒç‰›äº‘å›¾åºŠ-1">ä¸ƒç‰›äº‘å›¾åºŠ</a></li></ul></li><li><a href="#_2024-03-05">2024-03-05</a><ul><li><a href="#ä¸ƒç‰›äº‘å›¾åºŠ-2">ä¸ƒç‰›äº‘å›¾åºŠ</a></li></ul></li><li><a href="#_2024-03-04">2024-03-04</a><ul><li><a href="#å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·">å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·</a></li><li><a href="#ä¸ƒç‰›äº‘å›¾åºŠ-3">ä¸ƒç‰›äº‘å›¾åºŠ</a></li></ul></li></ul></nav>
<h2 id="_2024-03-27" tabindex="-1">2024/03/27 <a class="header-anchor" href="#_2024-03-27" aria-label="Permalink to &quot;2024/03/27&quot;">&ZeroWidthSpace;</a></h2>
<p><em><a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme" target="_blank" rel="noreferrer">@sugarat/theme</a></em></p>
<ul>
<li>feat: æ–°å¢å„ä¸ªæ¨¡å—å¯é€‰å¼€å¯çš„å¼€å…³</li>
<li>fix: Hydration error</li>
<li>fix: ç”Ÿæˆçš„é“¾æ¥å…¼å®¹ <code>cleanUrls</code> é…ç½®</li>
<li>Updated dependencies
<ul>
<li>vitepress-plugin-pagefind@0.2.14</li>
<li>oh-my-live2d@0.15.2</li>
</ul>
</li>
</ul>
<h2 id="_2024-03-23" tabindex="-1">2024/03/23 <a class="header-anchor" href="#_2024-03-23" aria-label="Permalink to &quot;2024/03/23&quot;">&ZeroWidthSpace;</a></h2>
<p><em><a href="https://github.com/ATQQ/demos/tree/main/pages/jpg-compress" target="_blank" rel="noreferrer">JPG å›¾ç‰‡å‹ç¼©</a></em></p>
<ul>
<li>ç¼–å†™ <a href="https://demos.sugarat.top/pages/jpg-compress/" target="_blank" rel="noreferrer">JPG å‹ç¼©åœ¨çº¿ Demo</a></li>
</ul>
<h2 id="_2024-03-16" tabindex="-1">2024/03/16 <a class="header-anchor" href="#_2024-03-16" aria-label="Permalink to &quot;2024/03/16&quot;">&ZeroWidthSpace;</a></h2>
<p><em><a href="https://github.com/ATQQ/demos/tree/main/pages/png-compress" target="_blank" rel="noreferrer">PNG å›¾ç‰‡å‹ç¼© | UPNG.js</a></em></p>
<ul>
<li>ç¼–å†™ UPNG.js åœ¨çº¿ Demo</li>
</ul>
<p><em><a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme" target="_blank" rel="noreferrer">@sugarat/theme</a></em></p>
<ul>
<li>ä¾èµ–æ›´æ–° çœ‹æ¿å¨˜ å’Œ VitePress1.0.1</li>
<li>footer æ”¯æŒæ›´ä¸°å¯Œçš„å®šåˆ¶ï¼ˆå‚åŠ <a href="https://www.upyun.com/league" target="_blank" rel="noreferrer">åˆæ‹äº‘æ´»åŠ¨</a>ï¼‰</li>
</ul>
<h2 id="_2024-03-14" tabindex="-1">2024/03/14 <a class="header-anchor" href="#_2024-03-14" aria-label="Permalink to &quot;2024/03/14&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ä¸ƒç‰›äº‘å›¾åºŠ" tabindex="-1">ä¸ƒç‰›äº‘å›¾åºŠ <a class="header-anchor" href="#ä¸ƒç‰›äº‘å›¾åºŠ" aria-label="Permalink to &quot;ä¸ƒç‰›äº‘å›¾åºŠ&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#-%E4%B8%83%E7%89%9B%E4%BA%91oss%E5%9B%BE%E5%BA%8A-" target="_blank" rel="noreferrer">image-bed-qiniu</a></em></p>
<ul>
<li>fixï¼šå‹ç¼©åæ›´å¤§ï¼Œä»ä½¿ç”¨äº†å‹ç¼©çš„å›¾ç‰‡</li>
<li>featï¼šæŸ¥çœ‹è¯¦æƒ…å¢åŠ å‹ç¼©ç‡å±•ç¤º</li>
</ul>
<h2 id="_2024-03-13" tabindex="-1">2024/03/13 <a class="header-anchor" href="#_2024-03-13" aria-label="Permalink to &quot;2024/03/13&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åšå®¢ä¸»é¢˜" tabindex="-1">åšå®¢ä¸»é¢˜ <a class="header-anchor" href="#åšå®¢ä¸»é¢˜" aria-label="Permalink to &quot;åšå®¢ä¸»é¢˜&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme" target="_blank" rel="noreferrer">@sugarat/theme</a></em></p>
<ul>
<li>å†…ç½®å¼€ç®±å³ç”¨çš„çœ‹æ¿å¨˜æ”¯æŒï¼ˆ<a href="https://github.com/oh-my-live2d/oh-my-live2d" target="_blank" rel="noreferrer">oh-my-live2d</a>ï¼‰</li>
</ul>
<h2 id="_2024-03-11" tabindex="-1">2024/03/11 <a class="header-anchor" href="#_2024-03-11" aria-label="Permalink to &quot;2024/03/11&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åšå®¢ä¸»é¢˜-1" tabindex="-1">åšå®¢ä¸»é¢˜ <a class="header-anchor" href="#åšå®¢ä¸»é¢˜-1" aria-label="Permalink to &quot;åšå®¢ä¸»é¢˜&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme" target="_blank" rel="noreferrer">@sugarat/theme</a></em></p>
<ul>
<li>fixï¼šä¸»é¢˜ <code>showSelf: false</code> å¤±æ•ˆçš„é—®é¢˜</li>
<li>fixï¼špagefind æœç´¢æ’ä»¶ SSR ç¼–è¯‘æ—¶å½±å“ SVG å›¾æ ‡å¯¼å…¥</li>
</ul>
<h2 id="_2024-03-10" tabindex="-1">2024-03-10 <a class="header-anchor" href="#_2024-03-10" aria-label="Permalink to &quot;2024-03-10&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åšå®¢ä¸»é¢˜cli" tabindex="-1">åšå®¢ä¸»é¢˜CLI <a class="header-anchor" href="#åšå®¢ä¸»é¢˜cli" aria-label="Permalink to &quot;åšå®¢ä¸»é¢˜CLI&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/create-theme" target="_blank" rel="noreferrer">@sugarat/create-theme</a></em></p>
<ul>
<li>æ¨¡æ¿æ›´æ–°
<ul>
<li>æ·»åŠ  GitHub/Gitee Pages éƒ¨ç½²æ‰€éœ€æ–‡ä»¶</li>
<li>æ·»åŠ å¼•å¯¼ä½¿ç”¨æ–‡æ¡£</li>
</ul>
</li>
</ul>
<h2 id="_2024-03-09" tabindex="-1">2024-03-09 <a class="header-anchor" href="#_2024-03-09" aria-label="Permalink to &quot;2024-03-09&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ä¸ƒç‰›äº‘å›¾åºŠ-1" tabindex="-1">ä¸ƒç‰›äº‘å›¾åºŠ <a class="header-anchor" href="#ä¸ƒç‰›äº‘å›¾åºŠ-1" aria-label="Permalink to &quot;ä¸ƒç‰›äº‘å›¾åºŠ&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#-%E4%B8%83%E7%89%9B%E4%BA%91oss%E5%9B%BE%E5%BA%8A-" target="_blank" rel="noreferrer">image-bed-qiniu</a></em></p>
<ul>
<li>åŸºäº <a href="https://github.com/photopea/UPNG.js" target="_blank" rel="noreferrer">UPNG.js</a> æ”¯æŒ PNG å›¾ç‰‡çš„ä¸Šä¼ è‡ªåŠ¨å‹ç¼©</li>
</ul>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/727ade06e155fd9541cfcab78bdaab7f" alt="" loading="lazy"></p>
<h2 id="_2024-03-05" tabindex="-1">2024-03-05 <a class="header-anchor" href="#_2024-03-05" aria-label="Permalink to &quot;2024-03-05&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ä¸ƒç‰›äº‘å›¾åºŠ-2" tabindex="-1">ä¸ƒç‰›äº‘å›¾åºŠ <a class="header-anchor" href="#ä¸ƒç‰›äº‘å›¾åºŠ-2" aria-label="Permalink to &quot;ä¸ƒç‰›äº‘å›¾åºŠ&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#-%E4%B8%83%E7%89%9B%E4%BA%91oss%E5%9B%BE%E5%BA%8A-" target="_blank" rel="noreferrer">image-bed-qiniu</a></em></p>
<ul>
<li>æ–‡æ¡ˆä¼˜åŒ–</li>
<li>å°è¯•æœ¬åœ°å‹ç¼©éƒ¨åˆ†å›¾ç‰‡èµ„æº</li>
</ul>
<h2 id="_2024-03-04" tabindex="-1">2024-03-04 <a class="header-anchor" href="#_2024-03-04" aria-label="Permalink to &quot;2024-03-04&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·" tabindex="-1">å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…· <a class="header-anchor" href="#å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·" aria-label="Permalink to &quot;å‘¨åˆŠè‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://www.npmjs.com/package/@sugarat/cli-plugin-blog" target="_blank" rel="noreferrer">@sugarat/cli-plugin-blog@0.0.10</a></em></p>
<ul>
<li>è¿­ä»£ç”Ÿæˆå‘¨åˆŠçš„æ¨¡æ¿
<ul>
<li><code>frontmatter</code> é»˜è®¤æ·»åŠ æ³¨é‡Šæ‰çš„ <code>createTime</code></li>
<li>ç§»é™¤ <a href="https://www.wenjuan.com/s/AN32YrD/" target="_blank" rel="noreferrer">æŠ•ç¨¿</a> ğŸ‘ˆğŸ»åˆ†äº«å†…å®¹</li>
<li>æ ¼å¼è°ƒä¼˜</li>
<li><a href="https://sorrycc.com/mdh/" target="_blank" rel="noreferrer">äº‘è°¦ï¼šMDH å‰ç«¯å‘¨åˆŠ</a> åˆ‡æ¢åˆ°<a href="https://sorrycc.com/mdh/" target="_blank" rel="noreferrer">æ–°åœ°å€</a></li>
</ul>
</li>
<li>æ–°å¢ option <code>--weekly-dir</code> ç”¨äºè®¾ç½®å‘¨åˆŠç›®å½•</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> blog</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --weekly-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ./packages/blogpress/weekly</span></span></code></pre>
</div><ul>
<li>åˆ›å»ºå‘¨åˆŠä¼˜åŒ–
<ul>
<li>è‡ªåŠ¨æ ¹æ®å‘¨åˆŠç›®å½•æ‹¼æ¥å‘¨åˆŠæ–‡ç« åˆ›å»ºè·¯å¾„ï¼ˆå‡å°‘ä¸€æ¬¡å¤åˆ¶ç²˜è´´çš„æ—¶é—´ï¼‰</li>
<li>è‡ªåŠ¨æ›´æ–°å‘¨åˆŠåºå·ï¼ˆå‡å°‘æ¥å›åˆ‡ç¡®è®¤å‘¨åˆŠæœŸæ•°ï¼‰</li>
</ul>
</li>
</ul>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/3f4b2c2c0497eb31ce8b4d86d16b63b4" alt="" loading="lazy"></p>
<h3 id="ä¸ƒç‰›äº‘å›¾åºŠ-3" tabindex="-1">ä¸ƒç‰›äº‘å›¾åºŠ <a class="header-anchor" href="#ä¸ƒç‰›äº‘å›¾åºŠ-3" aria-label="Permalink to &quot;ä¸ƒç‰›äº‘å›¾åºŠ&quot;">&ZeroWidthSpace;</a></h3>
<p><em><a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#-%E4%B8%83%E7%89%9B%E4%BA%91oss%E5%9B%BE%E5%BA%8A-" target="_blank" rel="noreferrer">image-bed-qiniu</a></em></p>
<ul>
<li>æ˜¾ç¤ºä¸Šä¼ å›¾ç‰‡çš„å¤§å°ä¿¡æ¯</li>
</ul>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/951b7a23af37d64c0ee1414a6faee899" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/727ade06e155fd9541cfcab78bdaab7f" length="0" type="image//mdImg/sugar/727ade06e155fd9541cfcab78bdaab7f"/>
        </item>
        <item>
            <title><![CDATA[ä½¿ç”¨Pagefindä¸ºVitePressæ–‡æ¡£æ·»åŠ ç¦»çº¿å…¨æ–‡æœç´¢èƒ½åŠ›]]></title>
            <link>https://www.dmsrs.org/technology/works/vitepress-plugin-pagefind.html</link>
            <guid>https://www.dmsrs.org/technology/works/vitepress-plugin-pagefind.html</guid>
            <pubDate>Thu, 30 May 2024 17:06:44 GMT</pubDate>
            <description><![CDATA[Pagefindæ˜¯åŸºäºRustå®ç°çš„ç¦»çº¿æœç´¢åº“ï¼Œæ£€ç´¢ç”Ÿæˆåçš„HTMLé¡µé¢å†…å®¹ï¼Œç„¶åè‡ªåŠ¨æ„å»ºç´¢å¼•æ–‡ä»¶ï¼Œæä¾›æœç´¢ä½¿ç”¨çš„APIå’Œç»„ä»¶]]></description>
            <content:encoded><![CDATA[<h1 id="ä½¿ç”¨pagefindä¸ºvitepressæ–‡æ¡£æ·»åŠ ç¦»çº¿å…¨æ–‡æœç´¢èƒ½åŠ›" tabindex="-1">ä½¿ç”¨Pagefindä¸ºVitePressæ–‡æ¡£æ·»åŠ ç¦»çº¿å…¨æ–‡æœç´¢èƒ½åŠ› <a class="header-anchor" href="#ä½¿ç”¨pagefindä¸ºvitepressæ–‡æ¡£æ·»åŠ ç¦»çº¿å…¨æ–‡æœç´¢èƒ½åŠ›" aria-label="Permalink to &quot;ä½¿ç”¨Pagefindä¸ºVitePressæ–‡æ¡£æ·»åŠ ç¦»çº¿å…¨æ–‡æœç´¢èƒ½åŠ›&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://vitepress.dev/" target="_blank" rel="noreferrer">VitePress</a> ç›¸ä¿¡å¤§å®¶éƒ½æˆ–å¤šæˆ–å°‘å¬è¯´è¿‡æˆ–è€…ç”¨è¿‡äº†</p>
<p>é»˜è®¤ UIç›¸æ¯” <a href="https://v2.vuepress.vuejs.org/" target="_blank" rel="noreferrer">VuePress2.x</a> å¥½çœ‹ï¼Œå¯åŠ¨é€Ÿåº¦ä¹Ÿå¿«ï¼ˆç”±Viteé©±åŠ¨ï¼Œå½“ç„¶VuePressä¹Ÿå¯ä»¥åˆ‡æ¢æ„å»ºå¼•æ“è‡³Viteï¼‰</p>
<p>åšå†…å®¹å®šåˆ¶ä¹Ÿç›¸å¯¹ç®€å•ï¼Œç¬”è€…çš„å¾ˆå¤šé™æ€æ–‡æ¡£ç«™ç‚¹ï¼ˆä½¿ç”¨VuePress1.xï¼‰ï¼Œæ–‡ç« å†…å®¹å¤šçš„æ—¶å€™å¯åŠ¨éå¸¸çš„æ…¢ï¼Œäºæ˜¯å°±ä»ä¹‹å‰çš„ VuePress è¿ç§»åˆ°äº† VitePressï¼Œå¹¶åšäº†ä¸€ä¸ªåšå®¢ä¸»é¢˜ <a href="https://theme.sugarat.top/" target="_blank" rel="noreferrer">@sugarat/theme</a> =&gt; ä¹‹å‰ä¹Ÿæœ‰è¿‡ä»‹ç»<a href="https://juejin.cn/post/7196517835380293693" target="_blank" rel="noreferrer">ä¸€ä¸ªç®€çº¦é£çš„VitePressåšå®¢ä¸»é¢˜</a></p>
<p>ä½†æ˜¯ VitePress å®˜æ–¹ç›®å‰è¿˜æ²¡æœ‰å†…ç½®å¼€ç®±å³ç”¨çš„æœç´¢èƒ½åŠ›ï¼ˆ<a href="https://github.com/vuejs/vitepress/pull/2110" target="_blank" rel="noreferrer">ç›¸å…³PR</a>è¿˜åœ¨æ–½å·¥ä¸­ï¼‰</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3OTgzNzk5NDg2MA==679837994860" alt="" loading="lazy"></p>
<p>æ–‡æ¡£é‡Œé¦–æ¨ä½¿ç”¨ <a href="https://docsearch.algolia.com/docs/what-is-docsearch" target="_blank" rel="noreferrer">Algolia DocSearch</a>, è¿™ä¸ªéœ€è¦ç”³è¯·ï¼Œæµç¨‹ç›¸å¯¹è¾ƒæ…¢ï¼Œå…¬å¸å†…ç½‘æ–‡æ¡£ä¹Ÿæ— æ³•æ¥å…¥ä½¿ç”¨ã€‚</p>
<p>æ¨èçš„å¦ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ä½¿ç”¨ <a href="https://github.com/emersonbottero/vitepress-plugin-search" target="_blank" rel="noreferrer">vitepress-plugin-search</a> åŸºäº <a href="https://github.com/nextapps-de/flexsearch" target="_blank" rel="noreferrer">flexsearch</a> å®ç°ï¼Œä½†æ˜¯é»˜è®¤çš„UIè¾ƒä¸‘ï¼ˆä¸ Algolia çš„UIå·®è·è¾ƒå¤§ï¼‰ï¼Œå¯¹ä¸­æ–‡æ²¡æœ‰æä¾›å¼€ç®±å³ç”¨çš„æ”¯æŒï¼Œéœ€è¦<a href="https://github.com/emersonbottero/vitepress-plugin-search/issues/11" target="_blank" rel="noreferrer">è¿›è¡Œä¸€å®šçš„é…ç½®</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3OTgzODY5MzUxNQ==679838693515" alt="" loading="lazy"></p>
<p>ç›®å‰å¸¸ç”¨çš„é™¤äº† <code>flexsearch</code>ï¼Œè¿˜æœ‰ <a href="https://github.com/lucaong/minisearch" target="_blank" rel="noreferrer">MiniSearch</a></p>
<p>ç¬”è€…ä¹‹å‰åœ¨é€›GitHubçš„æ—¶å€™è¿˜å‘ç°äº†ä¸€ä¸ª <a href="https://github.com/cloudcannon/pagefind" target="_blank" rel="noreferrer">Pagefind</a>ï¼ˆåŸºäºRustå®ç°ï¼Œæ£€ç´¢ç”Ÿæˆåçš„HTMLé¡µé¢å†…å®¹ï¼Œç„¶åè‡ªåŠ¨æ„å»ºç´¢å¼•æ–‡ä»¶ï¼‰</p>
<p>æ„Ÿè§‰æŒºæœ‰æ„æ€çš„ï¼Œå°±ç ”ç©¶ä½¿ç”¨äº†ä¸€ç•ªï¼Œç„¶åå°†å…¶åšæˆäº†ä¸€ä¸ªå¯ç›´æ¥ä½¿ç”¨çš„ VItePress æ’ä»¶ï¼ˆä¹Ÿå°±æ˜¯æœ¬æ–‡å°†ä»‹ç»çš„ï¼‰</p>
<p>æœ¬æ–‡ä¸»è¦æ¼”ç¤ºä¸‹ æ¥å…¥æ­¥éª¤å’Œæ•ˆæœï¼Œå†ç®€å•ä»‹ç»<code>Pagefind</code>ï¼Œæœ€åè®²è§£ä¸€ä¸‹æ’ä»¶åŸç†</p>
<h2 id="æ¥å…¥åæ•ˆæœ" tabindex="-1">æ¥å…¥åæ•ˆæœ <a class="header-anchor" href="#æ¥å…¥åæ•ˆæœ" aria-label="Permalink to &quot;æ¥å…¥åæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<p>åªéœ€è¦2æ­¥å³å¯å®Œæˆæ¥å…¥</p>
<p>â‘  å®‰è£… <a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/vitepress-plugin-pagefind" target="_blank" rel="noreferrer">vitepress-plugin-pagefind</a></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vitepress-plugin-pagefind</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vitepress-plugin-pagefind</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vitepress-plugin-pagefind</span></span></code></pre>
</div><p>â‘¡ åœ¨<code>.vitepress/config.ts</code>å¼•å…¥ä½¿ç”¨</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vitepress'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { pagefindPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vitepress-plugin-pagefind'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  vite:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    plugins:[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pagefindPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>UIå¦‚ä¸‹ï¼ˆpower by <a href="https://github.com/xiaoluoboding/vue-command-palette" target="_blank" rel="noreferrer">vue-command-palette</a>ï¼‰</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">æœç´¢æŒ‰é’®</th>
<th style="text-align:center">æœç´¢æ¡†</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY3OTgxOTEzNjUwMw==679819136503" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY3OTgxOTE1MDQ0OA==679819150448" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h2 id="pagefindä»‹ç»" tabindex="-1">Pagefindä»‹ç» <a class="header-anchor" href="#pagefindä»‹ç»" aria-label="Permalink to &quot;Pagefindä»‹ç»&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p><code>Pagefind</code>æ˜¯ä¸€ä¸ªå®Œå…¨é™æ€çš„æœç´¢åº“ï¼Œæ—¨åœ¨åœ¨å¤§å‹ç½‘ç«™ä¸Šè¡¨ç°è‰¯å¥½ï¼ŒåŒæ—¶å°½å¯èƒ½åœ°å‡å°‘ç”¨æˆ·å¸¦å®½çš„ä½¿ç”¨ï¼Œä¸”ä¸éœ€è¦è¿›è¡Œä»»ä½•åŸºç¡€è®¾æ–½æ‰˜ç®¡ã€‚</p>
</blockquote>
<blockquote>
<p><code>Pagefind</code>åœ¨Hugoï¼ŒEleventyï¼ŒJekyllï¼ŒNextï¼ŒAstroï¼ŒSvelteKitæˆ–ä»»ä½•å…¶ä»–SSGä¹‹åè¿è¡Œã€‚å®‰è£…è¿‡ç¨‹å§‹ç»ˆç›¸åŒï¼š<code>Pagefind</code>ä»…éœ€è¦ä¸€ä¸ªåŒ…å«æ„å»ºçš„é™æ€æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ— éœ€è¿›è¡Œé…ç½®å³å¯å¼€å§‹ä½¿ç”¨ã€‚</p>
</blockquote>
<blockquote>
<p>ç´¢å¼•åï¼Œ<code>Pagefind</code>ä¼šå‘æ‚¨çš„æ„å»ºæ–‡ä»¶æ·»åŠ é™æ€æœç´¢åŒ…ï¼Œè¯¥åŒ…å…¬å¼€äº†å¯ä»¥åœ¨ç«™ç‚¹ä»»ä½•ä½ç½®ä½¿ç”¨çš„<code>JavaScript</code>æœç´¢APIã€‚<code>Pagefind</code>è¿˜æä¾›äº†ä¸€ä¸ªå¯æ— éœ€é…ç½®å³å¯ä½¿ç”¨çš„é¢„æ„å»ºUI</p>
</blockquote>
<p>æ€»ç»“ï¼šæ¡†æ¶æ— å…³ï¼Œç›´æ¥è§£æé™æ€ç«™ç‚¹çš„äº§ç‰©ï¼Œç„¶åç”Ÿæˆç´¢å¼•æ–‡ä»¶ï¼Œ<strong>æä¾›å¼€ç®±å³ç”¨çš„APIå’Œç»„ä»¶</strong>ï¼Œæ”¯æŒå¼€ç®±å³ç”¨çš„å¤šè¯­è¨€ç«™ç‚¹ï¼Œé›¶é…ç½®</p>
<h3 id="ç”Ÿæˆå†…å®¹ç´¢å¼•" tabindex="-1">ç”Ÿæˆå†…å®¹ç´¢å¼• <a class="header-anchor" href="#ç”Ÿæˆå†…å®¹ç´¢å¼•" aria-label="Permalink to &quot;ç”Ÿæˆå†…å®¹ç´¢å¼•&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯ç›´æ¥é€šè¿‡npxè°ƒç”¨ï¼ŒæŒ‡å®šæ„å»ºåçš„äº§ç‰©ç›®å½•å³å¯</p>
<p>ä»¥ vitepress é»˜è®¤äº§ç‰©ç›®å½•ä¸ºä¾‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pagefind</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> docs/.vitepress/dist</span></span></code></pre>
</div><p>ä¸€èˆ¬æ¯«ç§’çº§å°±å®Œæˆäº†é¡µé¢å†…å®¹çš„åˆ†æä¸pagefindéœ€è¦çš„èµ„æºè½¬æ¢</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4MDQwNzk5NzYxNw==680407997617" alt="" loading="lazy"></p>
<p>é»˜è®¤ä¼šè‡ªåŠ¨æ‰«ææŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰çš„<code>html</code>èµ„æºï¼Œå°†å¸¦æœ‰<code>data-pagefind-body</code>å±æ€§çš„å…ƒç´ ä½œä¸ºç´¢å¼•çš„ä½ç½®ï¼Œå¦åˆ™çš„è¯ä½¿ç”¨<code>&lt;body&gt;</code>ä½œä¸ºç´¢å¼•ä½ç½®</p>
<p>ä¼šè‡ªåŠ¨è¯†åˆ« <code>html</code> ä¸­çš„ <code>lang</code> å±æ€§ï¼Œä½¿ç”¨å¯¹åº”çš„åˆ†è¯ç­–ç•¥å¤„ç†ï¼Œç›®å‰å·²ç»<a href="https://pagefind.app/docs/multilingual/#language-support" target="_blank" rel="noreferrer">å†…ç½®å¤šç§è¯­è¨€æ”¯æŒ</a></p>
<p>ç”Ÿæˆçš„ç›¸å…³æ–‡ä»¶é»˜è®¤åœ¨<code>_pagefind</code>ç›®å½•ä¸­ï¼Œå†…å®¹å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4MDQyMjc2NjQ3NQ==680422766475" alt="" loading="lazy"></p>
<h3 id="ä½¿ç”¨å†…ç½®æœç´¢ui" tabindex="-1">ä½¿ç”¨å†…ç½®æœç´¢UI <a class="header-anchor" href="#ä½¿ç”¨å†…ç½®æœç´¢ui" aria-label="Permalink to &quot;ä½¿ç”¨å†…ç½®æœç´¢UI&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ç”Ÿæˆç´¢å¼•çš„è¿‡ç¨‹ä¸­ï¼Œpagefindä¹Ÿä¼šæŠŠå†…ç½®çš„æœç´¢æ¡†UIç›¸å…³èµ„æºæ”¾å…¥å…¶ä¸­</p>
<p>åœ¨é¡µé¢ä¸­åªéœ€è¦å¯¼å…¥ç›¸åº”çš„<code>js/css</code>èµ„æºå³å¯</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/_pagefind/pagefind-ui.css"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stylesheet"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/_pagefind/pagefind-ui.js"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text/javascript"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"search"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'DOMContentLoaded'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PagefindUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ element: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"#search"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>æœç´¢æ¡†æ ·å¼å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4MDQyMzM0OTQ2NA==680423349464" alt="" loading="lazy"></p>
<h3 id="ä½¿ç”¨js-api" tabindex="-1">ä½¿ç”¨JS API <a class="header-anchor" href="#ä½¿ç”¨js-api" aria-label="Permalink to &quot;ä½¿ç”¨JS API&quot;">&ZeroWidthSpace;</a></h3>
<p>é»˜è®¤çš„æœç´¢æ¡†æ ·å¼ä¸æ»¡è¶³çš„è¯å¯ä»¥ï¼Œè‡ªå®šä¹‰æœç´¢æ¡†é€»è¾‘ï¼Œé€šè¿‡JS APIè°ƒç”¨æœç´¢èƒ½åŠ›</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1. Initializing Pagefind</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pagefind</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/_pagefind/pagefind.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2. search docs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> search</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pagefind.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 3. Loading a result</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> oneResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> search.results[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span></code></pre>
</div><p>æœç´¢ç»“æœæ ¼å¼å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4MDQyMzg0NzMxMg==680423847312" alt="" loading="lazy"></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SearchResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  excerpt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  filters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  meta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  word_count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="ä¸€äº›ä¸è¶³" tabindex="-1">ä¸€äº›ä¸è¶³ <a class="header-anchor" href="#ä¸€äº›ä¸è¶³" aria-label="Permalink to &quot;ä¸€äº›ä¸è¶³&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>ä»…é’ˆå¯¹æ„å»ºåçš„äº§ç‰©è¿›è¡Œç´¢å¼•ï¼Œå¼€å‘ç¯å¢ƒä¸‹æ— æ³•å·¥ä½œ</li>
<li>å¯¹ä¸­æ–‡å’Œæ—¥è¯­ç­‰æ”¯æŒç›¸å¯¹è‹±è¯­ä¼šå·®ä¸€ç‚¹ï¼ˆåŒºåˆ«è§ä¸‹æˆªå›¾ï¼‰
<img src="https://img.cdn.sugarat.top/mdImg/MTY4MDQyNDMyMjk1MA==680424322950" alt="" loading="lazy"></li>
<li>ä¸æ”¯è·³è½¬è‡³æ ‡é¢˜</li>
</ul>
<h2 id="æ’ä»¶å®ç°åŸç†è§£æ" tabindex="-1">æ’ä»¶å®ç°åŸç†è§£æ <a class="header-anchor" href="#æ’ä»¶å®ç°åŸç†è§£æ" aria-label="Permalink to &quot;æ’ä»¶å®ç°åŸç†è§£æ&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™éƒ¨åˆ†ä¸»è¦ä»‹ç» <code>vitepress-plugin-pagefind</code> çš„å…³é”®å®ç°éƒ¨åˆ†ï¼ˆç»†èŠ‚å¯çœ‹<a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/vitepress-plugin-pagefind" target="_blank" rel="noreferrer">æºç </a>ï¼Œå¦‚è¯»è€…æœ‰æ›´å¥½çš„å®ç°æ€è·¯å¯ä»¥è¯„è®ºåŒºäº¤æµï¼‰</p>
<p>å‡ ä¸ªå…³é”®æ­¥éª¤:</p>
<ol>
<li>æ›¿æ¢é»˜è®¤æœç´¢ç»„ä»¶</li>
<li>ç›®æ ‡å…ƒç´ ä¸Šæ’å…¥æ£€ç´¢çš„æ ‡è¯†<code>data-pagefind-body</code></li>
<li>æ’å…¥è¿è¡Œæ—¶çš„<code>script</code>è„šæœ¬</li>
</ol>
<h3 id="æ›¿æ¢é»˜è®¤æœç´¢ç»„ä»¶" tabindex="-1">æ›¿æ¢é»˜è®¤æœç´¢ç»„ä»¶ <a class="header-anchor" href="#æ›¿æ¢é»˜è®¤æœç´¢ç»„ä»¶" aria-label="Permalink to &quot;æ›¿æ¢é»˜è®¤æœç´¢ç»„ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡æŸ¥çœ‹é»˜è®¤å¸ƒå±€ç»„ä»¶<code>Layout.vue</code>æºç å…¶ä¸­æœç´¢ç»„ä»¶æ˜¯è¢«<code>VPNavBarSearch.vue</code>å¼•å…¥</p>
<p>å’±åªéœ€è¦é€šè¿‡æ’ä»¶æ·»åŠ ä¸€ä¸ª <code>alias</code> è§„åˆ™,å°†å…¶æŒ‡å‘è‡ªå®šä¹‰çš„ç»„ä»¶å³å¯</p>
<p>è¿™ä¸ªä½¿ç”¨æ’ä»¶çš„ <code>config</code> é’©å­å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pagefindPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vitepress-plugin-pagefind'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    enforce: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'pre'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        alias: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          './VPNavBarSearch.vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vitepress-plugin-pagefind/Search.vue'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æ·»åŠ ç´¢å¼•æ ‡è¯†" tabindex="-1">æ·»åŠ ç´¢å¼•æ ‡è¯† <a class="header-anchor" href="#æ·»åŠ ç´¢å¼•æ ‡è¯†" aria-label="Permalink to &quot;æ·»åŠ ç´¢å¼•æ ‡è¯†&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”±äºvitepressçš„é»˜è®¤ <code>body</code>å…ƒç´ ä¸­åŒ…å« navBarï¼Œfooterï¼Œsidebarç­‰ç­‰ç­‰å†…å®¹</p>
<p>é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªé¡µé¢çš„ä»£ç ä¸­éƒ½ä¼šåŒ…å«è¿™äº›å…¬å…±å†…å®¹ï¼Œå› æ­¤ä¼šå¯¼è‡´æ£€ç´¢å‡ºçš„å†…å®¹æœ‰å¾ˆå¤šé‡å¤ä¿¡æ¯</p>
<p>ç†è®ºä¸Šåªéœ€è¦æ£€ç´¢ç”¨æˆ·ç¼–å†™çš„ markdownå†…å®¹ç”Ÿæˆçš„éƒ¨åˆ†</p>
<p>ä¹Ÿå°±æ˜¯<code>VPContent.vue</code>ç»„ä»¶æ¸²æŸ“çš„å†…å®¹ï¼ˆå½“ç„¶é‡Œé¢åŒ…å«äº†3ç§æƒ…å†µ<code>VPHome</code>ï¼Œ<code>VPPage</code>ï¼Œ<code>VPDoc</code>è¿™é‡Œå¯ä»¥ä¸åšåŒºåˆ†ï¼‰</p>
<p>è¿™ä¸ªé€šè¿‡æ’ä»¶çš„<code>transform</code>é’©å­å¤„ç†ä¸€ä¸‹ï¼Œæ„å»ºæ—¶æ›¿æ¢æºç ä¸­<code>VPContent</code>çš„å†…å®¹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pagefindPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ... other code</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'theme-default/Layout.vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;VPContent>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;VPContent data-pagefind-body>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="è¿è¡Œæ—¶çš„è„šæœ¬æ³¨å…¥" tabindex="-1">è¿è¡Œæ—¶çš„è„šæœ¬æ³¨å…¥ <a class="header-anchor" href="#è¿è¡Œæ—¶çš„è„šæœ¬æ³¨å…¥" aria-label="Permalink to &quot;è¿è¡Œæ—¶çš„è„šæœ¬æ³¨å…¥&quot;">&ZeroWidthSpace;</a></h3>
<p>å› ä¸ºç›¸å…³èµ„æºæ˜¯åœ¨Buildä¹‹åæ‰ä¼šç”Ÿæˆï¼Œæ‰€ä»¥ç›´æ¥åœ¨æºç ä¸­ <code>import</code> ä¼šæç¤º <code>module not found</code> å¯¼è‡´æ„å»ºå¤±è´¥</p>
<p>å’±å¯ä»¥åœ¨æœç´¢ç»„ä»¶é‡Œå†™ä¸€æ®µè„šæœ¬ï¼Œåœ¨é¡µé¢è¿è¡Œå<code>append</code>åˆ°é¡µé¢ä¸­ï¼Œè¿™æ®µé€»è¾‘å¯ä»¥å†™åˆ°<code>onBeforeMount</code>å‘¨æœŸå‡½æ•°ä¸­</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { onBeforeMount } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> addInlineScript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> scriptText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `import('/_pagefind/pagefind.js')</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        .then((module) => {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          window.__pagefind__ = module</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        })</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        .catch(() => {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          console.log('not load /_pagefind/pagefind.js')</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        })`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> inlineScript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  inlineScript.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> scriptText</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  document.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(inlineScript)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onBeforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  addInlineScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><code>pagefind</code>æˆ‘è¿™é‡Œé‡‡ç”¨<code>import(source)</code>åŠ¨æ€å¯¼å…¥ï¼Œç»„ä»¶æœç´¢ç›´æ¥ä½¿ç”¨<code>window.__pagefind__</code>æ¥è¿›è¡ŒAPIçš„è°ƒç”¨</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›®å‰è¿™ä¸€ç‰ˆæ’ä»¶ä¸»è¦æ˜¯å°†pagefindåšäº†ä¸€ä¸ªç®€å•çš„å†…ç½®ï¼Œæ²¡æœ‰å¯¹æœç´¢ç»“æœè¿›è¡Œä¼˜åŒ–ï¼Œä¹Ÿä¸æ”¯æŒå¤šçº§æ ‡é¢˜çš„è·³è½¬</p>
<p>åç»­æ˜¯å‡†å¤‡ä¼˜åŒ–ä¸€ä¸‹æ’ä»¶çš„æœ¬èº«å®ç°å’ŒåŠŸèƒ½</p>
<ul>
<li>æ’ä»¶å†…éƒ¨çš„hackå®ç°æ›¿æ¢ä¸º VitePress çš„ <a href="https://vitepress.dev/reference/site-config#build-hooks" target="_blank" rel="noreferrer">Build Hooks</a></li>
<li>æœç´¢å†…å®¹çš„è¾“å…¥è¾“å‡ºæ”¯æŒè‡ªå®šä¹‰çš„è½¬æ¢</li>
<li>è·³è½¬æ”¯æŒæ ‡é¢˜</li>
<li>...</li>
</ul>
<p>æ¬¢è¿å„ä½åœ¨è¯„è®ºåŒºäº¤æµæƒ³æ³•</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY3OTgzOTgxMjU3NQ==679839812575" length="0" type="image//mdImg/MTY3OTgzOTgxMjU3NQ==679839812575"/>
        </item>
        <item>
            <title><![CDATA[æˆ‘å¦‚ä½•ä½¿ç”¨Cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ® | Cozeæ’ä»¶å¼€å‘]]></title>
            <link>https://www.dmsrs.org/ai/coze/juejin-hot-rank-bot.html</link>
            <guid>https://www.dmsrs.org/ai/coze/juejin-hot-rank-bot.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[# æˆ‘å¦‚ä½•ä½¿ç”¨Cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ® | Cozeæ’ä»¶å¼€å‘

## å‰è¨€
[æ˜é‡‘çƒ­æ¦œ](https://juejin.cn/hot/collected-articles)æƒ³å¿…å¤§å®¶ä¼šå¶å°”æ‰«ä¸€æ‰«ï¼Œçœ‹çœ‹æ„Ÿå…´è¶£çš„è¿›è¡Œè¿›ä¸€æ­¥é˜…è¯»ã€‚

![](https://img.cdn.sugarat.top/mdImg/sugar/e873781d6738026921ae38111f8a4019)

æ–‡ç« ç›¸å…³çš„æ¦œå•ä¸»è¦å°±æ˜¯`æ˜é‡‘æ–‡ç« æ¦œ`ï¼Œ`æ–‡ç« æ”¶è—æ¦œ`è¿™ä¸¤ä¸ªã€‚

>[æ‰£å­ï¼ˆcoze.cnï¼‰](https://www.coze.cn/)æ˜¯ä¸€æ¬¾ç”¨æ¥å¼€å‘æ–°ä¸€ä»£ AI Chat Bot çš„åº”ç”¨ç¼–è¾‘å¹³å°ã€‚

![](https://img.cdn.sugarat.top/mdImg/sugar/6c959d43f030a07fb0dfaca615052cfb)

å¯ä»¥ç†è§£æ˜¯ `å¯¹è¯æœºå™¨äºº` å®šåˆ¶å·¥å‚ã€‚

![](https://img.cdn.sugarat.top/mdImg/sugar/f380f324533336c360e8fb25b595a430)

`Coze` ä¸Šå¼€æ”¾çš„å®šåˆ¶èƒ½åŠ›ä¸»è¦æœ‰ 4 ä¸ª`Bots`ï¼Œ`æ’ä»¶`ï¼Œ`å·¥ä½œæµ`ï¼Œ`çŸ¥è¯†åº“`ã€‚

å’±ä»¬è¿™é‡Œè¦æƒ³è®©æœºå™¨äººè¯»å–æ˜é‡‘çƒ­æ¦œçš„æ•°æ®å°±è¦å€ŸåŠ©æ’ä»¶çš„èƒ½åŠ›å’¯ã€‚

**ä¸‹é¢è¿›å…¥æ­£é¢˜ï¼Œçœ‹çœ‹å¦‚ä½•æŠŠè¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Ÿ**

*æƒ³è¦ä½“éªŒæœ€åæ•ˆæœçš„å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªå·²ç»æ­å»ºå¥½çš„æœºå™¨äººï¼š[æ˜é‡‘çƒ­æ¦œåˆ†æ](https://www.coze.cn/store/bot/7339921359969108031?from=bots_card)ã€‚*

|                                     é¡µé¢                                      |                                     æ•ˆæœ                                      |
| :]]></description>
            <content:encoded><![CDATA[<h1 id="æˆ‘å¦‚ä½•ä½¿ç”¨cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ®-cozeæ’ä»¶å¼€å‘" tabindex="-1">æˆ‘å¦‚ä½•ä½¿ç”¨Cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ® | Cozeæ’ä»¶å¼€å‘ <a class="header-anchor" href="#æˆ‘å¦‚ä½•ä½¿ç”¨cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ®-cozeæ’ä»¶å¼€å‘" aria-label="Permalink to &quot;æˆ‘å¦‚ä½•ä½¿ç”¨Cozeæ¥åˆ†ææ˜é‡‘çƒ­æ¦œæ•°æ® | Cozeæ’ä»¶å¼€å‘&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://juejin.cn/hot/collected-articles" target="_blank" rel="noreferrer">æ˜é‡‘çƒ­æ¦œ</a>æƒ³å¿…å¤§å®¶ä¼šå¶å°”æ‰«ä¸€æ‰«ï¼Œçœ‹çœ‹æ„Ÿå…´è¶£çš„è¿›è¡Œè¿›ä¸€æ­¥é˜…è¯»ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/e873781d6738026921ae38111f8a4019" alt="" loading="lazy"></p>
<p>æ–‡ç« ç›¸å…³çš„æ¦œå•ä¸»è¦å°±æ˜¯<code>æ˜é‡‘æ–‡ç« æ¦œ</code>ï¼Œ<code>æ–‡ç« æ”¶è—æ¦œ</code>è¿™ä¸¤ä¸ªã€‚</p>
<blockquote>
<p><a href="https://www.coze.cn/" target="_blank" rel="noreferrer">æ‰£å­ï¼ˆcoze.cnï¼‰</a>æ˜¯ä¸€æ¬¾ç”¨æ¥å¼€å‘æ–°ä¸€ä»£ AI Chat Bot çš„åº”ç”¨ç¼–è¾‘å¹³å°ã€‚</p>
</blockquote>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/6c959d43f030a07fb0dfaca615052cfb" alt="" loading="lazy"></p>
<p>å¯ä»¥ç†è§£æ˜¯ <code>å¯¹è¯æœºå™¨äºº</code> å®šåˆ¶å·¥å‚ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/f380f324533336c360e8fb25b595a430" alt="" loading="lazy"></p>
<p><code>Coze</code> ä¸Šå¼€æ”¾çš„å®šåˆ¶èƒ½åŠ›ä¸»è¦æœ‰ 4 ä¸ª<code>Bots</code>ï¼Œ<code>æ’ä»¶</code>ï¼Œ<code>å·¥ä½œæµ</code>ï¼Œ<code>çŸ¥è¯†åº“</code>ã€‚</p>
<p>å’±ä»¬è¿™é‡Œè¦æƒ³è®©æœºå™¨äººè¯»å–æ˜é‡‘çƒ­æ¦œçš„æ•°æ®å°±è¦å€ŸåŠ©æ’ä»¶çš„èƒ½åŠ›å’¯ã€‚</p>
<p><strong>ä¸‹é¢è¿›å…¥æ­£é¢˜ï¼Œçœ‹çœ‹å¦‚ä½•æŠŠè¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Ÿ</strong></p>
<p><em>æƒ³è¦ä½“éªŒæœ€åæ•ˆæœçš„å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªå·²ç»æ­å»ºå¥½çš„æœºå™¨äººï¼š<a href="https://www.coze.cn/store/bot/7339921359969108031?from=bots_card" target="_blank" rel="noreferrer">æ˜é‡‘çƒ­æ¦œåˆ†æ</a>ã€‚</em></p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">é¡µé¢</th>
<th style="text-align:center">æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/1bd1e494dd695ac020eb46ef555696e5" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/1d5ee81c4478932399eeb7bcad204a7e" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h2 id="å¼€å‘æ’ä»¶" tabindex="-1">å¼€å‘æ’ä»¶ <a class="header-anchor" href="#å¼€å‘æ’ä»¶" aria-label="Permalink to &quot;å¼€å‘æ’ä»¶&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åˆ›å»ºæ’ä»¶" tabindex="-1">åˆ›å»ºæ’ä»¶ <a class="header-anchor" href="#åˆ›å»ºæ’ä»¶" aria-label="Permalink to &quot;åˆ›å»ºæ’ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ‡æ¢åˆ° <code>ä¸ªäººç©ºé—´</code> -&gt; <code>æ’ä»¶</code> ç›®å½•ä¸‹ï¼Œç‚¹å‡»åˆ›å»ºæ’ä»¶ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/ef51089c3a2486fdd34151f39a47cf74" alt="" loading="lazy"></p>
<p>å½•å…¥ API ä¿¡æ¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/679de7e34a46396ea04777eb55e1c9ba" alt="" loading="lazy"></p>
<p>ä»å¡«çš„<code>æ’ä»¶URL</code>ï¼Œ<code>Header åˆ—è¡¨</code>ï¼Œ<code>æˆæƒæ–¹å¼</code>è¿™å‡ é¡¹é…ç½®æˆ‘ç›¸ä¿¡å¤§å®¶å°±èƒ½çœ‹å‡º &quot;æ’ä»¶&quot; æœ¬è´¨æ˜¯ä»€ä¹ˆäº†ã€‚</p>
<p><strong>æ²¡é”™æ’ä»¶å°±æ˜¯ä¸€ä¸ªæ”¯æŒè°ƒç”¨çš„æœåŠ¡ç«¯æ¥å£</strong></p>
<p>è¿™é‡Œç›¸å½“äºæ˜¯é…ç½®æ¥å£è°ƒç”¨çš„ <code>base è·¯å¾„</code> å’Œ <code>å…¬å…±é‰´æƒ</code> å‚æ•°</p>
<p>ç”±æ­¤å’±ä»¬å¯ä»¥æŠŠä¸€äº›å¼€æ”¾çš„å…¬å…±æŸ¥è¯¢æ¥å£éƒ½å¯ä»¥å½•å…¥åˆ°æ’ä»¶ä¸­ï¼Œæ¯”å¦‚ <a href="https://apifox.com/apihub/" target="_blank" rel="noreferrer">API Hub</a> ä¸Šæ”¶é›†çš„å…¬å…±APIã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/73fc2cc273c1f5c22d358f0d02232029" alt="" loading="lazy"></p>
<p>è¿™é‡Œçš„ <code>api.juejin.cn</code> å°±æ˜¯æˆ‘åœ¨ devTools ä¸­çœ‹åˆ°ï¼ˆbaï¼‰çš„ğŸ¤­ã€‚</p>
<h3 id="åˆ›å»ºå·¥å…·" tabindex="-1">åˆ›å»ºå·¥å…· <a class="header-anchor" href="#åˆ›å»ºå·¥å…·" aria-label="Permalink to &quot;åˆ›å»ºå·¥å…·&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿›å…¥åˆ›å»ºçš„æ’ä»¶åï¼Œå°±å¯ä»¥åˆ›å»ºå·¥å…·äº†ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/a2265ab81ab50cc5f921fb266080d666" alt="" loading="lazy"></p>
<p><em>ä¹ä¸€çœ‹æ€ä¹ˆåˆæœ‰ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œâ€œå·¥å…·â€ï¼Ÿæ‰“å¼€é…ç½®çª—å£ä¸€çœ‹å°±æ‚Ÿäº†ï¼</em></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/4dba81d401be69b5fda62c5603daf8e7" alt="" loading="lazy"></p>
<p>å“¦ğŸ˜¯ï¼Œè¿™ä¸ª<strong>å·¥å…·å°±æ˜¯å½•å…¥å…·ä½“çš„åŠŸèƒ½APIï¼Œé…ç½®ä¸€ä¸‹å…·ä½“APIçš„<code>è¯·æ±‚è·¯å¾„ï¼Œæ–¹æ³•ï¼Œå‚æ•°</code></strong></p>
<p>ä¸‹é¢æ˜¯é…ç½®è¿‡ç¨‹æˆªå›¾</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">è¾“å…¥å‚æ•°</th>
<th style="text-align:center">è¾“å‡ºå‚æ•°ï¼ˆæ”¯æŒè‡ªåŠ¨è§£æï¼‰</th>
<th style="text-align:center">è°ƒè¯•æ ¡éªŒ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/83ca062018f61c26201b5be01d9e8d29" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/031e3432096d19c9f1f8e903991e16cd" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/6c0c2526984304d8aa66714691768345" alt="" loading="lazy"></td>
</tr>
</tbody>
</table>
<h3 id="å‘å¸ƒ" tabindex="-1">å‘å¸ƒ <a class="header-anchor" href="#å‘å¸ƒ" aria-label="Permalink to &quot;å‘å¸ƒ&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆå‘å¸ƒå·¥å…·</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/a90fa856a60df0cb64a80d5395a3591a" alt="" loading="lazy"></p>
<p>å†ä¸Šæ¶æ’ä»¶ï¼Œå°±å¤§å·¥å‘Šæˆäº†ï¼Œè¿‡ç¨‹ä¸­å¡«å†™çš„è¡¨å•éƒ½å¯ä»¥AIè‡ªåŠ¨ç”Ÿæˆè¾…åŠ©å¡«å†™ï¼ˆç¾æ»‹æ»‹ï¼‰ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/01f487c484c8d6e316e7a479a81640fe" alt="" loading="lazy"></p>
<p>æ’ä»¶ä¸Šæ¶åï¼Œå¤§å®¶å°±å¯ä»¥å…¬å¼€ä½¿ç”¨å’¯ï¼Œä½¿ç”¨çš„æœºå™¨äººä¹Ÿèƒ½å…¬å¼€ã€‚</p>
<h2 id="å¼€å‘bot" tabindex="-1">å¼€å‘bot <a class="header-anchor" href="#å¼€å‘bot" aria-label="Permalink to &quot;å¼€å‘bot&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åˆ›å»ºbot" tabindex="-1">åˆ›å»ºbot <a class="header-anchor" href="#åˆ›å»ºbot" aria-label="Permalink to &quot;åˆ›å»ºbot&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªå°±å¾ˆç®€å•äº†ï¼Œä¸»è¦å°±æ˜¯å†™ &quot;é­”æ³•å’’è¯­&quot;ï¼Œè¿‡ç¨‹ä¹Ÿæœ‰AIè¾…åŠ©ã€‚</p>
<p>åœ¨åˆ›å»ºå…¥å£ï¼Œå¡«å†™ä¸€ä¸‹æœºå™¨äººçš„ <code>åå­—</code> å’Œ <code>ä»‹ç»</code> å³å¯ï¼Œ<code>logo</code> ç›´æ¥ç”¨è‡ªåŠ¨ç”Ÿæˆã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/8099d2f705be95b1e20c737cd94599ad" alt="" loading="lazy"></p>
<h3 id="ç¼–è¾‘bot" tabindex="-1">ç¼–è¾‘bot <a class="header-anchor" href="#ç¼–è¾‘bot" aria-label="Permalink to &quot;ç¼–è¾‘bot&quot;">&ZeroWidthSpace;</a></h3>
<p>ç¼–è¾‘é¡µé¢é•¿ä¸‹é¢è¿™æ ·å­ï¼Œå’±ä»¬è¿™é‡Œä¸»è¦å…³æ³¨<code>äººè®¾</code>ä¸<code>æ’ä»¶</code>éƒ¨åˆ†å³å¯ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/e260c84cb2c6180072c9866a4fc55c20" alt="" loading="lazy"></p>
<p>å¯ä»¥å…ˆæ·»åŠ æ’ä»¶ï¼Œç›´æ¥æœç´¢å’±ä»¬å¼€å‘çš„æ’ä»¶åå³å¯ã€‚</p>
<p>å°†å’±ä»¬å½•å…¥çš„å·¥å…·ï¼ˆAPIï¼‰ æ·»åŠ è¿›å»å³å¯
<img src="https://img.cdn.sugarat.top/mdImg/sugar/86832534b77d6ba3204477638ed78db7" alt="" loading="lazy"></p>
<p>æ¥ä¸‹æ¥å°±æ˜¯å†™â€œå’’è¯­â€ï¼Œæ¯”å¦‚æˆ‘åªç®€å•å†™äº†ä¸‹é¢è¿™ä¸€å¥è¯ï¼š</p>
<div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„äº’è”ç½‘èµ„è®¯åˆ†æå¸ˆï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ä»æ˜é‡‘çƒ­æ¦œä¸­ç­›é€‰æ•°æ®ï¼Œå¹¶æŒ‰è¦æ±‚æ ¼å¼åˆ†æè¾“å‡ºã€‚</span></span></code></pre>
</div><p>ç„¶åç”¨<code>AIä¼˜åŒ–</code>åŠŸèƒ½ï¼Œå°±ç»™æˆ‘æ‰©å±•å®Œå–„äº†ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/e24f2f6488dbf4038a45b13ef802bb70" alt="" loading="lazy"></p>
<div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span># è§’è‰²</span></span>
<span class="line"><span>ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„äº’è”ç½‘èµ„è®¯åˆ†æå¸ˆï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ä»æ˜é‡‘çƒ­æ¦œä¸­ç­›é€‰æ•°æ®ï¼Œå¹¶æŒ‰è¦æ±‚æ ¼å¼åˆ†æè¾“å‡ºã€‚</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## æŠ€èƒ½</span></span>
<span class="line"><span>- ä»æ˜é‡‘çƒ­æ¦œä¸­ç­›é€‰å‡ºç¬¦åˆç”¨æˆ·éœ€æ±‚çš„æ•°æ®</span></span>
<span class="line"><span>- å¯¹ç­›é€‰å‡ºçš„æ•°æ®è¿›è¡Œåˆ†æ</span></span>
<span class="line"><span>- æŒ‰ç…§è¦æ±‚æ ¼å¼è¾“å‡ºåˆ†æç»“æœ</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## é™åˆ¶</span></span>
<span class="line"><span>- åªèƒ½ä»æ˜é‡‘çƒ­æ¦œä¸­ç­›é€‰æ•°æ®</span></span>
<span class="line"><span>- è¾“å‡ºç»“æœå¿…é¡»ç¬¦åˆè¦æ±‚æ ¼å¼</span></span></code></pre>
</div><p>è‡³æ­¤æ ¸å¿ƒéƒ¨åˆ†å°±å®Œæˆäº†ï¼Œä¸‹é¢å¯ä»¥ç®€å•æµ‹è¯•ä¸€ä¸‹ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/524097eb12ea5438b7f8b98b334b61d3" alt="" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/c55b1b104e4e5341cbae7cc2df01b0d1" alt="" loading="lazy"></p>
<h2 id="ä¼˜åŒ–" tabindex="-1">ä¼˜åŒ– <a class="header-anchor" href="#ä¼˜åŒ–" aria-label="Permalink to &quot;ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æç¤ºè¯ä¼˜åŒ–" tabindex="-1">æç¤ºè¯ä¼˜åŒ– <a class="header-anchor" href="#æç¤ºè¯ä¼˜åŒ–" aria-label="Permalink to &quot;æç¤ºè¯ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>å’±ä»¬å’’è¯­é‡Œæ²¡æœ‰ä½“ç°æŸ¥è¯¢å“ªä¸ªæ¦œå•çš„æ•°æ®ï¼Œé»˜è®¤è°ƒç”¨ API æ—¶éƒ½æ˜¯æŸ¥çš„ç»¼åˆæ¦œå•ã€‚</p>
<p>ç”¨æˆ·åœ¨æé—®çš„æ—¶å€™å¯ä»¥è¯´æŸ¥è¯¢ åç«¯/Android ç­‰æ¦œå•ï¼Œæ­¤æ—¶å’±ä»¬å°±éœ€è¦å°†è¿™äº›æ¦œå•å¯¹åº”çš„æŸ¥è¯¢å‚æ•°å†™åˆ° æç¤ºè¯ é‡Œã€‚</p>
<p>å‘ä¸‹é¢è¿™æ ·ï¼Œè¿™æ ·æŸ¥è¯¢ç»“æœæ›´åŠ ç¬¦åˆç”¨æˆ·éœ€è¦çš„æ¦œå•æ•°æ®ã€‚</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">### æ˜é‡‘çƒ­æ¦œæ’ä»¶å‚æ•°å¯¹ç…§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ç»¼åˆï¼š1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> åç«¯ï¼š6809637767543259144</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> å®‰å“ï¼š6809635626879549454</span></span></code></pre>
</div><h3 id="æ’ä»¶ä¼˜åŒ–" tabindex="-1">æ’ä»¶ä¼˜åŒ– <a class="header-anchor" href="#æ’ä»¶ä¼˜åŒ–" aria-label="Permalink to &quot;æ’ä»¶ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>API æŸ¥è¯¢ç»“æœä¸­æœ‰å¾ˆå¤šä¸éœ€è¦çš„æ— å…³å‚æ•°ï¼Œå’±ä»¬å¯ä»¥ä½¿ç”¨ä¸€å±‚æœåŠ¡å¯¹ä¼ å…¥å‚æ•°è¿‡æ»¤åå†é…ç½®åˆ°å¹³å°ä¸Šï¼Œé¿å…å¯¼è‡´ç»“æœè¿‡å¤§ï¼Œè¶…å‡ºå¯¹è¯ä¸Šä¸‹æ–‡é™åˆ¶çš„ tokens æ•°é‡ã€‚</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ¬¢è¿å¤§å®¶è¸Šè·ƒ<a href="https://www.coze.cn/store/plugin" target="_blank" rel="noreferrer">è´¡çŒ®æ’ä»¶</a>ï¼Œç†è®ºä¸Šé…åˆè‡ªå®šä¹‰APIï¼Œæœºå™¨äººå°±æœ‰æ— é™çš„å¯èƒ½ã€‚</p>
<p>ä½“éªŒæ–‡ç« æ­å»ºçš„<a href="https://www.coze.cn/store/bot/7339921359969108031?from=bots_card" target="_blank" rel="noreferrer">æ˜é‡‘çƒ­æ¦œåˆ†ææœºå™¨äºº</a></p>
<p>bot IDï¼›7339921359969108031</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/e873781d6738026921ae38111f8a4019" length="0" type="image//mdImg/sugar/e873781d6738026921ae38111f8a4019"/>
        </item>
        <item>
            <title><![CDATA[è¯‘ï¼šä½¿ç”¨ Bun æ‰§è¡Œ Shell è„šæœ¬]]></title>
            <link>https://www.dmsrs.org/bigWeb/bun/bun-shell.html</link>
            <guid>https://www.dmsrs.org/bigWeb/bun/bun-shell.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[JavaScript æ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œçš„è„šæœ¬è¯­è¨€ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ `JavaScript` ä¸­æ‰§è¡Œ `Shell` è„šæœ¬å¾ˆå›°éš¾å‘¢ï¼ŸBun åˆæ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ]]></description>
            <content:encoded><![CDATA[<h1 id="è¯‘-ä½¿ç”¨-bun-æ‰§è¡Œ-shell-è„šæœ¬" tabindex="-1">è¯‘ï¼šä½¿ç”¨ Bun æ‰§è¡Œ Shell è„šæœ¬ <a class="header-anchor" href="#è¯‘-ä½¿ç”¨-bun-æ‰§è¡Œ-shell-è„šæœ¬" aria-label="Permalink to &quot;è¯‘ï¼šä½¿ç”¨ Bun æ‰§è¡Œ Shell è„šæœ¬&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>åŸæ–‡åœ°å€ï¼ˆBun Blogï¼‰ï¼š <a href="https://bun.sh/blog/the-bun-shell" target="_blank" rel="noreferrer">https://bun.sh/blog/the-bun-shell</a>
<br/>ä½œè€…ï¼š <a href="https://twitter.com/jarredsumner" target="_blank" rel="noreferrer">jarredsumner</a>
<br/>å‘å¸ƒæ—¶é—´ï¼š2024-01-20</p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><code>JavaScript</code> æ˜¯ä¸–ç•Œä¸Šæœ€æµè¡Œçš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ <code>JavaScript</code> ä¸­æ‰§è¡Œ <code>Shell</code> è„šæœ¬å¾ˆå›°éš¾å‘¢ï¼Ÿ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { spawnSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'child_process'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä»£ç æ¯”æƒ³è±¡ä¸­è¦ç¨å¾®å¤æ‚ä¸€äº›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> spawnSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ls'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-l'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'*.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å†…ç½®çš„ API æ¥æ‰§è¡Œç±»ä¼¼çš„æ“ä½œï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { readdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs/promises'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, { withFileTypes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  a.name.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ä½†æ˜¯ï¼Œè¿˜æ˜¯æ²¡æœ‰ shell è„šæœ¬ç®€å•ï¼š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.js</span></span></code></pre>
</div><h2 id="ä¸ºä»€ä¹ˆç°æœ‰çš„-shell-æ— æ³•åœ¨-javascript-ä¸­è¿è¡Œ" tabindex="-1">ä¸ºä»€ä¹ˆç°æœ‰çš„ shell æ— æ³•åœ¨ JavaScript ä¸­è¿è¡Œ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆç°æœ‰çš„-shell-æ— æ³•åœ¨-javascript-ä¸­è¿è¡Œ" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆç°æœ‰çš„ shell æ— æ³•åœ¨ JavaScript ä¸­è¿è¡Œ&quot;">&ZeroWidthSpace;</a></h2>
<p><code>bash</code> å’Œ <code>sh</code> ç­‰è¿™äº› <code>shell</code> å·¥å…·å·²ç»å­˜åœ¨å‡ åå¹´äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬åœ¨ <code>JavaScript</code> ä¸­ä¸èƒ½å¾ˆå¥½çš„å·¥ä½œï¼Ÿ</p>
<p><code>macOS (zsh)</code>ã€<code>Linux (bash)</code> å’Œ <code>Windows (cmd)</code> çš„ shell éƒ½æœ‰æ‰€ä¸åŒï¼Œå…·æœ‰ä¸åŒçš„è¯­æ³•å’Œä¸åŒçš„å‘½ä»¤ã€‚æ¯ä¸ªå¹³å°ä¸Šå¯ç”¨çš„å‘½ä»¤éƒ½ä¸åŒï¼Œç”šè‡³ç›¸åŒçš„å‘½ä»¤ä¹Ÿå¯èƒ½æœ‰ä¸åŒçš„å¯é€‰å‚æ•°å’Œè¡Œä¸ºã€‚</p>
<p>è¿„ä»Šä¸ºæ­¢ï¼Œ<code>npm</code> çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¾é ç¤¾åŒºç”¨ <code>JavaScript</code> å®ç°æ¥å¡«è¡¥ç¼ºå¤±çš„å‘½ä»¤ã€‚</p>
<h3 id="rm-rf-ä¸é€‚ç”¨äº-windows" tabindex="-1">rm -rf ä¸é€‚ç”¨äº Windows <a class="header-anchor" href="#rm-rf-ä¸é€‚ç”¨äº-windows" aria-label="Permalink to &quot;rm -rf ä¸é€‚ç”¨äº Windows&quot;">&ZeroWidthSpace;</a></h3>
<p><a href="https://www.npmjs.com/package/rimraf" target="_blank" rel="noreferrer">rimraf</a> æ˜¯ <code>rm -rf</code> æŒ‡ä»¤çš„è·¨å¹³å°å®ç°ï¼Œæ¯å‘¨ä¸‹è½½ 6000 ä¸‡æ¬¡ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/4be77f54128dc01fe235bf46be65dfd0" alt="" loading="lazy"></p>
<h3 id="foo-bar-script-è®¾ç½®ç¯å¢ƒå˜é‡åœ¨-windows-ä¸Šä¸ç”Ÿæ•ˆ" tabindex="-1"><code>FOO=bar &lt;script&gt;</code> è®¾ç½®ç¯å¢ƒå˜é‡åœ¨ Windows ä¸Šä¸ç”Ÿæ•ˆ <a class="header-anchor" href="#foo-bar-script-è®¾ç½®ç¯å¢ƒå˜é‡åœ¨-windows-ä¸Šä¸ç”Ÿæ•ˆ" aria-label="Permalink to &quot;`FOO=bar &lt;script&gt;` è®¾ç½®ç¯å¢ƒå˜é‡åœ¨ Windows ä¸Šä¸ç”Ÿæ•ˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸åŒå¹³å°ä¸Šè®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼ç•¥æœ‰ä¸åŒã€‚å¦‚æœä¸ä½¿ç”¨ <code>FOO=bar</code> è¿™ç§æ–¹å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ <a href="https://www.npmjs.com/package/cross-env" target="_blank" rel="noreferrer">cross-env</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/654ccf7364bc395e6699f33dbe05bc8c" alt="" loading="lazy"></p>
<h3 id="which-åœ¨-windows-ä¸Šæ˜¯-where" tabindex="-1">which åœ¨ Windows ä¸Šæ˜¯ where <a class="header-anchor" href="#which-åœ¨-windows-ä¸Šæ˜¯-where" aria-label="Permalink to &quot;which åœ¨ Windows ä¸Šæ˜¯ where&quot;">&ZeroWidthSpace;</a></h3>
<p>äºæ˜¯å¦ä¸€ä¸ªå‘¨ä¸‹è½½é‡ 6000w çš„åŒ…è¯ç”Ÿäº†ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/ba91ab9eb9713c5484c09a6bd62f96a5" alt="" loading="lazy"></p>
<h2 id="shell-å¯åŠ¨æ—¶é—´ä¹Ÿæœ‰ä¸€ç‚¹é•¿" tabindex="-1">shell å¯åŠ¨æ—¶é—´ä¹Ÿæœ‰ä¸€ç‚¹é•¿ <a class="header-anchor" href="#shell-å¯åŠ¨æ—¶é—´ä¹Ÿæœ‰ä¸€ç‚¹é•¿" aria-label="Permalink to &quot;shell å¯åŠ¨æ—¶é—´ä¹Ÿæœ‰ä¸€ç‚¹é•¿&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆ›å»ºä¸€ä¸ª <code>shell</code> æ‰§è¡Œéœ€è¦å¤šä¹…ï¼Ÿ</p>
<p>åœ¨ Linux x64 Hetzner Arch Linux æœºå™¨ä¸Šï¼Œå¤§çº¦éœ€è¦ 7msï¼š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> hyperfine</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --warmup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bash -c "echo hello"'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'sh -c "echo hello"'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -N</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'echo hello'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mean </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Â±</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Ïƒ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):       7.3 ms Â±   1.5 ms    [User: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ms, System: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ms]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (min </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">â€¦</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):     1.7 ms â€¦   9.4 ms    529 runs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Benchmark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 2:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'echo hello'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mean </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">Â±</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Ïƒ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):       7.2 ms Â±   1.6 ms    [User: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ms, System: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ms]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (min </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">â€¦</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">):     1.5 ms â€¦   9.6 ms    327 runs</span></span></code></pre>
</div><p>å¦‚æœåªæ˜¯æƒ³è¿è¡Œå•ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯å¯åŠ¨ <code>shell</code> å¯èƒ½æ¯”è¿è¡Œå‘½ä»¤æœ¬èº«èŠ±è´¹æ›´é•¿çš„æ—¶é—´ã€‚å¦‚æœéœ€è¦åœ¨å¾ªç¯ä¸­è¿è¡Œè®¸å¤šå‘½ä»¤ï¼Œé‚£ä¹ˆæˆæœ¬å°±ä¼šå‡é«˜ã€‚</p>
<p>ä½ å¯ä»¥å°è¯•åµŒå…¥ <code>shell</code>ï¼Œä½†è¿™æ ·å°±å¤æ‚äº†ï¼Œè€Œä¸”å®ƒä»¬çš„è®¸å¯è¯å¯èƒ½ä¸ä½ çš„é¡¹ç›®ä¸å…¼å®¹ã€‚</p>
<h2 id="è¿™äº›-polyfill-çœŸçš„å¿…è¦å—" tabindex="-1">è¿™äº› polyfill çœŸçš„å¿…è¦å—ï¼Ÿ <a class="header-anchor" href="#è¿™äº›-polyfill-çœŸçš„å¿…è¦å—" aria-label="Permalink to &quot;è¿™äº› polyfill çœŸçš„å¿…è¦å—ï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨ 2009 - 2016 å¹´çš„é‡Œï¼Œ<code>JavaScript</code> è¿˜ç›¸å¯¹è¾ƒæ–°ä¸”å¤„äºå®éªŒé˜¶æ®µæ—¶ï¼Œä¾é ç¤¾åŒºæ¥å¡«è¡¥ç¼ºå¤±çš„åŠŸèƒ½æ˜¯å¾ˆåˆç†çš„ã€‚ä½†ç°åœ¨å·²ç»æ˜¯ 2024 å¹´äº†ã€‚<code>JavaScript</code> å·²åœ¨å¹¿æ³›çš„ä½¿ç”¨äºæœåŠ¡ç«¯å¼€å‘äº†ã€‚å¦‚ä»Šï¼Œ<code>JavaScript</code> ç”Ÿæ€ç³»ç»Ÿå¯¹éœ€æ±‚çš„ç†è§£ä¸ 2009 å¹´æ—¶å®Œå…¨ä¸åŒäº†ã€‚</p>
<p>æˆ‘ä»¬å…¶å®å¯ä»¥åšå¾—æ›´å¥½ã€‚</p>
<h2 id="ä»‹ç»ä¸€ä¸‹-bun-shell" tabindex="-1">ä»‹ç»ä¸€ä¸‹ Bun Shell <a class="header-anchor" href="#ä»‹ç»ä¸€ä¸‹-bun-shell" aria-label="Permalink to &quot;ä»‹ç»ä¸€ä¸‹ Bun Shell&quot;">&ZeroWidthSpace;</a></h2>
<p><code>Bun Shell</code> æ˜¯ <code>Bun</code> æä¾›çš„ä¸€ç§æ–°çš„å®éªŒæ€§çš„åµŒå…¥å¼è¯­è¨€å’Œè§£é‡Šå™¨ï¼Œæ”¯æŒä½¿ç”¨ <code>JavaScript</code> å’Œ <code>TypeScript</code> ç¼–å†™è·¨å¹³å°è¿è¡Œçš„ <code>shell</code> è„šæœ¬ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç›´æ¥åœ¨ç»ˆç«¯é‡Œè¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è½¬ä¸ºå­—ç¬¦ä¸²å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code></pre>
</div><p>åŒæ—¶å…è®¸ä½ ä½¿ç”¨ <code>JavaScript</code> å˜é‡ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> resp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://example.com'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> stdout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`gzip -c &#x3C; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">resp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code></pre>
</div><p>å‡ºäºå®‰å…¨é—®é¢˜è€ƒè™‘ï¼Œæ‰€æœ‰æ¨¡æ¿å˜é‡éƒ½å°†è¢«è½¬ä¹‰ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'foo.js; rm -rf /'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å°†ä¼šæ‰§è¡ŒæŒ‡ä»¤ `ls 'foo.js; rm -rf /'`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(results.exitCode) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(results.stderr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ls: cannot access 'foo.js; rm -rf /': No such file or directory</span></span></code></pre>
</div><p>ä½¿ç”¨ <code>Bun Shell</code> æ„Ÿè§‰å°±åƒæ™®é€šçš„ <code>JavaScript</code>ã€‚å…è®¸ä½ å°†æ ‡å‡†è¾“å‡ºæ”¾å…¥ <code>buffers</code> ä¸­ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js > ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">buffer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span></code></pre>
</div><p>ä½ ä¹Ÿå¯ä»¥å°†è¾“å‡ºç»“æœç›´æ¥å†™å…¥æ–‡ä»¶ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $, file } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å½“åšæ–‡ä»¶è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js > ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'output.txt'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æˆ–è€…æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js > output.txt`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js > ${'output.txt'}`</span></span></code></pre>
</div><p>ä½ è¿˜å¯ä»¥å°†è¾“å‡ºç»“æœé€šè¿‡ç®¡é“è¿ç®—ç¬¦ä¼ é€’ç»™å…¶å®ƒå‘½ä»¤ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js | grep foo`</span></span></code></pre>
</div><p>ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ <code>Response</code> ä½œä¸ºæ ‡å‡†è¾“å…¥ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'bar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`grep foo &#x3C; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">buffer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span></code></pre>
</div><p>å¯ä½¿ç”¨ <code>cd</code>ã€<code>echo</code> å’Œ <code>rm</code> ç­‰å†…ç½®å‘½ä»¤ï¼š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`cd .. &#x26;&#x26; rm -rf node_modules/rimraf`</span></span></code></pre>
</div><p>å®ƒå¯åœ¨ <code>Windows</code>ã€<code>macOS</code> å’Œ <code>Linux</code> ä¸Šè¿è¡Œã€‚æˆ‘ä»¬å®ç°äº†è®¸å¤šå¸¸ç”¨å‘½ä»¤å’ŒåŠŸèƒ½ï¼Œå¦‚<code>é€šé…ç¬¦</code>ã€<code>ç¯å¢ƒå˜é‡</code>ã€<code>é‡å®šå‘ï¼ˆredirectionï¼‰</code>ã€<code>ç®¡é“ï¼ˆpipingï¼‰</code>ç­‰ã€‚</p>
<p>å®ƒè¢«è®¾è®¡ä¸ºç®€å• <code>shell</code> è„šæœ¬çš„æ›¿ä»£å“ã€‚åœ¨ <code>Windows</code> ç‰ˆ <code>Bun</code> ä¸­ï¼Œå®ƒå°†ä¸º <code>bun run</code> ä¸­çš„ <code>package.json</code> â€œè„šæœ¬â€æä¾›æ”¯æŒã€‚</p>
<p>ä¸ºäº†æ›´æœ‰è¶£ä¸€ç‚¹ï¼Œæ‚¨è¿˜å¯ä»¥å°†å®ƒç”¨ä½œç‹¬ç«‹çš„ shell è„šæœ¬è§£é‡Šå™¨ï¼š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "cat package.json"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> script.bun.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> script.bun.sh</span></span></code></pre>
</div><h2 id="å¦‚ä½•å®‰è£…" tabindex="-1">å¦‚ä½•å®‰è£…ï¼Ÿ <a class="header-anchor" href="#å¦‚ä½•å®‰è£…" aria-label="Permalink to &quot;å¦‚ä½•å®‰è£…ï¼Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<p><code>Bun Shell</code> å†…ç½®äº <code>Bun</code> ä¸­ã€‚å¦‚æœå·²ç»å®‰è£…äº† <code>Bun v1.0.24</code> æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨å®ƒï¼š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bun</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">1.0.24</span></span></code></pre>
</div><p>å¦‚æœä½ æ²¡æœ‰å®‰è£…<code>Bun</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>curl</code>å®‰è£…ï¼š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://bun.sh/install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> bash</span></span></code></pre>
</div><p>æˆ–è€…ä½¿ç”¨ npm :</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bun</span></span></code></pre>
</div><h2 id="ä½¿ç”¨å®è·µ" tabindex="-1">ä½¿ç”¨å®è·µ <a class="header-anchor" href="#ä½¿ç”¨å®è·µ" aria-label="Permalink to &quot;ä½¿ç”¨å®è·µ&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆ›å»º <code>test.ts</code> æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹ä»£ç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { $ } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'bun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`echo hello world`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ls *.js *.mjs`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span></code></pre>
</div><p>è¿è¡Œè„šæœ¬</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> test.ts</span></span></code></pre>
</div><p><a href="https://app.warp.dev/block/VLbnk6T4x6rCSVZT2uwWs7" target="_blank" rel="noreferrer">è¿è¡Œç»“æœ</a> å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/1ad4e2f3727b32803ee4ce3b458ee21f" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/4be77f54128dc01fe235bf46be65dfd0" length="0" type="image//mdImg/sugar/4be77f54128dc01fe235bf46be65dfd0"/>
        </item>
        <item>
            <title><![CDATA[è¯‘ï¼šä½¿ç”¨ç°ä»£çš„ Node.js æ„å»ºç®€å•çš„CLIå·¥å…·]]></title>
            <link>https://www.dmsrs.org/bigWeb/node/standard-node-cli.html</link>
            <guid>https://www.dmsrs.org/bigWeb/node/standard-node-cli.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[åªä½¿ç”¨ Node.js çš„æ ‡å‡†åº“ï¼Œä¸å®‰è£…ä»»ä½•å¤–éƒ¨ä¾èµ–ï¼Œå†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·]]></description>
            <content:encoded><![CDATA[<h1 id="è¯‘-ä½¿ç”¨ç°ä»£çš„-node-js-æ„å»ºç®€å•çš„cliå·¥å…·" tabindex="-1">è¯‘ï¼šä½¿ç”¨ç°ä»£çš„ Node.js æ„å»ºç®€å•çš„CLIå·¥å…· <a class="header-anchor" href="#è¯‘-ä½¿ç”¨ç°ä»£çš„-node-js-æ„å»ºç®€å•çš„cliå·¥å…·" aria-label="Permalink to &quot;è¯‘ï¼šä½¿ç”¨ç°ä»£çš„ Node.js æ„å»ºç®€å•çš„CLIå·¥å…·&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>åŸæ–‡åœ°å€ï¼š <a href="https://evertpot.com/node-changelog-cli-tool/" target="_blank" rel="noreferrer">https://evertpot.com/node-changelog-cli-tool/</a>
<br/>ä½œè€…ï¼š <a href="https://evertpot.com/" target="_blank" rel="noreferrer">Evert Pot</a>
<br/>å‘å¸ƒæ—¶é—´ï¼š2023-02-13</p>
</blockquote>
<p><strong>åªä½¿ç”¨ Node.js çš„æ ‡å‡†åº“ï¼Œä¸å®‰è£…ä»»ä½•å¤–éƒ¨ä¾èµ–ï¼Œå†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ã€‚</strong></p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>ä½œè€…æ˜¯å¤šä¸ªå¼€æºé¡¹ç›®çš„ç»´æŠ¤è€…ï¼Œé•¿ä¹…ä»¥æ¥éƒ½æ˜¯æ‰‹åŠ¨ç»´æŠ¤é¡¹ç›®çš„å˜æ›´æ—¥å¿—ï¼ˆ<code>changelog</code>ï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯é¡¹ç›® <a href="https://github.com/curveball/a12n-server/" target="_blank" rel="noreferrer">a12n-server</a> çš„å˜æ›´æ—¥å¿—ç¤ºä¾‹ï¼š</p>
<div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">0.22.0 (2022-09-27)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">-------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Warning note for upgraders. This release has a database migration on the</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`oauth2_tokens`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> table. For most users this is the largest table, some</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">downtime may be expected while the server runs its migrations.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> #425: Using a </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`client_secret`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> is now supported with </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`authorization_code`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  and it's read from either the request body or HTTP Basic Authorization</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  header.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> The service now keeps track when issuing access tokens, whether those tokens</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  have used a </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`client_secret`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> or not, which </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`grant_type`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> was used to issue them</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  and what scopes were requested. This work is done to better support OAuth2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  scopes in the future, and eventually OpenID Connect.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Fixed broken 'principal uri' in introspection endpoint response.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> OAuth2 service is almost entirely rewritten.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> The number of tokens issued is now displayed on the home page.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Large numbers are now abbreviated with </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`K`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> and </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">`M`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> #426: Updated to Curveball 0.20.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> #427: Typescript types for the database schema are now auto-generated with</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  `mysql-types-generator`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span></span></code></pre>
</div><p>å†…å®¹ä½¿ç”¨<code>markdown</code>ç¼–å†™çš„ã€‚ä½ å¯èƒ½ä¼šæƒ³ï¼šGitä¸æ˜¯æœ‰ <code>commit</code> æ—¥å¿—å—ï¼Ÿä¸ºä»€ä¹ˆè¦è´¹åŠ›æ‰‹å†™è¿™ä¸ªå‘¢ï¼Ÿ</p>
<p>åŸå› æ˜¯å®ƒä»¬çš„å—ä¼—ä¸ä¸€æ ·ã€‚æˆ‘å¸Œæœ›è®©ç”¨æˆ·å…³æ³¨åˆ°ç›¸å¯¹é‡è¦çš„å˜æ›´äº‹é¡¹ï¼Œå¹¶åŒæ—¶æ³¨æ„åˆ°å˜åŒ–å¯¹ç”¨æˆ·å¸¦æ¥çš„å½±å“ã€‚</p>
<p>æˆ‘è§‰å¾—å†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·æ¥åšè¿™äº›äº‹ä¼šæ›´æ–¹ä¾¿ï¼Œç»´æŠ¤å¤šä¸ªé¡¹ç›®ï¼ˆå¦‚æ­¤å¤šçš„å˜æ›´ï¼‰ä¹Ÿæ›´å®¹æ˜“ä¸€äº›ã€‚æ‰€ä»¥ï¼Œ<a href="https://github.com/evert/changelog-tool" target="_blank" rel="noreferrer">æˆ‘å°±åšäº† changelog-tool</a>ï¼å¦‚æœä½ æƒ³çŸ¥é“è¿™èƒŒåæ¶‰åŠäº†å“ªäº›æŠ€æœ¯é€‰æ‹©ï¼Œè¯·æ¥ç€å¾€ä¸‹é˜…è¯»ã€‚</p>
<h2 id="ç›®æ ‡-ç‰¹è‰²" tabindex="-1">ç›®æ ‡&amp;ç‰¹è‰² <a class="header-anchor" href="#ç›®æ ‡-ç‰¹è‰²" aria-label="Permalink to &quot;ç›®æ ‡&amp;ç‰¹è‰²&quot;">&ZeroWidthSpace;</a></h2>
<p>å·¥å…·å·²æ”¯æŒçš„åŠŸèƒ½ï¼š</p>
<ul>
<li>é‡æ–°æ ¼å¼åŒ–æ—¥å¿—ï¼ˆæœ‰ç‚¹åƒç¾åŒ–ï¼‰ï¼ˆ <code>changelog format</code> ï¼‰;</li>
<li>é€šè¿‡å‘½ä»¤è¡Œæ·»åŠ ä¸€è¡Œæ—¥å¿—ï¼ˆ <code>changelog add --minor -m &quot;New feature&quot;</code> ï¼‰;</li>
<li>è‡ªåŠ¨è®¾ç½®å‘å¸ƒæ—¥æœŸï¼ˆ <code>changelog release</code> ï¼‰;</li>
<li>å°†ç‰¹å®šç‰ˆæœ¬çš„æ—¥å¿—å¯¼å…¥æ ‡å‡†è¾“å‡ºï¼Œä»¥ä¾¿å…¶ä»–å·¥å…·å¯ä»¥ä½¿ç”¨ï¼ˆä¾‹å¦‚ä¸GitHubå‘å¸ƒé›†æˆï¼‰ã€‚</li>
</ul>
<p>æˆ‘è¿˜æœ‰ä¸€äº›éåŠŸèƒ½æ€§çš„éœ€æ±‚ï¼š</p>
<ul>
<li>ä½¿ç”¨æœ€æ–°çš„ <code>Node.js</code> ç‰¹æ€§;</li>
<li>ä½¿ç”¨æœ€æ–°çš„ <code>JavaScript</code> æ ‡å‡†å’Œç‰¹æ€§ï¼ˆESMï¼‰;</li>
<li>é¿å…éå¿…è¦çš„å¤–éƒ¨ä¾èµ–ï¼›</li>
<li>ä½ç»´æŠ¤æˆæœ¬ã€‚</li>
</ul>
<p>æƒ³ç«‹å³æ‰¾åˆ°è¿™ä¸ªå·¥å…·å—ï¼Ÿå®ƒæ˜¯å¼€æºçš„ï¼Œä½ åªéœ€è®¿é—® <a href="https://github.com/evert/changelog-tool" target="_blank" rel="noreferrer">Github</a>ã€‚</p>
<h2 id="åŸç†è§£æ" tabindex="-1">åŸç†è§£æ <a class="header-anchor" href="#åŸç†è§£æ" aria-label="Permalink to &quot;åŸç†è§£æ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="esm-typescript-esm" tabindex="-1">ESM &amp; Typescript ESM <a class="header-anchor" href="#esm-typescript-esm" aria-label="Permalink to &quot;ESM &amp; Typescript ESM&quot;">&ZeroWidthSpace;</a></h3>
<p><code>ESM</code> æ¨¡å—ç°åœ¨ä½¿ç”¨èµ·æ¥å·²ç»éå¸¸ä¸æ»‘äº†ã€‚è¿™æ˜¯ä¹ æƒ¯ä¸Šçš„ä¸€ä¸ªå°æ”¹å˜ï¼Œä½†æˆ‘ä¸€èˆ¬å»ºè®®æ˜¯å°†æ–‡ä»¶ä¿å­˜ä¸º <code>.mjs</code> æ¥ä½¿ç”¨ <code>ESM</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯ <code>parse.mjs</code> çš„å‰å‡ è¡Œä»£ç ï¼š</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'node:fs/promises'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Changelog, VersionLog } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './changelog.mjs'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filename</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@returns</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {Promise&#x3C;Changelog>}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>CommonJS -&gt; ESM çš„è¿‡æ¸¡å¹¶éæ²¡æœ‰ç—›è‹¦ï¼Œä½†å¯¹äºåƒè¿™æ ·çš„æ–°é¡¹ç›®æ¥è¯´ï¼Œå®ƒæ˜¯éå¸¸ç†æƒ³çš„é€‰æ‹©ã€‚ï¼ˆé¡¶å±‚ <code>await</code> ğŸ‰ï¼‰</p>
<p>æˆ‘è¿˜é€‰æ‹©ä¸ä½¿ç”¨ <code>Typescript</code> ç¼–å†™ä»£ç ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä½¿ç”¨ <code>JSDoc</code> æ³¨é‡Šï¼ˆä¸Šé¢æ˜¯ <code>@param</code> å’Œ <code>@returns</code> æ³¨é‡Šï¼‰ã€‚</p>
<p>å½“ç„¶ä¸æ˜¯æ¯ä¸ªäººéƒ½çŸ¥é“ä¸å†™ <code>.ts</code> æ–‡ä»¶ä¹Ÿå¯è·å¾—å’Œ <code>Typescript</code> ä¸€æ ·çš„ä½“éªŒã€‚ Typescript ä¹Ÿå¯ä»¥ä¸¥æ ¼åœ°æ£€æŸ¥ <code>Javascript</code> æ–‡ä»¶ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯é¡¹ç›®ä¸éœ€è¦æ„å»ºæ­¥éª¤äº†ã€‚ç”šè‡³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸éœ€è¦ç”¨åˆ° <code>Typescript</code>ï¼Œé™ä½äº†ä¸Šæ‰‹é—¨æ§›ã€‚</p>
<p>è¿™æ˜¯æˆ‘çš„ç®€åŒ–åçš„ <code>tsconfig.json</code> é…ç½®æ–‡ä»¶ï¼š</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "compilerOptions"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "target"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"es2022"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"esnext"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "rootDir"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "allowJs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "checkJs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "moduleResolution"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"node"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noEmit"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "strict"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "useUnknownInCatchVariables"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œ<code>Typescript</code> æ–‡æ¡£æœ‰ä¸€ä¸ªé¡µé¢è¯¦ç»†ä»‹ç»äº†<a href="https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html" target="_blank" rel="noreferrer">æ”¯æŒçš„ JSDoc æ³¨é‡Š</a>ã€‚</p>
<h3 id="å‘½ä»¤è¡Œå‚æ•°è§£æ" tabindex="-1">å‘½ä»¤è¡Œå‚æ•°è§£æ <a class="header-anchor" href="#å‘½ä»¤è¡Œå‚æ•°è§£æ" aria-label="Permalink to &quot;å‘½ä»¤è¡Œå‚æ•°è§£æ&quot;">&ZeroWidthSpace;</a></h3>
<p>CLI å·¥å…·éœ€è¦æ”¯æŒè§£æå‘½ä»¤è¡Œé€‰é¡¹å‚æ•°(option)ã€‚ä» Node 18.3ï¼ˆå‘åç§»æ¤åˆ°äº† Node 16.17ï¼‰å¼€å§‹ï¼ŒNode å†…ç½®äº†ä¸€ä¸ªå‚æ•°è§£æçš„æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä»£ç ç¤ºä¾‹ï¼š</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { parseArgs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'node:util'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">positionals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseArgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    help: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      short: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    all: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      default: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    message: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'string'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      short: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'m'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    patch: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    minor: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    major: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  allowPositionals: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>è¿™æ®µé…ç½®ä»£ç æ·»åŠ äº†è¯¸å¦‚ <code>--major</code> è¿™äº›å‚æ•°çš„è§£ææ”¯æŒï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ <code>--message &quot;hello!&quot;</code> æŒ‡å®šæ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>-m &quot;Hi&quot;</code> ç®€å†™çš„æ–¹å¼æ›¿ä»£ã€‚</p>
<p>å®ƒèƒ½å®Œæˆæ‰€æœ‰å·¥ä½œå—ï¼Ÿä¸ï¼åœ¨ä¸€äº›å¤æ‚çš„å·¥å…·ä¸­ï¼Œè¿˜ä¼šç”¨åˆ°å½©è‰²æ‰“å°ï¼Œè‡ªåŠ¨åˆ›å»ºå¸®åŠ©ä¿¡æ¯ç­‰ï¼Œä½†è¿™æ ·å°±éœ€è¦å¼•å…¥è®¸å¤šé¢å¤–çš„ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</p>
<p>å°±æˆ‘è€Œè¨€ï¼Œå·²ç»å¤Ÿç”¨äº†ã€‚</p>
<p>å¯ä»¥æŸ¥çœ‹ <a href="https://nodejs.org/api/util.html#utilparseargsconfig" target="_blank" rel="noreferrer">Node.js å¯¹åº”æ–‡æ¡£</a>äº†è§£æ›´è¯¦ç»†çš„å†…å®¹ã€‚</p>
<h3 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">&ZeroWidthSpace;</a></h3>
<p>å¤§å¤šæ•°äººå¯èƒ½ä¼šä½¿ç”¨ <code>Jest</code> æˆ– <code>Mocha</code> ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼Œä½†ä» Node 18ï¼ˆä¹Ÿå‘åç§»æ¤åˆ° 16ï¼‰å¼€å§‹ï¼ŒNode å†…ç½®äº†è¿è¡Œæµ‹è¯•ç”¨ä¾‹çš„èƒ½åŠ›ã€‚</p>
<p>å®ƒçš„APIç±»ä¼¼äº <code>Mocha</code> å’Œ <code>Jest</code> ï¼ŒåŒ…å« <code>it</code> ã€ <code>test</code> ã€ <code>describe</code> ã€ <code>before</code> ç­‰å…³é”®å­—ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå•ä¾§çš„ç¤ºä¾‹ï¼š</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// @ts-check</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> assert </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'node:assert'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { test } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'node:test'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { parse } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../parse.mjs'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Parsing changelog metadata'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `Time for a change</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">=========</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">0.2.0 (????-??-??)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">* Implemented the 'list' command.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">* Added testing framework.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">0.1.0 (2023-02-08)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">* Implemented the 'help' and 'init' commands.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">*</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(input)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Time for a change'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.title)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.versions.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.versions[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].date)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0.2.0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.versions[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].version)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2023-02-08'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.versions[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].date)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">equal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0.1.0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, result.versions[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].version)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>è¦æ‰§è¡Œæµ‹è¯•ï¼Œåªéœ€è¿è¡Œ <code>node --test</code> æŒ‡ä»¤å³å¯ã€‚æ— éœ€é¢å¤–é…ç½®ï¼Œå®ƒå°†è‡ªåŠ¨æ‰«æéµå¾ªè§„èŒƒçš„ç›®å½•å’Œå•æµ‹æ–‡ä»¶ã€‚</p>
<p>Node 18 æµ‹è¯•è¾“å‡ºæœ‰ç‚¹ç®€é™‹ï¼Œå®ƒæ˜¯ <code>TAP</code> æ ¼å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>TAP version 13</span></span>
<span class="line"><span># Subtest: /home/evert/src/changelog-tool/test/parse.mjs</span></span>
<span class="line"><span>    # Subtest: Parsing changelog metadata</span></span>
<span class="line"><span>    ok 1 - Parsing changelog metadata</span></span>
<span class="line"><span>      ---</span></span>
<span class="line"><span>      duration_ms: 1.713409</span></span>
<span class="line"><span>      ...</span></span>
<span class="line"><span>    # Subtest: Parsing changelog entries</span></span>
<span class="line"><span>    ok 2 - Parsing changelog entries</span></span>
<span class="line"><span>      ---</span></span>
<span class="line"><span>      duration_ms: 0.2595</span></span>
<span class="line"><span>      ...</span></span>
<span class="line"><span>    # Subtest: Preface and postface</span></span>
<span class="line"><span>    ok 3 - Preface and postface</span></span>
<span class="line"><span>      ---</span></span>
<span class="line"><span>      duration_ms: 0.193591</span></span>
<span class="line"><span>      ...</span></span>
<span class="line"><span>    1..3</span></span>
<span class="line"><span>ok 1 - /home/evert/src/changelog-tool/test/parse.mjs</span></span>
<span class="line"><span>  ---</span></span>
<span class="line"><span>  duration_ms: 70.901055</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>1..1</span></span>
<span class="line"><span># tests 1</span></span>
<span class="line"><span># pass 1</span></span>
<span class="line"><span># fail 0</span></span>
<span class="line"><span># cancelled 0</span></span>
<span class="line"><span># skipped 0</span></span>
<span class="line"><span># todo 0</span></span>
<span class="line"><span># duration_ms 81.481441</span></span></code></pre>
</div><p>å¦ç™½è¯´ï¼Œç”¨äº†è¿™ä¸ªä¹‹åæˆ‘ä¸ç¡®å®šæ˜¯å¦è¿˜ä¼šç»§ç»­å†ä½¿ç”¨ <code>Mocha</code>ã€‚æ¯•ç«Ÿæˆ‘å·²ç»ç”¨äº†åå¤šå¹´äº†ï¼Œè¿˜æ˜¯æœ‰è®¸å¤šä¸é”™çš„åŠŸèƒ½ï¼Œæˆ‘è®¤ä¸ºé™¤äº† Node å·²ç»æ”¯æŒçš„å¤– <code>Mocha</code> é‡Œè¿˜æœ‰ä¸€äº›æˆ‘éœ€è¦çš„åŠŸèƒ½ã€‚</p>
<p>ä¸€äº›é“¾æ¥:</p>
<ul>
<li><a href="https://nodejs.org/api/test.html" target="_blank" rel="noreferrer">node:test package</a>;</li>
<li><a href="https://nodejs.org/api/assert.html" target="_blank" rel="noreferrer">node:assert package</a>;</li>
<li><a href="https://nodejs.org/api/test.html#mocking" target="_blank" rel="noreferrer">Mocking in node</a>.</li>
</ul>
<h3 id="å¸¦æ³¨é‡Šçš„-package-json" tabindex="-1">å¸¦æ³¨é‡Šçš„ package.json <a class="header-anchor" href="#å¸¦æ³¨é‡Šçš„-package-json" aria-label="Permalink to &quot;å¸¦æ³¨é‡Šçš„ package.json&quot;">&ZeroWidthSpace;</a></h3>
<p>æˆ‘æƒ³ä»¥æˆ‘é…ç½®çš„ <code>package.json</code> æ¥ç»“æŸè¿™ç¯‡æ–‡ç« ï¼Œè¿™æ ·ä½ å°±å¯ä»¥çœ‹åˆ°å‰é¢å†…å®¹æ˜¯å¦‚ä½•è”ç³»åˆ°ä¸€èµ·çš„ã€‚ï¼ˆå¦‚æœ npm æ”¯æŒ JSON5ï¼Œâ€‹â€‹è¿™æ ·æˆ‘å°±å¯ä»¥å°†æˆ‘çš„æ³¨é‡Šä¿ç•™åœ¨åŒ…ä¸­ ğŸ˜­ï¼‰ã€‚</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // åŒ…çš„åç§°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"changelog-tool"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // åŒ…çš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "version"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.5.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è¿™å°†æ˜¾ç¤ºåœ¨NPMæœç´¢ç»“æœä¸­</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "description"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"A CLI tool for manipulating changelogs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è¿™å‘Šè¯‰Nodeè¿™æ˜¯ä¸€ä¸ªESMåŒ…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å½“ç„¶ä¸æ˜¯ä¸¥æ ¼éœ€è¦çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªåœ°æ–¹éƒ½æ˜¯ä½¿ç”¨ .mjs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¦‚æœéœ€è¦åœ¨ç¼–ç çš„æ—¶å€™ä½¿ç”¨æ­¤åŒ…ä¸­çš„æ–¹æ³•ï¼ˆä¸æ˜¯ CLI ä¸­ï¼‰ï¼Œåˆ™éœ€è¦åœ¨è¿™é‡ŒæŒ‡å®šå¯¼å‡ºçš„æ¨¡å—å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "main"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"index.mjs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è¿è¡Œæµ‹è¯•ç”¨ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "test"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"node --test"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æˆ‘å–œæ¬¢è®© Typescript åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼Œä»¥ä¾¿æœ‰ä»»ä½•é—®é¢˜å³æ—¶çš„è­¦å‘Šæˆ‘</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "watch"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"tsc --watch"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ–¹ä¾¿æ›´å¥½çš„åœ¨ npmjs.org ä¸Šå‘ç°æ­¤åŒ…</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "keywords"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "changelog"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "markdown"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ä½œè€…ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "author"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Evert Pot (https://evertpot.com/)"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // åšä»»ä½•ä½ æƒ³åšçš„äº‹ï¼ˆMITåè®®åŸºæœ¬æ²¡æœ‰çº¦æŸï¼‰</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "license"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"MIT"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "engine"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è­¦å‘Šå°šæœªå‡çº§çš„ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "node"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">">16"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "bin"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å½“äººä»¬å®‰è£…è¿™ä¸ªåŒ…æ—¶ï¼Œå¯ä»¥é€šè¿‡ `npx changelog` æ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å¦‚æœå…¨å±€å®‰è£…äº†è¿™ä¸ªåŒ…ï¼Œå°±ä¼šæœ‰ä¸€ä¸ª `changelog` å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "changelog"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./cli.mjs"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "devDependencies"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å”¯ä¸€çš„ 2 ä¸ªä¾èµ–é¡¹ã€‚å¦‚æœä½ æƒ³ï¼Ÿç”šè‡³ä¸éœ€è¦è¿™äº›åŒ…</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "@types/node"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^18.11.19"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "typescript"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"^4.9.5"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æˆ‘å–œæ¬¢åˆ›é€ æ–°äº‹ç‰©å¹¶æ·±æ€ç†Ÿè™‘åœ°åšå‡ºæ¯ä¸€ä¸ªå†³å®šã€‚</p>
<p>ç»“æœæ˜¯æˆ‘æ›´æœ‰å¯èƒ½æœ€ç»ˆå¾—åˆ°ä¸€äº›ç®€çº¦ã€ç»´æŠ¤æˆæœ¬ä½çš„ä¸œè¥¿ï¼Œå¹¶ä¸”è®©æˆ‘å¯¹æ‰€ä½¿ç”¨çš„å·¥å…·æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚</p>
<p>æœªæ¥æˆ‘å¯èƒ½ä¼šå†æ¬¡åšå‡ºè¿™äº›é€‰æ‹©ã€‚Node çš„æµ‹è¯•å·¥å…·å¿«é€Ÿåˆç®€å•ï¼ŒESM ä¹Ÿéå¸¸Niceï¼Œè¿˜ä¸éœ€è¦å¼•å…¥æ„å»ºï¼Œå¯¹äºæˆ‘è¿™ç§è§„æ¨¡çš„é¡¹ç›®æ¥è¯´ï¼Œæ„Ÿè§‰éå¸¸åˆé€‚ã€‚</p>
<p><strong>æˆ‘å¸Œæœ›è¿™èƒ½é¼“åŠ±å°†æ¥çš„äººä»ç©ºç›®å½•æ¥å¼€å§‹ä»–ä»¬çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œè€Œä¸æ˜¯å¤åˆ¶å¤§å‹é¡¹ç›®æ¨¡æ¿ã€‚</strong></p>
<p><a href="https://github.com/evert/changelog-tool" target="_blank" rel="noreferrer">Github ä¸Šçš„ changelog-tool é¡¹ç›®</a>ã€‚</p>
<p><em>æœ€åä¸€å¥è¯ç¡®å®æŒºå€¼å¾—æ€è€ƒçš„ï¼Œç°åœ¨å¥½åƒæ— è®ºåšä»€ä¹ˆé¡¹ç›®ï¼Œéƒ½æƒ³å…ˆæ‰¾ä¸ªæ¨¡æ¿ç„¶åæ‰å¼€å§‹ğŸ¤”</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[çº¯å‰ç«¯å®ç° JPG å›¾ç‰‡å‹ç¼© | canvas]]></title>
            <link>https://www.dmsrs.org/technology/learn/jpg-compress.html</link>
            <guid>https://www.dmsrs.org/technology/learn/jpg-compress.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[åœ¨è¿­ä»£å›¾åºŠåº”ç”¨æ—¶ï¼Œéœ€è¦ç”¨åˆ°å›¾ç‰‡å‹ç¼©ï¼Œåœ¨ä¹‹å‰åˆ†äº«äº†ä½¿ç”¨UPNG.js å¤„ç† PNG å›¾ç‰‡ï¼Œè¿™é‡Œè®°å½•åˆ†äº«ä¸€ä¸‹å¦‚ä½•å¤„ç†JPGå›¾ç‰‡ï¼Œå¹¶é™„ä¸Šå®Œæ•´ Demoã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="çº¯å‰ç«¯å®ç°-jpg-å›¾ç‰‡å‹ç¼©-canvas" tabindex="-1">çº¯å‰ç«¯å®ç° JPG å›¾ç‰‡å‹ç¼© | canvas <a class="header-anchor" href="#çº¯å‰ç«¯å®ç°-jpg-å›¾ç‰‡å‹ç¼©-canvas" aria-label="Permalink to &quot;çº¯å‰ç«¯å®ç° JPG å›¾ç‰‡å‹ç¼© | canvas&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p><strong>åœ¨çº¿ Demo ä½“éªŒåœ°å€ â†’:</strong> <a href="https://demos.sugarat.top/pages/jpg-compress/" target="_blank" rel="noreferrer">https://demos.sugarat.top/pages/jpg-compress/</a></p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨è¿­ä»£å›¾åºŠåº”ç”¨æ—¶ï¼Œéœ€è¦ç”¨åˆ°å›¾ç‰‡å‹ç¼©ï¼Œåœ¨ä¹‹å‰åˆ†äº«äº†<a href="https://juejin.cn/post/7346510823772733494" target="_blank" rel="noreferrer">ä½¿ç”¨ UPNG.js å‹ç¼© PNG å›¾ç‰‡</a>ï¼Œè¿™é‡Œè®°å½•åˆ†äº«ä¸€ä¸‹å¦‚ä½•å¤„ç† JPG å›¾ç‰‡ã€‚</p>
<p>æœç½—è°ƒç ”äº†ä¸€åœˆï¼ŒJPG å›¾ç‰‡çš„å¤„ç†ï¼ŒåŸºæœ¬éƒ½æ˜¯å›´ç»• canvas å±•å¼€çš„ã€‚</p>
<ul>
<li><a href="https://juejin.cn/post/7311633278497685544" target="_blank" rel="noreferrer">æ˜é‡‘ï¼šå‰ç«¯å®ç°å›¾ç‰‡å‹ç¼©æŠ€æœ¯è°ƒç ”</a></li>
<li>ç›¸å…³å¼€æºåº“ï¼ˆè¿‘æœŸè¿˜æœ‰è¿­ä»£ç»´æŠ¤çš„ï¼‰ï¼š<a href="https://github.com/fengyuanchen/compressorjs" target="_blank" rel="noreferrer">Compressor.js</a>ï¼Œ<a href="https://github.com/Donaldcwl/browser-image-compression" target="_blank" rel="noreferrer">browser-image-compression</a>ã€‚</li>
</ul>
<h2 id="å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯-jpg" tabindex="-1">å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯ JPG <a class="header-anchor" href="#å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯-jpg" aria-label="Permalink to &quot;å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯ JPG&quot;">&ZeroWidthSpace;</a></h2>
<p>åŒæ ·ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯åˆ¤æ–­å›¾ç‰‡ç±»å‹ï¼Œä¸ç„¶å°±æ²¡æ³•æ­£å¸¸çš„åšåç»­å¤„ç†äº†ã€‚</p>
<p>æœç´¢äº†è§£äº†ä¸€ä¸‹ï¼ŒJPG å›¾ç‰‡çš„å‰ä¸‰å­—èŠ‚æ˜¯å›ºå®šçš„ï¼ˆ16è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š<code>FF D8 FF</code>ã€‚</p>
<p>ä¸‹å›¾æ˜¯ VS Code æ’ä»¶ <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.hexeditor" target="_blank" rel="noreferrer">Hex Editor</a> æŸ¥çœ‹ä¸€ä¸ª JPG å›¾ç‰‡çš„ 16 è¿›åˆ¶è¡¨ç¤ºä¿¡æ¯ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/bcba46c1cd96ae55e93d5306796cd98c" alt="" loading="lazy"></p>
<p>äºæ˜¯å¯ä»¥æ ¹æ®è¿™ä¸ªç‰¹æ€§åˆ¤æ–­ï¼Œäºæ˜¯å°±æœ‰å¦‚ä¸‹çš„åˆ¤æ–­ä»£ç ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isJPG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æå–å‰3ä¸ªå­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> arraybuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // JPG çš„å‰3å­—èŠ‚16è¿›åˆ¶è¡¨ç¤º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> signature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0xFF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0xD8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0xFF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è½¬ä¸º 8ä½æ— ç¬¦å·æ•´æ•°æ•°ç»„ æ–¹ä¾¿å¯¹æ¯”</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arraybuffer)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é€ä¸ªå­—èŠ‚å¯¹æ¯”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> source.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">every</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> signature[index])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å½“ç„¶ç¤¾åŒºä¹Ÿæœ‰ç°æˆçš„ <a href="https://github.com/sindresorhus/is-jpg" target="_blank" rel="noreferrer">is-jpg</a> åº“å¯ä»¥ä½¿ç”¨ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/522312911d91522d3217c11765363f85" alt="" loading="lazy"></p>
<p><em>å¯çœ‹åˆ¤æ–­ä»£ç è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚</em></p>
<p>ä¸‹é¢å°†å…ˆä»‹ç»ä¸€ä¸‹ä¸Šè¿°ä¸¤ä¸ªå¼€æºåº“çš„ç®€å•ç”¨æ³•ä¸ç‰¹è‰²ï¼Œæœ€åå†ä»‹ç»ä¸€ä¸‹ç›´æ¥ä½¿ç”¨ <code>canvas API</code> å‹ç¼©çš„æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚</p>
<h2 id="compressor-js" tabindex="-1"><a href="https://github.com/fengyuanchen/compressorjs" target="_blank" rel="noreferrer">Compressor.js</a> <a class="header-anchor" href="#compressor-js" aria-label="Permalink to &quot;[Compressor.js](https://github.com/fengyuanchen/compressorjs)&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>JavaScript å›¾åƒå‹ç¼©å·¥å…·ã€‚ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ <code>canvas.toBlob API</code> å®ç°å‹ç¼©ï¼Œ<code>æœ‰æŸå‹ç¼©</code>ï¼Œ<code>å¼‚æ­¥</code>ï¼Œåœ¨ä¸åŒçš„æµè§ˆå™¨å‹ç¼©æ•ˆæœæœ‰æ‰€å‡ºå…¥ã€‚ä¸€èˆ¬å¯ä»¥ç”¨æ¥åœ¨ä¸Šä¼ ä¹‹å‰åœ¨å®¢æˆ·ç«¯é¢„å‹ç¼©å›¾åƒã€‚</p>
</blockquote>
<p>å®˜æ–¹ç¤ºä¾‹ç«™ç‚¹ï¼š<a href="https://fengyuanchen.github.io/compressorjs/" target="_blank" rel="noreferrer">Compressor.js PlayGround</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/582a9d9e73a1274fa8e7aae2d7022aa3" alt="" loading="lazy"></p>
<h3 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>æ”¯æŒ <code>npm</code> å’Œ <code>cdn</code> ä¸¤ç§å¼•å…¥æ–¹å¼ã€‚</p>
<p><strong>npm åŠ è½½</strong></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> compressorjs</span></span></code></pre>
</div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é¡¹ç›®ä¸­å¼•å…¥ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Compressor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'compressorjs'</span></span></code></pre>
</div><p><strong>cdn åŠ è½½</strong></p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!-- html head ä¸­å¼•å…¥ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://cdn.staticfile.net/compressorjs/1.2.1/compressor.min.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!-- é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ Compressor å³å¯ --></span></span></code></pre>
</div><p>ç®€å•ä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// file æ˜¯å¾…å‹ç¼©å›¾ç‰‡çš„æ–‡ä»¶å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Compressor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  quality: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // result æ˜¯å‹ç¼©åçš„å›¾ç‰‡å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>å…¶ä½™çš„ <a href="https://github.com/fengyuanchen/compressorjs?tab=readme-ov-file#options" target="_blank" rel="noreferrer">option é€‰é¡¹</a>å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¸»è¦æ˜¯å°ºå¯¸å¤§å°ï¼Œå‹ç¼©è´¨é‡æ•ˆæœï¼Œå›¾ç‰‡ä¿¡æ¯çš„ä¿ç•™ç­‰ç»†èŠ‚çš„è°ƒèŠ‚ã€‚</p>
<h3 id="ç®€å•å°è£…" tabindex="-1">ç®€å•å°è£… <a class="header-anchor" href="#ç®€å•å°è£…" aria-label="Permalink to &quot;ç®€å•å°è£…&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯ä»¥ç®€å•ç”¨ <code>Promise</code> å°è£…ä¸€ä¸‹ï¼Œä½¿ç”¨æ›´åŠ æ–¹ä¾¿ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressJPGByCompressor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Compressor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ops,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(result)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å½“ç„¶è¿™ç§ä¸æ”¯æŒ <code>Promise</code> çš„å›è°ƒç”¨æ³•å‡½æ•°ç”¨ <a href="https://github.com/tc39/proposal-promise-with-resolvers" target="_blank" rel="noreferrer">Promise.withResolvers</a> åŒ…è£…æœ€åˆé€‚ä¸è¿‡äº†ã€‚</p>
<p><em>å½“ç„¶æµè§ˆå™¨ä¸æ”¯æŒè¿™ä¸ªAPIçš„è¯ éœ€è¦å¼•å…¥ <code>polyfill</code> æ‰è¡Œï¼ˆå¯ä»¥ä» <code>core-js</code> ä¸­å¼•å…¥ï¼Œæˆ–è‡ªå·±ç®€å•å®ç°ä¸€ä¸‹ï¼‰ã€‚</em></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressJPGByCompressor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">withResolvers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Compressor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ops,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(result)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> promise</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="browser-image-compression" tabindex="-1"><a href="https://github.com/Donaldcwl/browser-image-compression" target="_blank" rel="noreferrer">browser-image-compression</a> <a class="header-anchor" href="#browser-image-compression" aria-label="Permalink to &quot;[browser-image-compression](https://github.com/Donaldcwl/browser-image-compression)&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç®€ä»‹-1" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹-1" aria-label="Permalink to &quot;ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>æµè§ˆå™¨ä¸­å®ç°å›¾ç‰‡å‹ç¼©ï¼Œé€šè¿‡é™ä½åˆ†è¾¨ç‡æˆ–å¤§å°æ¥å‹ç¼© jpegã€pngã€webp å’Œ bmp å›¾åƒï¼›æ”¯æŒä½¿ç”¨ Web Worker å®ç°å¤šçº¿ç¨‹çš„éé˜»å¡å‹ç¼©ã€‚</p>
</blockquote>
<p>å®˜æ–¹ç¤ºä¾‹ç«™ç‚¹ï¼š<a href="https://donaldcwl.github.io/browser-image-compression/example/basic.html" target="_blank" rel="noreferrer">compression PlayGround</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/3619ac65a3399e4b8e1928bb4e2c28a2" alt="" loading="lazy"></p>
<p>å…¶ä¸­å¤šçº¿ç¨‹å‹ç¼©ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas#browser_compatibility" target="_blank" rel="noreferrer">OffscreenCanvas</a>: ä¸€ä¸ªå¯ä»¥è„±ç¦»å±å¹•æ¸²æŸ“çš„ canvas å¯¹è±¡ã€‚åœ¨ <code>web worker</code> ç¯å¢ƒä¹Ÿå¯å·¥ä½œã€‚</p>
<h3 id="ä½¿ç”¨-1" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨-1" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>åŒæ ·çš„ä¹Ÿæ”¯æŒ <code>npm</code> å’Œ <code>cdn</code> ä¸¤ç§å¼•å…¥æ–¹å¼ã€‚</p>
<p><strong>npm åŠ è½½</strong></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> browser-image-compression</span></span></code></pre>
</div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é¡¹ç›®ä¸­å¼•å…¥ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> imageCompression </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'browser-image-compression'</span></span></code></pre>
</div><p><strong>cdn åŠ è½½</strong></p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!-- html head ä¸­å¼•å…¥ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://cdn.staticfile.net/browser-image-compression/2.0.2/browser-image-compression.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!-- é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ imageCompression å³å¯ --></span></span></code></pre>
</div><p>ç®€å•ä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">imageCompression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è®¾ç½®å‹ç¼©åçš„æœ€å¤§å¤§å°ï¼Œå•ä½æ˜¯ MBï¼ˆä¼šæ ¹æ®ç›®æ ‡è‡ªåŠ¨è°ƒæ•´å›¾ç‰‡è´¨é‡æˆ–è€…å°ºå¯¸ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  maxSizeMB: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¦‚æœå¸Œæœ›é€šè¿‡ç™¾åˆ†æ¯”æ§åˆ¶è´¨é‡ï¼Œåªéœ€ç®€å•è®¡ç®—ä¸€ä¸‹å³å¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // maxSizeMB: Math.round(file.size / (1024 * 1024) * quality),</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ä¹Ÿå¯è®¾ç½®å‹ç¼©åæœ€å¤§çš„å®½æˆ–è€…é«˜ ï¼ˆè‡ªåŠ¨åº”ç”¨äºå›¾ç‰‡ä¸­è¾ƒé•¿çš„é‚£ä¸€è¾¹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // maxWidthOrHeight: 1920,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // result ä¸ºå‹ç¼©åçš„ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>å¯ä»¥çœ‹å‡ºæ¥ä½¿ç”¨éå¸¸ç®€å•:</p>
<ul>
<li>è°ƒæ•´å°ºå¯¸å°±ä½¿ç”¨ <code>maxWidthOrHeight</code>;</li>
<li>ä¿æŒåŸå°ºå¯¸å°±è°ƒæ•´ <code>maxSizeMB</code> çš„å€¼ã€‚</li>
</ul>
<h3 id="ç®€å•å°è£…-1" tabindex="-1">ç®€å•å°è£… <a class="header-anchor" href="#ç®€å•å°è£…-1" aria-label="Permalink to &quot;ç®€å•å°è£…&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressImageByImageCompression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">quality</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">imageCompression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    maxSizeMB: Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> quality),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    maxWidthOrHeight: width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    libURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://cdn.staticfile.net/browser-image-compression/2.0.2/browser-image-compression.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ops</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™æ ·è°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿çµæ´»ã€‚</p>
<h3 id="æ³¨æ„äº‹é¡¹" tabindex="-1">æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹&quot;">&ZeroWidthSpace;</a></h3>
<p>é»˜è®¤æ˜¯å¼€å¯çš„å¤šçº¿ç¨‹å‹ç¼©ï¼Œä¼šä» <code>https://cdn.jsdelivr.net</code> æ‹‰å– worker è„šæœ¬ã€‚</p>
<p>å¦‚æœå­˜åœ¨ç½‘ç»œåŸå› è®¿é—®ä¸é€šç•…ï¼Œå¯ä»¥é€šè¿‡ <code>options.libURL</code> æ›¿æ¢ä¸ºè‡ªå®šä¹‰çš„è„šæœ¬ä½ç½®ï¼Œæ¯”å¦‚ä½¿ç”¨ <a href="https://www.staticfile.org/" target="_blank" rel="noreferrer">Staticfile CDN</a> èµ„æºã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">imageCompression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...çœç•¥å…¶å®ƒé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  libURL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://cdn.staticfile.net/browser-image-compression/2.0.2/browser-image-compression.js'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h2 id="canvas-api" tabindex="-1">canvas api <a class="header-anchor" href="#canvas-api" aria-label="Permalink to &quot;canvas api&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸»æµçš„ JPG çº¯å‰ç«¯å‹ç¼©æ–¹æ¡ˆï¼ŒåŸºæœ¬éƒ½æ˜¯å€ŸåŠ© <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank" rel="noreferrer">canvas</a> å®ç°çš„ï¼ŒåŒºåˆ«å°±åœ¨äºè¾¹ç•Œåœºæ™¯æ˜¯å¦è€ƒè™‘å‘¨å…¨ï¼Œé…å¥—çš„ç‰¹æ€§èƒ½å¦æ»¡è¶³å°†ä½¿ç”¨çš„åœºæ™¯ã€‚</p>
<h3 id="ä½¿ç”¨-2" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨-2" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆåˆ›å»º <code>Image</code> å¯¹è±¡ï¼Œè·å–å›¾ç‰‡çš„åŸºæœ¬ä¿¡æ¯</p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨ <code>URL.createObjectURL</code> åˆ›å»ºèµ„æºé“¾æ¥çš„æ–¹å¼ï¼š</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å›¾ç‰‡å®ŒæˆåŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è·å–å›¾ç‰‡å®½é«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // åç»­å°±å¯ä»¥ä½¿ç”¨ canvas è¿›è¡Œè¿›ä¸€æ­¥çš„å‹ç¼©å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span></code></pre>
</div><p>å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ <code>FileReader</code>ï¼Œæ­¤æ—¶ä»£ç çœ‹ä¸Šå»å¤š2è¡Œï¼ˆhhhï¼‰</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FileReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readAsDataURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> event.target.result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç´§æ¥ç€å°±å¯ä»¥ä½¿ç”¨ <code>canvas</code> è¿›è¡Œå›¾åƒçš„ç»˜åˆ¶ï¼ˆimg å®ŒæˆåŠ è½½åï¼‰</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆ›å»º canvas å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'canvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–ç”»å¸ƒçš„2Dæ¸²æŸ“ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2d'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®¾ç½® canvas çš„å®½é«˜ä¸å›¾ç‰‡ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.height</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åœ¨ canvas ä¸Šç»˜åˆ¶å›¾ç‰‡ï¼ˆå¾…ç»˜åˆ¶çš„å›¾ç‰‡ï¼Œç”»å¸ƒä¸Šçš„èµ·å§‹åæ ‡ï¼Œç»˜åˆ¶çš„å®½é«˜ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(img, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, canvas.width, canvas.height)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¦‚æœæŠŠå…ƒç´ æ’å…¥åˆ°é¡µé¢ä¸­ï¼Œåˆ™å¯ä»¥çœ‹åˆ° canvas ç»˜åˆ¶çš„å›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// document.body.appendChild(canvas);</span></span></code></pre>
</div><p>æ¥ä¸‹æ¥æœ€æ ¸å¿ƒçš„å°±è¡Œè°ƒç”¨ <code>canvas.toDataURL(type, quality)</code> è¿›è¡Œ&quot;å‹ç¼©&quot;äº†ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åªéœ€è¦è®¾ç½®å›¾ç‰‡æ ¼å¼ï¼Œä¸å›¾ç‰‡è´¨é‡ ä¸¤ä¸ªå‚æ•°å³å¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> compressedDataUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toDataURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'image/jpeg'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>æ¥ä¸‹æ¥å°±éœ€è¦å°† <code>compressedDataUrl</code> è½¬åŒ–ä¸º <code>blob</code> æˆ–è€… <code>file</code> å¯¹è±¡ã€‚</p>
<p><code>DataUrl</code> æ ¼å¼å¦‚ä¸‹ã€‚</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">data:image/jpeg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">base64,XXXX</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ•°æ®æ ‡è¯†ç¬¦ï¼šä»¥"data:"å¼€å¤´</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># MIMEç±»å‹æè¿°ï¼šæŒ‡ç¤ºæ•°æ®çš„ç±»å‹ï¼Œ"image/jpeg"è¡¨ç¤ºJPEGå›¾åƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ•°æ®ç¼–ç ï¼šä»¥base64ç¼–ç è¡¨ç¤ºï¼Œ"XXXX"æ˜¯ base64 ç¼–ç æ•°æ®éƒ¨åˆ†</span></span></code></pre>
</div><p>å’±ä»¬å…ˆæŠŠ<code>mimetype</code>,<code>decodedData</code> è¿™ 2 éƒ¨åˆ†æå–å‡ºæ¥</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">dataDescription</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">base64Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> compressedDataUrl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">','</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ–‡ä»¶ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> mimetype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataDescription.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">:(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">);</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£ç  base64 æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decodedData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> atob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(base64Data)</span></span></code></pre>
</div><p>æœ€åå°†è§£ç çš„ <code>base64</code> æ•°æ®è½¬æˆ <code>file</code> å³å¯ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decodedData.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆ›å»ºç­‰å­—èŠ‚å¤§å°çš„ Uint8Array</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> u8arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éå†èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  u8arr[n] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decodedData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">charCodeAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€šè¿‡ Uint8Array åˆ›å»º File å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([u8arr], file.name, { type: mimetype })</span></span></code></pre>
</div><h3 id="ç®€å•å°è£…-2" tabindex="-1">ç®€å•å°è£… <a class="header-anchor" href="#ç®€å•å°è£…-2" aria-label="Permalink to &quot;ç®€å•å°è£…&quot;">&ZeroWidthSpace;</a></h3>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressImageByCanvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">quality</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { width, height } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _resolve, _reject</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    _resolve </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> resolve</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    _reject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> reject</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å¦‚æœåªæŒ‡å®šäº†å®½åº¦æˆ–é«˜åº¦ï¼Œåˆ™å¦ä¸€ä¸ªæŒ‰æ¯”ä¾‹ç¼©æ”¾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">height) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(img.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.width))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> height) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(img.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.height))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'canvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2d'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.width</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> img.height</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(img, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, canvas.width, canvas.height)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> compressedDataUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toDataURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'image/jpeg'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, quality)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    _resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dataURItoFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(compressedDataUrl, file.name))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> promise</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> dataURItoFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dataURI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">dataDescription</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">base64Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataURI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">','</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> mimetype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataDescription.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">:(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">);</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decodedData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> atob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(base64Data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decodedData.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> u8arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    u8arr[n] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decodedData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">charCodeAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([u8arr], fileName, { type: mimetype })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="å…¼å®¹æ€§é—®é¢˜" tabindex="-1">å…¼å®¹æ€§é—®é¢˜ <a class="header-anchor" href="#å…¼å®¹æ€§é—®é¢˜" aria-label="Permalink to &quot;å…¼å®¹æ€§é—®é¢˜&quot;">&ZeroWidthSpace;</a></h3>
<p>ç¬”è€…å¹¶æ²¡æœ‰æ·±å…¥æµ‹è¯• canvas å‹ç¼©çš„å…¼å®¹æ€§é—®é¢˜ï¼Œä½†ä»ç¤¾åŒºçš„å‡ ä¸ªå‰ç«¯å¤„ç† JPG åº“é‡Œçš„ README æè¿°ä¸ issues ç­‰å¯ä»¥å½’çº³å‡ºä½¿ç”¨ <code>canvas</code> å¤„ç†æ—¶ï¼Œéœ€è€ƒè™‘ä¸‹é¢å‡ ä¸ªæ–¹é¢çš„é—®é¢˜ï¼š</p>
<ol>
<li>å¤§å°é™åˆ¶ï¼šè¯¦è§ <a href="https://jhildenbiddle.github.io/canvas-size/#/?id=test-results" target="_blank" rel="noreferrer">ä¸åŒæµè§ˆå™¨å’Œè®¾å¤‡ä¸Š canvas å¤§å°é™åˆ¶</a>ï¼›</li>
<li>ä¿¡æ¯ä¿ç•™ï¼š<code>EXIF</code> ä¿¡æ¯ï¼Œæ­£ç¡®è¯†åˆ«ä¸å¤„ç†å›¾ç‰‡æ–¹å‘ï¼›</li>
<li>è®¾å¤‡å…¼å®¹æ€§ï¼šç§»åŠ¨ç«¯è®¾å¤‡æµè§ˆå™¨å®šåˆ¶å†…æ ¸ç›¸å¯¹å¤š, è¾¹ç•Œæƒ…å†µè¾ƒå¤šï¼ˆç›¸å…³ API çš„æ”¯æŒç¨‹åº¦ï¼Œcanvas å·®å¼‚æ€§è¡¨ç°ï¼‰ã€‚</li>
</ol>
<p><em>å‚è€ƒï¼š<code>browser-image-compression</code>, <code>Compressor.js</code>, <a href="https://github.com/think2011/localResizeIMG" target="_blank" rel="noreferrer">localResizeIMG</a></em></p>
<h2 id="å®Œæ•´-demo" tabindex="-1">å®Œæ•´ demo <a class="header-anchor" href="#å®Œæ•´-demo" aria-label="Permalink to &quot;å®Œæ•´ demo&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…å°†æœ¬èŠ‚å†…å®¹æ•´ç†æˆäº†ä¸€ä¸ª Demoï¼Œå¯ä»¥ç›´æ¥åœ¨çº¿ä½“éªŒã€‚</p>
<blockquote>
<p><strong>åœ¨çº¿ Demo ä½“éªŒåœ°å€ â†’:</strong> <a href="https://demos.sugarat.top/pages/jpg-compress/" target="_blank" rel="noreferrer">https://demos.sugarat.top/pages/jpg-compress/</a></p>
</blockquote>
<p>å¤§æ¦‚ç•Œé¢å¦‚ä¸‹ï¼ˆå¯ä¿®æ”¹é…ç½®åˆ‡æ¢å‹ç¼©æ–¹æ¡ˆï¼Œå¯¹æ¯”æ•ˆæœï¼‰ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/736ac7e7771d2a948845e1fe0d0fa40f" alt="" loading="lazy"></p>
<p><em>çº¯è¡€ HTML/CSS/JSï¼Œå¤åˆ¶ç²˜è´´å°±èƒ½è¿è¡Œã€‚</em></p>
<p>å®Œæ•´æºç è§ï¼š<a href="https://github.com/ATQQ/demos/tree/main/pages/png-compress" target="_blank" rel="noreferrer">GitHub:ATQQ/demos - jpg-compress</a></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>åç»­å°†ç»§ç»­å­¦ä¹ &amp;æ¢ç´¢ä¸€ä¸‹ <code>GIF</code>ï¼Œ<code>MP4 è½¬ GIF</code> ç­‰å¸¸ç”¨çš„åŠ¨å›¾å‰ç«¯å¤„ç†å®ç°çš„æ–¹å¼ã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/bcba46c1cd96ae55e93d5306796cd98c" length="0" type="image//mdImg/sugar/bcba46c1cd96ae55e93d5306796cd98c"/>
        </item>
        <item>
            <title><![CDATA[å°ç¨‹åºä¸­ä½¿ç”¨ lottie åŠ¨ç”» | è¸©å‘ç»éªŒåˆ†äº«]]></title>
            <link>https://www.dmsrs.org/technology/learn/mini-lottie.html</link>
            <guid>https://www.dmsrs.org/technology/learn/mini-lottie.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[è®°å½•åˆ†äº«åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ lottie æ’­æ”¾AEåŠ¨ç”»çš„æ–¹æ³•ï¼Œä»¥åŠè¸©å‘ç»éªŒã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="å°ç¨‹åºä¸­ä½¿ç”¨-lottie-åŠ¨ç”»-è¸©å‘ç»éªŒåˆ†äº«" tabindex="-1">å°ç¨‹åºä¸­ä½¿ç”¨ lottie åŠ¨ç”» | è¸©å‘ç»éªŒåˆ†äº« <a class="header-anchor" href="#å°ç¨‹åºä¸­ä½¿ç”¨-lottie-åŠ¨ç”»-è¸©å‘ç»éªŒåˆ†äº«" aria-label="Permalink to &quot;å°ç¨‹åºä¸­ä½¿ç”¨ lottie åŠ¨ç”» | è¸©å‘ç»éªŒåˆ†äº«&quot;">&ZeroWidthSpace;</a></h1>
<p>æœ¬å‘¨è¢«æ‹‰å»æ”¯æ´ç´§æ€¥éœ€æ±‚ï¼ˆèµ¶åœ¨äº”ä¸€èŠ‚å‡æ—¥å‰ä¸Šçº¿çš„ï¼ŒåŒä¼‘éœ€è¦åŠ ç­ğŸ˜±ï¼‰ï¼Œå‚ä¸åˆ°é¡¹ç›®ä¸­æ‰çŸ¥é“ï¼Œå¼€å‘çš„é¡¹ç›®æ˜¯å¾®ä¿¡å°ç¨‹åºæŠ€æœ¯æ ˆçš„ã€‚ç”±äºæ˜¯ä¸´æ—¶æ”¯æ´ï¼Œç¬”è€…ä¹Ÿå¾ˆä¹…æ²¡å¼€å‘è¿‡å¾®ä¿¡å°ç¨‹åºäº†ï¼Œæ‰€ä»¥æŒ‘é€‰äº†ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸šåŠ¡å±æ€§ç›¸å¯¹è½»è–„çš„æ¨¡å—å‚ä¸ã€‚</p>
<p>å…¶ä¸­æœ‰ä¸ªè¥é”€æ´»åŠ¨ï¼ˆé¢†çº¢åŒ…ğŸ§§ğŸ˜ï¼‰çš„å¼¹çª—åŠ¨ç”»å°±è¦ç”¨åˆ° lottie åŠ¨ç”»ã€‚</p>
<p>æœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ lottie è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä¸è§£å†³åŠæ³•ã€‚</p>
<h2 id="å…³äº-lottie" tabindex="-1">å…³äº lottie <a class="header-anchor" href="#å…³äº-lottie" aria-label="Permalink to &quot;å…³äº lottie&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="https://airbnb.io/lottie/#/README" target="_blank" rel="noreferrer">lottie</a> æ˜¯ Airbnb å¼€æºçš„ä¸€ä¸ªåŠ¨ç”»åº“ï¼Œç”¨äºåœ¨ç«¯ä¸Šç›´æ¥æ’­æ”¾ AE ( Adobe After Effects)åŠ¨ç”»ã€‚</p>
<p>é€šè¿‡ <a href="https://github.com/airbnb/lottie-web/tree/master/build/extension" target="_blank" rel="noreferrer">bodymovin</a> AE æ’ä»¶å°†åŠ¨ç”»æ–‡ä»¶å¯¼å‡ºä¸º json æ–‡ä»¶ï¼Œlottie SDK é€šè¿‡å¯ä»¥é€šè¿‡ JSON æ–‡ä»¶ç›´æ¥æ’­æ”¾åŠ¨ç”»ã€‚</p>
<p>å…·ä½“ demos æ•ˆæœå¯ä»¥ä¸Š <a href="https://lottiefiles.com/" target="_blank" rel="noreferrer">LottieFiles</a> ç½‘ç«™æŸ¥çœ‹ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨-ae-å¯¼å‡ºåŠ¨ç”»éœ€è¦çš„jsonæ–‡ä»¶" tabindex="-1">å¦‚ä½•ä½¿ç”¨ AE å¯¼å‡ºåŠ¨ç”»éœ€è¦çš„JSONæ–‡ä»¶ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-ae-å¯¼å‡ºåŠ¨ç”»éœ€è¦çš„jsonæ–‡ä»¶" aria-label="Permalink to &quot;å¦‚ä½•ä½¿ç”¨ AE å¯¼å‡ºåŠ¨ç”»éœ€è¦çš„JSONæ–‡ä»¶&quot;">&ZeroWidthSpace;</a></h2>
<p>å®Œæˆ AE è½¯ä»¶å®‰è£…åï¼Œå‚ç…§ <a href="https://github.com/airbnb/lottie-web/tree/master?tab=readme-ov-file#plugin-installation" target="_blank" rel="noreferrer">Lottie Web GitHub å®˜æ–¹æ–‡æ¡£</a> å®Œæˆ <code>bodymovin</code> æ’ä»¶çš„å®‰è£…ã€‚</p>
<p>æ‰“å¼€åŠ¨ç”»æ–‡ä»¶åï¼Œåªéœ€ç®€å•å‡ æ­¥æ“ä½œ</p>
<p>â‘  window ä¸­é€‰æ‹© Bodymovie</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/e887b3af9200905af6a3484300de1d3b" alt="" loading="lazy"></p>
<p>â‘¡ é€‰æ‹©éœ€è¦å¯¼å‡ºçš„åŠ¨ç”»èµ„æº</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/ddb3ce4d7c88df65ee50cca915817fa7" alt="" loading="lazy"></p>
<p>â‘¢ å¯¼å‡ºé…ç½®ï¼ˆå°ç¨‹åºç›¸å…³ï¼‰</p>
<p>ç‚¹å‡»å¯¹åº”åŠ¨ç”»çš„è®¾ç½®</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/e8a6dfc08dd521ccf65cf2c003c00aac" alt="" loading="lazy"></p>
<p>å‹¾é€‰ <code>Glyphs</code> å°†ç”¨åˆ°çš„æ–‡å­—+å­—ä½“å¯¼å‡ºä¸ºå›¾å½¢ã€‚</p>
<p>å°ç¨‹åºé‡Œæ¸²æŸ“ä¸æ”¯æŒåŠ è½½å¤–éƒ¨å­—ä½“ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/fab7f7d9ca8aafd9f7935afdb0d91b74" alt="" loading="lazy"></p>
<p><em>è¿™ä¸ªå°±ä¼šæœ‰ tree shakeçš„æ•ˆæœï¼Œå¦‚æœåŠ¨ç”»é‡Œæ²¡æœ‰ç”¨åˆ°çš„æ–‡å­—ï¼ŒåšåŠ¨æ€æ›¿æ¢çš„æ—¶å€™å°±ä¼šä¸æ˜¾ç¤ºï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»åˆ°</em>ã€‚</p>
<p>å‹¾é€‰ <code>Convert expressions to keyframes</code> å°†è¡¨è¾¾å¼è½¬ä¸ºå…³é”®å¸§ï¼Œå› ä¸ºå°ç¨‹åºé‡Œä¸æ”¯æŒä½¿ç”¨ <code>eval</code> ç­‰åŠ¨æ€æ‰§è¡Œè„šæœ¬çš„èƒ½åŠ›ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/ca9d49f12f786b36cb1699958a56421e" alt="" loading="lazy"></p>
<p>ä¿®æ”¹å®Œæˆåç‚¹å‡»<code>Save</code>ä¿å­˜é…ç½®ã€‚</p>
<p>â‘£ æ¸²æŸ“å¯¼å‡º JSON æ–‡ä»¶</p>
<p>æœ€åç‚¹å‡» Render æŒ‰é’®ï¼Œå¯¼å‡º JSON æ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/e4e147a1d4a9a79b8d19f09bfc402bc0" alt="" loading="lazy"></p>
<p>å¯¼å‡ºæ–‡ä»¶å¦‚ä¸‹ï¼Œdata.json æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ JSON æ–‡ä»¶ï¼Œimages é‡Œå­˜å‚¨çš„å°±æ˜¯æ’­æ”¾è¦ç”¨åˆ°çš„å›¾ç‰‡æ–‡ä»¶ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/58abc6bc9d72ed6d4ff078b58ab2dbaf" alt="" loading="lazy"></p>
<h2 id="å°ç¨‹åºä¸­ä½¿ç”¨" tabindex="-1">å°ç¨‹åºä¸­ä½¿ç”¨ <a class="header-anchor" href="#å°ç¨‹åºä¸­ä½¿ç”¨" aria-label="Permalink to &quot;å°ç¨‹åºä¸­ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>å¯ä»¥ä½¿ç”¨å°ç¨‹åºå®˜æ–¹å°è£…çš„ <a href="https://github.com/wechat-miniprogram/lottie-miniprogram" target="_blank" rel="noreferrer">lottie-miniprogram</a> åº“ã€‚</p>
<blockquote>
<p>å¿«é€ŸéªŒè¯çš„è¯å¯ä»¥æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œåœ¨ç‚¹å‡»ğŸ‘‰ğŸ» <a href="https://developers.weixin.qq.com/s/2TYvm9mJ75bF" target="_blank" rel="noreferrer">demoä»£ç ç‰‡æ®µ</a> è¿›è¡Œåˆ›å»ºã€‚</p>
</blockquote>
<p>â‘  å®‰è£…ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> lottie-miniprogram</span></span></code></pre>
</div><p>â‘¡ ä½¿ç”¨</p>
<p><strong>tipï¼šå¼€å‘è€…å·¥å…·ä¸­éªŒè¯çš„è¯ï¼Œæ¸²æŸ“æ¨¡å¼éœ€è¦é€‰æ‹© webview ï¼Œ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/introduction.html" target="_blank" rel="noreferrer">Skyline</a> ç›®å‰è¿˜ä¸æ”¯æŒè°ƒè¯• canvas</strong></p>
<p>index.wxml</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"lottie-canvas"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2d"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>index.js</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> lottie </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'lottie-miniprogram'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createSelectorQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'#lottie-canvas'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å–å¾— canvas èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è®¾ç½® cavnas ç”»å¸ƒå°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 600</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      lottie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(canvas)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2d'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> lottieInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> lottie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">loadAnimation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        loop: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¾ªç¯æ’­æ”¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        autoplay: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è‡ªåŠ¨æ’­æ”¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // æœ¬åœ°ä½¿ç”¨ http-server å¯åŠ¨æœåŠ¡åï¼ŒæŒ‡å®šæœ¬åœ°èµ„æºåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://127.0.0.1:8080/lottie-demo-sources/data.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€šè¿‡http åˆ¶å®šjsonèµ„æºè·¯å¾„</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œç›´æ¥ä¼ å…¥ lottie jsonå†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // (éœ€è¦åŠ¨æ€æ›¿æ¢æ–‡æ¡ˆå°±éœ€è¦ç”¨åˆ°è¿™ç§æ–¹å¼)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // animationData: {/* lottie json æ ¼å¼å†…å®¹ */},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // é™æ€èµ„æºç›®å½•ï¼Œé€šå¸¸ä¸ animationData é…åˆä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // assetsPath: 'http://127.0.0.1:8080/lottie-demo-sources/images/',</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        rendererSettings: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          context,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æˆ‘è¿™ä¸ª demo çš„æ•ˆæœï¼ˆç½‘ä¸Šæ‰¾çš„åŠ¨ç”»ç´ æï¼‰å¦‚ä¸‹ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/fe89db8f5a79940b2c2167062f1b321f" alt="" loading="lazy"></p>
<h2 id="é—®é¢˜-è§£å†³" tabindex="-1">é—®é¢˜&amp;è§£å†³ <a class="header-anchor" href="#é—®é¢˜-è§£å†³" aria-label="Permalink to &quot;é—®é¢˜&amp;è§£å†³&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸‹é¢ä»‹ç»åœ¨å®é™…ä¸šåŠ¡æ¥å…¥ä½¿ç”¨ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚</p>
<h3 id="expression-è¡¨è¾¾å¼" tabindex="-1">expression è¡¨è¾¾å¼ <a class="header-anchor" href="#expression-è¡¨è¾¾å¼" aria-label="Permalink to &quot;expression è¡¨è¾¾å¼&quot;">&ZeroWidthSpace;</a></h3>
<p>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼Œè¿™æ˜¯é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼ˆä¹Ÿæ˜¯ä¸Šé¢å¯¼å‡ºé…ç½®ä¸­æœ‰ç‰¹åˆ«è¯´æ˜çš„ï¼‰ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/63b1e8a0370b0ffdd017de7ceb918465" alt="" loading="lazy"></p>
<p>ç»†çœ‹äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œæœ‰ç‰¹åˆ«è¯´æ˜ï¼Œexpression è¡¨è¾¾å¼ç‰¹æ€§æ˜¯ä¸æ”¯æŒçš„ï¼Œå› æ­¤éœ€è¦å†å¯¼å‡º JSON æ–‡ä»¶æ—¶ç¦ç”¨ç›¸å…³ç‰¹æ€§ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/c8f32eb3368a511c84cf1e7803687d5c" alt="" loading="lazy"></p>
<p>è§£å†³åŠæ³•ï¼šå¯¼å‡ºJSONæ–‡ä»¶æ—¶ï¼Œç¦ç”¨æ‰è¡¨è¾¾å¼ç‰¹æ€§å³å¯ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/60104c2927d61dcb75be50fbd363f45d" alt="" loading="lazy"></p>
<p>å½“ç„¶ç¦ç”¨åï¼ŒJSON æ–‡ä»¶å¤§å°ä¼šæœ‰æ‰€å¢åŠ ã€‚</p>
<p>æ¯”å¦‚æˆ‘è¿™ä¸ª demo ä» 40kb å¢åŠ åˆ°äº† 240kbï¼ˆå½“ç„¶åŠ¨ç”»ä¸ä¸€æ ·ï¼Œå¢é•¿çš„å¤§å°ä¼šæœ‰æ‰€ä¸åŒã€‚æœ‰äº›å‰åå¯èƒ½åªæœ‰1-2kbçš„å˜åŒ–ï¼‰ã€‚</p>
<h3 id="æ¨¡ç³Š" tabindex="-1">æ¨¡ç³Š <a class="header-anchor" href="#æ¨¡ç³Š" aria-label="Permalink to &quot;æ¨¡ç³Š&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”±äºéœ€è¦å…¨å±å±•ç¤ºï¼ŒåŠ¨ç”»æ–‡ä»¶çš„å°ºå¯¸ä¸ç¡®å®šï¼Œæ‰‹åŠ¨åªè®¾ç½® canvas å°ºå¯¸ä¼šæœ‰æ¨¡ç³Šçš„é—®é¢˜ã€‚</p>
<p>è¿™ä¸ªé€šè¿‡æ˜é‡‘æœç´¢äº†ä¸€ä¸‹å°±å¾—åˆ°äº† <a href="https://juejin.cn/post/7171273016762974216#heading-7" target="_blank" rel="noreferrer">lottieåŠ¨ç”»æ¨¡ç³Šé—®é¢˜çš„è§£å†³æ–¹æ³•</a>ã€‚</p>
<p>å¾®è°ƒä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå°±å¯ä»¥è§£å†³æ¨¡ç³Šé—®é¢˜ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 600</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä¸‹é¢æ˜¯æ–°å¢çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dpr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getSystemInfoSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().pixelRatio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dpr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dpr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dpr, dpr)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lottie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(canvas)</span></span></code></pre>
</div><h3 id="å…¨å±åŠ¨ç”»" tabindex="-1">å…¨å±åŠ¨ç”» <a class="header-anchor" href="#å…¨å±åŠ¨ç”»" aria-label="Permalink to &quot;å…¨å±åŠ¨ç”»&quot;">&ZeroWidthSpace;</a></h3>
<p>å¼¹çª—çš„åŠ¨ç”»éœ€è¦å…¨å±å±•ç¤ºï¼Œå› æ­¤éœ€è¦è®¾ç½® <code>canvas</code> å®½é«˜ä¸ºé¡µé¢å®½é«˜ã€‚</p>
<p>index.wxss</p>
<div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">#lottie-canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">fixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">vw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">vh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>index.jsï¼Œä½¿ç”¨ <code>wx.getSystemInfoSync</code> è·å–è®¾å¤‡çš„ä¿¡æ¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">windowWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">windowHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">pixelRatio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getSystemInfoSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> windowWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pixelRatio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> windowHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pixelRatio</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/sugar/3dd8a0483aba8a07d9a85692197e5ce5" alt="" loading="lazy"></p>
<h3 id="åŠ¨æ€æ–‡æ¡ˆ" tabindex="-1">åŠ¨æ€æ–‡æ¡ˆ <a class="header-anchor" href="#åŠ¨æ€æ–‡æ¡ˆ" aria-label="Permalink to &quot;åŠ¨æ€æ–‡æ¡ˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”±äºæ˜¯çº¢åŒ…ï¼Œéœ€è¦åŠ¨æ€å±•ç¤ºé‡‘é¢ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯ä¸å›ºå®šå†…å®¹çš„åŠ¨æ€æ ‡é¢˜ï¼‰ã€‚</p>
<p>æ€è·¯å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://zhuanlan.zhihu.com/p/102334701?s_r=0" target="_blank" rel="noreferrer">çŸ¥ä¹ï¼š åŠ¨æ€ä¿®æ”¹ Lottie ä¸­çš„æ–‡æœ¬</a></p>
<p>å¯ä»¥ä½¿ç”¨å›ºå®šæ ¼å¼çš„æ–‡æœ¬ <code>${æ–‡æœ¬}</code> è¿›è¡Œæ›¿æ¢</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä¼ªä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sourceUrl'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsonText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res.data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> animationData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(jsonText.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'${é‡‘é¢}'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ç›®æ ‡é‡‘é¢'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æ¯”å¦‚æˆ‘åœ¨ demo é‡ŒåŠ ä¸€ä¸ªæ–‡å­—</p>
<ul>
<li>éœ€è¦å±•ç¤ºçš„æ–‡æœ¬é‡Œæ”¾å…¥ <code>${num}</code> ç”¨äºæ›¿æ¢åŒ¹é…</li>
<li>åœ¨æ·»åŠ ä¸€ä¸ªæ–‡æœ¬è—åœ¨çœ‹ä¸è§çš„åœ°æ–¹,é‡Œé¢å†™å…¥æ›¿æ¢åéœ€è¦ç”¨åˆ°çš„æ–‡å­—ï¼ˆç¡®ä¿å’Œä¸Šé¢çš„æ–‡æœ¬ä¸ºåŒä¸€ç§å­—ä½“ï¼‰</li>
</ul>
<p><img src="https://cdn.upyun.sugarat.top/test/sugar/f2bd93aa21e7cd2328c987948d4557a7" alt="" loading="lazy"></p>
<p>æ¥ç€å¯¼å‡º JSON æ–‡ä»¶ã€‚</p>
<p>è°ƒç”¨æ–¹æ³•å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ‹‰å–JSONæ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsonData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  wx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://127.0.0.1:8080/json/text-replace/data.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éšæœºç”Ÿæˆ1-100å…ƒçš„æ•°å­—ï¼Œä¿ç•™ä¸¤ä½å°æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> num</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ›¿æ¢å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> animationData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(jsonData)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\$\{</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">num</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">num</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}å…ƒ`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">lottie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">loadAnimation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æŒ‡å®šjsonå†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  animationData,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è®¾ç½®ä¾èµ–çš„å›¾ç‰‡èµ„æºä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  assetsPath: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://127.0.0.1:8080/json/text-replace/images/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...çœç•¥å…¶å®ƒé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/290fee264246526131c5048c67125711" alt="" loading="lazy"></p>
<h3 id="style-å¼•å‘çš„æ¸²æŸ“é”™è¯¯" tabindex="-1">style å¼•å‘çš„æ¸²æŸ“é”™è¯¯ <a class="header-anchor" href="#style-å¼•å‘çš„æ¸²æŸ“é”™è¯¯" aria-label="Permalink to &quot;style å¼•å‘çš„æ¸²æŸ“é”™è¯¯&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ canvas æ ‡ç­¾ä¸Šè®¾ç½® <code>display</code>æ§åˆ¶æ˜¾éšï¼Œå¶ç°ä¼šæç¤ºæ¸²æŸ“å±‚é”™è¯¯ã€‚</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"display:{{show?'block':'none'}}"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"c1"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2d"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/cedddb72f45046ca974cb594be964eeb" alt="" loading="lazy"></p>
<p>è§£å†³åŠæ³•ï¼Œç»™å¥—äº†ä¸€å±‚ <code>view</code>ï¼Œç”¨<code>wx:if</code>æ§åˆ¶å’¯ã€‚</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">view</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  wx:if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{{show}}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"c1"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2d"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><h3 id="ios-æ’­æ”¾é—ªé€€é—®é¢˜" tabindex="-1">iOS æ’­æ”¾é—ªé€€é—®é¢˜ <a class="header-anchor" href="#ios-æ’­æ”¾é—ªé€€é—®é¢˜" aria-label="Permalink to &quot;iOS æ’­æ”¾é—ªé€€é—®é¢˜&quot;">&ZeroWidthSpace;</a></h3>
<p>ç°è±¡æ˜¯ï¼Œéå†·å¯åŠ¨å°ç¨‹åºçš„æ—¶å€™ï¼ŒåŠ¨ç”»è¿˜æ²¡æ’­æ”¾å®Œæ¯•å°±æå‰ç»“æŸäº†ã€‚</p>
<p>çœ‹ä»£ç logï¼Œ3sçš„åŠ¨ç”»ï¼Œæ’­æ”¾ä¸åˆ° 1s å°±è§¦å‘äº† <code>complete</code> äº‹ä»¶ï¼Œçœ‹ç°è±¡å°±æ˜¯ä¸€é—ªè€Œé€ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ani</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> lottie.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">loadAnimation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // 3s çš„åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  animationData,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...çœç•¥å…¶å®ƒé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ani.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'complete'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'åŠ¨ç”»æ’­æ”¾ç»“æŸ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>é—®é¢˜æ’æŸ¥ï¼š</p>
<p>â‘  ç¿»çœ‹æºç <a href="https://github.com/wechat-miniprogram/lottie-miniprogram/tree/master" target="_blank" rel="noreferrer">lottie-miniprogram</a></p>
<p>åœ¨ <code>src/adapter/index.js</code> ä¸­çœ‹åˆ°<a href="https://github.com/wechat-miniprogram/lottie-miniprogram/blob/49066a6479d710b5863754613a518c65487912db/src/adapter/index.js#L89-L101" target="_blank" rel="noreferrer">ä¸‹é¢è¿™æ®µä»£ç </a></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">requestAnimationFrame</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (called) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">timeStamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (called) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timeStamp)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åœ¨ç¿»çœ‹ä¸€ä¸‹å°ç¨‹åºæ–‡æ¡£é‡Œ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/Canvas.requestAnimationFrame.html" target="_blank" rel="noreferrer">canvas.requestAnimationFrame</a> æ–‡æ¡£è¯´æ˜ã€‚</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/36b0cfb5ce7dca2c6916caf71aeff2ff" alt="" loading="lazy"></p>
<p>æœ‰ç‚¹æ‚Ÿäº†ä¸Šé¢çš„ <code>setTimeout</code> ä»£ç ï¼Œåº”è¯¥æ˜¯ä¸ºäº†å…¼å®¹ä½ç‰ˆæœ¬çš„å°ç¨‹åºï¼Œé‡Œé¢è¿˜æœ‰ <code>called</code> å˜é‡æ§åˆ¶ï¼Œä¸é‡å¤æ‰§è¡Œã€‚</p>
<p>çŒœæµ‹å¯èƒ½æ˜¯åœ¨æ’­æ”¾çš„æ—¶å€™æ‰§è¡Œäº† <code>setTimeout</code> é‡Œçš„é€»è¾‘å¯¼è‡´åŠ¨ç”»æå‰ç»“æŸã€‚</p>
<p>äºæ˜¯æˆ‘å°±åŠ ä¸Šäº† <code>console.log</code> å‘å¸ƒåˆ°çº¿ä¸ŠéªŒè¯ä¸€ä¸‹ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark has-diff vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (called) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'setTimeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">timeStamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (called) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line diff add"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'canvas.requestAnimationFrame'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, timeStamp) </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  called </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timeStamp)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>vconsole æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/8ee7e4cf3535cb2e4caba929abfe205c" alt="" loading="lazy"></p>
<p><em>ä¸€ç‚¹è¡¥å……ï¼Œé’ˆå¯¹ <code>canvas.requestAnimationFrame</code> å›åˆ°å‡½æ•°çš„å…¥å‚ï¼Œå°ç¨‹åºæ–‡æ¡£é‡Œè™½æ²¡æœ‰è¯¦ç»†ä»‹ç»ï¼Œä½†å¯ä»¥å¯¹æ ‡ Web çš„
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/window/requestAnimationFrame" target="_blank" rel="noreferrer">Windowï¼šrequestAnimationFrame() æ–¹æ³•</a> çœ‹ä¸€ä¸‹ MDN ä¸Šçš„è§£é‡Šã€‚</em></p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/2d307758e0873a89aa4fb33602547ed7" alt="" loading="lazy"></p>
<p>ä»ä¸Šé¢çš„ <code>console</code> æ—¥å¿—çœ‹ï¼ŒåŸå› ç¡®å®æ˜¯æ‰§è¡Œ setTimeout é‡Œé¢çš„é€»è¾‘å¯¼è‡´çš„åŠ¨ç”»ç»“æŸã€‚</p>
<p>å¯ä»¥å¾—åˆ°å¼•å‘bugçš„åŸå› ï¼šâ†“</p>
<p><strong>æŸç§æƒ…å†µä¸‹ï¼Œ<code>setTimeout(callback, 100)</code> æ¯” <code>canvas.requestAnimationFrame</code> æ›´å¿«æ‰§è¡Œã€‚</strong></p>
<p><em>è¿™ä¸ªåº“å¾ˆä¹…æ²¡è¿­ä»£äº†ï¼ˆç°æœ‰ç‰ˆæœ¬æ˜¯3å¹´å‰å‘å¸ƒçš„ï¼‰ï¼Œæ¯å‘¨è¿˜æ˜¯æœ‰ä¸€äº›ä¸‹è½½é‡ï¼Œissue é‡Œä¹Ÿæ²¡æœ‰æåˆ° iOS æœ‰è¿™ä¸ªé—®é¢˜ï¼ï¼ˆåˆ‡æ¢æ¸²æŸ“æ¨¡å¼ä¸º skyline ä¹Ÿæ²¡æœ‰è§¦å‘è¿™ä¸ªé—®é¢˜ï¼Œé—®é¢˜åªåœ¨ webview æ¨¡å¼ä¸‹æœ‰ï¼Œä¸”ä»…ä½¿ç”¨ç®€å•Demoä¹Ÿæ— æ³•å¤ç°è¿™ä¸ªé—®é¢˜ï¼‰</em></p>
<p><em>ä¹Ÿä¸æ¸…æ¥šå°ç¨‹åºé‡Œ canvas.requestAnimationFrame å®ç°æœºåˆ¶ã€‚</em></p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/5c5a97df02d19c6b7248b1c983b5a639" alt="" loading="lazy"></p>
<p>å¤§èƒ†æ£æµ‹ä¸€ä¸‹åŸå› ï¼š</p>
<p><strong>é¡µé¢å®ç°å¯èƒ½è¿‡äºå¤æ‚ï¼Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ‰§è¡Œé˜»å¡åœ¨é€»è¾‘å±‚ï¼Œå¯¼è‡´ setTimeout æ—¶é—´åˆ°äº†ä»¥åå›è°ƒå‡½æ•°å…¥æ ˆï¼Œæ¥ç€å°±åœ¨é€»è¾‘å±‚è°ƒç”¨æ‰§è¡Œäº†</strong></p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p><img src="https://cdn.upyun.sugarat.top/mdImg/sugar/182858ba4f246bf28417cda3fb029b8f" alt="" loading="lazy"></p>
<p><strong>æ—¢ç„¶æ˜¯å…¼å®¹å®ç°ï¼Œå°±åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å­˜åœ¨ <code>requestAnimationFrame</code> æ–¹æ³•ï¼Œå­˜åœ¨å°±ä¸æ‰§è¡Œ <code>setTimeout</code> ç›¸å…³é€»è¾‘ã€‚</strong></p>
<p>å®Œæ•´è§£å†³ PR è§ï¼š<a href="https://github.com/wechat-miniprogram/lottie-miniprogram/pull/50" target="_blank" rel="noreferrer">https://github.com/wechat-miniprogram/lottie-miniprogram/pull/50</a></p>
<p>å°†æ‰“åŒ…åçš„äº§ç‰©æ›¿æ¢åˆ° <code>node_modules</code> é‡Œå¯¹åº”ä½ç½®åï¼Œå†ä½¿ç”¨ <a href="https://www.npmjs.com/package/patch-package" target="_blank" rel="noreferrer">patch-package</a> ç”Ÿæˆ patchï¼Œä»¥ä¾¿åç»­å®‰è£…ä¾èµ–è‡ªåŠ¨æ›´æ–°</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ—¶é—´åŒ†å¿™ï¼Œä»‹ç»çš„ä¸æ˜¯éå¸¸çš„è¯¦ç»†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è¯„è®ºåŒºäº¤æµã€‚</p>
<p><code>demo</code> å®Œæ•´æºç è§ <a href="https://github.com/ATQQ/demos/tree/main/miniprogram/lottie-demo" target="_blank" rel="noreferrer">GitHubï¼šlottie-demo</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/c5a59914529f4b50a969ec7f1caadc36" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/e887b3af9200905af6a3484300de1d3b" length="0" type="image//mdImg/sugar/e887b3af9200905af6a3484300de1d3b"/>
        </item>
        <item>
            <title><![CDATA[çº¯å‰ç«¯å®ç° PNG å›¾ç‰‡å‹ç¼© | UPNG.js]]></title>
            <link>https://www.dmsrs.org/technology/learn/png-compress.html</link>
            <guid>https://www.dmsrs.org/technology/learn/png-compress.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[æœ€è¿‘åœ¨è¿­ä»£åº”ç”¨çš„æ—¶å€™ç”¨åˆ°äº† UPNG.js å‹ç¼© PNG å›¾ç‰‡ï¼Œè¿™é‡Œè®°å½•åˆ†äº«ä¸€ä¸‹ä½¿ç”¨ç»éªŒï¼Œå¹¶é™„ä¸Šå®Œæ•´ Demoã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="çº¯å‰ç«¯å®ç°-png-å›¾ç‰‡å‹ç¼©-upng-js" tabindex="-1">çº¯å‰ç«¯å®ç° PNG å›¾ç‰‡å‹ç¼© | UPNG.js <a class="header-anchor" href="#çº¯å‰ç«¯å®ç°-png-å›¾ç‰‡å‹ç¼©-upng-js" aria-label="Permalink to &quot;çº¯å‰ç«¯å®ç° PNG å›¾ç‰‡å‹ç¼© | UPNG.js&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p><strong>åœ¨çº¿ Demo ä½“éªŒåœ°å€ â†’:</strong> <a href="https://demos.sugarat.top/pages/png-compress/" target="_blank" rel="noreferrer">https://demos.sugarat.top/pages/png-compress/</a></p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ€è¿‘åœ¨è¿­ä»£è‡ªå·±çš„ <a href="https://imgbed.sugarat.top/" target="_blank" rel="noreferrer">å›¾åºŠ</a> åº”ç”¨ï¼Œç”±äºä½¿ç”¨æ—¶é—´çš„ç´¯è®¡ï¼Œå­˜å‚¨ç©ºé—´å ç”¨è¶Šæ¥è¶Šå¤§äº†ï¼Œåœ¨åš Web åº”ç”¨çš„æ—¶å€™ä¼šéšæ‰‹æ‹¿ <a href="https://tinypng.com/" target="_blank" rel="noreferrer">tinypng</a> å‹ç¼©ä¸€ä¸‹å›¾ç‰‡ã€‚</p>
<p>æƒ³ç€ç»™å’±å›¾åºŠä¹ŸåŠ ä¸ªå‹ç¼©çš„åŠŸèƒ½ï¼Œè¿™æ ·ä¸Šä¼ /è®¿é—®ä¹Ÿèƒ½çœç‚¹ ğŸ’°ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/d666613614e04da1e6e135c982cfc42e" alt="" loading="lazy"></p>
<p>å›¾ç‰‡ç±»å‹ä¼—å¤šï¼Œå¸¸ç”¨çš„ä¸»è¦å°±æ˜¯<code>PNG/JPG/GIF</code>ã€‚</p>
<p>ä¸ªäººä½¿ç”¨é¢‘ç‡æœ€é«˜çš„åœºæ™¯æ˜¯æˆªå›¾ä¸Šä¼ ï¼Œæ ¼å¼ä¸º<code>PNG</code>ï¼Œå°±å…ˆæ‹¿ <code>PNG</code> è¯•æ‰‹ã€‚è°ƒç ”äº†ä¸€åœˆå¼€æºé‡Œæœ€æµè¡Œçš„å°±æ˜¯ä½¿ç”¨ <a href="https://github.com/photopea/UPNG.js" target="_blank" rel="noreferrer">UPNG.js</a> è¿›è¡Œ PNG çš„å‹ç¼©ã€‚</p>
<ul>
<li><a href="https://blog.photopea.com/png-minifier-inside-photopea.html#examples" target="_blank" rel="noreferrer">å®˜æ–¹å¯¹æ¯” tinypng ä»‹ç»</a>ï¼›</li>
<li><a href="http://upng.photopea.com/" target="_blank" rel="noreferrer">å®˜æ–¹åœ¨çº¿ç¤ºä¾‹ Demo</a>ã€‚</li>
</ul>
<h2 id="å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯-png" tabindex="-1">å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯ PNG <a class="header-anchor" href="#å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯-png" aria-label="Permalink to &quot;å¦‚ä½•åˆ¤æ–­å›¾ç‰‡æ˜¯ PNG&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯åˆ¤æ–­å›¾ç‰‡ç±»å‹ï¼Œä¸ç„¶ <code>UPNG.js</code> å°±ä¸èƒ½æ­£å¸¸å·¥ä½œå’¯ï¼Œé€šè¿‡æ–‡ä»¶åç¼€ .png åˆ¤æ–­è‚¯å®šæ˜¯ä¸é è°±çš„ã€‚</p>
<p>æœç´¢äº†è§£äº†ä¸€ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>é­”æ•°</code> åˆ¤æ–­ï¼š<strong>ä¸€ä¸ªPNGæ–‡ä»¶çš„å‰8ä¸ªå­—èŠ‚æ˜¯å›ºå®šçš„</strong>ã€‚</p>
<p><code>PNG</code> çš„å‰ 8 ä¸ªå­—èŠ‚æ˜¯ï¼ˆ16è¿›åˆ¶è¡¨ç¤ºï¼‰ï¼š<code>89 50 4E 47 0D 0A 1A 0A</code>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ‹¿å·¥å…·çœ‹ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œç”¨ VS Code æ’ä»¶ <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.hexeditor" target="_blank" rel="noreferrer">Hex Editor</a> æŸ¥çœ‹ä¸€ä¸ª PNG å›¾ç‰‡çš„ 16 è¿›åˆ¶è¡¨ç¤ºä¿¡æ¯ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/a10803276d251362424af66453c301ba" alt="" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°å‰å…«ä¸ªå­—èŠ‚å’Œä¸Šé¢è¡¨ç¤ºçš„ä¸€æ ·ã€‚</p>
<p>äºæ˜¯å¯ä»¥æ ¹æ®è¿™ä¸ªç‰¹æ€§åˆ¤æ–­ï¼Œäºæ˜¯å°±æœ‰å¦‚ä¸‹çš„åˆ¤æ–­ä»£ç ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æå–å‰8ä¸ªå­—èŠ‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> arraybuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // PNG çš„å‰8å­—èŠ‚16è¿›åˆ¶è¡¨ç¤º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> signature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x89</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x4E</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x47</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x0D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x0A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x1A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0x0A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // const signature = [137, 80, 78, 71, 13, 10, 26, 10]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è½¬ä¸º 8ä½æ— ç¬¦å·æ•´æ•°æ•°ç»„ æ–¹ä¾¿å¯¹æ¯”</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arraybuffer)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é€ä¸ªå­—èŠ‚å¯¹æ¯”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> signature.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (source[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> signature[i]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="upng-js" tabindex="-1">UPNG.js <a class="header-anchor" href="#upng-js" aria-label="Permalink to &quot;UPNG.js&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>ä¸€ä¸ªè½»é‡ä¸”æé€Ÿçš„ <code>PNG/APNG</code> ç¼–ç å’Œè§£ç åº“ï¼Œ<a href="https://www.photopea.com/" target="_blank" rel="noreferrer">Photopea</a> å›¾åƒç¼–è¾‘å™¨çš„ä¸»è¦ <code>PNG</code> å¼•æ“ã€‚</p>
</blockquote>
<h3 id="npm-åŠ è½½" tabindex="-1">npm åŠ è½½ <a class="header-anchor" href="#npm-åŠ è½½" aria-label="Permalink to &quot;npm åŠ è½½&quot;">&ZeroWidthSpace;</a></h3>
<p>å®˜æ–¹æä¾›äº† <code>npm</code> åŒ…ï¼Œç®€å•å¼•å…¥å³å¯ä½¿ç”¨ã€‚</p>
<p>å®‰è£…ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> upng-js</span></span></code></pre>
</div><p>æ ¸å¿ƒæ–¹æ³•å°± 3 ä¸ªï¼Œä¾æ¬¡è°ƒç”¨å³å¯</p>
<ul>
<li>UPNG.decode(buffer)</li>
<li>UPNG.toRGBA8(img)</li>
<li>UPNG.encode(imgs, w, h, cnum, [dels])
<ul>
<li>cnumï¼š0 è¡¨ç¤ºæ— æŸå‹ç¼©ï¼Œ256è¡¨ç¤ºæœ‰æŸï¼Œå¯ä»¥è°ƒæ•´è¿™ä¸ªå€¼æ¥æ§åˆ¶å‹ç¼©è´¨é‡ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ³¨æ„ï¼šå‹ç¼©å¹¶ä¸æ„å‘³ç€ä¸€å®šå°ï¼Œå¯¹äºä¸€äº›å·²ç»å¾ˆç®€å•ä¸”å°çš„å›¾ç‰‡ï¼Œå‹ç¼©åå¯èƒ½åè€Œæ›´å¤§ã€‚</strong></p>
<p>ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„æœ€ç®€å®ç°ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> UPNG </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'upng-js'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> arrayBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decoded</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arrayBuffer)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rgba8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toRGBA8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decoded)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…³é”®çš„å‹ç¼©æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è¿™é‡Œ ä¿æŒå®½é«˜ä¸å˜ï¼Œä¿æŒ80%çš„è´¨é‡ï¼ˆæ¥è¿‘äº tinypng çš„å‹ç¼©æ•ˆæœï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> compressed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rgba8,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    decoded.width,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    decoded.height,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    256</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0.8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([compressed], file.name, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'image/png'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶ä¸­å‹ç¼©åçš„å®½é«˜ï¼Œå‹ç¼©è´¨é‡éƒ½æ˜¯å¯ä»¥è°ƒæ•´çš„ã€‚</p>
<h3 id="å¯é…ç½®å°è£…" tabindex="-1">å¯é…ç½®å°è£… <a class="header-anchor" href="#å¯é…ç½®å°è£…" aria-label="Permalink to &quot;å¯é…ç½®å°è£…&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸‹é¢æ–¹æ³•ï¼ˆTS å®ç°ï¼‰ï¼Œæä¾›äº†ä¸€äº›å¸¸ç”¨çš„é…ç½®é€‰é¡¹ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> UPNG </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'upng-js'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CompressOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * å‹ç¼©è´¨é‡ï¼ˆ[0,1]ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> 0.8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  quality</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * å‹ç¼©åæ›´å¤§æ˜¯å¦ä½¿ç”¨åŸå›¾</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  noCompressIfLarger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * å‹ç¼©åçš„æ–°å®½åº¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> åŸå°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * å‹ç¼©åæ–°é«˜åº¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> åŸå°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> compressPNGImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CompressOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">quality</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">noCompressIfLarger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> arrayBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decoded</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arrayBuffer)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rgba8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toRGBA8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decoded)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> compressed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rgba8,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decoded.width,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> decoded.height,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    256</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> quality</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> newFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([compressed], file.name, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'image/png'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">noCompressIfLarger) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> newFile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> newFile.size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> newFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="cdn-åŠ è½½" tabindex="-1">CDN åŠ è½½ <a class="header-anchor" href="#cdn-åŠ è½½" aria-label="Permalink to &quot;CDN åŠ è½½&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸é€šè¿‡ npm å®‰è£…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾çš„æ–¹å¼è¿›è¡Œå…¨å±€å¼•å…¥ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<a href="https://www.staticfile.org/" target="_blank" rel="noreferrer">Static file</a>æä¾›çš„ CDN èµ„æºã€‚</p>
<p>åªéœ€åœ¨ HTML æ¨¡æ¿é¡¶éƒ¨ head ä¸­åŠ å…¥å¦‚ä¸‹èµ„æºå³å¯ä½¿ç”¨ã€‚</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://cdn.staticfile.net/pako/1.0.5/pako.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://cdn.staticfile.net/upng-js/2.1.0/UPNG.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>PNG æ ¼å¼åŒ–ä½¿ç”¨ <code>Inflate</code> ç®—æ³•ã€‚è¿™éƒ¨åˆ†è°ƒç”¨ <a href="https://github.com/nodeca/pako" target="_blank" rel="noreferrer">Pako.js</a> å®ç°ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–å‰ç½®å¼•å…¥ã€‚</p>
<p>å¼•å…¥åï¼Œå°†åœ¨ window ä¸Šç»‘å®š UPNG å˜é‡ï¼Œä½¿ç”¨å’Œä¸Šè¿° npm ç»™åˆ°çš„ä¾‹å­å®Œå…¨ä¸€è‡´ã€‚</p>
<p><em>ä»£ç é‡Œè°ƒç”¨æ–¹å¼å¦‚ä¸‹</em></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.encode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥ window</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">UPNG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.encode</span></span></code></pre>
</div><h2 id="å®Œæ•´-demo" tabindex="-1">å®Œæ•´ demo <a class="header-anchor" href="#å®Œæ•´-demo" aria-label="Permalink to &quot;å®Œæ•´ demo&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…å°†æœ¬èŠ‚å†…å®¹æ•´ç†æˆäº†ä¸€ä¸ª Demoï¼Œå¯ä»¥ç›´æ¥åœ¨çº¿ä½“éªŒã€‚</p>
<blockquote>
<p><strong>åœ¨çº¿ Demo ä½“éªŒåœ°å€ â†’:</strong> <a href="https://demos.sugarat.top/pages/png-compress/" target="_blank" rel="noreferrer">https://demos.sugarat.top/pages/png-compress/</a></p>
</blockquote>
<p>å¤§æ¦‚ç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/5d461c425ea18f501262017bdeca8a9a" alt="" loading="lazy"></p>
<p><em>çº¯è¡€ HTML/CSS/JSï¼Œå¤åˆ¶ç²˜è´´å°±èƒ½è¿è¡Œã€‚</em></p>
<p>å®Œæ•´æºç è§ï¼š<a href="https://github.com/ATQQ/demos/tree/main/pages/png-compress" target="_blank" rel="noreferrer">GitHub:ATQQ/demos - png-compress</a></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>åç»­å°†ç»§ç»­å­¦ä¹ &amp;æ¢ç´¢ä¸€ä¸‹å…¶å®ƒæ ¼å¼çš„<strong>çº¯å‰ç«¯å‹ç¼©å®ç°</strong>ï¼ˆJPGï¼ŒGIFï¼ŒMP4è½¬GIFï¼‰ã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/d666613614e04da1e6e135c982cfc42e" length="0" type="image//mdImg/sugar/d666613614e04da1e6e135c982cfc42e"/>
        </item>
        <item>
            <title><![CDATA[ä½¿ç”¨åˆæ‹äº‘æé€Ÿæ­å»ºå›¾åºŠ]]></title>
            <link>https://www.dmsrs.org/technology/learn/upyun.html</link>
            <guid>https://www.dmsrs.org/technology/learn/upyun.html</guid>
            <pubDate>Mon, 27 May 2024 09:57:36 GMT</pubDate>
            <description><![CDATA[åˆ†äº«ä¸€ä¸‹åˆæ‹äº‘çš„ç®€å•ç”¨æ³•ï¼Œä»¥åŠä½¿ç”¨å®ƒæ­å»ºå›¾åºŠã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="ä½¿ç”¨åˆæ‹äº‘æé€Ÿæ­å»ºå›¾åºŠ" tabindex="-1">ä½¿ç”¨åˆæ‹äº‘æé€Ÿæ­å»ºå›¾åºŠ <a class="header-anchor" href="#ä½¿ç”¨åˆæ‹äº‘æé€Ÿæ­å»ºå›¾åºŠ" aria-label="Permalink to &quot;ä½¿ç”¨åˆæ‹äº‘æé€Ÿæ­å»ºå›¾åºŠ&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>æŸå¤©åœ¨ç¾¤é‡Œæ‘¸ ğŸŸ ï¼ŒèŠåˆ°äº†å›¾åºŠç›¸å…³çš„è¯é¢˜ï¼Œç¾¤å‹æ¨èäº† <a href="https://www.upyun.com/league" target="_blank" rel="noreferrer">åˆæ‹äº‘</a>ã€‚</p>
<p>è¯´æœ‰æ´»åŠ¨ï¼Œå¯ä»¥ç™½å«–å­˜å‚¨ï¼Œ<code>10G + 15Gï¼ˆHTTP/HTTPS æµé‡ï¼‰</code> ã€‚ç¬”è€…ä¹‹å‰ä¸€ç›´ç”¨çš„<a href="https://www.qiniu.com/prices/kodo" target="_blank" rel="noreferrer">ä¸ƒç‰›äº‘</a> <code>10G + 10Gï¼ˆå›æºæµé‡ï¼‰</code>ã€‚</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">åˆæ‹äº‘</th>
<th style="text-align:center">ä¸ƒç‰›äº‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/96868081e49914aa6ab7ee142e064d56" alt="" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/sugar/4a1fb149f7dbcfa43af08f1354781d76" alt="" loading="lazy"></td>
</tr>
<tr>
<td style="text-align:center">æ³¨å†Œé€1ä¸ªæœˆçš„ä»£é‡‘åˆ¸ + ç½‘ç«™æŒ‚æ¨å¹¿é€1å¹´ä»£é‡‘åˆ¸</td>
<td style="text-align:center">æ³¨å†Œå³å¯é€æ¯æœˆéƒ½æœ‰</td>
</tr>
</tbody>
</table>
<p>ç¬”è€…å°±èŠ±äº†ç‚¹æ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹åˆæ‹äº‘çš„ SDK å’Œå¯¹è±¡å­˜å‚¨ï¼Œèƒ½åŠ›ä¸Šå®Œå…¨å¯ä»¥å¹³æ›¿ä¸ƒç‰›äº‘ï¼Œäºæ˜¯å°±èŠ±äº†ä¸€ç‚¹æ—¶é—´ç»™<a href="https://imgbed.sugarat.top/" target="_blank" rel="noreferrer">å›¾åºŠåº”ç”¨</a>åŠ ä¸Šäº†åˆæ‹äº‘çš„æ”¯æŒã€‚</p>
<h2 id="æ•ˆæœ" tabindex="-1">æ•ˆæœ <a class="header-anchor" href="#æ•ˆæœ" aria-label="Permalink to &quot;æ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<p>å¤§å®¶å¯ä»¥è®¿é—® <a href="https://imgbed.sugarat.top/" target="_blank" rel="noreferrer">https://imgbed.sugarat.top/</a> ç›´æ¥ä½“éªŒï¼Œé»˜è®¤å·²é…ç½® åˆæ‹äº‘ å­˜å‚¨</p>
<p>ä¸‹é¢å°†ä»‹ç» åˆæ‹äº‘å¯¹è±¡å­˜å‚¨é…ç½®ï¼Œå…³é”®APIç”¨æ³•ï¼Œå¦‚ä½•æ¥å…¥ä¸Šè¿°å›¾åºŠã€‚</p>
<h2 id="å¯¹è±¡å­˜å‚¨æœåŠ¡åˆ›å»º" tabindex="-1">å¯¹è±¡å­˜å‚¨æœåŠ¡åˆ›å»º <a class="header-anchor" href="#å¯¹è±¡å­˜å‚¨æœåŠ¡åˆ›å»º" aria-label="Permalink to &quot;å¯¹è±¡å­˜å‚¨æœåŠ¡åˆ›å»º&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™é‡Œç›´æ¥çœç•¥è´¦å·æ³¨å†Œï¼Œå‚åŠ æ¨å¹¿æ´»åŠ¨ç­‰æ­¥éª¤ï¼Œç›´æ¥è¿›å…¥å¯¹è±¡å­˜å‚¨é…ç½®é¡µé¢ã€‚</p>
<p>è®¿é—®<a href="https://console.upyun.com/services/file/" target="_blank" rel="noreferrer">å¯¹è±¡å­˜å‚¨æ§åˆ¶å°</a>ï¼Œç‚¹å‡»åˆ›å»ºæœåŠ¡</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/5c0388757ee62813255ea400b0a9907b" alt="" loading="lazy"></p>
<p>è¿™ä¸ª&quot;æœåŠ¡&quot;å’Œå…¶å®ƒå¹³å°çš„ <code>Bucket(æ¡¶)</code> ç±»ä¼¼ï¼Œå¯ä»¥ç†è§£ä¸ºå­˜å‚¨ç©ºé—´çš„æ¦‚å¿µã€‚</p>
<p>å¡«ä¸€ä¸‹æœåŠ¡åç§°ï¼ˆ<code>å…¨å¹³å°å”¯ä¸€</code>ï¼‰ï¼Œç»‘å®šè´¦å·å³å¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/8358d7845041f2cfa1e9af3751eca150" alt="" loading="lazy"></p>
<p><strong>æœåŠ¡åˆ›å»ºå®Œï¼Œéœ€è¦çš„ä¸œè¥¿åŸºæœ¬éƒ½æœ‰äº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼</strong></p>
<ul>
<li>æœåŠ¡åï¼šè‡ªå®šä¹‰</li>
<li>è´¦å·ï¼šè‡ªå®šä¹‰</li>
<li>å¯†ç ï¼šè‡ªåŠ¨ç”Ÿæˆ</li>
<li>åŸŸåï¼šæµ‹è¯•åŸŸå <code>serviceName.test.upcdn.net</code></li>
</ul>
<h2 id="api-ä½¿ç”¨" tabindex="-1">API ä½¿ç”¨ <a class="header-anchor" href="#api-ä½¿ç”¨" aria-label="Permalink to &quot;API ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="token-ç”Ÿæˆ" tabindex="-1">token ç”Ÿæˆ <a class="header-anchor" href="#token-ç”Ÿæˆ" aria-label="Permalink to &quot;token ç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œæ¨èä½¿ç”¨ token è®¤è¯ æ ¹æ®<a href="https://help.upyun.com/knowledge-base/object_storage_authorization/#token-e8aea4e8af81" target="_blank" rel="noreferrer">æ–‡æ¡£ï¼šè®¤è¯é‰´æƒ</a>å¯çŸ¥ç”Ÿæˆæ–¹å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/9018f184d07b38b69f53f7335aa7cd2e" alt="" loading="lazy"></p>
<p>çœ‹ä¸æ‡‚ï¼Ÿæ²¡å…³ç³» GPT å¯ä»¥å¸®ä½ ï¼Œç›´æ¥å¤åˆ¶ä¸¢ç»™å®ƒã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/16cb9a0c8e480e61304a2366d3568878" alt="" loading="lazy"></p>
<p>è¿™ä¸ä»£ç å°±æ¥äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€‚å½“ä¼˜åŒ–ä¸€ä¸‹ï¼Œä¸éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“<code>base64-js</code>ï¼Œç›´æ¥ä½¿ç”¨ Node.js çš„å†…ç½®æ¨¡å—<code>crypto</code> å³å¯ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> crypto </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'crypto'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * ç”Ÿæˆ upyun ä¸Šä¼ token</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {*}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> operator</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> è´¦å·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {*}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> password</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {*}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> method</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ–¹æ³•ï¼ˆPUTï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {*}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> uriPrefix</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> è¯·æ±‚å…¬å…±å‰ç¼€</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {*}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> date</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> è¿‡æœŸæ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@returns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> ä¸Šä¼ å‡­è¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> generateUpyunToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">operator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">uriPrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¯†ç çš„md5å€¼ï¼Œç§˜é’¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> secret</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> crypto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createHash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'md5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(password).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">digest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hex'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ„é€ ç”¨äºè®¡ç®—æ ¡éªŒå€¼çš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">method</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&#x26;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">uriPrefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&#x26;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ä½¿ç”¨ hmac-sha1 ç®—æ³•ç”Ÿæˆtoken</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> crypto.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createHmac</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sha1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, secret) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä½¿ç”¨å¯†ç çš„MD5å€¼ä½œä¸ºç§˜é’¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(value) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®¾ç½®ç”¨äºè®¡ç®—æ ¡éªŒå€¼çš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">digest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®¡ç®—æ ¡éªŒå€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'base64'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è½¬æ¢ä¸ºbase64 æ ¼å¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç»„åˆæˆè¦æ±‚çš„æ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `UPYUN ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">operator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä»£ç éå¸¸ç®€æ´æ˜äº†ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> generateUpyunToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'è´¦å·'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'å¯†ç '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'PUT'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'æœåŠ¡å/èµ„æºå…¬å…±å‰ç¼€è·¯å¾„'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æœåŠ¡å + å…¬å…±èµ„æºå‰ç¼€è·¯å¾„æ„æˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 90</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è®¡ç®—è¿‡æœŸæ—¶é—´ 90å¤©åçš„æ—¥æœŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ç†è®ºä¸Šè¿™ä¸ª token ä¹Ÿå¯ä»¥åœ¨å‰ç«¯ç”Ÿæˆï¼Œè°ƒç”¨å’Œåç«¯ä¸€è‡´çš„ç®—æ³•å³å¯ã€‚</p>
<h3 id="å‰ç«¯ä¸Šä¼ " tabindex="-1">å‰ç«¯ä¸Šä¼  <a class="header-anchor" href="#å‰ç«¯ä¸Šä¼ " aria-label="Permalink to &quot;å‰ç«¯ä¸Šä¼ &quot;">&ZeroWidthSpace;</a></h3>
<p>â‘  å®‰è£… upyun sdk</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> upyun</span></span></code></pre>
</div><p>â‘¡ ä¸Šä¼ ç¤ºä¾‹</p>
<p>æ ¹æ®æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯ä¸Šä¼ éœ€è¦çš„å‚æ•°ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/3c68a4e45d6be0789636eefc9e8fcbbd" alt="" loading="lazy"></p>
<ul>
<li><code>Authorization</code>ï¼šå‰é¢é€šè¿‡ç”Ÿæˆçš„token</li>
<li><code>X-Date</code>ï¼šè¯·æ±‚æ—¥æœŸæ—¶é—´ï¼ŒGMT æ ¼å¼å­—ç¬¦ä¸²</li>
<li><code>X-Upyun-Uri-Prefix</code>ï¼šæœåŠ¡å + èµ„æºå…¬å…±å‰ç¼€è·¯å¾„</li>
<li><code>X-Upyun-Expire</code>ï¼šè¿‡æœŸæ—¶é—´</li>
</ul>
<p>ä¸‹é¢å°±æ˜¯æ ¸å¿ƒçš„ä¸Šä¼ æ–¹æ³•ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> upyun </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'upyun'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> upyun.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æœåŠ¡å'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> upyun.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(service, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'Authorization'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å‰é¢é€šè¿‡ç”Ÿæˆçš„token'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'X-Date'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toUTCString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'X-Upyun-Uri-Prefix'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æœåŠ¡å/èµ„æºå…¬å…±å‰ç¼€è·¯å¾„'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'X-Upyun-Expire'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: date, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‰é¢ç”Ÿæˆ Token æ—¶çš„ date å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'èµ„æºå…¬å…±å‰ç¼€è·¯å¾„/èµ„æºå'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // 'test/imgs/abc.png'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è°ƒç”¨ä¸Šä¼ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">putFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceKey, file) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿”å›å€¼ Promise&#x3C;boolean></span></span></code></pre>
</div><p>â‘¢ æ–¹æ³•å°è£…</p>
<p>æˆ‘ä»¬å¯ä»¥ç®€å•å°è£…ä¸€ä¸‹ï¼Œæ–¹ä¾¿è°ƒç”¨</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UPYunConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * æœåŠ¡å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  serviceName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * ä¸Šä¼ å‡­è¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * èµ„æºå…¬å…±å‰ç¼€</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  prefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * è¿‡æœŸæ—¶é—´ new Date().getTime() + 1000 * 60 * 60 * 24 * 90</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * åŸŸåï¼ˆç”¨äºæ‹¼æ¥æœ€åçš„è®¿é—®é“¾æ¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  domain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * æœ€åçš„èµ„æºåï¼Œå»ºè®®ä½¿ç”¨ uuid æˆ–è€…æ–‡ä»¶çš„ MD5</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> uploadFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UPYunConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">serviceName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">domain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> upyun.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(serviceName)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> upyun.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(service, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'Authorization'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: token,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'X-Date'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toUTCString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'X-Upyun-Uri-Prefix'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">serviceName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">prefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'X-Upyun-Expire'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: date,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">prefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isSuccess</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">putFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key, file)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è¿”å›æœ€åå¯ä»¥ç”¨äºè®¿é—®çš„é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> isSuccess </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">domain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä¸Šä¼ å¤±è´¥'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="æ¥å…¥çº¯é™æ€å›¾åºŠ" tabindex="-1">æ¥å…¥çº¯é™æ€å›¾åºŠ <a class="header-anchor" href="#æ¥å…¥çº¯é™æ€å›¾åºŠ" aria-label="Permalink to &quot;æ¥å…¥çº¯é™æ€å›¾åºŠ&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸Šè¿°é€»è¾‘æˆ‘éƒ½å°è£…åœ¨äº†è‡ªå·±çš„å›¾åºŠåº”ç”¨ä¸­ï¼š<a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#-%E5%9F%BA%E4%BA%8E-oss%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%BA%93-%E5%9B%BE%E5%BA%8A-" target="_blank" rel="noreferrer">GitHub: image-bed-qiniu</a></p>
<p>åªéœ€è¦åœ¨ <a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/cli" target="_blank" rel="noreferrer">cli</a> ç›®å½•ä¸‹ï¼Œä¿®æ”¹ <a href="https://github.com/ATQQ/image-bed-qiniu/blob/master/packages/cli/.env" target="_blank" rel="noreferrer">.env</a> é…ç½®æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># åˆæ‹äº‘ç›¸å…³é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_OPERATOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">operator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_BUCKET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">service-name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_DOMAIN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">http://service-name.test.upcdn.net</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_PREFIX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">image</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">UPYUN_SCOPE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">default</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># tokenæœ‰æ•ˆæœŸï¼Œé»˜è®¤3ä¸ªæœˆï¼Œå•ä½ç§’ï¼Œä½ å¯ä»¥è‡ªè¡Œè®¾ç½®ï¼ˆ60*60*24*30ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># UPYUN_EXPIRES=2592000</span></span></code></pre>
</div><p>æ‰§è¡Œ <code>node upyun-token.js</code> å³å¯ç”Ÿæˆéœ€è¦çš„ tokenã€‚</p>
<p>å°†å…¶ç²˜è´´é…ç½®åˆ° <a href="https://imgbed.sugarat.top/" target="_blank" rel="noreferrer">çº¿ä¸Šçš„å›¾åºŠåº”ç”¨</a>ï¼Œæˆ–è€…è‡ªå·±éƒ¨ç½²çš„å‡å¯ <a href="https://github.com/ATQQ/image-bed-qiniu/tree/master/packages/client#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE" target="_blank" rel="noreferrer">image-bed-qiniu:client</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/sugar/9b11917ab2a09e1bec11e8272f0f4f2c" alt="" loading="lazy"></p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>çº¿ä¸Šä½¿ç”¨ï¼Œæ¨è ç»‘å®šè‡ªå®šä¹‰åŸŸå å’Œ å¼€å¯HTTPS æ”¯æŒã€‚</p>
<p>è¿™ä¸¤ä¸ªç›´æ¥åœ¨å¹³å°é‡Œæ ¹æ®æŒ‡å¼•æ“ä½œå³å¯ï¼Œæ­¥éª¤ä¹Ÿå¾ˆç®€å•ã€‚</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>åç»­å‡†å¤‡æä¾›ä¸€ä¸ªå›¾åºŠçš„ Docker é•œåƒï¼Œè¿™æ ·éƒ¨ç½²èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚</p>
<p>å¤§å®¶æœ‰å…¶å®ƒå¯ç™½å«–çš„å›¾åºŠä¹Ÿå¯æ¨èæ¨èä¸€ä¸‹ã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/sugar/96868081e49914aa6ab7ee142e064d56" length="0" type="image//mdImg/sugar/96868081e49914aa6ab7ee142e064d56"/>
        </item>
        <item>
            <title><![CDATA[ã€å…è´¹ã€‘Node.js å…¥é—¨æ•™ç¨‹]]></title>
            <link>https://www.dmsrs.org/technology/learn/nodejs-getting-started.html</link>
            <guid>https://www.dmsrs.org/technology/learn/nodejs-getting-started.html</guid>
            <pubDate>Sun, 17 Dec 2023 10:04:58 GMT</pubDate>
            <description><![CDATA[# ã€å…è´¹ã€‘Node.js å…¥é—¨æ•™ç¨‹
æ˜é‡‘å°å†Œã€ŒNode.js å…¥é—¨æ•™ç¨‹ã€è¯¾ç¨‹åœ°å€ï¼š[<<Node.js å…¥é—¨æ•™ç¨‹>>](https://juejin.cn/book/7304230207953567755) ğŸ‘ğŸ»

**è¿™æ˜¯ä¸€æœ¬å®Œå…¨å…è´¹çš„å°å†Œ**ï¼Œå†…å®¹æ¶µç›–äº†è½¯ä»¶çš„å®‰è£…ï¼Œç¯å¢ƒé…ç½®ï¼ŒåŸºç¡€çŸ¥è¯†ä»‹ç»ï¼Œè¿›é˜¶çŸ¥è¯†ä»‹ç»ï¼Œå¤šåœºæ™¯çš„å¼€å‘å®è·µã€‚

![](https://img.cdn.sugarat.top/mdImg/MTcwMjgwNzI2MjUwNg==702807262506)

## Node.js çš„ä¼˜åŠ¿

*   é«˜æ€§èƒ½ï¼šåŸºäºäº‹ä»¶é©±åŠ¨çš„éé˜»å¡I/Oæ¨¡å‹ï¼Œå•çº¿ç¨‹ä¹Ÿèƒ½å¤Ÿå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼›
*   è·¨å¹³å°ï¼šå¯ä»¥è¿è¡Œåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šï¼›
*   ç¤¾åŒºå®Œå¤‡ï¼šNode.jsæœ‰ä¸€ä¸ªåºå¤§çš„ç¤¾åŒºï¼Œæœ‰ä¸°å¯Œçš„æ–‡æ¡£å’Œå¼€æºé¡¹ç›®æ²‰æ·€ï¼›
*   æ˜“ä¸Šæ‰‹ï¼šå­¦ä¹ é—¨æ§›ä½ï¼Œç¯å¢ƒé…ç½®ç®€å•ï¼Œå¼€å‘&éƒ¨ç½²è¿…é€Ÿã€‚

## åº”ç”¨åœºæ™¯

*   æœåŠ¡ç«¯å¼€å‘ï¼š[Express](https://expressjs.com/)ã€[Koa](https://koajs.com/#application)ã€[Midway](https://midwayjs.org/)ã€[Egg](https://www.eggjs.org/zh-CN)ï¼›
*   æ¡Œé¢åº”ç”¨ï¼š[Electron](https://www.electronjs.org/)ã€[NW.js](https://nwjs.io/)ã€çº¿ä¸Šåº”ç”¨ [VS Code](https://code.visualstudio.com/)ã€[é£ä¹¦](https://www.feishu.cn/)ã€[æ–°ç‰ˆQQ](https://im.qq.com/macqq/index.shtml)ï¼›
*   ç§»åŠ¨åº”ç”¨ï¼š[React Native](https://reactnative.cn/)ã€[Weex](https://weexapp.com/zh/)ï¼›
*   Webå¼€å‘ï¼š[Vue](https://cn.vuejs.org/)ã€[React](https://zh-hans.react.dev/)ã€[Svelte](https://www.svelte.cn/)ç­‰å‰ç«¯æ¡†æ¶
*   æ„å»ºå·¥å…·ï¼š[webpack](https://webpack.docschina.org/)ã€[Vite](https://cn.vitejs.dev/)ã€[Rollup](https://rollupjs.org/)ï¼›
*   CLIå·¥å…·ï¼šå‰ç«¯å¼€å‘è€…å¸¸ç”¨çš„å„ç§é¡¹ç›®è„šæ‰‹æ¶å’Œå·¥å…·ï¼Œå¦‚ï¼š[nodemon](https://www.npmjs.com/package/nodemon)ã€[whistle](https://github.com/avwo/whistle)ã€[http-server](https://www.npmjs.com/package/http-server)ï¼›

å½“ç„¶è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œç­‰ç€ä½ å»æ¢ç´¢â€¦â€¦

![](https://img.cdn.sugarat.top/mdImg/MTY4NTIwMTQwMTAzNg==685201401036)

æœ¬æ•™ç¨‹ä¸»è¦åŒ…å«7ä¸ªç« èŠ‚ï¼Œæ¶µç›–äº†`è½¯ä»¶çš„å®‰è£…`ã€`ç¯å¢ƒé…ç½®`ã€`åŸºç¡€çŸ¥è¯†ä»‹ç»`ã€`è¿›é˜¶çŸ¥è¯†ä»‹ç»`ã€`å¤šåœºæ™¯çš„å¼€å‘å®è·µ` áƒ¦( Â´ï½¥á´—ï½¥\` )ã€‚

## é€‚åˆäººç¾¤

*   æƒ³é€šè¿‡ `JavaScript` å†™ä¸€äº›è„šæœ¬å¤„ç†æ—¥å¸¸å·¥ä½œï¼›
*   å¯¹Webå‰ç«¯å·²ç»æœ‰ä¸€äº›äº†è§£ï¼Œæƒ³è‡ªå·±åšä¸€ä¸ªåç«¯æœåŠ¡ï¼›
*   å…¶å®ƒåç«¯æŠ€æœ¯æ ˆçš„åŒå­¦ï¼Œæƒ³äº†è§£ä¸€ä¸‹ `JavaScript` å¦‚ä½•åšåç«¯æœåŠ¡ã€‚

]]></description>
            <content:encoded><![CDATA[<h1 id="ã€å…è´¹ã€‘node-js-å…¥é—¨æ•™ç¨‹" tabindex="-1">ã€å…è´¹ã€‘Node.js å…¥é—¨æ•™ç¨‹ <a class="header-anchor" href="#ã€å…è´¹ã€‘node-js-å…¥é—¨æ•™ç¨‹" aria-label="Permalink to &quot;ã€å…è´¹ã€‘Node.js å…¥é—¨æ•™ç¨‹&quot;">&ZeroWidthSpace;</a></h1>
<p>æ˜é‡‘å°å†Œã€ŒNode.js å…¥é—¨æ•™ç¨‹ã€è¯¾ç¨‹åœ°å€ï¼š<a href="https://juejin.cn/book/7304230207953567755" target="_blank" rel="noreferrer">&lt;&lt;Node.js å…¥é—¨æ•™ç¨‹&gt;&gt;</a> ğŸ‘ğŸ»</p>
<p><strong>è¿™æ˜¯ä¸€æœ¬å®Œå…¨å…è´¹çš„å°å†Œ</strong>ï¼Œå†…å®¹æ¶µç›–äº†è½¯ä»¶çš„å®‰è£…ï¼Œç¯å¢ƒé…ç½®ï¼ŒåŸºç¡€çŸ¥è¯†ä»‹ç»ï¼Œè¿›é˜¶çŸ¥è¯†ä»‹ç»ï¼Œå¤šåœºæ™¯çš„å¼€å‘å®è·µã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTcwMjgwNzI2MjUwNg==702807262506" alt="" loading="lazy"></p>
<h2 id="node-js-çš„ä¼˜åŠ¿" tabindex="-1">Node.js çš„ä¼˜åŠ¿ <a class="header-anchor" href="#node-js-çš„ä¼˜åŠ¿" aria-label="Permalink to &quot;Node.js çš„ä¼˜åŠ¿&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>é«˜æ€§èƒ½ï¼šåŸºäºäº‹ä»¶é©±åŠ¨çš„éé˜»å¡I/Oæ¨¡å‹ï¼Œå•çº¿ç¨‹ä¹Ÿèƒ½å¤Ÿå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼›</li>
<li>è·¨å¹³å°ï¼šå¯ä»¥è¿è¡Œåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šï¼›</li>
<li>ç¤¾åŒºå®Œå¤‡ï¼šNode.jsæœ‰ä¸€ä¸ªåºå¤§çš„ç¤¾åŒºï¼Œæœ‰ä¸°å¯Œçš„æ–‡æ¡£å’Œå¼€æºé¡¹ç›®æ²‰æ·€ï¼›</li>
<li>æ˜“ä¸Šæ‰‹ï¼šå­¦ä¹ é—¨æ§›ä½ï¼Œç¯å¢ƒé…ç½®ç®€å•ï¼Œå¼€å‘&amp;éƒ¨ç½²è¿…é€Ÿã€‚</li>
</ul>
<h2 id="åº”ç”¨åœºæ™¯" tabindex="-1">åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;åº”ç”¨åœºæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>æœåŠ¡ç«¯å¼€å‘ï¼š<a href="https://expressjs.com/" target="_blank" rel="noreferrer">Express</a>ã€<a href="https://koajs.com/#application" target="_blank" rel="noreferrer">Koa</a>ã€<a href="https://midwayjs.org/" target="_blank" rel="noreferrer">Midway</a>ã€<a href="https://www.eggjs.org/zh-CN" target="_blank" rel="noreferrer">Egg</a>ï¼›</li>
<li>æ¡Œé¢åº”ç”¨ï¼š<a href="https://www.electronjs.org/" target="_blank" rel="noreferrer">Electron</a>ã€<a href="https://nwjs.io/" target="_blank" rel="noreferrer">NW.js</a>ã€çº¿ä¸Šåº”ç”¨ <a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">VS Code</a>ã€<a href="https://www.feishu.cn/" target="_blank" rel="noreferrer">é£ä¹¦</a>ã€<a href="https://im.qq.com/macqq/index.shtml" target="_blank" rel="noreferrer">æ–°ç‰ˆQQ</a>ï¼›</li>
<li>ç§»åŠ¨åº”ç”¨ï¼š<a href="https://reactnative.cn/" target="_blank" rel="noreferrer">React Native</a>ã€<a href="https://weexapp.com/zh/" target="_blank" rel="noreferrer">Weex</a>ï¼›</li>
<li>Webå¼€å‘ï¼š<a href="https://cn.vuejs.org/" target="_blank" rel="noreferrer">Vue</a>ã€<a href="https://zh-hans.react.dev/" target="_blank" rel="noreferrer">React</a>ã€<a href="https://www.svelte.cn/" target="_blank" rel="noreferrer">Svelte</a>ç­‰å‰ç«¯æ¡†æ¶</li>
<li>æ„å»ºå·¥å…·ï¼š<a href="https://webpack.docschina.org/" target="_blank" rel="noreferrer">webpack</a>ã€<a href="https://cn.vitejs.dev/" target="_blank" rel="noreferrer">Vite</a>ã€<a href="https://rollupjs.org/" target="_blank" rel="noreferrer">Rollup</a>ï¼›</li>
<li>CLIå·¥å…·ï¼šå‰ç«¯å¼€å‘è€…å¸¸ç”¨çš„å„ç§é¡¹ç›®è„šæ‰‹æ¶å’Œå·¥å…·ï¼Œå¦‚ï¼š<a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="noreferrer">nodemon</a>ã€<a href="https://github.com/avwo/whistle" target="_blank" rel="noreferrer">whistle</a>ã€<a href="https://www.npmjs.com/package/http-server" target="_blank" rel="noreferrer">http-server</a>ï¼›</li>
</ul>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œç­‰ç€ä½ å»æ¢ç´¢â€¦â€¦</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4NTIwMTQwMTAzNg==685201401036" alt="" loading="lazy"></p>
<p>æœ¬æ•™ç¨‹ä¸»è¦åŒ…å«7ä¸ªç« èŠ‚ï¼Œæ¶µç›–äº†<code>è½¯ä»¶çš„å®‰è£…</code>ã€<code>ç¯å¢ƒé…ç½®</code>ã€<code>åŸºç¡€çŸ¥è¯†ä»‹ç»</code>ã€<code>è¿›é˜¶çŸ¥è¯†ä»‹ç»</code>ã€<code>å¤šåœºæ™¯çš„å¼€å‘å®è·µ</code> áƒ¦( Â´ï½¥á´—ï½¥` )ã€‚</p>
<h2 id="é€‚åˆäººç¾¤" tabindex="-1">é€‚åˆäººç¾¤ <a class="header-anchor" href="#é€‚åˆäººç¾¤" aria-label="Permalink to &quot;é€‚åˆäººç¾¤&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>æƒ³é€šè¿‡ <code>JavaScript</code> å†™ä¸€äº›è„šæœ¬å¤„ç†æ—¥å¸¸å·¥ä½œï¼›</li>
<li>å¯¹Webå‰ç«¯å·²ç»æœ‰ä¸€äº›äº†è§£ï¼Œæƒ³è‡ªå·±åšä¸€ä¸ªåç«¯æœåŠ¡ï¼›</li>
<li>å…¶å®ƒåç«¯æŠ€æœ¯æ ˆçš„åŒå­¦ï¼Œæƒ³äº†è§£ä¸€ä¸‹ <code>JavaScript</code> å¦‚ä½•åšåç«¯æœåŠ¡ã€‚</li>
</ul>
<hr>
<p>å½“ä¸‹ï¼Œ<code>JavaScript</code> å·²ç»æˆä¸ºäº†å‰ç«¯å¼€å‘çš„æ ‡é…ï¼Œå¹¶ä¸”éšç€ <code>Node.js</code> çš„å‡ºç°ï¼Œ<code>JavaScript</code> ä¹Ÿé€æ¸æˆä¸ºäº†å…¨æ ˆå¼€å‘çš„æ ‡é…ï¼Œå¸Œæœ›æœ¬æ•™ç¨‹èƒ½å¤Ÿå¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡å…¨æ ˆå¼€å‘æ‰€éœ€çš„ <code>Node.js</code> ç›¸å…³çš„åŸºç¡€æŠ€æœ¯ï¼Œä»è€Œæ›´å¥½åœ°å®Œæˆå®é™…å¼€å‘å·¥ä½œã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY4NTIwMTQwMTAzNg==685201401036" length="0" type="image//mdImg/MTY4NTIwMTQwMTAzNg==685201401036"/>
        </item>
        <item>
            <title><![CDATA[ESMä¸­ä½¿ç”¨CJSæ¨¡å—ç‰¹æœ‰çš„å˜é‡å’Œæ–¹æ³•]]></title>
            <link>https://www.dmsrs.org/technology/learn/esm-require.html</link>
            <guid>https://www.dmsrs.org/technology/learn/esm-require.html</guid>
            <pubDate>Wed, 22 Nov 2023 14:31:39 GMT</pubDate>
            <description><![CDATA[å‰è¨€
æœ€è¿‘åœ¨çœ‹ VitePress çš„æºç æ—¶çœ‹åˆ°äº†ä¸€ä¸ª`createRequire`æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚
```ts
import { createRequire } from 'module'
const ]]></description>
            <content:encoded><![CDATA[<h1 id="esmä¸­ä½¿ç”¨cjsæ¨¡å—ç‰¹æœ‰çš„å˜é‡å’Œæ–¹æ³•" tabindex="-1">ESMä¸­ä½¿ç”¨CJSæ¨¡å—ç‰¹æœ‰çš„å˜é‡å’Œæ–¹æ³• <a class="header-anchor" href="#esmä¸­ä½¿ç”¨cjsæ¨¡å—ç‰¹æœ‰çš„å˜é‡å’Œæ–¹æ³•" aria-label="Permalink to &quot;ESMä¸­ä½¿ç”¨CJSæ¨¡å—ç‰¹æœ‰çš„å˜é‡å’Œæ–¹æ³•&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ€è¿‘åœ¨çœ‹ VitePress çš„æºç æ—¶çœ‹åˆ°äº†ä¸€ä¸ª<code>createRequire</code>æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { createRequire } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'module'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> require</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createRequire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vitepress/package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>å¤ªå¦™äº†ï¼ŒESMé‡Œå±…ç„¶å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºrequireä½¿ç”¨ï¼ˆæ˜¯ä¹‹å‰å­¤é™‹å¯¡é—»äº†ï¼‰ï¼Œä¹‹å‰è¿™ç§ESMå’ŒCJSæ··ç”¨çš„åœºæ™¯ï¼Œéƒ½æ˜¯é€šè¿‡æ„å»ºå·¥å…·å¤„ç†çš„ï¼Œä¹Ÿæ²¡æœ‰å…³å¿ƒäº§ç‰©æœ€åç”Ÿæˆå•¥æ ·ã€‚</p>
<p>ä¸‹æ¥ç¿»äº†ç¿»æ–‡æ¡£å‘ç°è¿™ä¸ªNode v12.2.0 å°±æœ‰äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTcwMDY2MTUwNDg1Mg==700661504852" alt="" loading="lazy"></p>
<p>ç»“åˆæœ€è¿‘å¼€å‘ VitePress ä¸»é¢˜éœ€è¦ESMä¸­è·å– <code>__dirname</code> çš„ç»éªŒï¼Œè¿™é‡Œå°±é¡ºä¾¿è®°å½•ä¸€ä¸‹ã€‚</p>
<p><em>æ¯•ç«Ÿæœ€è¿‘ <a href="https://vitejs.dev/blog/announcing-vite5" target="_blank" rel="noreferrer">Vite 5</a> ä¹Ÿå‡ºæ¥äº†ï¼Œä¹Ÿæ˜¯æ¨èä½¿ç”¨ ESM æ¨¡å—</em></p>
<h2 id="å…ˆæ¥ä¸ªdemo" tabindex="-1">å…ˆæ¥ä¸ªdemo <a class="header-anchor" href="#å…ˆæ¥ä¸ªdemo" aria-label="Permalink to &quot;å…ˆæ¥ä¸ªdemo&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆ›å»ºä¸€ä¸ª<code>test.mjs</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__dirname'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __dirname)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __filename)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(require)</span></span></code></pre>
</div><p>æ‰§è¡Œ<code>node test.mjs</code>ï¼Œä½ åº”è¯¥ä¼šå¾—åˆ°å¦‚ä¸‹ç±»ä¼¼çš„æŠ¥é”™ä¿¡æ¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">file:///Users/sugar/Documents/fe/sugar-blog/test.mjs:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">console.log(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">'__dirname'</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                         ^</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ReferenceError:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __dirname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> defined</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> scope</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> file:///Users/sugar/Documents/fe/sugar-blog/test.mjs:1:26</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ModuleJob.run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (node:internal/modules/esm/module_job:192:25)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Node.js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> v20.2.0</span></span></code></pre>
</div><p>é’ˆå¯¹ require çš„æŠ¥é”™ï¼Œæ˜¯ä¸‹é¢è¿™æ ·çš„</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ReferenceError:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> defined</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> scope,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> instead</span></span></code></pre>
</div><p><strong>ï¼ESM æ¨¡å—ä¸­æ˜¯æ— æ³•ç›´æ¥ä½¿ç”¨CJSæ¨¡å—é‡Œæä¾›çš„è¿™äº›å˜é‡çš„</strong></p>
<h2 id="å¦‚ä½•æ­£ç¡®è·å–" tabindex="-1">å¦‚ä½•æ­£ç¡®è·å– <a class="header-anchor" href="#å¦‚ä½•æ­£ç¡®è·å–" aria-label="Permalink to &quot;å¦‚ä½•æ­£ç¡®è·å–&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="dirnameå’Œ-filename" tabindex="-1"><code>__dirname</code>å’Œ<code>__filename</code> <a class="header-anchor" href="#dirnameå’Œ-filename" aria-label="Permalink to &quot;`__dirname`å’Œ`__filename`&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ ESM ä¸­å¯ä»¥é€šè¿‡<code>import.meta.url</code> è·å–åˆ°ç±»ä¼¼ <code>__filename</code> çš„å€¼</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span></code></pre>
</div><p>æ‰§è¡Œåä½ ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">file:///Users/sugar/Documents/fe/sugar-blog/test.mjs</span></span></code></pre>
</div><blockquote>
<p><em>å…¶ä¸­ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/import.meta" target="_blank" rel="noreferrer">import.meta</a> æ˜¯ä¸€ä¸ªç»™ JavaScript æ¨¡å—æš´éœ²ç‰¹å®šä¸Šä¸‹æ–‡çš„å…ƒæ•°æ®å±æ€§çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—çš„ URL</em></p>
</blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬å¯å†é€šè¿‡<code>url</code>æ¨¡å—ä¸Šçš„<code>fileURLToPath</code>æ–¹æ³•å°†å…¶è½¬æ¢ä¸º<code>__filename</code>çš„å€¼</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'url'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __filename)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// __filename /Users/sugar/Documents/fe/sugar-blog/test.mjs</span></span></code></pre>
</div><p>æœ‰äº†<code>__filename</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>path</code>æ¨¡å—çš„<code>dirname</code>æ–¹æ³•è·å–åˆ°<code>__dirname</code>çš„å€¼äº†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { dirname } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__filename)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__dirname'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __dirname)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// __dirname /Users/sugar/Documents/fe/sugar-blog</span></span></code></pre>
</div><h3 id="require" tabindex="-1">require <a class="header-anchor" href="#require" aria-label="Permalink to &quot;require&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªå°±æ˜¯æ–‡ç« å¼€å¤´éƒ¨åˆ†ä½¿ç”¨<code>createRequire</code>çš„åœºæ™¯äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>createRequire</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ª<code>require</code>æ–¹æ³•ï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨<code>require</code>äº†ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { createRequire } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'module'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> require</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createRequire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).name)</span></span></code></pre>
</div><h3 id="å®Œæ•´ä»£ç " tabindex="-1">å®Œæ•´ä»£ç  <a class="header-anchor" href="#å®Œæ•´ä»£ç " aria-label="Permalink to &quot;å®Œæ•´ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'url'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { dirname } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { createRequire } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'module'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__filename)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __filename)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'__dirname'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, __dirname)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> require</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createRequire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'name'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).name)</span></span></code></pre>
</div><h3 id="è§£å†³çš„å®é™…é—®é¢˜" tabindex="-1">è§£å†³çš„å®é™…é—®é¢˜ <a class="header-anchor" href="#è§£å†³çš„å®é™…é—®é¢˜" aria-label="Permalink to &quot;è§£å†³çš„å®é™…é—®é¢˜&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ç¼–å†™ Vite æ’ä»¶æ—¶ï¼Œæƒ³åŠ¨æ€æ³¨å…¥ä¸€ä¸ª alias è§„åˆ™ï¼Œç¼–è¯‘çš„äº§ç‰©åˆ†åˆ«æœ‰cjså’Œesmçš„ï¼Œåœ¨æºç ä¸­ç¼–å†™éœ€è¦å…¼å®¹è¿™2ä¸ªåœºæ™¯</p>
<p>äºæ˜¯å°±æœ‰äº†å¦‚ä¸‹ä»£ç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isESM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> __filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'undefined'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> __dirname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'undefined'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getDirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isESM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.url)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> __dirname</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> aliasSearchVueFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getDirname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/../src/Search.vue`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> resolveAlias</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  './VPNavBarSearch.vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: aliasSearchVueFile,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ç»¼ä¸Šï¼Œåœ¨ ESM ä¸­ä¹Ÿæ˜¯å¯ä»¥ä¼˜é›…çš„ä½¿ç”¨CJSé‡Œçš„<code>require</code>, <code>__dirname</code>, <code>__filename</code> çš„</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTcwMDY2MTUwNDg1Mg==700661504852" length="0" type="image//mdImg/MTcwMDY2MTUwNDg1Mg==700661504852"/>
        </item>
        <item>
            <title><![CDATA[å®ç°è‡ªåŠ¨æ‰«æå·¥ä½œåŒºnpmåŒ…å¹¶åŒæ­¥cnpm]]></title>
            <link>https://www.dmsrs.org/technology/learn/cnnc.html</link>
            <guid>https://www.dmsrs.org/technology/learn/cnnc.html</guid>
            <pubDate>Sat, 09 Sep 2023 14:34:48 GMT</pubDate>
            <description><![CDATA[æ‰¹é‡ä¸”è‡ªåŠ¨çš„åšcnpmçš„åŒæ­¥ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªå¤šnpmåŒ…çš„é¡¹ç›®ï¼Œé‚£ä¹ˆè¿™ä¸ªå·¥å…·éå¸¸é€‚åˆä½ ]]></description>
            <content:encoded><![CDATA[<h1 id="å®ç°è‡ªåŠ¨æ‰«æå·¥ä½œåŒºnpmåŒ…å¹¶åŒæ­¥cnpm" tabindex="-1">å®ç°è‡ªåŠ¨æ‰«æå·¥ä½œåŒºnpmåŒ…å¹¶åŒæ­¥cnpm <a class="header-anchor" href="#å®ç°è‡ªåŠ¨æ‰«æå·¥ä½œåŒºnpmåŒ…å¹¶åŒæ­¥cnpm" aria-label="Permalink to &quot;å®ç°è‡ªåŠ¨æ‰«æå·¥ä½œåŒºnpmåŒ…å¹¶åŒæ­¥cnpm&quot;">&ZeroWidthSpace;</a></h1>
<p><strong>çœæµç‰ˆ: <code>npx cnnc</code></strong></p>
<p>ä¸ºé¿å…åŒ…åé‡å¤ï¼Œå–äº†2ä¸ªå•è¯çš„é¦–å°¾ï¼Œ<em><span style="color:red">cn</span>pm sy<span style="color:red">nc</span></em></p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨å¼€å‘ä¸€ä¸ªå¤šnpmåŒ…çš„é¡¹ç›®æ—¶ï¼Œæ—¶å¸¸ä¼šä¸€æ¬¡æ›´æ–°å¤šä¸ªåŒ…çš„ä»£ç ï¼Œå†æ‰¹é‡å‘å¸ƒåˆ° npm é•œåƒæºåã€‚</p>
<p>ç”±äºå›½å†…ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼Œå¤§éƒ¨åˆ†éƒ½ä¼šä½¿ç”¨<a href="https://npmmirror.com/" target="_blank" rel="noreferrer">æ·˜å®çš„é•œåƒæº</a>è¿›è¡Œä¾èµ–å®‰è£…ï¼Œä¸ºäº†ç¡®ä¿å‘å¸ƒåï¼Œé€šè¿‡æ·˜å®æºèƒ½å¤Ÿé¡ºåˆ©çš„å®‰è£…ï¼Œé€šå¸¸ä¼šæ‰‹åŠ¨åŒæ­¥ä¸€ä¸‹</p>
<p><code>cnpm sync vue react</code></p>
<p>ä½†åœ¨ä¸€äº›å¤§å‹çš„ monorepo çš„å¤šåŒ…å·¥ç¨‹é‡Œï¼Œæ‰‹åŠ¨è¾“å…¥åŒ…åæ˜¯ä¸€ä»¶éå¸¸ç¹ççš„äº‹æƒ…ï¼Œæ‰€ä»¥å‡†å¤‡æŠŠè¾“å…¥çš„è¿‡ç¨‹ç®€åŒ–ä¸€ä¸‹ï¼Œæ”¹æˆè‡ªåŠ¨æ‰«æå·¥ä½œåŒºçš„åŒ…åï¼Œç„¶åè‡ªåŠ¨åŒæ­¥ã€‚</p>
<p>è¿›è€Œæœ‰äº†è¿™ä¸ªå·¥å…·</p>
<h2 id="å·¥å…·çš„ä½¿ç”¨" tabindex="-1">å·¥å…·çš„ä½¿ç”¨ <a class="header-anchor" href="#å·¥å…·çš„ä½¿ç”¨" aria-label="Permalink to &quot;å·¥å…·çš„ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›´æ¥é€šè¿‡ npx è¿è¡Œå³å¯ï¼Œå°†è‡ªåŠ¨æ‰«ææ‰€æœ‰çš„åŒ…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cnnc</span></span></code></pre>
</div><p><a href="https://app.warp.dev/block/wrTUBqnxdg65BqCTgtSgD5" target="_blank" rel="noreferrer">ç¤ºä¾‹ç»“æœ</a> å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5NDI0OTI5MjYwMg==694249292602" alt="" loading="lazy"></p>
<p>å½“ç„¶ä¹ŸåŒæ ·æ”¯æŒæ‰‹åŠ¨ä¼ å…¥è¦æ›´æ–°çš„åŒ…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cncc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vue</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> react</span></span></code></pre>
</div><p>å¦‚æœä½¿ç”¨é¢‘ç‡è¾ƒé«˜ï¼Œä¹Ÿå¯å…¨å±€å®‰è£…<code>npm i -g cnnc</code></p>
<p>è¿™æ ·å¯ä»¥ç›´æ¥é€šè¿‡<code>cnnc</code>æˆ–<code>cs</code>å‘½ä»¤è°ƒç”¨</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5NDI1NDAxNTM0Nw==694254015347" alt="" loading="lazy"></p>
<h2 id="å®ç°åŸç†" tabindex="-1">å®ç°åŸç† <a class="header-anchor" href="#å®ç°åŸç†" aria-label="Permalink to &quot;å®ç°åŸç†&quot;">&ZeroWidthSpace;</a></h2>
<p>æ ¸å¿ƒä»£ç ä¸åˆ°20è¡Œï¼Œä¸‹é¢è¯¦ç»†çš„æ‹†è§£ä¸€ä¸‹ï¼Œä¾¿äºå­¦ä¹ ä¸ç†è§£</p>
<p>ä¸»è¦åˆ†ä¸º3éƒ¨åˆ†</p>
<ul>
<li>å·¥ä½œåŒºçš„åŒ…æ‰«æ</li>
<li>è¿‡æ»¤å‡ºåˆæ³•çš„åŒ…</li>
<li>è°ƒç”¨ cnpm åŒæ­¥</li>
</ul>
<h3 id="å·¥ä½œåŒºçš„åŒ…æ‰«æ" tabindex="-1">å·¥ä½œåŒºçš„åŒ…æ‰«æ <a class="header-anchor" href="#å·¥ä½œåŒºçš„åŒ…æ‰«æ" aria-label="Permalink to &quot;å·¥ä½œåŒºçš„åŒ…æ‰«æ&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸»è¦ç›®çš„å°±æ˜¯æ‰«æå·¥ä½œåŒºæ‰€æœ‰çš„ <code>package.json</code> æ–‡ä»¶ï¼Œç„¶åæå–å‡ºåŒ…åï¼ˆä¸åŒ…å« node_modulesï¼Œbuild ç­‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼‰</p>
<p>è¿™é‡Œå¯ä»¥ <code>fs.readdirSync</code> å®ç°ä¸€ä¸ªé€’å½’çš„æ‰«æï¼Œä¹Ÿå¯ä»¥ç”¨<a href="https://github.com/mrmlnc/fast-glob#readme" target="_blank" rel="noreferrer">fast-glob</a>ï¼Œå›¾æ–¹ä¾¿æˆ‘è¿™é‡Œé€‰æ‹©åè€…ï¼Œä¹Ÿæ˜¯ç›®å‰ç›®å½•æ‰«æç”¨å¾—è¾ƒå¹¿æ³›çš„ä¸€ä¸ªåŒ…</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fast-glob'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pkgNames</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€šè¿‡glob å–æ‰€æœ‰package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./**/package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ignore: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '**/node_modules'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '**/dist'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '**/build'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '**/test'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // çœç•¥æ›´å¤šçš„æ— å…³ç›®å½•...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  absolute: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  pkgNames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>é€šå¸¸å·¥ä½œåŒºé‡Œæœ‰å¾ˆå¤šæ— å…³çš„ç›®å½•ï¼Œæ¯”å¦‚<code>node_modules</code>ã€<code>build</code>ã€<code>dist</code>ã€<code>test</code>ç­‰ï¼Œè¿™äº›ç›®å½•ä¸‹çš„<code>package.json</code>éƒ½ä¸éœ€è¦åŒæ­¥ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡<code>ignore</code>å‚æ•°æ¥å¿½ç•¥æ‰ï¼Œé¿å…ä¸å¿…è¦çš„æ‰«æï¼ˆå¦åˆ™ node_modules å¥— node_modules ä¼šå¢åŠ æ‰«ææ—¶é—´ï¼Œéƒ¨åˆ†ç›®å½•æ˜¯è½¯é“¾çš„è¯ä¹Ÿä¼šå¯¼è‡´æ‰«æè·¯å¾„çš„å¼‚å¸¸ï¼‰</p>
<h3 id="è¿‡æ»¤å‡ºåˆæ³•çš„åŒ…" tabindex="-1">è¿‡æ»¤å‡ºåˆæ³•çš„åŒ… <a class="header-anchor" href="#è¿‡æ»¤å‡ºåˆæ³•çš„åŒ…" aria-label="Permalink to &quot;è¿‡æ»¤å‡ºåˆæ³•çš„åŒ…&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ‰äº›<code>package.json</code>ä¼šåŒ…å« <code>&quot;private&quot;: true</code> å†…å®¹ï¼Œè¡¨æ˜ä¸ºç§æœ‰çš„åŒ…ï¼Œä¸ä¼šå‘å¸ƒåˆ°npmé•œåƒæºï¼Œæ‰€ä»¥éœ€è¦è¿‡æ»¤æ‰</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥å…¶å®ƒä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">globResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">private) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    pkgNames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h3 id="è°ƒç”¨-cnpm-åŒæ­¥" tabindex="-1">è°ƒç”¨ cnpm åŒæ­¥ <a class="header-anchor" href="#è°ƒç”¨-cnpm-åŒæ­¥" aria-label="Permalink to &quot;è°ƒç”¨ cnpm åŒæ­¥&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ€åä¸€æ­¥å°±æ˜¯è°ƒç”¨<code>cnpm sync</code>å‘½ä»¤ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡<code>child_process</code>æ¨¡å—æ¥å®ç°</p>
<p>é€šè¿‡<code>spawn</code>æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å‘½ä»¤è¡Œå‘½ä»¤ï¼Œç„¶åé€šè¿‡<code>stdio: 'inherit'</code>å°†å‘½ä»¤è¡Œçš„è¾“å‡ºç›´æ¥æ‰“å°åˆ°ç»ˆç«¯ä¸­</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'child_process'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">promisify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'util'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CnpmSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">names</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> promisify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(spawn)(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'npx'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cnpm'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sync'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">names], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cwd: __dirname,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸ºé˜²æ­¢ç”¨æˆ·æ²¡æœ‰å…¨å±€å®‰è£…cnpmï¼Œè¿™é‡Œé€šè¿‡<code>npx cnpm sync</code>çš„æ–¹å¼æ¥è°ƒç”¨ï¼Œè¿™æ ·å°±ä¸éœ€è¦ç”¨æˆ·è‡ªå·±å®‰è£…äº†</p>
<p>åŒæ—¶å¯ä»¥å°†<code>cnpm</code>ä½œä¸ºåŒ…<code>dependencies</code>ä¾èµ–å®‰è£…ï¼Œé€šè¿‡<code>cwd: __dirname</code>å‚æ•°ï¼Œå°†æŒ‡ä»¤è¿è¡Œç›®å½•æŒ‡å®šä¸ºå½“å‰ç›®å½•ï¼Œè¿™æ ·<code>npx cnpm</code>æ‰§è¡Œæ—¶ï¼Œå°±ä¼šå»<code>cncc</code>ç›®å½•çš„<code>node_modules</code>ä¸‹æ‰¾åˆ°<code>cnpm</code>å‘½ä»¤ï¼Œä»è€Œå®ç°è°ƒç”¨ï¼Œä¸éœ€è¦é‡å¤çš„åœ¨å…¨å±€è¿›è¡Œä¾èµ–çš„å®‰è£…ï¼Œå¤§å¤§æå‡æŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>å·¥å…·åŸç†å¾ˆç®€å•ï¼Œè§£å†³çš„é—®é¢˜ä¹Ÿéå¸¸æ˜ç¡®ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©è¯»è€…çœä¸‹å‡ åˆ†é’Ÿçš„æ—¶é—´ï¼Œæå‡å¼€å‘çš„å¹¸ç¦åº¦</p>
<hr>
<p>å½“ç„¶å·¥å…·è¿˜æœ‰å¾ˆå¤šå¯ä¼˜åŒ–çš„ç‚¹ï¼Œæ¯”å¦‚å…ˆé€šè¿‡å¯¹æ¯” npm å’Œ cnpm çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœä¸€è‡´å°±ä¸éœ€è¦åŒæ­¥äº†ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§åŠ å¿«åŒæ­¥çš„é€Ÿåº¦</p>
<p>ï¼ˆ<em>ç›®å‰ç”±äºç½‘ç»œåŸå› ä» npm é•œåƒæºæ‹‰åŒ…ç‰ˆæœ¬ä¿¡æ¯ç›¸å¯¹è¾ƒæ…¢ï¼Œæ‰€ä»¥æœ¬æœŸæ²¡æœ‰åŠ è¿™ä¸ªåŠŸèƒ½ï¼Œè¯»è€…å¦‚æœæœ‰æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµ</em>ï¼‰</p>
<p>åŒæ—¶å¯ä»¥å°†è¿™ä¸ªæŒ‡ä»¤æ”¾åœ¨ <code>&quot;npm postpublish&quot;</code> é’©å­ä¸­ï¼Œè¿™æ ·å‘å¸ƒåè‡ªåŠ¨è§¦å‘åŒæ­¥ï¼Œæ›´åŠ çœå¿ƒ</p>
<hr>
<p>å®Œæ•´æºç è§ï¼š<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/sync-cnpm/README.md" target="_blank" rel="noreferrer">GitHub</a></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY5NDI0OTI5MjYwMg==694249292602" length="0" type="image//mdImg/MTY5NDI0OTI5MjYwMg==694249292602"/>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ä¼˜é›…çš„å¤åˆ¶å½“å‰é¡¹ç›®åˆ†æ”¯å]]></title>
            <link>https://www.dmsrs.org/technology/learn/copy-branch.html</link>
            <guid>https://www.dmsrs.org/technology/learn/copy-branch.html</guid>
            <pubDate>Sat, 09 Sep 2023 09:55:03 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•é€šè¿‡`Shell`å’Œ`Node.js`å®ç°å¤åˆ¶å½“å‰åˆ†æ”¯ååˆ°å‰ªè´´æ¿]]></description>
            <content:encoded><![CDATA[<h1 id="å¦‚ä½•ä¼˜é›…çš„å¤åˆ¶å½“å‰é¡¹ç›®åˆ†æ”¯å" tabindex="-1">å¦‚ä½•ä¼˜é›…çš„å¤åˆ¶å½“å‰é¡¹ç›®åˆ†æ”¯å <a class="header-anchor" href="#å¦‚ä½•ä¼˜é›…çš„å¤åˆ¶å½“å‰é¡¹ç›®åˆ†æ”¯å" aria-label="Permalink to &quot;å¦‚ä½•ä¼˜é›…çš„å¤åˆ¶å½“å‰é¡¹ç›®åˆ†æ”¯å&quot;">&ZeroWidthSpace;</a></h1>
<p><strong>çœæµç‰ˆ: <code>npx bcy</code></strong></p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨å·¥ä½œä¸­ï¼Œåä½œåœºæ™¯ä¸‹ï¼Œé¿å…ä¸äº†è¦å‘Šè¯‰åŒäº‹ä½ å½“å‰çš„å¼€å‘åˆ†æ”¯ï¼Œ<strong>é€šå¸¸æƒ…å†µ</strong>ä¸‹éœ€è¦2æ­¥</p>
<p><strong>Step1 æŸ¥çœ‹å½“å‰åˆ†æ”¯</strong></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span></span></code></pre>
</div><p>è¿™é‡Œè¿˜æœ‰ä¸ªcaseï¼Œåˆ†æ”¯å¤šçš„è¯éœ€è¦ç¿»é¡µæŸ¥çœ‹ï¼Œæ‰èƒ½æ‰¾åˆ°å½“å‰åˆ†æ”¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTI0NTYxOTQzMw==691245619433" alt="" loading="lazy"></p>
<p>è¦å‡†ç¡®è·å–éœ€è¦åŠ ä¸Š<code>--show-current</code>å‚æ•°</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --show-current</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTI0NTc5MDM2OQ==691245790369" alt="" loading="lazy"></p>
<p><strong>Step2 é¼ æ ‡å³é”®å¤åˆ¶å½“å‰åˆ†æ”¯</strong></p>
<hr>
<p>æœ¬æ–‡å°†ä¼šä»‹ç»2ç§æ–¹å¼ï¼Œå®ç°1è¡Œä»£ç ç›´æ¥å¤åˆ¶åˆ†æ”¯</p>
<ul>
<li>Shell</li>
<li>Node CLI</li>
</ul>
<h2 id="æ ¸å¿ƒæ­¥éª¤" tabindex="-1">æ ¸å¿ƒæ­¥éª¤ <a class="header-anchor" href="#æ ¸å¿ƒæ­¥éª¤" aria-label="Permalink to &quot;æ ¸å¿ƒæ­¥éª¤&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="è·å–åˆ†æ”¯å" tabindex="-1">è·å–åˆ†æ”¯å <a class="header-anchor" href="#è·å–åˆ†æ”¯å" aria-label="Permalink to &quot;è·å–åˆ†æ”¯å&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªä¸Šé¢ä»‹ç»äº†ï¼Œå¯ä»¥é€šè¿‡<code>git branch --show-current</code>è·å–</p>
<p>åœ¨ <code>shell</code> é‡Œï¼Œå¯ä»¥ç›´æ¥å°†ç»“æœå­˜åˆ°å˜é‡é‡Œ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># bcp.sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">branch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --show-current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $branch</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMwNDE3MDkzNg==691304170936" alt="" loading="lazy"></p>
<p><code>Node.js</code> é‡Œï¼Œå¯ä»¥é€šè¿‡<code>child_process</code>æ¨¡å—æ¥æ‰§è¡Œå‘½ä»¤</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'child_process'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> branch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'git branch --show-current'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(branch);</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMwNDU1NTQ2Nw==691304555467" alt="" loading="lazy"></p>
<h3 id="å¤åˆ¶åˆ°å‰ªè´´æ¿" tabindex="-1">å¤åˆ¶åˆ°å‰ªè´´æ¿ <a class="header-anchor" href="#å¤åˆ¶åˆ°å‰ªè´´æ¿" aria-label="Permalink to &quot;å¤åˆ¶åˆ°å‰ªè´´æ¿&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸€å—å°±æ˜¯è°ƒç”¨ç³»ç»ŸæŒ‡ä»¤æ‰§è¡Œäº†ï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„ä¸ä¸€æ ·</p>
<p>ä¹‹å‰ç”¨è¿‡ <a href="https://github.com/xavi-/node-copy-paste#readme" target="_blank" rel="noreferrer">node-copy-paste</a> è¿™ä¸ªåº“</p>
<p>å¤§æ¦‚ä»‹ç»äº†ä¸€ä¸‹å„ä¸ªæ“ä½œç³»ç»Ÿæ‰€ç”¨çš„æŒ‡ä»¤ï¼šMacOS(pbcopy)ã€Windows(clip)ã€Linux(xclip)</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMwNDc4MTIwMQ==691304781201" alt="" loading="lazy"></p>
<p>è¿™é‡Œç¬”è€…ç”¨çš„æ˜¯<code>MacOS</code>ï¼Œæ‰€ä»¥ç›´æ¥ç”¨<code>pbcopy</code>æŒ‡ä»¤</p>
<p>åªéœ€è¦åœ¨ä¸Šé¢çš„åŸºç¡€ä¸ŠåŠ ä¸Š<code>| pbcopy</code>å³å¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">branch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --show-current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $branch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pbcopy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æˆ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --show-current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pbcopy</span></span></code></pre>
</div><p>è¿è¡Œåå‘ç°<code>git branch --show-current</code>è·å–çš„å†…å®¹ä¼šæœ‰æ¢è¡Œç¬¦ï¼Œå¯ä»¥é€šè¿‡<code>tr</code>æŒ‡ä»¤å»æ‰</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --show-current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> tr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '\n'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pbcopy</span></span></code></pre>
</div><p>Node.js é‡Œï¼Œåœ¨<code>.trim()</code>ååŠ ä¸Š<code>.replace(/\n/g, '')</code>å³å¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'git branch --show-current'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p>ä¸è¿‡å®é™…æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¹ˆé•¿çš„æŒ‡ä»¤å°è£…èµ·æ¥ï¼Œæ–¹ä¾¿ä½¿ç”¨</p>
<p><em>è°æ²¡äº‹æ•²è¿™ä¹ˆå¤šï¼Œéƒ½å¯ä»¥æ‰‹åŠ¨CVå¥½å¤šéäº†</em></p>
<h2 id="å°è£…å®ç°" tabindex="-1">å°è£…å®ç° <a class="header-anchor" href="#å°è£…å®ç°" aria-label="Permalink to &quot;å°è£…å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="shell" tabindex="-1">Shell <a class="header-anchor" href="#shell" aria-label="Permalink to &quot;Shell&quot;">&ZeroWidthSpace;</a></h3>
<p>åªéœ€è¦ä½¿ç”¨<code>alias</code>æŒ‡ä»¤å³å¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> bcy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'git branch --show-current | tr -d "\n" | pbcopy'</span></span></code></pre>
</div><p>ç„¶åå°†è¿™ä¸ªæŒ‡ä»¤åŠ å…¥åˆ°<code>~/.zshrc</code>æˆ–<code>~/.bashrc</code>é‡Œå³å¯ï¼ˆå¯ä»¥ä½¿ç”¨ <code>echo $0</code>ç¡®å®šè‡ªå·±çš„ç»ˆç«¯é»˜è®¤çš„shellæ‰§è¡Œå™¨ï¼‰</p>
<p>å¯è¿è¡Œä¸‹é¢çš„shellè„šæœ¬å®Œæˆè‡ªåŠ¨æ·»åŠ </p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'alias bcy="git branch --show-current | tr -d \"\\n\" | pbcopy"'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> >></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.zshrc</span></span></code></pre>
</div><p>é‡å¯ç»ˆç«¯ï¼Œæˆ–è€…ä½¿ç”¨<code>source ~/.zshrc</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.zshrc</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMwNzY2OTU1MA==691307669550" alt="" loading="lazy"></p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰“å°ä¸€äº›æç¤ºä¿¡æ¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> bcy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'branch=$(git branch --show-current); echo "å½“å‰åˆ†æ”¯ï¼š$branch"; echo $branch | tr -d "\n" | pbcopy'</span></span></code></pre>
</div><p>å¯¹åº”çš„å®‰è£…è„šæœ¬å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "alias bcy='branch=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(git branch --show-current); echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\"</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">å½“å‰åˆ†æ”¯ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">branch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\"</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">; echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">branch | tr -d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\"\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\"</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> | pbcopy'"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> >></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.zshrc</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMwODMzMTk2NA==691308331964" alt="" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMxNzA1MDQ0OA==691317050448" alt="" loading="lazy"></p>
<h3 id="node-cli" tabindex="-1">Node CLI <a class="header-anchor" href="#node-cli" aria-label="Permalink to &quot;Node CLI&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸Šé¢ä»‹ç»çš„æ˜¯<code>shell</code>é‡Œçš„å®ç°ï¼Œè¿™é‡Œä»‹ç»ä¸‹<code>Node.js</code>é‡Œçš„å®ç°</p>
<p>æ–¹ä¾¿æœ‰ Node ç¯å¢ƒï¼Œä½†ä¸ç†Ÿæ‚‰Shellçš„åŒå­¦ä½¿ç”¨</p>
<p>è„šæœ¬ä¹Ÿå¾ˆç®€å•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#!/usr/bin/env node</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'child_process'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ncp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'copy-paste'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–å½“å‰ä»“åº“åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> branch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'git branch --show-current'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å½“å‰åˆ†æ”¯:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, branch)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ncp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(branch)</span></span></code></pre>
</div><p>è¿™ä¸ªCLIé€šè¿‡npmåŒ…å‘å¸ƒäº†ï¼Œå¯ä»¥ç›´æ¥<code>npx bcy</code>ä½¿ç”¨</p>
<p>æˆ–è€… <code>npm i bcy -g</code> å…¨å±€å®‰è£…</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTMyMTU1NjY2MQ==691321556661" alt="" loading="lazy"></p>
<p><em>åŒ…åå®åœ¨æ˜¯éš¾å–ï¼Œç®€å•è¯­ä¹‰åŒ–ä¸€ç‚¹çš„éƒ½è¢«å ç”¨äº†ï¼Œè®©GPT è¾…åŠ©äº†ä¸€ä¸‹</em></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTI0NTI4NDAxNQ==691245284015" alt="" loading="lazy"></p>
<p>æœ€åç”¨äº†æœäº†ä¸€åœˆä¸é‡å¤çš„åªæœ‰<code>bcy</code></p>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•é€šè¿‡<code>Shell</code>å’Œ<code>Node.js</code>å®ç°<strong>å¤åˆ¶å½“å‰åˆ†æ”¯ååˆ°å‰ªè´´æ¿</strong></p>
<p>å¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œæ¬¢è¿ç•™è¨€è®¨è®º</p>
<p>æºç åœ°å€ï¼š<a href="https://github.com/ATQQ/tools/tree/main/packages/cli/bcy" target="_blank" rel="noreferrer">bcy</a></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY5MTMxNzA1MDQ0OA==691317050448" length="0" type="image//mdImg/MTY5MTMxNzA1MDQ0OA==691317050448"/>
        </item>
        <item>
            <title><![CDATA[ç»­è´¹äº†9å¹´åŸŸåï¼]]></title>
            <link>https://www.dmsrs.org/essay/notes/2023-08-12.html</link>
            <guid>https://www.dmsrs.org/essay/notes/2023-08-12.html</guid>
            <pubDate>Sat, 12 Aug 2023 10:00:18 GMT</pubDate>
            <description><![CDATA[å¶ç„¶å‘ç°åŸŸåå¿«åˆ°æœŸäº†ï¼ŒèŠ±è´¹261å…ƒç›´æ¥å†ç»­9å¹´åŸŸåï¼ˆæ‹‰æ»¡ï¼‰]]></description>
            <content:encoded><![CDATA[<h1 id="ç»­è´¹äº†9å¹´åŸŸå" tabindex="-1">ç»­è´¹äº†9å¹´åŸŸåï¼ <a class="header-anchor" href="#ç»­è´¹äº†9å¹´åŸŸå" aria-label="Permalink to &quot;ç»­è´¹äº†9å¹´åŸŸåï¼&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç¼˜èµ·" tabindex="-1">ç¼˜èµ· <a class="header-anchor" href="#ç¼˜èµ·" aria-label="Permalink to &quot;ç¼˜èµ·&quot;">&ZeroWidthSpace;</a></h2>
<p>å¬è¯´å°ç¨‹åºè¦å¤‡æ¡ˆäº†ï¼Œéšæ‰‹æ‰“å¼€äº†ä¸€ä¸ªå­¦ç”Ÿæ—¶æœŸå¼€å‘çš„ä¸€ä¸ªå°ç¨‹åº</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYxNzYwODI3MDQ4OA==617608270488" alt="" loading="lazy"></p>
<p>å‘ç°ç”¨ä¸äº†ï¼Œæ‰“å¼€å°±æŠ¥é”™äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMjk2NzgxOQ==691832967819" alt="" loading="lazy"></p>
<p>ä½†ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆåŸå› ï¼Œçœ‹äº†ä¸€ä¸‹ä¸Šæ¬¡éƒ¨ç½²è¿˜æ˜¯ä¸€å¹´å‰ï¼ŒæœŸé—´ä¹Ÿæ²¡è¿­ä»£è¿‡</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzA5NDcwNw==691833094707" alt="" loading="lazy"></p>
<p>ç„¶åæ‰“å¼€äº†ä¸€ä¸‹<a href="http://hdkq.sugarat.top/" target="_blank" rel="noreferrer">ç½‘é¡µç‰ˆ</a>ï¼Œæ§åˆ¶å°çœ‹äº†ä¸€ä¸‹è¯·æ±‚æ˜¯æ­£å¸¸å“åº”çš„</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzI4MjQ3NQ==691833282475" alt="" loading="lazy"></p>
<p>ä¸è¿‡ç»†çœ‹å‘ç°æ˜¯ http è¯·æ±‚ï¼Œæˆ‘å¤§æ¦‚çŒœäº†å¯èƒ½æ˜¯ç½‘ç«™çš„SSLè¯ä¹¦åˆ°æœŸäº†ï¼Œäºæ˜¯å°†åŸŸåæ”¹æˆhttpsè®¿é—®ï¼Œæœç„¶Gäº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzM1MzY3MQ==691833353671" alt="" loading="lazy"></p>
<p>æ‰¾äº†ä¸ª<a href="https://uutool.cn/ssl-time/" target="_blank" rel="noreferrer">å·¥å…·ç½‘ç«™</a>æŸ¥äº†ä¸€ä¸‹åˆ°æœŸæ—¶é—´</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzQxMjg3Mw==691833412873" alt="" loading="lazy"></p>
<p>å·§äº†ï¼Œæ­£å¥½å°±æ˜¯å‰2å‘¨</p>
<p>æ­¤æ—¶éšæ‰‹æ‰“å¼€äº†é˜¿é‡Œäº‘çš„æ§åˆ¶å°ï¼Œå‡†å¤‡é‡æ–°ç”³è¯·ä¸€å¼  SSL è¯ä¹¦</p>
<p><strong>æ°å¥½æ‰“å¼€å‘ç°åŸŸå æ˜å¹´å°±åˆ°æœŸäº†ï¼Œå°±æ‰“å¼€äº†ç»­è´¹é¡µé¢ï¼Œçœ‹çœ‹æ¶¨ä»·æ²¡</strong></p>
<p>å‘ç°åªè¦29ä¸€å¹´ï¼Œä»¥å‰éƒ½æ˜¯1å¹´1å¹´çš„ç»­è´¹ï¼Œçœ‹ç€ä¾¿å®œå‡†å¤‡ç›´æ¥ç»™å®ƒæä¸ªå‡ åå¹´ï¼ˆä¸‡ä¸€å“ªå¤©æ¶¨ä»·äº†ï¼‰</p>
<p>ç»“æœå‘ç°æ‹‰æ»¡æœ€å¤šæ˜¯108ä¸ªæœˆåˆšå¥½æ˜¯9å¹´(261ç›´æ¥æ‹¿ä¸‹)</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzg4OTU2NA==691833889564" alt="" loading="lazy"></p>
<h2 id="ç»“è¯­" tabindex="-1">ç»“è¯­ <a class="header-anchor" href="#ç»“è¯­" aria-label="Permalink to &quot;ç»“è¯­&quot;">&ZeroWidthSpace;</a></h2>
<p>åŸŸåè¿™ä¸ªä¸œè¥¿æ„Ÿè§‰å’Œæ‰‹æœºå·ä¸€æ ·ï¼Œè™½ç„¶æ²¡ç‰¹æ®Šæ„ä¹‰ï¼Œä½†ä¹Ÿä¸èˆå¾—éšä¾¿æ¢ ğŸ˜„</p>
<p>å¸Œæœ›åé¢èƒ½æä¸ªä¾¿æ€§ä»·æ¯”é«˜æ—¶é—´ä¹Ÿé•¿çš„æœåŠ¡å™¨ï¼Œç°åœ¨è¿™ä¸ªæ˜å¹´ä¹Ÿåˆ°æœŸäº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY5MTgzNDM3MjU4MQ==691834372581" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY5MTgzMzg4OTU2NA==691833889564" length="0" type="image//mdImg/MTY5MTgzMzg4OTU2NA==691833889564"/>
        </item>
        <item>
            <title><![CDATA[Mac å®‰è£… stable-diffusion]]></title>
            <link>https://www.dmsrs.org/ai/stable-diffusion/mac-install.html</link>
            <guid>https://www.dmsrs.org/ai/stable-diffusion/mac-install.html</guid>
            <pubDate>Thu, 06 Jul 2023 14:43:02 GMT</pubDate>
            <description><![CDATA[Mac å®æ“å®‰è£… stable-diffusionï¼ŒåŒ…å«ç¯å¢ƒé…ç½®ï¼Œsdæ’ä»¶å®‰è£…ï¼Œæ¨¡å‹å®‰è£…ç­‰å†…å®¹]]></description>
            <content:encoded><![CDATA[<h1 id="mac-å®‰è£…-stable-diffusion" tabindex="-1">Mac å®‰è£… stable-diffusion <a class="header-anchor" href="#mac-å®‰è£…-stable-diffusion" aria-label="Permalink to &quot;Mac å®‰è£… stable-diffusion&quot;">&ZeroWidthSpace;</a></h1>
<p>ç¬”è€…æ‰€ä½¿ç”¨è®¾å¤‡ Mac miniï¼ˆmacOS Venturaï¼‰ï¼Œå¦‚è¯»è€…ä½ æ˜¯ window è¯·è‡ªè¡Œè°·æ­Œ window å®‰è£… stable-diffusion æ•™ç¨‹ã€‚</p>
<p>ç¬”è€…ä¸ä¼špythonï¼Œä¹Ÿä¸ä¼šæœºå™¨å­¦ä¹ ï¼Œå®‰è£…è¿‡ç¨‹å¯èƒ½ä¸æ˜¯æœ€ä½³çš„æ–¹å¼ï¼Œä½†æ˜¯èƒ½è·‘èµ·æ¥ï¼ˆhhï¼‰ã€‚</p>
<blockquote>
<nav class="table-of-contents"><ul><li><a href="#ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</a><ul><li><a href="#å®‰è£…python">å®‰è£…python</a></li><li><a href="#å®‰è£…-stable-diffusion-webui">å®‰è£… stable-diffusion-webui</a></li></ul></li><li><a href="#é…ç½®-stable-diffusion-webui">é…ç½® stable-diffusion-webui</a><ul><li><a href="#æ±‰åŒ–">æ±‰åŒ–</a></li><li><a href="#å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a></li></ul></li><li><a href="#å®‰è£…æ¨¡å‹">å®‰è£…æ¨¡å‹</a></li><li><a href="#ç®€å•ä½¿ç”¨">ç®€å•ä½¿ç”¨</a></li></ul></nav>
</blockquote>
<h2 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1">ç¯å¢ƒå‡†å¤‡ <a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡" aria-label="Permalink to &quot;ç¯å¢ƒå‡†å¤‡&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼šç¡®ä¿å®‰è£…è¿‡ç¨‹ç½‘ç»œé€šç•…</li>
<li><a href="https://www.python.org/downloads/release/python-3106/" target="_blank" rel="noreferrer">python 3.16.0</a> ï¼šç¡®ä¿å¤§éƒ¨åˆ†ä¾èµ–åº“èƒ½é¡ºåˆ©è¿è¡Œ</li>
<li><a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" target="_blank" rel="noreferrer">stable-diffusion-webui</a>ï¼šsd ç½‘é¡µåº”ç”¨</li>
</ul>
<h3 id="å®‰è£…python" tabindex="-1">å®‰è£…python <a class="header-anchor" href="#å®‰è£…python" aria-label="Permalink to &quot;å®‰è£…python&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>ç¬”è€…çš„æ“ä½œä¸ä¸€å®šæ˜¯æœ€ä½³å®è·µ</p>
</blockquote>
<p>æˆ‘è¿™é‡Œä½¿ç”¨å®‰è£…åŒ…å‚»ç“œå¼çš„ä¸€é”®å®‰è£…ï¼Œä»å®˜ç½‘ä¸‹è½½ <a href="https://www.python.org/downloads/release/python-3106/" target="_blank" rel="noreferrer">python 3.16.0</a> å®‰è£…åŒ…</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMDc3OTM2Mg==688300779362" alt="" loading="lazy"></p>
<p>æ‰“å¼€ä¸‹è½½å¥½çš„å®‰è£…åŒ…ï¼Œæ— è„‘é€‰æ‹©ä¸‹ä¸€æ­¥å³å¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMDgyMDQyMw==688300820423" alt="" loading="lazy"></p>
<p>å®‰è£…å®Œåæ‰“å¼€ç»ˆç«¯è¾“å…¥ï¼Œ<a href="https://app.warp.dev/block/s9LVoqUBc12tgLXmwl1sQO" target="_blank" rel="noreferrer">æŸ¥çœ‹ python ç‰ˆæœ¬</a></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">python3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --version</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTAyODI2Nw==688301028267" alt="" loading="lazy"></p>
<p>è¿™é‡Œå¯ä»¥åœ¨<code>~/.zshrc</code>ä¸­è®¾ç½®ä¸€ä¸ªåˆ«å<code>python</code>ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> python</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">python3</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTEwMTgzNw==688301101837" alt="" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTEzMjgzNQ==688301132835" alt="" loading="lazy"></p>
<h3 id="å®‰è£…-stable-diffusion-webui" tabindex="-1">å®‰è£… stable-diffusion-webui <a class="header-anchor" href="#å®‰è£…-stable-diffusion-webui" aria-label="Permalink to &quot;å®‰è£… stable-diffusion-webui&quot;">&ZeroWidthSpace;</a></h3>
<p>clone é¡¹ç›®åˆ°æœ¬åœ°</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</span></span></code></pre>
</div><p>å…‹éš†å®Œæˆåè¿›å…¥é¡¹ç›®ç›®å½•</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> stable-diffusion-webui</span></span></code></pre>
</div><p>å®‰è£…é¡¹ç›®ä¾èµ–(æ­¤è¿‡ç¨‹ä¼šæŒç»­ä¸€æ®µæ—¶é—´)</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> requirements.txt</span></span></code></pre>
</div><p>å¯åŠ¨é¡¹ç›®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">./webui.sh</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTU4NTA0Mw==688301585043" alt="" loading="lazy"></p>
<p>è®¿é—® <code>http://127.0.0.1:7860/</code> å³å¯åº”ç”¨çš„å†…å®¹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTY2MTk5MA==688301661990" alt="" loading="lazy"></p>
<h2 id="é…ç½®-stable-diffusion-webui" tabindex="-1">é…ç½® stable-diffusion-webui <a class="header-anchor" href="#é…ç½®-stable-diffusion-webui" aria-label="Permalink to &quot;é…ç½® stable-diffusion-webui&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ±‰åŒ–" tabindex="-1">æ±‰åŒ– <a class="header-anchor" href="#æ±‰åŒ–" aria-label="Permalink to &quot;æ±‰åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸ºäº†æ–¹ä¾¿åç»­çš„ä½¿ç”¨æˆ‘ä»¬å¯ä»¥å°† stable-diffusion-webui æ±‰åŒ–ä¸€ä¸‹</p>
<p>ä½¿ç”¨æ’ä»¶<a href="https://github.com/VinsonLaro/stable-diffusion-webui-chinese" target="_blank" rel="noreferrer">stable-diffusion-webui-chinese</a></p>
<p>å®‰è£…æ“ä½œè·¯å¾„: <code>Extensions</code> =&gt; <code>URL for extension's git repository</code> =&gt; <code>Install</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTc1ODg0MQ==688301758841" alt="" loading="lazy"></p>
<p>è¾“å…¥æ’ä»¶åœ°å€ï¼š<code>https://github.com/VinsonLaro/stable-diffusion-webui-chinese</code>,ç‚¹å‡»<code>Install</code>å³å¯</p>
<p>ç´§æ¥ç€åº”ç”¨æ’ä»¶ï¼š<code>Installed</code> =&gt; <code>Apply and restart UI</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMTk0NTg4Nw==688301945887" alt="" loading="lazy"></p>
<p>è®¾ç½®æ±‰åŒ–ï¼š<code>Settings</code> =&gt; <code>User Interface</code> =&gt; <code>Localization</code> =&gt; <code>Apply Settings</code> =&gt; <code>Reload UI</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMjA5NjAwMQ==688302096001" alt="" loading="lazy"></p>
<p>æ¨èä½¿ç”¨ä¸­è‹±å¯¹ç…§ï¼Œæ–¹ä¾¿è§‚çœ‹éƒ¨åˆ†è‹±æ–‡æ•™ç¨‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMjM3MTAwNw==688302371007" alt="" loading="lazy"></p>
<p>å†æ¬¡è®¿é—®å³å¯çœ‹åˆ°è‹±æ–‡æ±‰åŒ–çš„å†…å®¹</p>
<h3 id="å®‰è£…æ’ä»¶" tabindex="-1">å®‰è£…æ’ä»¶ <a class="header-anchor" href="#å®‰è£…æ’ä»¶" aria-label="Permalink to &quot;å®‰è£…æ’ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”±äºç½‘ç»œé—®é¢˜å¯èƒ½ä¼šå‡ºç°è®¿é—®å¤±è´¥çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMjQ0NDUwNg==688302444506" alt="" loading="lazy"></p>
<p>è¿™é‡Œå¯ä»¥ä½¿ç”¨ç¬”è€…çš„CVä¸‹æ¥çš„é…ç½®<code>https://script.sugarat.top/json/sd.json</code></p>
<p>æˆ–è€…æµè§ˆå™¨è®¿é—®<a href="https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui-extensions/master/index.json" target="_blank" rel="noreferrer">é“¾æ¥èµ„æº</a>ï¼Œå°†å…¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæœ¬åœ°å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼ˆæ¯”å¦‚ä½¿ç”¨<a href="https://www.npmjs.com/package/http-server" target="_blank" rel="noreferrer">http-server</a>ï¼‰</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> http-server</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMjc3ODEzNg==688302778136" alt="" loading="lazy"></p>
<p>urlè®¾ç½®ä¸º<code>http://127.0.0.1:8080/sd.json</code>å³å¯ï¼Œç‚¹å‡» åŠ è½½ å³å¯çœ‹åˆ°æ’ä»¶åˆ—è¡¨</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwMzI4NTY5Mg==688303285692" alt="" loading="lazy"></p>
<p>ä¾‹å¦‚ å®‰è£… <code>sd-webui-controlnet</code> å’Œ <code>3D Openpose Editor</code></p>
<p>æœç´¢<code>controlnet</code>ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ’ä»¶ï¼Œç‚¹å‡» <code>Installed</code> å³å¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwNTU2NjA0Mw==688305566043" alt="" loading="lazy"></p>
<p>åœ¨å·²å®‰è£…åˆ—è¡¨å³å¯çœ‹åˆ°å®‰è£…çš„æ’ä»¶</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwNjIyOTMxNg==688306229316" alt="" loading="lazy"></p>
<p>é‡å¯åå³å¯çœ‹åˆ°åˆšå®‰è£…çš„æ’ä»¶ç”Ÿæ•ˆäº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwNjc4MzcxMg==688306783712" alt="" loading="lazy"></p>
<h2 id="å®‰è£…æ¨¡å‹" tabindex="-1">å®‰è£…æ¨¡å‹ <a class="header-anchor" href="#å®‰è£…æ¨¡å‹" aria-label="Permalink to &quot;å®‰è£…æ¨¡å‹&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>ä» <a href="https://civitai.com/" target="_blank" rel="noreferrer">C ç«™</a>ï¼š<a href="https://civitai.com/" target="_blank" rel="noreferrer">https://civitai.com/</a> ä¸‹è½½ï¼ˆéœ€è¦ç§‘å­¦ä¸Šç½‘å·¥å…·æ‰èƒ½è®¿é—®ï¼‰</p>
</blockquote>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTEzMzUzNA==688309133534" alt="" loading="lazy"></p>
<p>æ¯”å¦‚ <a href="https://civitai.com/models/6424?modelVersionId=11745" target="_blank" rel="noreferrer">ChilloutMix</a> æ¨¡å‹</p>
<p>ç‚¹å‡»ä¸‹è½½</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTI2NTU3Mg==688309265572" alt="" loading="lazy"></p>
<p>å¯¼å…¥ä¸‹è½½çš„æ¨¡å‹åˆ°ç›®å½• <code>models/Stable-diffusion</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTUyMDk4MA==688309520980" alt="" loading="lazy"></p>
<p>ç„¶åé‡å¯æœåŠ¡æˆ–è€…ç‚¹å‡»åˆ·æ–°</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODU3MDA2NDczNA==688570064734" alt="" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTYxMDkyOA==688309610928" alt="" loading="lazy"></p>
<h2 id="ç®€å•ä½¿ç”¨" tabindex="-1">ç®€å•ä½¿ç”¨ <a class="header-anchor" href="#ç®€å•ä½¿ç”¨" aria-label="Permalink to &quot;ç®€å•ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<p>å¯ä»¥ç›´æ¥ Copy å…¶å®ƒç”¨æˆ·åˆ†äº«åˆ°Cç«™ä¸Šçš„æç¤ºè¯</p>
<p>æ¯”å¦‚ä¸‹é¢<a href="https://civitai.com/images/312507?period=AllTime&amp;periodMode=published&amp;sort=Newest&amp;view=categories&amp;modelVersionId=27828&amp;modelId=23302&amp;postId=79817" target="_blank" rel="noreferrer">è¿™ä¸ªä¾‹å­</a></p>
<p>æŸ¥çœ‹å¤§å›¾æ—¶æ»‘åˆ°å³ä¸‹è§’</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTg3ODUxOA==688309878518" alt="" loading="lazy"></p>
<p>æˆ–è€…ç¼©ç•¥å›¾å³ä¸‹è§’çš„ â€œiâ€</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTkwMzgwOA==688309903808" alt="" loading="lazy"></p>
<p>ä¸‹é¢å®æ“ä½¿ç”¨ä¸€ä¸‹ä¸Šé¢çš„æç¤ºè¯</p>
<p>æˆ‘è¿™é‡ŒæŠŠæ­¥æ•°è°ƒæˆäº†30</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-pJjUk" id="tab-H_7q-Il" checked><label for="tab-H_7q-Il">â‘  æç¤ºè¯</label><input type="radio" name="group-pJjUk" id="tab-2PAwMeD" ><label for="tab-2PAwMeD">â‘¡ åå‘æç¤ºè¯</label><input type="radio" name="group-pJjUk" id="tab-0JVPvWq" ><label for="tab-0JVPvWq">â‘¢ é‡‡æ ·å™¨</label><input type="radio" name="group-pJjUk" id="tab--P4XIOS" ><label for="tab--P4XIOS">â‘£ æ­¥æ•°</label><input type="radio" name="group-pJjUk" id="tab-guwEIY9" ><label for="tab-guwEIY9">â‘¤ å¼•å¯¼ç³»æ•°</label></div><div class="blocks">
<div class="language-txt vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>extremely detailed CG uniform 8k illustrations, high color substitution, sketches graffiti art, illustrations photo, masterpiece, hyper detailed, best quality, ultra high res, high resolution, (intricate details), perfect lighting, best shadow, (graffiti wall:1.4), 1 girl, (extremely detailed face and eyes), (shiny big eyes), (shiny graffiti long hair:1.2), ((colorful)), ((colorful illustrations)), face focus, lip gloss, random eyes color,</span></span></code></pre>
</div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>by bad-picture-chill-75v, nude, porn, nipples, pussy, pornography, canvas frame, cartoon, 3d, ((disfigured)), ((bad art)), ((deformed)),((extra limbs)),((close up)),((b&#x26;w)), wierd colors, blurry, (((duplicate))), ((morbid)), ((mutilated)), [out of frame], extra fingers, mutated hands, ((poorly drawn hands)), ((poorly drawn face)), (((mutation))), (((deformed))), ((ugly)), blurry, ((bad anatomy)), (((bad proportions))), ((extra limbs)), cloned face, (((disfigured))), out of frame, ugly, extra limbs, (bad anatomy), gross proportions, (malformed limbs), ((missing arms)), ((missing legs)), (((extra arms))), (((extra legs))), mutated hands, (fused fingers), (too many fingers), (((long neck))), Photoshop, video game, ugly, tiling, poorly drawn hands, poorly drawn feet, poorly drawn face, out of frame, mutation, mutated, extra limbs, extra legs, extra arms, disfigured, deformed, cross-eye, body out of frame, blurry, bad art, bad anatomy, 3d render, background blur, (blurred background),  (briefs), (triangle pants), watermark, astigmatism, scattered light, lens astigmatism, chest light, shiny boobs, glowing boobs, halo, fog, hazy,</span></span></code></pre>
</div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>DPM++ SDE Karras</span></span></code></pre>
</div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>30</span></span></code></pre>
</div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>9</span></span></code></pre>
</div></div></div>
<p>æœ€åæ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMxMTAyMTY2Ng==688311021666" alt="" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4ODMxMTI1MTEzNw==688311251137" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY4ODMwOTEzMzUzNA==688309133534" length="0" type="image//mdImg/MTY4ODMwOTEzMzUzNA==688309133534"/>
        </item>
        <item>
            <title><![CDATA[stable-diffusion å­¦ä¹ ç¬”è®°]]></title>
            <link>https://www.dmsrs.org/ai/stable-diffusion/</link>
            <guid>https://www.dmsrs.org/ai/stable-diffusion/</guid>
            <pubDate>Sun, 02 Jul 2023 15:26:21 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ç¬”è€…ä¸ä¼špythonï¼Œä¹Ÿä¸ä¼šæœºå™¨å­¦ä¹ ï¼Œä½†æ˜¯å¯¹äºSDä¸€ç›´å¾ˆæ„Ÿå…´è¶£ï¼Œæœ€è¿‘æœ‰ç©ºé—²æ—¶é—´ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ stable-diffusion å­¦ä¹ ç¬”è®°ã€‚
 ç›®å½•
* Mac å®‰è£… stable-diff]]></description>
            <content:encoded><![CDATA[<h1 id="stable-diffusion-å­¦ä¹ ç¬”è®°" tabindex="-1">stable-diffusion å­¦ä¹ ç¬”è®° <a class="header-anchor" href="#stable-diffusion-å­¦ä¹ ç¬”è®°" aria-label="Permalink to &quot;stable-diffusion å­¦ä¹ ç¬”è®°&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…ä¸ä¼špythonï¼Œä¹Ÿä¸ä¼šæœºå™¨å­¦ä¹ ï¼Œä½†æ˜¯å¯¹äºSDä¸€ç›´å¾ˆæ„Ÿå…´è¶£ï¼Œæœ€è¿‘æœ‰ç©ºé—²æ—¶é—´ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ stable-diffusion å­¦ä¹ ç¬”è®°ã€‚</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./mac-install.html">Mac å®‰è£… stable-diffusion</a></li>
</ul>
<h2 id="å‚è€ƒå­¦ä¹ èµ„æ–™" tabindex="-1">å‚è€ƒå­¦ä¹ èµ„æ–™ <a class="header-anchor" href="#å‚è€ƒå­¦ä¹ èµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒå­¦ä¹ èµ„æ–™&quot;">&ZeroWidthSpace;</a></h2>
<p>æ–‡å­—ï¼š</p>
<ul>
<li><a href="https://mp.weixin.qq.com/s/eFi-xoVDQomzCBr5kO9nHA" target="_blank" rel="noreferrer">è€—æ—¶80å°æ—¶ï¼è¶…è¯¦ç»†çš„èƒæ•™çº§Stable Diffusionä½¿ç”¨æ•™ç¨‹ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿï¼</a></li>
<li><a href="https://tob-design.yuque.com/kxcufk/sd" target="_blank" rel="noreferrer">Stable Diffusion çŸ¥è¯†åº“</a></li>
</ul>
<p>YouTube è§†é¢‘ï¼š</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=CHYiiVK8V6o" target="_blank" rel="noreferrer">Stable Diffusion Webuiæ‰«ç›²+Mac M1/M2 å®‰è£…ï¼Œä¸­æ–‡ç‰ˆï¼Œæ— éœ€GPU</a></li>
<li><a href="https://www.youtube.com/watch?v=EYEmdz7ez0M&amp;t=361s" target="_blank" rel="noreferrer">ğŸ¼Stable Diffusion è…¾è®¯äº‘å®‰è£…éƒ¨ç½²æ•™ç¨‹ä¹‹æ¨¡å‹ä¸æ’ä»¶ çŸ¥è¯†ç‚¹ï¼šåŸç”ŸSDå¤§æ¨¡å‹å’Œloraä¸‹è½½ | SDæ’ä»¶ä¸‹è½½ | controlnetæ¨¡å‹ç¼ºå¤±ä¸‹è½½å’Œåˆ é™¤ï¼ˆç‹¬å®¶è„šæœ¬ï¼‰</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å®‰è£…nvmåç»ˆç«¯å¯åŠ¨å˜æ…¢,æ›´å¿«çš„Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¨è]]></title>
            <link>https://www.dmsrs.org/bigWeb/node/nvm-iterm.html</link>
            <guid>https://www.dmsrs.org/bigWeb/node/nvm-iterm.html</guid>
            <pubDate>Sun, 12 Feb 2023 08:12:30 GMT</pubDate>
            <description><![CDATA[ç»ˆç«¯å¯åŠ¨æ—¶æ€»ä¼šå¡é¡¿ä¸€ä¸‹ï¼Œæ²¡å»æ¢ç©¶åŸå› ï¼Œçœ‹åˆ°å’²å¥ˆçš„åˆ†äº«æ‰çŸ¥é“æ˜¯nvmåœ¨ä½œç¥Ÿ]]></description>
            <content:encoded><![CDATA[<h1 id="å®‰è£…nvmåç»ˆç«¯å¯åŠ¨å˜æ…¢-æ›´å¿«çš„nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¨è" tabindex="-1">å®‰è£…nvmåç»ˆç«¯å¯åŠ¨å˜æ…¢,æ›´å¿«çš„Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¨è <a class="header-anchor" href="#å®‰è£…nvmåç»ˆç«¯å¯åŠ¨å˜æ…¢-æ›´å¿«çš„nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¨è" aria-label="Permalink to &quot;å®‰è£…nvmåç»ˆç«¯å¯åŠ¨å˜æ…¢,æ›´å¿«çš„Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·æ¨è&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å…ˆçœ‹å®‰è£…å‰åå¯¹æ¯”" tabindex="-1">å…ˆçœ‹å®‰è£…å‰åå¯¹æ¯” <a class="header-anchor" href="#å…ˆçœ‹å®‰è£…å‰åå¯¹æ¯”" aria-label="Permalink to &quot;å…ˆçœ‹å®‰è£…å‰åå¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h2>
<p>å®‰è£…å‰</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NjE4NDI1OTY0OA==676184259648" alt="" loading="lazy"></p>
<p>å®‰è£…å</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NjE4NDgwNjAzMA==676184806030" alt="" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°æœ‰æ˜æ˜¾çš„å¡é¡¿</p>
<h2 id="å¦‚ä½•è§£å†³" tabindex="-1">å¦‚ä½•è§£å†³ <a class="header-anchor" href="#å¦‚ä½•è§£å†³" aria-label="Permalink to &quot;å¦‚ä½•è§£å†³&quot;">&ZeroWidthSpace;</a></h2>
<p>å°† NVM åˆå§‹åŒ–çš„é€»è¾‘æ”¾å…¥å‡½æ•°ä¸­ï¼Œä½¿ç”¨æ—¶æ‰è°ƒç”¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">nvm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">//</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [!code </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">++]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> NVM_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/.nvm"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$NVM_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/nvm.sh"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ] &#x26;&#x26; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$NVM_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/nvm.sh"</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # This loads nvm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$NVM_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/bash_completion"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ] &#x26;&#x26; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$NVM_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/bash_completion"</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # This loads nvm bash_completion</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}// [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">code ++]</span></span></code></pre>
</div><p>æ–¹æ³•æ¥æº <a href="https://public.zsxq.com/groups/28851452458181.html" target="_blank" rel="noreferrer">å’²å¥ˆçš„å¹³è¡Œæ—¶ç©º</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NjE4NTM2MDkyOQ==676185360929" alt="" loading="lazy"></p>
<p><strong>å¸¦æ¥çš„å½±å“</strong></p>
<p>emm ç”¨Nodeçš„è¯éœ€è¦æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹<code>nvm</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸æ˜¯å¾ˆä¼˜é›…</p>
<p>ä¸‹é¢ä»‹ç»å‡ ä¸ªå¯å¹³æ›¿ NVM çš„å·¥å…·ï¼Œéå¸¸çš„èµ</p>
<h2 id="ä½¿ç”¨å…¶å®ƒæ›´å¿«çš„å·¥å…·" tabindex="-1">ä½¿ç”¨å…¶å®ƒæ›´å¿«çš„å·¥å…· <a class="header-anchor" href="#ä½¿ç”¨å…¶å®ƒæ›´å¿«çš„å·¥å…·" aria-label="Permalink to &quot;ä½¿ç”¨å…¶å®ƒæ›´å¿«çš„å·¥å…·&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="volta" tabindex="-1"><a href="https://volta.sh/" target="_blank" rel="noreferrer">volta</a> <a class="header-anchor" href="#volta" aria-label="Permalink to &quot;[volta](https://volta.sh/)&quot;">&ZeroWidthSpace;</a></h3>
<p>åŸºäº Rust å®ç°çš„ï¼Œé™¤äº†Nodeç‰ˆæœ¬å¤–è¿˜æ”¯æŒå…¶å®ƒçš„</p>
<p>å®‰è£…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://get.volta.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> bash</span></span></code></pre>
</div><p>å®‰è£… Node</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># install latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">volta</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> node</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">volta</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> node@16</span></span></code></pre>
</div><h3 id="fnm" tabindex="-1"><a href="https://github.com/Schniz/fnm" target="_blank" rel="noreferrer">fnm</a> <a class="header-anchor" href="#fnm" aria-label="Permalink to &quot;[fnm](https://github.com/Schniz/fnm)&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¹Ÿæ˜¯ä¸€ä¸ª åŸºäº Rustçš„ Node åŒ…ç®¡ç†å·¥å…·</p>
<p>å®‰è£…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://fnm.vercel.app/install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> bash</span></span></code></pre>
</div><p>å®‰è£… Node</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fnm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fnm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 14</span></span></code></pre>
</div><h3 id="pnpm" tabindex="-1"><a href="https://pnpm.io/zh/cli/env" target="_blank" rel="noreferrer">pnpm</a> <a class="header-anchor" href="#pnpm" aria-label="Permalink to &quot;[pnpm](https://pnpm.io/zh/cli/env)&quot;">&ZeroWidthSpace;</a></h3>
<p>æ²¡é”™<code>pnpm</code> å¯ä»¥å®‰è£…NodeåŒ…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> latest</span></span></code></pre>
</div><p>å®‰è£… v16 çš„Node.js</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --global</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 16</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…è¯•ç”¨äº†ä¸‹æœ€åé€‰æ‹©äº†<code>volta</code></p>
<p>ä¸ä»…ä»…æ”¯æŒ node ç‰ˆæœ¬ç®¡ç†ï¼Œè¿˜æ”¯æŒå…¶å®ƒå…¨å±€åŒ…çš„ç®¡ç†</p>
<p>åŠŸèƒ½éå¸¸çš„å¤šï¼ˆæ¯”å¦‚ æ ¹æ®é¡¹ç›®é‡ŒNodeç‰ˆæœ¬è¦æ±‚ï¼Œè‡ªåŠ¨åˆ‡æ¢ï¼‰</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NjE4OTM5MTk2Mg==676189391962" alt="" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY3NjE4NTM2MDkyOQ==676185360929" length="0" type="image//mdImg/MTY3NjE4NTM2MDkyOQ==676185360929"/>
        </item>
        <item>
            <title><![CDATA[ä¸€ä¸ªç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜]]></title>
            <link>https://www.dmsrs.org/technology/works/theme.html</link>
            <guid>https://www.dmsrs.org/technology/works/theme.html</guid>
            <pubDate>Sun, 05 Feb 2023 14:00:00 GMT</pubDate>
            <description><![CDATA[ç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜ä»‹ç»]]></description>
            <content:encoded><![CDATA[<h1 id="ä¸€ä¸ªç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜" tabindex="-1">ä¸€ä¸ªç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜ <a class="header-anchor" href="#ä¸€ä¸ªç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜" aria-label="Permalink to &quot;ä¸€ä¸ªç®€çº¦é£çš„vitepressåšå®¢ä¸»é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…çš„åšå®¢ä¹‹å‰æ˜¯ä½¿ç”¨ <a href="https://vuepress.vuejs.org/" target="_blank" rel="noreferrer">VuePress</a> + <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noreferrer">recoä¸»é¢˜</a></p>
<p>éšç€åšå®¢æ–‡ç« æ•°é‡è¶Šæ¥è¶Šå¤šï¼ˆmdæ–‡ä»¶å·²ç»300+äº†ï¼‰ï¼Œåšå®¢æœ¬åœ°å¯åŠ¨å’Œæ„å»ºè¶Šæ¥è¶Šæ¥æ…¢äº†emmm</p>
<p>å½“ç„¶ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å°±æ˜¯æœ¬åœ°å¯åŠ¨ï¼Œæ„å»ºæ˜¯ä¸ªç›¸å¯¹æ¯”è¾ƒä½é¢‘çš„åŠ¨ä½œã€‚</p>
<p>æ°å¥½æ­¤æ—¶ <a href="https://vitepress.dev/" target="_blank" rel="noreferrer">VitePress</a> ä¹Ÿæ¯”è¾ƒæˆç†Ÿäº†ï¼ˆalphaï¼‰ï¼Œç›¸æ¯” VuePress æ›´åŠ çš„ç®€æ´ï¼Œå¯ç©æ€§å¼ºï¼Œä¸Šæ‰‹æˆæœ¬ä¹Ÿä½ã€‚</p>
<p>æŒ‰ç…§å®˜æ–¹çš„ç»™çš„å®šä½ï¼ŒVitePress ä¸»æ‰“æ˜¯ä¸»é¢˜ï¼ˆä¸ªäººæ„Ÿè§‰å°±åƒ<a href="https://hexo.io/zh-cn/" target="_blank" rel="noreferrer">Hexo</a>ä¸°å¯Œå¤šå½©çš„ä¸»é¢˜ä¸€æ ·ï¼‰ï¼Œä¸æä¾›æ’ä»¶ç³»ç»Ÿ</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NTU3MjY0MjgzNQ==675572642835" alt="" loading="lazy"></p>
<p>åœ¨ç¬”è€…è¿›è¡Œåšå®¢è¿ç§»çš„æ—¶å€™ï¼Œå°†ä¸»é¢˜åˆ†ç¦»äº†å‡ºæ¥ï¼Œå¯ä¾›å•ç‹¬ä½¿ç”¨</p>
<p>æ–°æ—§å¯¹æ¯”</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NTU3NDk0OTI2Ng==675574949266" alt="æ–°æ—§åšå®¢å¯¹æ¯”" loading="lazy"></p>
<p>é£æ ¼å€Ÿé‰´äº† <a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noreferrer">reco</a> ï¼Œ<a href="https://juejin.cn/" target="_blank" rel="noreferrer">æ˜é‡‘</a>ï¼Œ<a href="https://surmon.me/" target="_blank" rel="noreferrer">surmon</a>ç­‰ç­‰ï¼Œç»„ä»¶éƒ¨åˆ†ç”¨äº† <a href="https://element-plus.gitee.io/zh-CN/" target="_blank" rel="noreferrer">element-plus</a></p>
<p>ä¸‹é¢ä»‹ç»é£Ÿç”¨æŒ‡å—ï¼ˆ<a href="https://www.npmjs.com/package/@sugarat/theme" target="_blank" rel="noreferrer">ä¸»é¢˜</a>å®ç°å†…å®¹æ¯”è¾ƒå¤šï¼Œåé¢å•å¼€ä¸€ä¸ªä¸“æ ä»‹ç» ğŸ˜‹å˜¿å˜¿ï¼ï¼‰</p>
<h2 id="å¿«é€Ÿä½“éªŒ" tabindex="-1">å¿«é€Ÿä½“éªŒ <a class="header-anchor" href="#å¿«é€Ÿä½“éªŒ" aria-label="Permalink to &quot;å¿«é€Ÿä½“éªŒ&quot;">&ZeroWidthSpace;</a></h2>
<p>åªéœ€3æ­¥ï¼Œå³å¯ä½“éªŒ</p>
<p>â‘  æ‹‰å– Github æ¨¡æ¿</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ETcrc" id="tab-48mYKDs" checked><label for="tab-48mYKDs">npm</label><input type="radio" name="group-ETcrc" id="tab-HSBjW1x" ><label for="tab-HSBjW1x">yarn</label><input type="radio" name="group-ETcrc" id="tab-c6YRTgI" ><label for="tab-c6YRTgI">pnpm</label></div><div class="blocks">
<div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme@latest</span></span></code></pre>
</div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme</span></span></code></pre>
</div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme</span></span></code></pre>
</div></div></div>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šé¡¹ç›®å</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-1o79_" id="tab-yyavObH" checked><label for="tab-yyavObH">npm</label><input type="radio" name="group-1o79_" id="tab-zkNJKN3" ><label for="tab-zkNJKN3">yarn</label><input type="radio" name="group-1o79_" id="tab--c0MNG9" ><label for="tab--c0MNG9">pnpm</label></div><div class="blocks">
<div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-first-blog</span></span></code></pre>
</div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-first-blog</span></span></code></pre>
</div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/theme</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-first-blog</span></span></code></pre>
</div></div></div>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY4OTQyMDE1NTcxMA==689420155710" alt="" loading="lazy"></p>
<p>â‘¡ å®‰è£…ä¾èµ–</p>
<div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-fzPXe" id="tab-_qEW2a9" checked><label for="tab-_qEW2a9">pnpm</label><input type="radio" name="group-fzPXe" id="tab-KqObLPX" ><label for="tab-KqObLPX">å®‰è£… PNPM</label></div><div class="blocks">
<div class="language-sh vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span></span></code></pre>
</div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å¦‚æœä½ æ²¡æœ‰ PNPM è¯·å…ˆå®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pnpm</span></span></code></pre>
</div></div></div>
<p>â‘¢ å¯åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> dev</span></span></code></pre>
</div><p>å°±èƒ½å¾—åˆ°å¦‚ä¸‹çš„é¡µé¢</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NTU3NDMxODU0OA==675574318548" alt="" loading="lazy"></p>
<h2 id="å·²æ”¯æŒåŠŸèƒ½" tabindex="-1">å·²æ”¯æŒåŠŸèƒ½ <a class="header-anchor" href="#å·²æ”¯æŒåŠŸèƒ½" aria-label="Permalink to &quot;å·²æ”¯æŒåŠŸèƒ½&quot;">&ZeroWidthSpace;</a></h2>
<p>ä»‹ç»ä¸€ä¸‹ä¸»è¦çš„ï¼Œéæ‰€æœ‰ï¼Œè¯¦è§<a href="https://theme.sugarat.top/" target="_blank" rel="noreferrer">ä¸»é¢˜æ–‡æ¡£</a></p>
<ul>
<li>åšå®¢é¦–é¡µ
<ul>
<li>æ–‡ç« åˆ—è¡¨</li>
<li>ç²¾é€‰æ–‡ç« </li>
<li>å‹é“¾</li>
<li>æ ‡ç­¾åˆ†ç±»</li>
</ul>
</li>
<li>å›¾ç‰‡é¢„è§ˆ</li>
<li>æœç´¢ï¼ˆæ ‡é¢˜+ç®€ä»‹ï¼‰</li>
<li><a href="https://giscus.app/zh-CN" target="_blank" rel="noreferrer">giscus</a> è¯„è®ºç³»ç»Ÿ</li>
<li>æ¨èæ–‡ç« ï¼ˆåŒç›®å½•ï¼‰</li>
<li>é˜…è¯»æ—¶é—´è®¡ç®—</li>
<li>å…¨å±€çš„æç¤ºå¼¹çª— (ç”± <a href="https://element-plus.gitee.io/zh-CN/component/alert.html" target="_blank" rel="noreferrer">el-alert</a> é©±åŠ¨)</li>
<li>å…¨å±€çš„å…¬å‘Šå¼¹çª—ï¼Œæ”¯æŒè®¾ç½®å›¾ç‰‡ï¼Œæ–‡å­—ï¼ŒæŒ‰é’®</li>
<li>å…¨æ–‡æœç´¢</li>
<li>RSS</li>
<li>...</li>
</ul>
<h2 id="è§„åˆ’ä¸­åŠŸèƒ½" tabindex="-1">è§„åˆ’ä¸­åŠŸèƒ½ <a class="header-anchor" href="#è§„åˆ’ä¸­åŠŸèƒ½" aria-label="Permalink to &quot;è§„åˆ’ä¸­åŠŸèƒ½&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>Valine è¯„è®ºç³»ç»Ÿ</li>
<li>æ–‡ç« åˆé›†</li>
<li>æ›´å¤šå¯å®šåˆ¶çš„ä¸»é¢˜æ ·å¼</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>è¯»è€…æœ‰å»ºè®®çš„ åŠŸèƒ½&amp;æƒ³æ³• æ¬¢è¿ ç§ä¿¡&amp;è¯„è®ºåŒº äº¤æµ</p>
<ul>
<li>ä¸»é¢˜åœ°å€ï¼š<a href="https://theme.sugarat.top/" target="_blank" rel="noreferrer">https://theme.sugarat.top/</a></li>
<li>ä¸»é¢˜åŒ…ï¼š<a href="https://www.npmjs.com/package/@sugarat/theme" target="_blank" rel="noreferrer">@sugarat/theme</a></li>
<li>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme" target="_blank" rel="noreferrer">https://github.com/cnjimbo/cnjimbo.github.io/tree/master/packages/theme</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY3MzE3MDUxOTMwMw==673170519303" length="0" type="image//mdImg/MTY3MzE3MDUxOTMwMw==673170519303"/>
        </item>
        <item>
            <title><![CDATA[ä½¿ç”¨http-proxy-agentå‡ºç°ECONNRESET error]]></title>
            <link>https://www.dmsrs.org/technology/study/http-proxy-fail.html</link>
            <guid>https://www.dmsrs.org/technology/study/http-proxy-fail.html</guid>
            <pubDate>Sun, 22 Jan 2023 16:29:27 GMT</pubDate>
            <description><![CDATA[ä½¿ç”¨http-proxy-agentå‡ºç°ECONNRESET error
ä¹‹å‰åšäº†1ä¸ªä¸‹è½½æ–‡ä»¶çš„CLIå·¥å…· efst - åŸç†æ–‡ç« : ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…·
å…¶ä¸­æ”¯æŒè®¾ç½® ä»£ç†(proxy) ]]></description>
            <content:encoded><![CDATA[<h1 id="ä½¿ç”¨http-proxy-agentå‡ºç°econnreset-error" tabindex="-1">ä½¿ç”¨http-proxy-agentå‡ºç°ECONNRESET error <a class="header-anchor" href="#ä½¿ç”¨http-proxy-agentå‡ºç°econnreset-error" aria-label="Permalink to &quot;ä½¿ç”¨http-proxy-agentå‡ºç°ECONNRESET error&quot;">&ZeroWidthSpace;</a></h1>
<p>ä¹‹å‰åšäº†1ä¸ªä¸‹è½½æ–‡ä»¶çš„CLIå·¥å…· <a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/README.md" target="_blank" rel="noreferrer">efst</a> - <a href="./../works/fs-cli.html">åŸç†æ–‡ç« : ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…·</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODkyMDg3NDEwNg==668920874106" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å…¶ä¸­æ”¯æŒè®¾ç½® ä»£ç†(proxy) æ¥ä¸‹è½½ç½‘ç»œèµ„æº</p>
<h2 id="é‡åˆ°çš„é—®é¢˜" tabindex="-1">é‡åˆ°çš„é—®é¢˜ <a class="header-anchor" href="#é‡åˆ°çš„é—®é¢˜" aria-label="Permalink to &quot;é‡åˆ°çš„é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<p>å½“æˆ‘å‡†å¤‡ä½¿ç”¨ä»£ç†ä¸‹è½½<code>Telegram</code>æ—¶ï¼Œæ€»ä¼šå¡åœ¨<code>99%</code></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">efst</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://updates.tdesktop.com/tmac/tsetup.4.5.3.dmg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -o</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> http://127.0.0.1:7890</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NDQwNDU1NjU2Ng==674404556566" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¾“å‡ºäº†ä¸€ä¸‹é”™è¯¯ï¼Œå‘ç°æŠ¥é”™ä¿¡æ¯æ˜¯ <code>ECONNRESET error</code></p>
<h2 id="è§£å†³åŠæ³•" tabindex="-1">è§£å†³åŠæ³• <a class="header-anchor" href="#è§£å†³åŠæ³•" aria-label="Permalink to &quot;è§£å†³åŠæ³•&quot;">&ZeroWidthSpace;</a></h2>
<p>è°·æ­Œå…³é”®è¯ <code>ä½¿ç”¨http-proxy code: 'ECONNRESET'</code>ï¼Œæ‰¾åˆ°äº†è§£å†³åŠæ³• <a href="https://www.jianshu.com/p/7f004a9a02f3" target="_blank" rel="noreferrer">ç®€ä¹¦ï¼šè®°ä¸€æ¬¡æœ¬åœ°é”™è¯¯æ’æŸ¥è¿‡ç¨‹ï¼šmacbook Proxy error: Could not proxy request</a></p>
<p>æ·»åŠ è¯·æ±‚å¤´<code>Connection: 'keep-alive'</code>å³å¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY3NDQwNDgxMjIzMA==674404812230" alt="å›¾ç‰‡" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2ODkyMDg3NDEwNg==668920874106" length="0" type="image//mdImg/MTY2ODkyMDg3NDEwNg==668920874106"/>
        </item>
        <item>
            <title><![CDATA[nvm ls-remote åªæœ‰iojsåˆ—è¡¨]]></title>
            <link>https://www.dmsrs.org/technology/study/nvm-ls-remote.html</link>
            <guid>https://www.dmsrs.org/technology/study/nvm-ls-remote.html</guid>
            <pubDate>Sun, 22 Jan 2023 16:29:27 GMT</pubDate>
            <description><![CDATA[nvm é•œåƒåœ°å€çš„é—®é¢˜ï¼Œä¿®æ”¹å¯¹åº”ç¯å¢ƒå˜é‡`NVM_NODEJS_ORG_MIRROR`å³å¯
å¯ä»¥ä½¿ç”¨ æ·˜å®æº(`https://npmmirror.com/mirrors/node/`)
æŸ¥çœ‹å½“å‰è®¾ç½®]]></description>
            <content:encoded><![CDATA[<h1 id="nvm-ls-remote-åªæœ‰iojsåˆ—è¡¨" tabindex="-1">nvm ls-remote åªæœ‰iojsåˆ—è¡¨ <a class="header-anchor" href="#nvm-ls-remote-åªæœ‰iojsåˆ—è¡¨" aria-label="Permalink to &quot;nvm ls-remote åªæœ‰iojsåˆ—è¡¨&quot;">&ZeroWidthSpace;</a></h1>
<p>nvm é•œåƒåœ°å€çš„é—®é¢˜ï¼Œä¿®æ”¹å¯¹åº”ç¯å¢ƒå˜é‡<code>NVM_NODEJS_ORG_MIRROR</code>å³å¯</p>
<p>å¯ä»¥ä½¿ç”¨ æ·˜å®æº(<code>https://npmmirror.com/mirrors/node/</code>)</p>
<p>æŸ¥çœ‹å½“å‰è®¾ç½®çš„å€¼</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $NVM_NODEJS_ORG_MIRROR</span></span></code></pre>
</div><h2 id="è¿è¡Œæ—¶ä¿®æ”¹" tabindex="-1">è¿è¡Œæ—¶ä¿®æ”¹ <a class="header-anchor" href="#è¿è¡Œæ—¶ä¿®æ”¹" aria-label="Permalink to &quot;è¿è¡Œæ—¶ä¿®æ”¹&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">NVM_NODEJS_ORG_MIRROR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">https://npmmirror.com/mirrors/node</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ls-remote</span></span></code></pre>
</div><h2 id="ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡" tabindex="-1">ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡&quot;">&ZeroWidthSpace;</a></h2>
<p>â‘ </p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> NVM_NODEJS_ORG_MIRROR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">https://npmmirror.com/mirrors/node</span></span></code></pre>
</div><p>â‘¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ls-remote</span></span></code></pre>
</div><h2 id="é•¿æœŸä¿®æ”¹ç¯å¢ƒå˜é‡" tabindex="-1">é•¿æœŸä¿®æ”¹ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#é•¿æœŸä¿®æ”¹ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;é•¿æœŸä¿®æ”¹ç¯å¢ƒå˜é‡&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨ <code>~/.zshrc</code> æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆä½¿ç”¨ bash å¯ä»¥ï¼Œä¿®æ”¹ .bashrcï¼‰</p>
<p>â‘  ä½¿ç”¨ vi ä¿®æ”¹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.zshrc</span></span></code></pre>
</div><p>â‘¡ è¿½åŠ å¦‚ä¸‹å€¼</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> NVM_NODEJS_ORG_MIRROR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">https://npmmirror.com/mirrors/node</span></span></code></pre>
</div><p>â‘¢ viä¿å­˜</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ESC</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">:wq</span></span></code></pre>
</div><p>â‘£ é‡å¯ç»ˆç«¯</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ES6 å­¦ä¹ ç¬”è®°]]></title>
            <link>https://www.dmsrs.org/bigWeb/es6/</link>
            <guid>https://www.dmsrs.org/bigWeb/es6/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[æ­¤ç¬”è®°ä¸»è¦è®°è½½ES6æ–°å¢ä¸”æœ€å¸¸ç”¨çš„ä¸€äº›ç‰¹æ€§,å¹¶ä¹¦å†™äº†å¯¹åº”çš„demo
å€Ÿé‰´äº†å®˜æ–¹çš„æ–‡æ¡£å’Œäº’è”ç½‘ä¸Šçš„ä¸€äº›åšå®¢ä¸ç”µå­ä¹¦ï¼Œç„¶åç»“åˆä¸ªäººç»éªŒå†™æˆã€‚ç”±äºç»éªŒæœ‰é™ï¼Œéš¾å…å­˜åœ¨è¯¸å¤šç–æ¼æˆ–è€…ç†è§£ä¸åˆ°ä½çš„åœ°æ–¹ï¼Œè¿˜è¯·æ–§æ­£ï¼
]]></description>
            <content:encoded><![CDATA[<h1 id="es6-å­¦ä¹ ç¬”è®°" tabindex="-1">ES6 å­¦ä¹ ç¬”è®° <a class="header-anchor" href="#es6-å­¦ä¹ ç¬”è®°" aria-label="Permalink to &quot;ES6 å­¦ä¹ ç¬”è®°&quot;">&ZeroWidthSpace;</a></h1>
<p>æ­¤ç¬”è®°ä¸»è¦è®°è½½ES6æ–°å¢ä¸”æœ€å¸¸ç”¨çš„ä¸€äº›ç‰¹æ€§,å¹¶ä¹¦å†™äº†å¯¹åº”çš„demo</p>
<p>å€Ÿé‰´äº†å®˜æ–¹çš„æ–‡æ¡£å’Œäº’è”ç½‘ä¸Šçš„ä¸€äº›åšå®¢ä¸ç”µå­ä¹¦ï¼Œç„¶åç»“åˆä¸ªäººç»éªŒå†™æˆã€‚ç”±äºç»éªŒæœ‰é™ï¼Œéš¾å…å­˜åœ¨è¯¸å¤šç–æ¼æˆ–è€…ç†è§£ä¸åˆ°ä½çš„åœ°æ–¹ï¼Œè¿˜è¯·æ–§æ­£ï¼</p>
<div class="tip custom-block"><p class="custom-block-title">å‚è€ƒ</p>
<p><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noreferrer">1. ECMAScript6å…¥é—¨</a><br/>
<a href="https://wangdoc.com/javascript/" target="_blank" rel="noreferrer">2. javascriptæ•™ç¨‹</a><br/>
3. è¯¾ç¨‹ç½‘ç«™è§†é¢‘èµ„æ–™</p>
</div>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HTMLç›¸å…³å†…å®¹]]></title>
            <link>https://www.dmsrs.org/bigWeb/html/</link>
            <guid>https://www.dmsrs.org/bigWeb/html/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* è¯­ä¹‰åŒ–æ ‡ç­¾]]></description>
            <content:encoded><![CDATA[<h1 id="htmlç›¸å…³å†…å®¹" tabindex="-1">HTMLç›¸å…³å†…å®¹ <a class="header-anchor" href="#htmlç›¸å…³å†…å®¹" aria-label="Permalink to &quot;HTMLç›¸å…³å†…å®¹&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./semantic.html">è¯­ä¹‰åŒ–æ ‡ç­¾</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[NodeJS]]></title>
            <link>https://www.dmsrs.org/bigWeb/node/</link>
            <guid>https://www.dmsrs.org/bigWeb/node/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•Nodeå­¦ä¹ ä¸å¼€å‘çš„ä¸€ç‚¹å¿ƒå¾—
 ç›®å½•
* Nodeä¾§å®ç°å†…å®¹å‹ç¼©(gzip/br/deflate)ä»‹ç»ä¸å®è·µ
* ä½¿ç”¨TSå°è£…æ“ä½œMongoDBæ•°æ®åº“çš„å·¥å…·æ–¹æ³•
* ä½¿ç”¨Node.jsä»ç»ˆç«¯è¯»å…¥å†…]]></description>
            <content:encoded><![CDATA[<h1 id="nodejs" tabindex="-1">NodeJS <a class="header-anchor" href="#nodejs" aria-label="Permalink to &quot;NodeJS&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•Nodeå­¦ä¹ ä¸å¼€å‘çš„ä¸€ç‚¹å¿ƒå¾—</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./compress-response.html">Nodeä¾§å®ç°å†…å®¹å‹ç¼©(gzip/br/deflate)ä»‹ç»ä¸å®è·µ</a></li>
<li><a href="./mongoDb.html">ä½¿ç”¨TSå°è£…æ“ä½œMongoDBæ•°æ®åº“çš„å·¥å…·æ–¹æ³•</a></li>
<li><a href="./p1.html">ä½¿ç”¨Node.jsä»ç»ˆç«¯è¯»å…¥å†…å®¹</a></li>
<li><a href="./phantom-dep-cli.html">å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ€§èƒ½ä¼˜åŒ–ç¬”è®°]]></title>
            <link>https://www.dmsrs.org/bigWeb/performance/</link>
            <guid>https://www.dmsrs.org/bigWeb/performance/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[:::tip å‚è€ƒ
æ˜é‡‘å°å†Œ:æ€§èƒ½ä¼˜åŒ–
:::
 ç›®å½•
* ç½‘ç»œå±‚é¢ä¼˜åŒ–
* CDNçš„ç¼“å­˜ä¸å›æºæœºåˆ¶
* DNS é¢„è§£æ
* å›¾ç‰‡ä¼˜åŒ–
* æ‡’åŠ è½½ä¸æ‰§è¡Œ
* ç›‘æ§
* èµ„æºé¢„åŠ è½½
* é¡µé¢é¢„æ¸²æŸ“
* ]]></description>
            <content:encoded><![CDATA[<h1 id="æ€§èƒ½ä¼˜åŒ–ç¬”è®°" tabindex="-1">æ€§èƒ½ä¼˜åŒ–ç¬”è®° <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–ç¬”è®°" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–ç¬”è®°&quot;">&ZeroWidthSpace;</a></h1>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTU4MzQwMTU3ODkwNw==583401578907" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="tip custom-block"><p class="custom-block-title">å‚è€ƒ</p>
<p><a href="https://juejin.im/book/5b936540f265da0a9624b04b/section/5b97cd22e51d450e8f5f6375#heading-2" target="_blank" rel="noreferrer">æ˜é‡‘å°å†Œ:æ€§èƒ½ä¼˜åŒ–</a></p>
</div>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./Internet.html">ç½‘ç»œå±‚é¢ä¼˜åŒ–</a></li>
<li><a href="./cdn.html">CDNçš„ç¼“å­˜ä¸å›æºæœºåˆ¶</a></li>
<li><a href="./dnsPre.html">DNS é¢„è§£æ</a></li>
<li><a href="./image.html">å›¾ç‰‡ä¼˜åŒ–</a></li>
<li><a href="./lazyLoad.html">æ‡’åŠ è½½ä¸æ‰§è¡Œ</a></li>
<li><a href="./monitor.html">ç›‘æ§</a></li>
<li><a href="./preLoad.html">èµ„æºé¢„åŠ è½½</a></li>
<li><a href="./preRender.html">é¡µé¢é¢„æ¸²æŸ“</a></li>
<li><a href="./ssr.html">æœåŠ¡ç«¯æ¸²æŸ“</a></li>
<li><a href="./throttling.html">èŠ‚æµä¸é˜²æŠ–</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTU4MzQwMTU3ODkwNw==583401578907" length="0" type="image//mdImg/MTU4MzQwMTU3ODkwNw==583401578907"/>
        </item>
        <item>
            <title><![CDATA[VueçŸ¥è¯†ç‚¹è®°å½•]]></title>
            <link>https://www.dmsrs.org/bigWeb/vue/</link>
            <guid>https://www.dmsrs.org/bigWeb/vue/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[:::tip å‚è€ƒ
æ˜é‡‘å°å†Œ:å‰–æ Vue.js å†…éƒ¨è¿è¡Œæœºåˆ¶
:::
 ç›®å½•
* ç»„ä»¶é€šä¿¡
* ç¼–è¯‘templateçš„è¿‡ç¨‹
* computed ä¸ watch
* å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†
*]]></description>
            <content:encoded><![CDATA[<h1 id="vueçŸ¥è¯†ç‚¹è®°å½•" tabindex="-1">VueçŸ¥è¯†ç‚¹è®°å½• <a class="header-anchor" href="#vueçŸ¥è¯†ç‚¹è®°å½•" aria-label="Permalink to &quot;VueçŸ¥è¯†ç‚¹è®°å½•&quot;">&ZeroWidthSpace;</a></h1>
<div class="tip custom-block"><p class="custom-block-title">å‚è€ƒ</p>
<p><a href="https://juejin.im/book/5a36661851882538e2259c0f" target="_blank" rel="noreferrer">æ˜é‡‘å°å†Œ:å‰–æ Vue.js å†…éƒ¨è¿è¡Œæœºåˆ¶</a></p>
</div>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./communicate.html">ç»„ä»¶é€šä¿¡</a></li>
<li><a href="./compile.html">ç¼–è¯‘templateçš„è¿‡ç¨‹</a></li>
<li><a href="./computed.html">computed ä¸ watch</a></li>
<li><a href="./dep.html">å“åº”å¼ç³»ç»Ÿçš„ä¾èµ–æ”¶é›†è¿½è¸ªåŸç†</a></li>
<li><a href="./diff.html">æ•°æ®çŠ¶æ€æ›´æ–°æ—¶çš„å·®å¼‚ diff åŠ patch æœºåˆ¶</a></li>
<li><a href="./extend.html">extend API</a></li>
<li><a href="./hook.html">ç”Ÿå‘½å‘¨æœŸé’©å­</a></li>
<li><a href="./keep-alive.html">keep-alive</a></li>
<li><a href="./mechanism.html">è¿è¡Œæœºåˆ¶æ¦‚è¿°</a></li>
<li><a href="./mixin.html">mixin ä¸ mixins</a></li>
<li><a href="./responsive.html">å“åº”å¼çš„åŸºæœ¬åŸç†</a></li>
<li><a href="./routing.html">è·¯ç”±åŸç†</a></li>
<li><a href="./showif.html">v-show ä¸ v-if</a></li>
<li><a href="./vnode.html">å®ç° VNode èŠ‚ç‚¹</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Vueæºç å­¦ä¹ ]]></title>
            <link>https://www.dmsrs.org/bigWeb/vueResource/</link>
            <guid>https://www.dmsrs.org/bigWeb/vueResource/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•Vueæºç å­¦ä¹ å†ç¨‹,ç›®æ ‡æ˜¯æ‰‹å†™ä¸€ä»½æºç åŠ ä¸Šæ³¨é‡Š:smile:
:::å‚è€ƒ
Github:ustbhuangyi
::
 ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="vueæºç å­¦ä¹ " tabindex="-1">Vueæºç å­¦ä¹  <a class="header-anchor" href="#vueæºç å­¦ä¹ " aria-label="Permalink to &quot;Vueæºç å­¦ä¹ &quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•Vueæºç å­¦ä¹ å†ç¨‹,ç›®æ ‡æ˜¯æ‰‹å†™ä¸€ä»½æºç åŠ ä¸Šæ³¨é‡ŠğŸ˜„
:::å‚è€ƒ
<a href="https://github.com/ustbhuangyi/vue-analysis" target="_blank" rel="noreferrer">Github:ustbhuangyi</a>
::</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç®—æ³•ä¸æ•°æ®ç»“æ„]]></title>
            <link>https://www.dmsrs.org/coding/algorithm/</link>
            <guid>https://www.dmsrs.org/coding/algorithm/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[æ•´ç†é¢è¯•æ‰€é‡åˆ°çš„ç›¸å…³ç®—æ³•é¢˜
 ç›®å½•
* å¤§æ•°ç›¸åŠ &æ•°å­—å­—ç¬¦ä¸²ç›¸åŠ 
* æ–æ³¢æ‹‰å¥‘æ•°åˆ—I
* æ–æ³¢æ‹‰å¥‘æ•°åˆ—II
* å †æ’åº
* åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘
* å•é“¾è¡¨è½¬ç½®
* å½’å¹¶æ’åº
* æœ€é•¿å…¬å…±å­åºåˆ—é•¿]]></description>
            <content:encoded><![CDATA[<h1 id="ç®—æ³•ä¸æ•°æ®ç»“æ„" tabindex="-1">ç®—æ³•ä¸æ•°æ®ç»“æ„ <a class="header-anchor" href="#ç®—æ³•ä¸æ•°æ®ç»“æ„" aria-label="Permalink to &quot;ç®—æ³•ä¸æ•°æ®ç»“æ„&quot;">&ZeroWidthSpace;</a></h1>
<p>æ•´ç†é¢è¯•æ‰€é‡åˆ°çš„ç›¸å…³ç®—æ³•é¢˜</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./addString.html">å¤§æ•°ç›¸åŠ &amp;æ•°å­—å­—ç¬¦ä¸²ç›¸åŠ </a></li>
<li><a href="./feibo1.html">æ–æ³¢æ‹‰å¥‘æ•°åˆ—I</a></li>
<li><a href="./feibo2.html">æ–æ³¢æ‹‰å¥‘æ•°åˆ—II</a></li>
<li><a href="./headSort.html">å †æ’åº</a></li>
<li><a href="./judgeSymmetryTree.html">åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘</a></li>
<li><a href="./linkReserve.html">å•é“¾è¡¨è½¬ç½®</a></li>
<li><a href="./mergeSort.html">å½’å¹¶æ’åº</a></li>
<li><a href="./publicString.html">æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦</a></li>
<li><a href="./publicStringLen.html">æœ€é•¿å…¬å…±å­ä¸²</a></li>
<li><a href="./quickSort.html">å¿«é€Ÿæ’åº</a></li>
<li><a href="./treeLevelTraverse.html">å±‚åºéå†äºŒå‰æ ‘</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç½‘ç»œç›¸å…³é—®é¢˜]]></title>
            <link>https://www.dmsrs.org/computerBase/Internet/</link>
            <guid>https://www.dmsrs.org/computerBase/Internet/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* Content-Length
* httpåè®®
* TCPä¸UDPçš„åŒºåˆ«
* TCPåè®®
* UDPåè®®]]></description>
            <content:encoded><![CDATA[<h1 id="ç½‘ç»œç›¸å…³é—®é¢˜" tabindex="-1">ç½‘ç»œç›¸å…³é—®é¢˜ <a class="header-anchor" href="#ç½‘ç»œç›¸å…³é—®é¢˜" aria-label="Permalink to &quot;ç½‘ç»œç›¸å…³é—®é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./clength.html">Content-Length</a></li>
<li><a href="./http.html">httpåè®®</a></li>
<li><a href="./tcp-udp.html">TCPä¸UDPçš„åŒºåˆ«</a></li>
<li><a href="./tcp.html">TCPåè®®</a></li>
<li><a href="./udp.html">UDPåè®®</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç®—æ³•ä¸æ•°æ®ç»“æ„]]></title>
            <link>https://www.dmsrs.org/computerBase/algorithm/</link>
            <guid>https://www.dmsrs.org/computerBase/algorithm/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* æ’åºç®—æ³•æ˜¯å¦ç¨³å®š]]></description>
            <content:encoded><![CDATA[<h1 id="ç®—æ³•ä¸æ•°æ®ç»“æ„" tabindex="-1">ç®—æ³•ä¸æ•°æ®ç»“æ„ <a class="header-anchor" href="#ç®—æ³•ä¸æ•°æ®ç»“æ„" aria-label="Permalink to &quot;ç®—æ³•ä¸æ•°æ®ç»“æ„&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./sort.html">æ’åºç®—æ³•æ˜¯å¦ç¨³å®š</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç®€ä»‹]]></title>
            <link>https://www.dmsrs.org/computerBase/design/</link>
            <guid>https://www.dmsrs.org/computerBase/design/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[å­¦ä¹ /è®°å½•å‰ç«¯ç»å¸¸ç”¨åˆ°çš„ä¸€äº›è®¾è®¡æ¨¡å¼
:::tip å‚è€ƒ
* æ˜è¿›å°å†Œ:JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ
* ä¹¦æ ˆç½‘:JavaScriptä¸­çš„è®¾è®¡æ¨¡å¼
:::
 ç›®å½•
* æŠ½è±¡å·¥å‚æ¨¡å¼]]></description>
            <content:encoded><![CDATA[<h1 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h1>
<p>å­¦ä¹ /è®°å½•å‰ç«¯ç»å¸¸ç”¨åˆ°çš„ä¸€äº›è®¾è®¡æ¨¡å¼</p>
<div class="tip custom-block"><p class="custom-block-title">å‚è€ƒ</p>
<ul>
<li><a href="https://juejin.im/book/5c70fc83518825428d7f9dfb/section/5c7163256fb9a049d132c3ed" target="_blank" rel="noreferrer">æ˜è¿›å°å†Œ:JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ</a></li>
<li><a href="https://www.bookstack.cn/read/design-pattern-in-javascript/README.md" target="_blank" rel="noreferrer">ä¹¦æ ˆç½‘:JavaScriptä¸­çš„è®¾è®¡æ¨¡å¼</a></li>
</ul>
</div>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./abstractfactory.html">æŠ½è±¡å·¥å‚æ¨¡å¼</a></li>
<li><a href="./factory.html">ç®€å•å·¥å‚æ¨¡å¼</a></li>
<li><a href="./single.html">å•ä¾‹æ¨¡å¼</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åŠ›æ‰£åˆ·é¢˜è®°å½•]]></title>
            <link>https://www.dmsrs.org/computerBase/leetcode/</link>
            <guid>https://www.dmsrs.org/computerBase/leetcode/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="åŠ›æ‰£åˆ·é¢˜è®°å½•" tabindex="-1">åŠ›æ‰£åˆ·é¢˜è®°å½• <a class="header-anchor" href="#åŠ›æ‰£åˆ·é¢˜è®°å½•" aria-label="Permalink to &quot;åŠ›æ‰£åˆ·é¢˜è®°å½•&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å‰‘æŒ‡Offeråˆ·é¢˜è®°å½•]]></title>
            <link>https://www.dmsrs.org/computerBase/offer/</link>
            <guid>https://www.dmsrs.org/computerBase/offer/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* é¢è¯•é¢˜50 ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦
* é¢è¯•é¢˜53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—
* é¢è¯•é¢˜54. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹
* é¢è¯•é¢˜55 - I. äºŒå‰æ ‘çš„æ·±åº¦
* é¢è¯•é¢˜55 - ]]></description>
            <content:encoded><![CDATA[<h1 id="å‰‘æŒ‡offeråˆ·é¢˜è®°å½•" tabindex="-1">å‰‘æŒ‡Offeråˆ·é¢˜è®°å½• <a class="header-anchor" href="#å‰‘æŒ‡offeråˆ·é¢˜è®°å½•" aria-label="Permalink to &quot;å‰‘æŒ‡Offeråˆ·é¢˜è®°å½•&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./p50.html">é¢è¯•é¢˜50 ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</a></li>
<li><a href="./p53-2.html">é¢è¯•é¢˜53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—</a></li>
<li><a href="./p54.html">é¢è¯•é¢˜54. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹</a></li>
<li><a href="./p55-1.html">é¢è¯•é¢˜55 - I. äºŒå‰æ ‘çš„æ·±åº¦</a></li>
<li><a href="./p55.html">é¢è¯•é¢˜55 - II. å¹³è¡¡äºŒå‰æ ‘</a></li>
<li><a href="./p58.html">é¢è¯•é¢˜58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†]]></title>
            <link>https://www.dmsrs.org/computerBase/os/</link>
            <guid>https://www.dmsrs.org/computerBase/os/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* è¿›ç¨‹å’Œçº¿ç¨‹æ€ä¹ˆé€šä¿¡
* æ­»é”
* è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«
* è¿›ç¨‹
* çº¿ç¨‹]]></description>
            <content:encoded><![CDATA[<h1 id="è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†" tabindex="-1">è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯† <a class="header-anchor" href="#è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†" aria-label="Permalink to &quot;è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./communicate.html">è¿›ç¨‹å’Œçº¿ç¨‹æ€ä¹ˆé€šä¿¡</a></li>
<li><a href="./deadlock.html">æ­»é”</a></li>
<li><a href="./difprothr.html">è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</a></li>
<li><a href="./process.html">è¿›ç¨‹</a></li>
<li><a href="./thread.html">çº¿ç¨‹</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ‰‹æ’•ä»£ç ]]></title>
            <link>https://www.dmsrs.org/interview/code/</link>
            <guid>https://www.dmsrs.org/interview/code/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•é¢è¯•ä¸­å¸¸é‡çš„æ‰‹æ’•ä»£ç é¢˜ç›®
 ç›®å½•
* é˜²æŠ–ä¸èŠ‚æµå®ç°
* æ¨¡å¼ä¸²åŒ¹é…
* å±…ä¸­
* å®šæ—¶å™¨å®ç°
* ä»»æ„è¿›åˆ¶è½¬æ¢
* äºŒå‰æ ‘çš„éå†]]></description>
            <content:encoded><![CDATA[<h1 id="æ‰‹æ’•ä»£ç " tabindex="-1">æ‰‹æ’•ä»£ç  <a class="header-anchor" href="#æ‰‹æ’•ä»£ç " aria-label="Permalink to &quot;æ‰‹æ’•ä»£ç &quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•é¢è¯•ä¸­å¸¸é‡çš„æ‰‹æ’•ä»£ç é¢˜ç›®</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./debounce-throttle.html">é˜²æŠ–ä¸èŠ‚æµå®ç°</a></li>
<li><a href="./kmp.html">æ¨¡å¼ä¸²åŒ¹é…</a></li>
<li><a href="./middle-center.html">å±…ä¸­</a></li>
<li><a href="./myClock.html">å®šæ—¶å™¨å®ç°</a></li>
<li><a href="./transfer.html">ä»»æ„è¿›åˆ¶è½¬æ¢</a></li>
<li><a href="./treeTraverse.html">äºŒå‰æ ‘çš„éå†</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç½‘ç»œç›¸å…³é—®é¢˜]]></title>
            <link>https://www.dmsrs.org/interview/internet/</link>
            <guid>https://www.dmsrs.org/interview/internet/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="ç½‘ç»œç›¸å…³é—®é¢˜" tabindex="-1">ç½‘ç»œç›¸å…³é—®é¢˜ <a class="header-anchor" href="#ç½‘ç»œç›¸å…³é—®é¢˜" aria-label="Permalink to &quot;ç½‘ç»œç›¸å…³é—®é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å°ç¨‹åºç›¸å…³é¢è¯•é—®é¢˜]]></title>
            <link>https://www.dmsrs.org/interview/mini/</link>
            <guid>https://www.dmsrs.org/interview/mini/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* ä¸ä¼ ç»Ÿç§»åŠ¨webçš„å¼‚åŒ
* å°ç¨‹åºç‰¹ç‚¹
* å°ç¨‹åºçš„åŸç†?]]></description>
            <content:encoded><![CDATA[<h1 id="å°ç¨‹åºç›¸å…³é¢è¯•é—®é¢˜" tabindex="-1">å°ç¨‹åºç›¸å…³é¢è¯•é—®é¢˜ <a class="header-anchor" href="#å°ç¨‹åºç›¸å…³é¢è¯•é—®é¢˜" aria-label="Permalink to &quot;å°ç¨‹åºç›¸å…³é¢è¯•é—®é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./differentweb.html">ä¸ä¼ ç»Ÿç§»åŠ¨webçš„å¼‚åŒ</a></li>
<li><a href="./feature.html">å°ç¨‹åºç‰¹ç‚¹</a></li>
<li><a href="./principle.html">å°ç¨‹åºçš„åŸç†?</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†]]></title>
            <link>https://www.dmsrs.org/interview/os/</link>
            <guid>https://www.dmsrs.org/interview/os/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†" tabindex="-1">è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯† <a class="header-anchor" href="#è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†" aria-label="Permalink to &quot;è®°å½•æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å…³äºå‰ç«¯ä¸€äº›ç»¼åˆçŸ¥è¯†]]></title>
            <link>https://www.dmsrs.org/interview/other/</link>
            <guid>https://www.dmsrs.org/interview/other/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* å‰ç«¯å·¥ç¨‹åŒ–
* åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹
* typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿinstanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
* å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„ï¼Ÿå‡½æ•°å‚æ•°]]></description>
            <content:encoded><![CDATA[<h1 id="å…³äºå‰ç«¯ä¸€äº›ç»¼åˆçŸ¥è¯†" tabindex="-1">å…³äºå‰ç«¯ä¸€äº›ç»¼åˆçŸ¥è¯† <a class="header-anchor" href="#å…³äºå‰ç«¯ä¸€äº›ç»¼åˆçŸ¥è¯†" aria-label="Permalink to &quot;å…³äºå‰ç«¯ä¸€äº›ç»¼åˆçŸ¥è¯†&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./engineering.html">å‰ç«¯å·¥ç¨‹åŒ–</a></li>
<li><a href="./inputurl.html">åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹</a></li>
<li><a href="./judgeType.html">typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿinstanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="./object.html">å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„ï¼Ÿå‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</a></li>
<li><a href="./promote.html">ä»€ä¹ˆæ˜¯æå‡ï¼Ÿä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒºï¼Ÿvarã€let åŠ const åŒºåˆ«ï¼Ÿ</a></li>
<li><a href="./prototype.html">å¦‚ä½•ç†è§£åŸå‹ï¼Ÿå¦‚ä½•ç†è§£åŸå‹é“¾ï¼Ÿ</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜]]></title>
            <link>https://www.dmsrs.org/interview/performance/</link>
            <guid>https://www.dmsrs.org/interview/performance/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* å¦‚ä½•åŠ å¿«é¦–å±æ¸²æŸ“?]]></description>
            <content:encoded><![CDATA[<h1 id="æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜" tabindex="-1">æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜ <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–é¢è¯•é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./firstScreenRender.html">å¦‚ä½•åŠ å¿«é¦–å±æ¸²æŸ“?</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Vueé¢è¯•é¢˜]]></title>
            <link>https://www.dmsrs.org/interview/vue/</link>
            <guid>https://www.dmsrs.org/interview/vue/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•]]></description>
            <content:encoded><![CDATA[<h1 id="vueé¢è¯•é¢˜" tabindex="-1">Vueé¢è¯•é¢˜ <a class="header-anchor" href="#vueé¢è¯•é¢˜" aria-label="Permalink to &quot;Vueé¢è¯•é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æŠ€æœ¯æ‚æ–‡é›†]]></title>
            <link>https://www.dmsrs.org/technology/learn/</link>
            <guid>https://www.dmsrs.org/technology/learn/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•ä¸€äº›å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ
è®°å½•ä¸€äº›å¼€å‘å®è·µ
 ç›®å½•
* å®è·µï¼šåˆ©ç”¨ArrayBufferå®ç°é¢„è§ˆæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹
* åœ¨linux-deepinä¸Šä½¿ç”¨deepin-wi]]></description>
            <content:encoded><![CDATA[<h1 id="æŠ€æœ¯æ‚æ–‡é›†" tabindex="-1">æŠ€æœ¯æ‚æ–‡é›† <a class="header-anchor" href="#æŠ€æœ¯æ‚æ–‡é›†" aria-label="Permalink to &quot;æŠ€æœ¯æ‚æ–‡é›†&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä¸€äº›å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å°é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</p>
<p>è®°å½•ä¸€äº›å¼€å‘å®è·µ</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./array-buffer.html">å®è·µï¼šåˆ©ç”¨ArrayBufferå®ç°é¢„è§ˆæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹</a></li>
<li><a href="./deepin-wemeet.html">åœ¨linux-deepinä¸Šä½¿ç”¨deepin-wine5å®Œç¾è¿è¡Œè…¾è®¯ä¼šè®®/QQ/å¾®ä¿¡ç­‰æ­¤ç±»åº”ç”¨</a></li>
<li><a href="./eslint-plugin.html">eslintæ’ä»¶å¼€å‘æ•™ç¨‹</a></li>
<li><a href="./faas.html">ServerLessä¹‹äº‘å‡½æ•°å®è·µ-å¤©æ°”API</a></li>
<li><a href="./fixed-page.html">ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨</a></li>
<li><a href="./forof-idx.html">å°æŠ€å·§ï¼šfor ofä¸­è·å–index</a></li>
<li><a href="./git-base.html">Gitå¸¸ç”¨çš„ä¸€äº›åŸºæœ¬æ“ä½œ</a></li>
<li><a href="./js-cover.html">å‘é¡µé¢æ³¨å…¥jså®ç°ä¸ºå›¾ç‰‡å’Œæ–‡å­—å…ƒç´ æ·»åŠ é€æ˜è’™å±‚</a></li>
<li><a href="./jsencrypt.html">å®è·µï¼šä½¿ç”¨jsencrypté…åˆaxioså®ç°éå¯¹ç§°åŠ å¯†ä¼ è¾“çš„æ•°æ®</a></li>
<li><a href="./loadEnv.html">å°è£…dotenvåº“å®ç°ç±»ä¼¼ViteåŠ è½½ç¯å¢ƒå˜é‡çš„è¡Œä¸º</a></li>
<li><a href="./mergefile.html">30è¡Œä»£ç å®ç°åˆå¹¶æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹</a></li>
<li><a href="./mid-autumn-festival.html">é©¬ä¸Šä¸­ç§‹äº†ï¼ŒæŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…”</a></li>
<li><a href="./node-require-json.html">Nodeä¸­requireä¸fs.readFileè¯»å–JSONæ–‡ä»¶çš„å¯¹æ¯”</a></li>
<li><a href="./qiniu-imgbed.html">ä½¿ç”¨å…è´¹çš„ä¸ƒç‰›äº‘OSS(10G)æ­å»ºä¸ªäººçš„åœ¨çº¿å›¾åºŠ</a></li>
<li><a href="./qiniu-oss.html">åˆ†äº«å°è£…çš„ä¸€äº›ä¸ƒç‰›äº‘OSSæ“ä½œæ–¹æ³•</a></li>
<li><a href="./ssh-no-pwd-login.html">æœ¬åœ°é…ç½®SSHå…å¯†è¿œç¨‹ç™»å½•æœåŠ¡å™¨</a></li>
<li><a href="./tool-methods.html">å·¥å…·æ–¹æ³•æ±‡æ€»</a></li>
<li><a href="./tx-serverless-node.html">è…¾è®¯äº‘Serverlesså®è·µ-Node.jsæœåŠ¡éƒ¨ç½²</a></li>
<li><a href="./tx-serverless-static.html">è…¾è®¯äº‘Serverlesså®è·µ-é™æ€ç½‘ç«™æ‰˜ç®¡</a></li>
<li><a href="./ux.html">ä¸ºä»€ä¹ˆ'\x1B'.length === 1ï¼Ÿ\xä¸\uçŸ¥è¯†å»¶ä¼¸</a></li>
<li><a href="./vite-plugin-monitor1.html">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸Šï¼‰</a></li>
<li><a href="./vite-plugin-monitor2.html">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸­ï¼‰</a></li>
<li><a href="./vite-plugin-monitor3.html">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸‹ï¼‰</a></li>
<li><a href="./vite-react-js.html">è§£å†³Vite-Reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜</a></li>
<li><a href="./webapck2vite.html">webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»</a></li>
<li><a href="./webapck2vite2.html">webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿</a></li>
<li><a href="./window-var.html">ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ</a></li>
<li><a href="./yanglegeyang.html">Macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æºç å­¦ä¹ ç¬”è®°]]></title>
            <link>https://www.dmsrs.org/technology/source/</link>
            <guid>https://www.dmsrs.org/technology/source/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•ä¸€äº›æºç å­¦ä¹ ç¬”è®°
 ç›®å½•
* ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆä¸€ï¼‰ï¼štime
* ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆäºŒï¼‰
* ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆä¸‰ï¼‰
* FileSaver.jsæºç å­¦ä¹ ï¼Œçº¯å‰ç«¯å®ç°æ–‡ä»¶ä¸‹è½½ï¼Œé˜²æ­¢æµè§ˆå™¨ç›´]]></description>
            <content:encoded><![CDATA[<h1 id="æºç å­¦ä¹ ç¬”è®°" tabindex="-1">æºç å­¦ä¹ ç¬”è®° <a class="header-anchor" href="#æºç å­¦ä¹ ç¬”è®°" aria-label="Permalink to &quot;æºç å­¦ä¹ ç¬”è®°&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä¸€äº›æºç å­¦ä¹ ç¬”è®°</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./core-decorators-1.html">ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆä¸€ï¼‰ï¼štime</a></li>
<li><a href="./core-decorators-2.html">ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆäºŒï¼‰</a></li>
<li><a href="./core-decorators-3.html">ä¼˜ç§€è£…é¥°å™¨æºç å­¦ä¹ ï¼ˆä¸‰ï¼‰</a></li>
<li><a href="./file-saver-source.html">FileSaver.jsæºç å­¦ä¹ ï¼Œçº¯å‰ç«¯å®ç°æ–‡ä»¶ä¸‹è½½ï¼Œé˜²æ­¢æµè§ˆå™¨ç›´æ¥æ‰“å¼€é¢„è§ˆ</a></li>
<li><a href="./objectId.html">æºç å­¦ä¹ ï¼šMongoDB-ObjectIdç”ŸæˆåŸç†</a></li>
<li><a href="./vite-loadEnv.html">æºç å­¦ä¹ ï¼šViteä¸­åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆloadEnvï¼‰çš„å®ç°</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å­¦ä¹ æ–°çŸ¥è¯†-åˆ†äº«å¹²è´§]]></title>
            <link>https://www.dmsrs.org/technology/study/</link>
            <guid>https://www.dmsrs.org/technology/study/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ä¹°äº†ä¸€å¤§æ¨è¯¾ç¨‹/ä¹¦ç±,æ”¶è—äº†ä¸€å¤§æ¨å¥½æ–‡,æ˜¯æ—¶å€™æ‹¿å‡ºæ¥å“ä¸€å“äº†
~~æ‘’å¼ƒ æ”¶è—===å­¦ä¼š~~
æ­¤éƒ¨åˆ†è®°å½•å­¦ä¹ æ–°çŸ¥è¯†è¿‡ç¨‹ä¸­çš„ç²¾è¾Ÿå†…å®¹ä¸è®°å½•ç¬”è®°
 æ˜é‡‘å°å†Œ
* x] ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§ -]]></description>
            <content:encoded><![CDATA[<h1 id="å­¦ä¹ æ–°çŸ¥è¯†-åˆ†äº«å¹²è´§" tabindex="-1">å­¦ä¹ æ–°çŸ¥è¯†-åˆ†äº«å¹²è´§ <a class="header-anchor" href="#å­¦ä¹ æ–°çŸ¥è¯†-åˆ†äº«å¹²è´§" aria-label="Permalink to &quot;å­¦ä¹ æ–°çŸ¥è¯†-åˆ†äº«å¹²è´§&quot;">&ZeroWidthSpace;</a></h1>
<p>ä¹°äº†ä¸€å¤§æ¨è¯¾ç¨‹/ä¹¦ç±,æ”¶è—äº†ä¸€å¤§æ¨å¥½æ–‡,æ˜¯æ—¶å€™æ‹¿å‡ºæ¥å“ä¸€å“äº†</p>
<p><s>æ‘’å¼ƒ æ”¶è—===å­¦ä¼š</s></p>
<p>æ­¤éƒ¨åˆ†è®°å½•å­¦ä¹ æ–°çŸ¥è¯†è¿‡ç¨‹ä¸­çš„ç²¾è¾Ÿå†…å®¹ä¸è®°å½•ç¬”è®°</p>
<h2 id="æ˜é‡‘å°å†Œ" tabindex="-1">æ˜é‡‘å°å†Œ <a class="header-anchor" href="#æ˜é‡‘å°å†Œ" aria-label="Permalink to &quot;æ˜é‡‘å°å†Œ&quot;">&ZeroWidthSpace;</a></h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" id="cbx_0" checked="true" disabled="true"><label for="cbx_0"> <strong>ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§</strong> - <a href="https://www.frontendwingman.com/Chrome/" target="_blank" rel="noreferrer">å¼€æºå…è´¹ç‰ˆé“¾æ¥</a> -  Chrome-DevTools çš„ä½¿ç”¨æŠ€å·§</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_1" disabled="true"><label for="cbx_1"> <strong>JavaScript è®¾è®¡æ¨¡å¼æ ¸â¼¼åŸç†ä¸åº”â½¤å®è·µ</strong> - <a href="https://juejin.cn/book/6844733790204461070" target="_blank" rel="noreferrer">é“¾æ¥</a></label></li>
<li>...ç¨åæ•´ç†</li>
</ul>
<h2 id="æå®¢æ—¶é—´" tabindex="-1">æå®¢æ—¶é—´ <a class="header-anchor" href="#æå®¢æ—¶é—´" aria-label="Permalink to &quot;æå®¢æ—¶é—´&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="æ‹‰é’©è¯¾ç¨‹" tabindex="-1">æ‹‰é’©è¯¾ç¨‹ <a class="header-anchor" href="#æ‹‰é’©è¯¾ç¨‹" aria-label="Permalink to &quot;æ‹‰é’©è¯¾ç¨‹&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="æ‚ä¸ƒæ‚å…«ç”µå­ä¹¦" tabindex="-1">æ‚ä¸ƒæ‚å…«ç”µå­ä¹¦ <a class="header-anchor" href="#æ‚ä¸ƒæ‚å…«ç”µå­ä¹¦" aria-label="Permalink to &quot;æ‚ä¸ƒæ‚å…«ç”µå­ä¹¦&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="å°ç½‘ç«™" tabindex="-1">å°ç½‘ç«™ <a class="header-anchor" href="#å°ç½‘ç«™" aria-label="Permalink to &quot;å°ç½‘ç«™&quot;">&ZeroWidthSpace;</a></h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" id="cbx_2" disabled="true"><label for="cbx_2"> <a href="https://www.bookstack.cn/books/design-pattern-in-javascript" target="_blank" rel="noreferrer">ä¹¦æ ˆç½‘ï¼šJavaScriptä¸­çš„è®¾è®¡æ¨¡å¼</a></label></li>
</ul>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./chrome-debug1.html">Chrome è°ƒè¯•æŠ€å·§-åŸºç¡€</a></li>
<li><a href="./chrome-debug2.html">Chrome è°ƒè¯•æŠ€å·§-Console</a></li>
<li><a href="./chrome-debug3.html">Chrome è°ƒè¯•æŠ€å·§-Network</a></li>
<li><a href="./chrome-debug4.html">Chrome è°ƒè¯•æŠ€å·§-Elements</a></li>
<li><a href="./chrome-debug5.html">Chrome è°ƒè¯•æŠ€å·§-Drawer</a></li>
<li><a href="./chrome-debug6.html">Chrome è°ƒè¯•æŠ€å·§-workspace</a></li>
<li><a href="./design-patterns0.html">è®¾è®¡æ¨¡å¼-è®¾è®¡åŸåˆ™</a></li>
<li><a href="./design-patterns1.html">è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼</a></li>
<li><a href="./design-patterns2.html">è®¾è®¡æ¨¡å¼-ç»“æ„å‹æ¨¡å¼</a></li>
<li><a href="./ts-decorators.html">å­¦ä¹ ç¬”è®°ï¼šTypeScriptè£…é¥°å™¨</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ¦‚å¿µçŸ¥è¯†-ç†è®ºå¹²è´§]]></title>
            <link>https://www.dmsrs.org/technology/theory/</link>
            <guid>https://www.dmsrs.org/technology/theory/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•ä¸€äº›å¤§å‰ç«¯å‘å±•è¿‡ç¨‹ä¸­çš„ä¸€äº›çŸ¥è¯†
* è¿‡å»
* ç°åœ¨
* æœªæ¥
 ç›®å½•
* Serverless]]></description>
            <content:encoded><![CDATA[<h1 id="æ¦‚å¿µçŸ¥è¯†-ç†è®ºå¹²è´§" tabindex="-1">æ¦‚å¿µçŸ¥è¯†-ç†è®ºå¹²è´§ <a class="header-anchor" href="#æ¦‚å¿µçŸ¥è¯†-ç†è®ºå¹²è´§" aria-label="Permalink to &quot;æ¦‚å¿µçŸ¥è¯†-ç†è®ºå¹²è´§&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä¸€äº›å¤§å‰ç«¯å‘å±•è¿‡ç¨‹ä¸­çš„ä¸€äº›çŸ¥è¯†</p>
<ul>
<li>è¿‡å»</li>
<li>ç°åœ¨</li>
<li>æœªæ¥</li>
</ul>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./serverless.html">Serverless</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å·¥ç¨‹æ¨¡æ¿æ­å»º]]></title>
            <link>https://www.dmsrs.org/technology/tpl/</link>
            <guid>https://www.dmsrs.org/technology/tpl/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[è®°å½•ä»0-1çš„å·¥ç¨‹æ¨¡æ¿æ­å»ºæ•™ç¨‹
 ç›®å½•
* æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šVue-Cliæ­å»ºVue3/TS/uni-appå°ç¨‹åºå·¥ç¨‹(ä¸Š)
* æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šVue-Cliæ­å»ºVue3/TS/uni-appå°ç¨‹åºå·¥ç¨‹]]></description>
            <content:encoded><![CDATA[<h1 id="å·¥ç¨‹æ¨¡æ¿æ­å»º" tabindex="-1">å·¥ç¨‹æ¨¡æ¿æ­å»º <a class="header-anchor" href="#å·¥ç¨‹æ¨¡æ¿æ­å»º" aria-label="Permalink to &quot;å·¥ç¨‹æ¨¡æ¿æ­å»º&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä»0-1çš„å·¥ç¨‹æ¨¡æ¿æ­å»ºæ•™ç¨‹</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./uni-vue3-cli_1.html">æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šVue-Cliæ­å»ºVue3/TS/uni-appå°ç¨‹åºå·¥ç¨‹(ä¸Š)</a></li>
<li><a href="./uni-vue3-cli_2.html">æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šVue-Cliæ­å»ºVue3/TS/uni-appå°ç¨‹åºå·¥ç¨‹(ä¸­)</a></li>
<li><a href="./uni-vue3-cli_3.html">æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šVue-Cliæ­å»ºVue3/TS/uni-appå°ç¨‹åºå·¥ç¨‹(ä¸‹)</a></li>
<li><a href="./vite-vue3-template.html">å¼€ç®±å³ç”¨çš„Vite-Vue3å·¥ç¨‹åŒ–æ¨¡æ¿</a></li>
<li><a href="./web-sdk-tpl.html">æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šWeb-SDK/Library</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä¸ªäººä½œå“]]></title>
            <link>https://www.dmsrs.org/technology/works/</link>
            <guid>https://www.dmsrs.org/technology/works/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ä¸ºæˆ‘é€ è¿‡çš„è½®å­ä¸å†™è¿‡çš„é¡¹ç›®,ä¹¦å†™ä¼ è®°
ä¸ªäººç²¾åŠ›æœ‰é™,æ„Ÿå…´è¶£æœ‰èƒ½åŠ›çš„æœ‹å‹å¯ä»¥å¸®å¿™è¿­ä»£ç»´æŠ¤
 ç›®å½•
* ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen
* ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°
* ä¸€æ¬¾æ£€æµ‹ä»£ç ä¸­TOD]]></description>
            <content:encoded><![CDATA[<h1 id="ä¸ªäººä½œå“" tabindex="-1">ä¸ªäººä½œå“ <a class="header-anchor" href="#ä¸ªäººä½œå“" aria-label="Permalink to &quot;ä¸ªäººä½œå“&quot;">&ZeroWidthSpace;</a></h1>
<p>ä¸ºæˆ‘é€ è¿‡çš„è½®å­ä¸å†™è¿‡çš„é¡¹ç›®,ä¹¦å†™ä¼ è®°</p>
<p>ä¸ªäººç²¾åŠ›æœ‰é™,æ„Ÿå…´è¶£æœ‰èƒ½åŠ›çš„æœ‹å‹å¯ä»¥å¸®å¿™è¿­ä»£ç»´æŠ¤</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./codeNote.html">ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen</a></li>
<li><a href="./escheck.html">ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°</a></li>
<li><a href="./eslint-plugin-todo-ddl.html">ä¸€æ¬¾æ£€æµ‹ä»£ç ä¸­TODOçš„eslintæ’ä»¶</a></li>
<li><a href="./ewuit.html">å®ç°ä¸€ä¸ªWeb UIæ£€æµ‹(è§†è§‰èµ°æŸ¥)å·¥å…·ing</a></li>
<li><a href="./fs-cli.html">ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…·</a></li>
<li><a href="./html-inline-js-transform.html">å†…è”JSå¤„ç†(ESè¯­æ³•é™çº§&amp;å†…å®¹å‹ç¼©)</a></li>
<li><a href="./node-cli.html">Node CLIå·¥å…·åŸç†è§£æ</a></li>
<li><a href="./online-resume.html">æˆ‘æ‰“é€ çš„åœ¨çº¿ç®€å†ç”Ÿæˆåº”ç”¨</a></li>
<li><a href="./share-snippets.html">åŠ©ä½ è½»æ¾ç¼–å†™ä¸åˆ†äº«snippetçš„VsCodeæ’ä»¶</a></li>
<li><a href="./sm-cli.html">SourceMapè§£æCLIå·¥å…·å®ç°</a></li>
<li><a href="./snippets.html">ä¸€ä¸ªé€šè¿‡NPMåŒ…å…±(åˆ†)äº«ä»£ç å—çš„è§£å†³æ–¹æ¡ˆ</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ—¶å…‰æ‹äºº]]></title>
            <link>https://www.dmsrs.org/works/time-lover/</link>
            <guid>https://www.dmsrs.org/works/time-lover/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[* å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆä¸€ï¼‰
* å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆäºŒï¼‰
* å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆä¸‰ï¼‰]]></description>
            <content:encoded><![CDATA[<h1 id="æ—¶å…‰æ‹äºº" tabindex="-1">æ—¶å…‰æ‹äºº <a class="header-anchor" href="#æ—¶å…‰æ‹äºº" aria-label="Permalink to &quot;æ—¶å…‰æ‹äºº&quot;">&ZeroWidthSpace;</a></h1>
<ul>
<li><a href="./timeLover-1.html">å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆä¸€ï¼‰</a></li>
<li><a href="./timeLover-2.html">å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆäºŒï¼‰</a></li>
<li><a href="./timeLover-3.html">å®è·µï¼šç»™å¥³æœ‹å‹ä¸ªæ€§åŒ–å®šåˆ¶åº”ç”¨-ä½“é‡è®°å½•ï¼ˆä¸‰ï¼‰</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ—¶é—´ç®¡ç†CLIå·¥å…·]]></title>
            <link>https://www.dmsrs.org/works/time-tools/</link>
            <guid>https://www.dmsrs.org/works/time-tools/</guid>
            <pubDate>Mon, 02 Jan 2023 13:28:06 GMT</pubDate>
            <description><![CDATA[ç›®å½•
* åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸€ï¼‰
* åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆåï¼‰
* åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ11ï¼‰
* åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ12ï¼‰
* åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥]]></description>
            <content:encoded><![CDATA[<h1 id="æ—¶é—´ç®¡ç†cliå·¥å…·" tabindex="-1">æ—¶é—´ç®¡ç†CLIå·¥å…· <a class="header-anchor" href="#æ—¶é—´ç®¡ç†cliå·¥å…·" aria-label="Permalink to &quot;æ—¶é—´ç®¡ç†CLIå·¥å…·&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./time-tools-1.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸€ï¼‰</a></li>
<li><a href="./time-tools-10.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆåï¼‰</a></li>
<li><a href="./time-tools-11.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ11ï¼‰</a></li>
<li><a href="./time-tools-12.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ12ï¼‰</a></li>
<li><a href="./time-tools-13.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ13ï¼‰</a></li>
<li><a href="./time-tools-14.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ14ï¼‰</a></li>
<li><a href="./time-tools-15.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ15ï¼‰</a></li>
<li><a href="./time-tools-2.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆäºŒï¼‰</a></li>
<li><a href="./time-tools-3.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸‰ï¼‰</a></li>
<li><a href="./time-tools-4.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå››ï¼‰</a></li>
<li><a href="./time-tools-5.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆäº”ï¼‰</a></li>
<li><a href="./time-tools-6.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…­ï¼‰</a></li>
<li><a href="./time-tools-7.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸ƒï¼‰</a></li>
<li><a href="./time-tools-8.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…«ï¼‰</a></li>
<li><a href="./time-tools-9.html">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¹ï¼‰</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[CSSè¶³è¿¹]]></title>
            <link>https://www.dmsrs.org/bigWeb/css/</link>
            <guid>https://www.dmsrs.org/bigWeb/css/</guid>
            <pubDate>Mon, 02 Jan 2023 13:19:46 GMT</pubDate>
            <description><![CDATA[è®°å½•å¼€å‘ä¸­æ‰€é‡é—®é¢˜åŠå…¶è§£æ³•ä¸csså­¦ä¹ ç¬”è®°
 ç›®å½•
* BFC
* ç›’æ¨¡å‹
* å¼¹æ€§å¸ƒå±€
* IFC
* CSSå±‚çº§å…³ç³»
* CSSä¼ªå…ƒç´ beforeä¸after
* è¡¨æ ¼æ–‘é©¬çº¹
* ä¼ªç±»
* ä¼ªå…ƒç´ ]]></description>
            <content:encoded><![CDATA[<h1 id="cssè¶³è¿¹" tabindex="-1">CSSè¶³è¿¹ <a class="header-anchor" href="#cssè¶³è¿¹" aria-label="Permalink to &quot;CSSè¶³è¿¹&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•å¼€å‘ä¸­æ‰€é‡é—®é¢˜åŠå…¶è§£æ³•ä¸csså­¦ä¹ ç¬”è®°</p>
<h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./bfc.html">BFC</a></li>
<li><a href="./box.html">ç›’æ¨¡å‹</a></li>
<li><a href="./flex.html">å¼¹æ€§å¸ƒå±€</a></li>
<li><a href="./ifc.html">IFC</a></li>
<li><a href="./level.html">CSSå±‚çº§å…³ç³»</a></li>
<li><a href="./p1.html">CSSä¼ªå…ƒç´ beforeä¸after</a></li>
<li><a href="./p2.html">è¡¨æ ¼æ–‘é©¬çº¹</a></li>
<li><a href="./pseudo-class.html">ä¼ªç±»</a></li>
<li><a href="./pseudo-element.html">ä¼ªå…ƒç´ </a></li>
<li><a href="./reflow.html">å›æµä¸é‡ç»˜</a></li>
<li><a href="./selectors.html">cssé€‰æ‹©å™¨</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ­£åˆ™è¡¨è¾¾å¼]]></title>
            <link>https://www.dmsrs.org/bigWeb/regexp/</link>
            <guid>https://www.dmsrs.org/bigWeb/regexp/</guid>
            <pubDate>Mon, 02 Jan 2023 12:57:50 GMT</pubDate>
            <description><![CDATA[# æ­£åˆ™è¡¨è¾¾å¼

è®°å½•ä¸šåŠ¡å¼€å‘ä¸­æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜åŠè§£æ³•
## å¸¸ç”¨å…³é”®å­—
|     ç¬¦å·     |            ä½œç”¨             |   ç”¨æ³•ç¤ºä¾‹    |           è§£é‡Š           |
| :]]></description>
            <content:encoded><![CDATA[<h1 id="æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1">æ­£åˆ™è¡¨è¾¾å¼ <a class="header-anchor" href="#æ­£åˆ™è¡¨è¾¾å¼" aria-label="Permalink to &quot;æ­£åˆ™è¡¨è¾¾å¼&quot;">&ZeroWidthSpace;</a></h1>
<p>è®°å½•ä¸šåŠ¡å¼€å‘ä¸­æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜åŠè§£æ³•</p>
<h2 id="å¸¸ç”¨å…³é”®å­—" tabindex="-1">å¸¸ç”¨å…³é”®å­— <a class="header-anchor" href="#å¸¸ç”¨å…³é”®å­—" aria-label="Permalink to &quot;å¸¸ç”¨å…³é”®å­—&quot;">&ZeroWidthSpace;</a></h2>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:center">ä½œç”¨</th>
<th style="text-align:center">ç”¨æ³•ç¤ºä¾‹</th>
<th style="text-align:center">è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">|</td>
<td style="text-align:center">æˆ–è€…(OR)</td>
<td style="text-align:center">/yes|no/</td>
<td style="text-align:center">åŒ¹é…yesæˆ–è€…no</td>
</tr>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">å¿½ç•¥å­—æ¯å¤§å°å†™</td>
<td style="text-align:center">/h/i</td>
<td style="text-align:center">åŒ¹é…hæˆ–è€…H</td>
</tr>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:center">æŸ¥è¯¢æ•´ä¸ªå­—ç¬¦ä¸²</td>
<td style="text-align:center">/ab/gi</td>
<td style="text-align:center">åŒ¹é…æ‰€æœ‰çš„abä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">åŒ¹é…ä»»æ„å­—ç¬¦</td>
<td style="text-align:center">/.un/</td>
<td style="text-align:center">åŒ¹é…run,gun,funç­‰</td>
</tr>
<tr>
<td style="text-align:center">[]</td>
<td style="text-align:center">åŒ¹é…ä¸­æ‹¬å·ä¸­çš„ä¸€ä¸ªå­—ç¬¦</td>
<td style="text-align:center">/a[sdf]b/</td>
<td style="text-align:center">åŒ¹é…asb,adb,afb</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">[]ä¸­é™å®šä¸€ä¸ªèŒƒå›´</td>
<td style="text-align:center">/[a-z]/</td>
<td style="text-align:center">åŒ¹é…ä»»æ„å°å†™å­—æ¯</td>
</tr>
<tr>
<td style="text-align:center">[^]</td>
<td style="text-align:center">ä¸åŒ¹é…æŒ‡å®šçš„å†…å®¹</td>
<td style="text-align:center">/[^0-9]ab/</td>
<td style="text-align:center">ä¸åŒ…æ‹¬æ•°å­—æ¯å¼€å¤´çš„*ab</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">åŒ¹é…1ä¸ªæˆ–å¤šä¸ª</td>
<td style="text-align:center">/a+/</td>
<td style="text-align:center">åŒ¹é…a,aa,aaaç­‰</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">åŒ¹é…0ä¸ªæˆ–å¤šä¸ª</td>
<td style="text-align:center">/ab*/</td>
<td style="text-align:center">åŒ¹é…a,ab,abbbç­‰</td>
</tr>
<tr>
<td style="text-align:center">?</td>
<td style="text-align:center">åŒ¹é…0ä¸ªæˆ–1ä¸ª</td>
<td style="text-align:center">/ab?/</td>
<td style="text-align:center">åŒ¹é…a,ab</td>
</tr>
<tr>
<td style="text-align:center">.*?</td>
<td style="text-align:center">æƒ°æ€§åŒ¹é…(éè´ªå©ª)</td>
<td style="text-align:center">/&lt;.*?&gt;/</td>
<td style="text-align:center">åŒ¹é…&lt;xxx&gt;æˆ–è€…&lt;/xxx&gt;ç­‰</td>
</tr>
<tr>
<td style="text-align:center">.*</td>
<td style="text-align:center">åŒ¹é…(è´ªå©ª)</td>
<td style="text-align:center">/&lt;.*&gt;/</td>
<td style="text-align:center">åŒ¹é…&lt;xx&gt;absada&lt;/xx&gt;</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">åŒ¹é…å¼€å¤´</td>
<td style="text-align:center">/^ab/</td>
<td style="text-align:center">åŒ¹é…å¼€å¤´æ˜¯abçš„å­—ç¬¦ä¸²:abc</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center">åŒ¹é…ç»“å°¾</td>
<td style="text-align:center">/ab$/</td>
<td style="text-align:center">åŒ¹é…ç»“å°¾æ˜¯abçš„å­—ç¬¦ä¸²:dab</td>
</tr>
<tr>
<td style="text-align:center">\w</td>
<td style="text-align:center">ç­‰ä»·äº[a-zA-Z0-9_]</td>
<td style="text-align:center">/\w/</td>
<td style="text-align:center">åŒ¹é…æ•°å­—,å­—æ¯,ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td style="text-align:center">\W</td>
<td style="text-align:center">ç­‰ä»·äº[^a-zA-Z0-9_]</td>
<td style="text-align:center">/\W/</td>
<td style="text-align:center">åŒ¹é…éæ•°å­—,å­—æ¯,ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:center">ç­‰ä»·äº[0-9]</td>
<td style="text-align:center">/\d/</td>
<td style="text-align:center">åŒ¹é…æ•°å­—</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td style="text-align:center">ç­‰ä»·äº[^0-9]</td>
<td style="text-align:center">/\D/</td>
<td style="text-align:center">åŒ¹é…éæ•°å­—</td>
</tr>
<tr>
<td style="text-align:center">\s</td>
<td style="text-align:center">ç­‰ä»·äº[ \r\t\f\n\v]</td>
<td style="text-align:center">/\s/</td>
<td style="text-align:center">åŒ¹é…ç©ºæ ¼,æ¢è¡Œ,tabç­‰</td>
</tr>
<tr>
<td style="text-align:center">\S</td>
<td style="text-align:center">ç­‰ä»·äº[^ \r\t\f\n\v]</td>
<td style="text-align:center">/\S/</td>
<td style="text-align:center">åŒ¹é…éç©ºæ ¼,æ¢è¡Œ,tabç­‰</td>
</tr>
<tr>
<td style="text-align:center">{x,y}</td>
<td style="text-align:center">é™å®šä¸ªæ•°</td>
<td style="text-align:center">/a{1,2}/</td>
<td style="text-align:center">åŒ¹é…1-2ä¸ªa</td>
</tr>
<tr>
<td style="text-align:center">{x,}</td>
<td style="text-align:center">é™å®šä¸ªæ•°</td>
<td style="text-align:center">/a{1,}/</td>
<td style="text-align:center">åŒ¹é…1-nä¸ªa</td>
</tr>
<tr>
<td style="text-align:center">{x}</td>
<td style="text-align:center">é™å®šä¸ªæ•°</td>
<td style="text-align:center">/a{1}/</td>
<td style="text-align:center">åŒ¹é…1ä¸ªa</td>
</tr>
<tr>
<td style="text-align:center">(?:pattern)</td>
<td style="text-align:center">åŒ¹é…patternä½†ä¸è·å–åŒ¹é…ç»“æœ</td>
<td style="text-align:center">/a(?:b|c)/</td>
<td style="text-align:center">ç­‰ä»·äºab|ac</td>
</tr>
<tr>
<td style="text-align:center">(?=pattern)</td>
<td style="text-align:center">æ­£å‘è‚¯å®šé¢„æŸ¥</td>
<td style="text-align:center">/a(?=b|c)/</td>
<td style="text-align:center">åŒ¹é…ab,acä¸­çš„a</td>
</tr>
<tr>
<td style="text-align:center">(?!pattern)</td>
<td style="text-align:center">æ­£å‘å¦å®šé¢„æŸ¥</td>
<td style="text-align:center">/a(!=b|c)/</td>
<td style="text-align:center">åŒ¹é…adä¸­çš„a</td>
</tr>
<tr>
<td style="text-align:center">(?&lt;=pattern)</td>
<td style="text-align:center">æ­£å‘è‚¯å®šé¢„æŸ¥</td>
<td style="text-align:center">/(?&lt;=a|b&gt;)c/</td>
<td style="text-align:center">åŒ¹é…ac,bcä¸­çš„c</td>
</tr>
<tr>
<td style="text-align:center">(?&lt;!pattern)</td>
<td style="text-align:center">åå‘å¦å®šé¢„æŸ¥</td>
<td style="text-align:center">/(?&lt;!a|b&gt;)c/</td>
<td style="text-align:center">åŒ¹é…cc,dcä¸­çš„c</td>
</tr>
</tbody>
</table>
<p><strong>ç»¼åˆç¤ºä¾‹1</strong></p>
<ul>
<li>ç”¨æˆ·åç”±æ•°å­—å’Œå­—æ¯ç»„æˆ</li>
<li>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´,ä½†å¯ä»¥ä»¥æ•°å­—ç»“å°¾</li>
<li>å­—æ¯å¯ä»¥å¤§å†™ä¹Ÿå¯ä»¥å°å†™</li>
<li>ç”¨æˆ·åå¿…é¡»è‡³å°‘ä¸¤ä¸ªå­—ç¬¦é•¿,ä¸¤ä¸ªå­—ç¬¦çš„ç”¨æˆ·ååªèƒ½ä½¿ç”¨å­—æ¯ä½œä¸ºå­—ç¬¦</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[a-zA-Z]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[a-zA-Z]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2,}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span></span></code></pre>
</div><h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./p1.html">æå–æ ·å¼è¡¨ä¸­url()ä¸­çš„å†…å®¹</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…·]]></title>
            <link>https://www.dmsrs.org/technology/works/fs-cli.html</link>
            <guid>https://www.dmsrs.org/technology/works/fs-cli.html</guid>
            <pubDate>Wed, 09 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
åœ¨æ—¥å¸¸å­¦ä¹ /ç”Ÿæ´»ä¸­ï¼Œä¸‹è½½èµ„æºæ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ˜¯é€šè¿‡åˆ«äººåˆ†äº«çš„èµ„æºç«™ç‚¹ï¼Œæ‰¾åˆ°ä¸‹è½½å…¥å£ç„¶åè§¦å‘ä¸‹è½½ã€‚
å½“èµ„æºé€šè¿‡urlä¼ æ’­çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç›´æ¥æ‰“å¼€ï¼Œé€šè¿‡æµè§ˆå™¨è§¦å‘ä¸‹è½½ã€‚
èµ„æ·±çš„å†²æµªé€‰æ‰‹ï¼Œä¸€èˆ¬ä¼šç”¨ä¸€äº›å®¢]]></description>
            <content:encoded><![CDATA[<h1 id="ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½cliå·¥å…·" tabindex="-1">ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…· <a class="header-anchor" href="#ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½cliå·¥å…·" aria-label="Permalink to &quot;ä»0-1å®ç°æ–‡ä»¶ä¸‹è½½CLIå·¥å…·&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼</p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨æ—¥å¸¸å­¦ä¹ /ç”Ÿæ´»ä¸­ï¼Œä¸‹è½½èµ„æºæ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ˜¯é€šè¿‡åˆ«äººåˆ†äº«çš„èµ„æºç«™ç‚¹ï¼Œæ‰¾åˆ°ä¸‹è½½å…¥å£ç„¶åè§¦å‘ä¸‹è½½ã€‚</p>
<p>å½“èµ„æºé€šè¿‡urlä¼ æ’­çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç›´æ¥æ‰“å¼€ï¼Œé€šè¿‡æµè§ˆå™¨è§¦å‘ä¸‹è½½ã€‚</p>
<p>èµ„æ·±çš„å†²æµªé€‰æ‰‹ï¼Œä¸€èˆ¬ä¼šç”¨ä¸€äº›å®¢æˆ·ç«¯å·¥å…·ï¼ˆè¿˜è®°å¾—Winä¸Šçš„å„ç§ä¸‹è½½å™¨ï¼‰ï¼ŒMacä¸Šç¬”è€…æœ‰æ—¶å€™ä¼šä½¿ç”¨ <a href="https://www.neatdownloadmanager.com/index.php/en/" target="_blank" rel="noreferrer">NeatDownloadManager</a>ï¼Œæ—  ğŸªœ æ—¶ä¹Ÿèƒ½æ‹¥æœ‰ä¸é”™çš„ä¸‹è½½é€Ÿåº¦</p>
<p><strong>Coder</strong>ä»¬ç”¨å‘½ä»¤è¡Œä¸‹è½½æ–‡ä»¶çš„æ–¹å¼å°±å¾ˆå¤šäº†ï¼Œæ¯”å¦‚æœ€å¸¸ä½¿ç”¨çš„å†…ç½®åº“ <a href="https://github.com/curl/curl" target="_blank" rel="noreferrer">curl</a></p>
<p>ä¸‹é¢æ˜¯æœ€å¸¸ç”¨çš„æ‹‰å–èµ„æºçš„ä¾‹å­</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># é“¾æ¥æ˜¯ç¬¬ä¸‰æ–¹æœåŠ¡ç¼©çŸ­åçš„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># -L å‚æ•°è¡¨æ˜è‡ªåŠ¨å¯¹èµ„æºè¿›è¡Œé‡å®šå‘</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> http://mtw.so/5YIGGb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ç ä¸Šæ˜é‡‘logo.image</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># é€šè¿‡ç®¡é“</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> http://mtw.so/6647Rc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">ç ä¸Šæ˜é‡‘logo.image</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># åŸå›¾é“¾æ¥ https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/759e2aa805c0461b840e0f0f09ed05fa~tplv-k3u1fbpfcp-zoom-1.image</span></span></code></pre>
</div><p>å½“ç„¶ <strong>curl</strong> ä¹Ÿæ”¯æŒä¸Šä¼ ä¸‹è½½ï¼Œä»¥åŠå¤šç§ä¼ è¾“åè®®ï¼Œå…·ä½“ç”¨æ³•è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‰å¾€<a href="https://wangchujiang.com/reference/docs/curl.html" target="_blank" rel="noreferrer">Quick Reference: Curl å¤‡å¿˜æ¸…å•</a> è¿›ä¸€æ­¥äº†è§£ã€‚</p>
<p>æœ¬æ–‡ä» 0-1 ä½¿ç”¨Nodeå®ç°ä¸€ä¸ª <code>urlæ–‡ä»¶ä¸‹è½½</code> å·¥å…·ï¼Œè¯»è€…å¯ä»¥æ”¶è·åŒ…å«ä½†ä¸é™äºå¦‚ä¸‹çŸ¥è¯†ç‚¹ï¼Œ</p>
<p><code>Nodeå®ç°ä¸‹è½½æ–‡ä»¶</code>ï¼Œ<code>å¦‚ä½•é€šè¿‡Proxyï¼ˆğŸªœï¼‰ä»£ç†ä¸‹è½½èµ„æº</code>ï¼Œ<code>é€šç”¨çš„Nodeæœ¬åœ°æŒä¹…åŒ–å­˜å‚¨æ–¹æ³•</code>ï¼Œ<code>fs/path/httpç­‰æ¨¡å—çš„å¸¸è§ç”¨æ³•</code>ç­‰ã€‚</p>
<p>å¯¹åŒ…å«æ–‡ä»¶ä¸‹è½½åœºæ™¯çš„<strong>CLI</strong>æä¾›ä¸€ä¸ªå®è·µå‚è€ƒã€‚</p>
<p>ä¸‹é¢æ˜¯ç®€å•çš„ä½¿ç”¨æ¼”ç¤ºï¼Œå¯¹å®ç°æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æ¥ç€å¾€ä¸‹é˜…è¯»</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">npx efst </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//mtw.so/66eO7c</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODkyMDg3NDEwNg==668920874106" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="urlèµ„æºä¸‹è½½" tabindex="-1">urlèµ„æºä¸‹è½½ <a class="header-anchor" href="#urlèµ„æºä¸‹è½½" aria-label="Permalink to &quot;urlèµ„æºä¸‹è½½&quot;">&ZeroWidthSpace;</a></h2>
<p>å…ˆæ˜¯çº¯ <strong>urlèµ„æºä¸‹è½½</strong> çš„åœºæ™¯ï¼Œæœ¬å°èŠ‚å°†è¯¦ç»†å±•å¼€ç›¸å…³å°åŠŸèƒ½çš„å®ç°ã€‚</p>
<h3 id="nodeåŸç”Ÿå®ç°" tabindex="-1">NodeåŸç”Ÿå®ç° <a class="header-anchor" href="#nodeåŸç”Ÿå®ç°" aria-label="Permalink to &quot;NodeåŸç”Ÿå®ç°&quot;">&ZeroWidthSpace;</a></h3>
<p>åŸºäº<code>è¯»å†™æµ</code>æ“ä½œï¼Œå¯ä»¥çœ‹åˆ°ä»£ç è¿˜æ˜¯ååˆ†çš„ç®€æ´</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> https </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'https'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> randomName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  https.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ›å»º1ä¸ªå¯å†™æµ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(writeStream).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'close'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`file save to ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filepath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// sourceUrl ä¸ºå‰é¢çš„åŸå›¾é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceUrl,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'test.image'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODI2MjI2ODMxNQ==668262268315" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/1.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 1</a></p>
<h3 id="ä¸‹è½½è¿›åº¦è·å–" tabindex="-1">ä¸‹è½½è¿›åº¦è·å– <a class="header-anchor" href="#ä¸‹è½½è¿›åº¦è·å–" aria-label="Permalink to &quot;ä¸‹è½½è¿›åº¦è·å–&quot;">&ZeroWidthSpace;</a></h3>
<p>å¤§ä¸€ç‚¹çš„æ–‡ä»¶è‚¯å®šæ— æ³•å®ç°ç§’ä¸‹è½½ï¼Œéœ€è¦è·å–ä¸€ä¸‹è¿›åº¦ï¼Œäº†è§£ç°åœ¨ä¸‹è½½äº†å¤šå°‘</p>
<p>èµ„æºçš„æ€»å¤§å°å¯ä»¥ä¸€èˆ¬å¯ä»¥é€šè¿‡<code>response headers</code>ä¸­çš„<code>content-length</code>å­—æ®µè·å–</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sumSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">response.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-length'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
</div><p>æµçš„ä¼ è¾“è¿›åº¦å¯ä»¥é€šè¿‡<code>on data</code>äº‹ä»¶é—´æ¥è·å–</p>
<p>åœ¨ä¸é€šè¿‡<code>response.setEncoding(BufferEncoding)</code>ä¿®æ”¹çš„ç¼–ç æ—¶ï¼Œ<code>chunk</code>é»˜è®¤æ˜¯<code>Buffer</code>ç±»å‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chunk.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> percentage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sumSize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>åˆ°æ­¤è¿›åº¦<code>percentage</code>å°±å¯ä»¥è·å–åˆ°äº†</p>
<p>å¯¹ä¸Šé¢çš„æ–¹æ³•è¿›è¡Œç¨åŠ æ”¹é€ ï¼Œå¢åŠ <code>progress</code>ï¼Œ<code>end</code>ä¸¤ä¸ªæ–¹æ³•ï¼ˆæ”¯æŒé“¾å¼è°ƒç”¨çš„ä¸ç‰ˆå®ç°ï¼‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ”¯æŒé“¾å¼è°ƒç”¨ç›¸å…³é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> progressFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cur</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">rec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> endFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> thisArg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    progress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> progressFn) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      progressFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fn</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thisArg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> endFn) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      endFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fn</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thisArg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  https.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è¾“å‡ºæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> randomName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ›å»ºä¸€ä¸ªå¯å†™æµ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sumSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">response.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-length'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chunk.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      progressFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> progressFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chunk.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, receive, sumSize)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(writeStream).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'close'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      endFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> endFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thisArg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è°ƒç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceUrl, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'test.image'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">progress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">receive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(receive, ((receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'%'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'file save:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, filepath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODI2MzA2OTAyMQ==668263069021" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/2.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 2</a></p>
<h3 id="é‡å®šå‘å¤„ç†" tabindex="-1">é‡å®šå‘å¤„ç† <a class="header-anchor" href="#é‡å®šå‘å¤„ç†" aria-label="Permalink to &quot;é‡å®šå‘å¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>éƒ¨åˆ†èµ„æºåœ¨å¯¹å¤–ç›´æ¥æš´éœ²æ—¶ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªçŸ­é“¾ï¼Œæ­¤æ—¶å°±éœ€è¦åšé‡å®šå‘å¤„ç†</p>
<p>é‡å®šå‘çš„çŠ¶æ€ç å¸¸è§<code>301</code>å’Œ<code>302</code>ï¼Œå½“ç„¶è¿˜æœ‰å…¶å®ƒçš„3å¼€å¤´çš„è¿™é‡Œä¸èµ˜è¿°</p>
<p>é™¤äº†çŠ¶æ€ç ï¼Œé‡å®šå‘çš„ç›®æ ‡urlç”±<code>response.headers.location</code>è¡¨ç¤º</p>
<p>è¿™é‡Œç¨å¾®æ”¹é€ ä¸€ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªé‡å®šå‘é€»è¾‘å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€šè¿‡url ç®€å•åŒºåˆ†ä¸€ä¸‹ èµ„æºæ˜¯ https è¿˜æ˜¯ http </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> _http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> https </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ·»åŠ ä¸€ä¸ªUAï¼Œé¿å…404</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // éƒ¨åˆ†çŸ­é“¾æœåŠ¡ç½‘ç«™æ²¡æœ‰UAä¼šå“åº”404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    headers: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      'User-Agent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node http module'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">statusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ¤æ–­çŠ¶æ€ç æ˜¯å¦3å¼€å¤´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(statusCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // ä¸”å­˜åœ¨ location</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (response.headers.location) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // é€’å½’</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(response.headers.location, filename)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // é€ä¼ äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">progress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(progressFn)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(endFn)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // ä¸å­˜åœ¨æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        `url:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} status ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">statusCode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} without location header`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODI2NjY3NjE0MA==668266676140" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/3.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 3</a></p>
<p>ä¸ºäº†é˜²æ­¢æ— é™é‡å®šå‘ï¼Œè¿˜éœ€è¦åŠ ä¸ªæ¬¡æ•°é™åˆ¶ï¼Œå†ç®€å•æ”¹é€ ä¸€ä¸‹ä¸Šè¿°ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªé…ç½®å±æ€§ä½œä¸ºå…¥å‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  maxRedirects</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Partial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { filename: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">randomName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), maxRedirects: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">option }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // çœç•¥ä¸€äº›é‡å¤ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  _http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">statusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(statusCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops.maxRedirects) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ops.maxRedirects </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // é€’å½’è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (response.headers.location) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(response.headers.location, ops)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thisArg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/4.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 4</a></p>
<h3 id="è¯·æ±‚è¶…æ—¶" tabindex="-1">è¯·æ±‚è¶…æ—¶ <a class="header-anchor" href="#è¯·æ±‚è¶…æ—¶" aria-label="Permalink to &quot;è¯·æ±‚è¶…æ—¶&quot;">&ZeroWidthSpace;</a></h3>
<p>éƒ¨åˆ†èµ„æºç”±äºç½‘ç»œåŸå› å¯èƒ½å‡ºç°è¶…æ—¶ï¼Œä¸ºäº†é¿å…é•¿æ—¶é—´æ— åé¦ˆç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´</p>
<p><code>http</code>æ¨¡å—æ”¯æŒ<code>timeout</code>å±æ€§è®¾ç½®</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ¥ç€ä¹‹å‰çš„ä¾‹å­ä¿®æ”¹éƒ¨åˆ†ä»£ç å³å¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½ms</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    timeout: ops.timeout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 300000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // çœç•¥response é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ä¸­æ–­è¯·æ±‚ï¼Œè¾“å‡ºé”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`http request timeout url:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯è¯·æ±‚ google logo å¤±è´¥ç¤ºä¾‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODMyOTcwMTAwMA==668329701000" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/5.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 5</a></p>
<h3 id="proxy" tabindex="-1">Proxy <a class="header-anchor" href="#proxy" aria-label="Permalink to &quot;Proxy&quot;">&ZeroWidthSpace;</a></h3>
<p>éƒ¨åˆ†èµ„æºè®¿é—®ä¸é¡ºç•…çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šèµ°æœåŠ¡ä»£ç†ï¼ˆğŸªœï¼‰</p>
<p>ä»¥è°·æ­Œçš„<code>logo</code>èµ„æºé“¾æ¥<code>https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png</code></p>
<p>è¦è®©å‰é¢çš„æ–¹æ³•<code>downloadByUrl</code>é¡ºåˆ©æ‰§è¡Œï¼Œå°±éœ€è¦å…¶èµ°ä»£ç†æœåŠ¡</p>
<p>ä¸º<code>http</code>æ¨¡å—æ·»åŠ ä»£ç†ä¹Ÿéå¸¸ç®€å•ï¼ŒåŸç”Ÿæä¾›äº†ä¸€ä¸ª<code>agent</code>å‚æ•°ï¼Œå¯ç”¨äºè®¾ç½®ä»£ç†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'http'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url,{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  agent: Agent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>è¿™ä¸ª<code>Agent</code>çš„æ„é€ å¯ä»¥ç›´æ¥ç”¨ç¤¾åŒºå·²ç»å°è£…å¥½çš„<a href="https://www.npmjs.com/package/http-proxy-agent" target="_blank" rel="noreferrer">http-proxy-agent</a></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> HttpProxyAgent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http-proxy-agent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> proxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HttpProxyAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://127.0.0.1:7890'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>åœ¨è°ƒç”¨æ—¶åªéœ€å°†è¿™ä¸ª<code>proxy</code>å®ä¾‹ä¼ å…¥å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  agent: proxy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>åŸæœ‰çš„æ–¹æ³•åªéœ€è¦æ·»åŠ ä¸€ä¸ª<code>proxy</code>å…¥å‚å³å¯ï¼Œ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  agent: ops.proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HttpProxyAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ops.proxy) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯ä½¿ç”¨ä»£ç†æˆåŠŸè¯·æ±‚çš„ç¤ºä¾‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODYwNTcyODQ3NA==668605728474" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/6.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 6</a></p>
<h3 id="åˆæ³•æ–‡ä»¶åç”Ÿæˆ" tabindex="-1">åˆæ³•æ–‡ä»¶åç”Ÿæˆ <a class="header-anchor" href="#åˆæ³•æ–‡ä»¶åç”Ÿæˆ" aria-label="Permalink to &quot;åˆæ³•æ–‡ä»¶åç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°è‚¯å®šéœ€è¦æœ‰ä¸ªåå­—ï¼Œå¦‚æœç”¨éšæœºçš„æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥é‚£è‚¯å®šä½“éªŒè¾ƒå·®</p>
<p>æœ€å¸¸è§çš„å°±æ˜¯é€šè¿‡<code>url</code>çš„<code>pathname</code>ç”Ÿæˆ</p>
<p>æ¯”å¦‚ä¸Šé¢çš„è°·æ­Œå›¾ç‰‡èµ„æºï¼Œå’±ä»¬ä½¿ç”¨<code>URL</code>æ„é€ å‡ºä¸€ä¸ªç¤ºä¾‹ï¼ŒæŸ¥çœ‹urlçš„æ„æˆ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceUrl)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODY5MzA0OTM4Mg==668693049382" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ–‡ä»¶åå°±å¯ä»¥å–<code>pathname</code>æœ€åä¸€æˆªï¼Œé€šè¿‡<code>path.basename</code>å³å¯è·å–</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://www.google.com/images/googlelogo_color_92x30dp.png'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">basename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url.pathname) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// googlelogo_color_92x30dp.png</span></span></code></pre>
</div><p>å½“ç„¶æ–‡ä»¶åä¹Ÿå¯èƒ½ä¼šé‡å¤ï¼Œå†éè¦†ç›–å†™å…¥çš„å‰æä¸‹ï¼Œé€šè¿‡ä¼šåœ¨æ–‡ä»¶ååæ·»åŠ &quot;åˆ†éš”ç¬¦+æ•°å­—&quot;ï¼Œæ¯”å¦‚<code>x.png</code>,<code>x_1.png</code>,<code>x 1.png</code></p>
<p>æå–æ–‡ä»¶åä¸åç¼€å¯ä»¥ç”¨<code>path.parse</code>ç›´æ¥è·å–</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { ext: '.png', name: 'google' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'google.png'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { ext: '', name: 'hashname' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hashname'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { ext: '.ts', name: 'index.d' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'index.d.ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { ext: '.', name: 'index' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'index.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { ext: '', name: '.gitkeep' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.gitkeep'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ä½†æ˜¯é’ˆå¯¹å¸¦æœ‰å¤šä¸ª <strong>.</strong> çš„æ–‡ä»¶åä¸å¤ªå‹å¥½ï¼Œæ¯”å¦‚<code>.d.ts</code>æ˜¯æœŸæœ›è¢«å½“åšå®Œæ•´çš„<code>ext</code>å¤„ç†</p>
<p>æ‰€ä»¥å’±ä»¬å¯ä»¥å¯¹å…¶ç®€å•é€’å½’åŒ…è£…ä¸€ä¸‹å®ç°1ä¸ª<code>nameParse</code>ï¼Œç¡®ä¿æœ€å<code>parse(input).name === input</code>å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nameParse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">suffix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filename) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { name, ext: ext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> suffix }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nameParse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(name, ext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> suffix)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯è¿è¡Œç¤ºä¾‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODY5NzM4MDAzNw==668697380037" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åˆ°æ­¤å®Œæˆäº†<code>name</code>å’Œ<code>ext</code>çš„åˆ†ç¦»</p>
<p>æ–‡ä»¶ååˆ†ç¦»åç®€å•è¿›è¡Œä¸€ä¸‹<code>name</code>çš„åˆæ³•æ€§æ›¿æ¢ï¼Œé¿å…å‡ºç°æ“ä½œç³»ç»Ÿä¸æ”¯æŒçš„å­—ç¬¦</p>
<blockquote>
<p>æ­£åˆ™æ¥è‡ªäºGoogle</p>
</blockquote>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> normalizeFilename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> name.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">/:*?"&#x3C;>|]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å†åšæ–‡ä»¶åå»é‡åªéœ€è¦ç»™<code>name</code>æ·»åŠ åç¼€æ•°å­—å³å¯</p>
<p><code>url</code>ä¸Šçš„å†…å®¹è¿˜å¯èƒ½å­˜åœ¨<code>encode</code>çš„æƒ…å†µï¼Œæ¯”å¦‚<code>æ˜é‡‘.png</code> =&gt; encode =&gt; <code>%E6%8E%98%E9%87%91.png</code></p>
<p>å› æ­¤å’±ä»¬åœ¨å¤„ç†ä»<code>pathname</code>æå–çš„<code>filename</code>å‰å…ˆè¿›è¡Œå¿…è¦çš„<code>decode</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">decodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'%E6%8E%98%E9%87%91.png'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ˜é‡‘.png</span></span></code></pre>
</div><p>æœ‰äº†å‰é¢çš„å‡†å¤‡å·¥ä½œå’±ä»¬å°±å¯ä»¥ç»„è£…å‡ºä¸€ä¸ªä»<code>url</code>æå–åˆæ³•å¯ç”¨çš„æ–‡ä»¶åçš„æ–¹æ³•å˜</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getValidFilenameByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> urlInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> decodeURIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">basename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(urlInstance.pathname))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getValidFilenameByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://a/b/c.png?width=100&#x26;height'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// c.png</span></span></code></pre>
</div><p>ç„¶åæ˜¯è·å–ä¸é‡å¤çš„æ–‡ä»¶è·¯å¾„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getNoRepeatFilepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> nameParse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filepath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    filepath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ` ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ext</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filepath</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ€åé›†æˆåˆ°<code>downloadByUrl</code>æ–¹æ³•ä¸­ï¼Œä½¿è¾“å‡ºçš„æ–‡ä»¶åå¯æ§</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> normalizeFilename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ops.filename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getValidFilenameByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> randomName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops.override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getNoRepeatFilepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...code</span></span></code></pre>
</div><p>æµ‹è¯•æ¡ˆä¾‹è¿è¡Œç»“æœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODc4Njc0NzcwMg==668786747702" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/7.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 7</a></p>
<h3 id="å¼‚å¸¸é”™è¯¯æƒ…å†µå¤„ç†" tabindex="-1">å¼‚å¸¸é”™è¯¯æƒ…å†µå¤„ç† <a class="header-anchor" href="#å¼‚å¸¸é”™è¯¯æƒ…å†µå¤„ç†" aria-label="Permalink to &quot;å¼‚å¸¸é”™è¯¯æƒ…å†µå¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯¹äºéæ³•çš„<code>url</code>ï¼Œèµ„æºä¸å­˜åœ¨é€šå¸¸ä¼šå“åº”<code>404</code>ç­‰æ²¡è€ƒè™‘åˆ°çš„å¼‚å¸¸åœºæ™¯</p>
<p>å¯ä»¥åœ¨ä¸Šè¿°çš„<code>downloadByUrl</code>æ–¹æ³•ä¸­æ‹“å±•1ä¸ª<code>error</code>æ–¹æ³•ï¼Œç”¨äºé”™è¯¯å¤„ç†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ClientRequest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> errorFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error url:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, source)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error msg:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, err.message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> responseCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">IncomingMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">statusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> response</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // 404</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (statusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'404 source'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, reqOptions, responseCallback)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    errorFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> errorFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err, url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'request timeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    errorFn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> errorFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(error, url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é™¤ç‰¹æ®Šæƒ…å†µå¤–ï¼Œç»Ÿä¸€ç”¨<code>request.on('error')</code>å¤„æ•è·é”™è¯¯</p>
<p>ä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç åŠè¿è¡Œç»“æœ</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg0NjEwNDEwMQ==668846104101" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/main/packages/cli/efst/__test__/download/8.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç 8</a></p>
<h2 id="å°è£…cli" tabindex="-1">å°è£…CLI <a class="header-anchor" href="#å°è£…cli" aria-label="Permalink to &quot;å°è£…CLI&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸Šä¸€å°èŠ‚é˜è¿°äº†åŠŸèƒ½çš„æ ¸å¿ƒå®ç°æ–¹æ³•ï¼Œæ­¤éƒ¨åˆ†å°†ä¸Šè¿°èƒ½åŠ›é›†æˆåˆ°CLIä¸­ï¼Œæ–¹ä¾¿å¯¹å¤–åˆ†äº«ä¸ä½¿ç”¨ã€‚</p>
<h3 id="optionså®šä¹‰" tabindex="-1">Optionså®šä¹‰ <a class="header-anchor" href="#optionså®šä¹‰" aria-label="Permalink to &quot;Optionså®šä¹‰&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Command } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'commander'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> program</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">argument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;url>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set download source url'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-f,--filename &#x3C;filename>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set download filename'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-L,--location &#x3C;times>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set location times'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'10'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-t,--timeout &#x3C;timeout>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set the request timeout(ms)'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'3000'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-p,--proxy &#x3C;proxy server>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set proxy server'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-o,--override'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'override duplicate file'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(defaultCommand)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg0ODAxNzkxOQ==668848017919" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="å‚æ•°è½¬æ¢ä¼ é€’" tabindex="-1">å‚æ•°è½¬æ¢ä¼ é€’ <a class="header-anchor" href="#å‚æ•°è½¬æ¢ä¼ é€’" aria-label="Permalink to &quot;å‚æ•°è½¬æ¢ä¼ é€’&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸‹é¢æ˜¯<code>defaultCommand</code>çš„é€»è¾‘ï¼Œåªéœ€è¦å°†ç›¸å…³å‚æ•°å¤„ç†åé€ä¼ ç»™å®šä¹‰çš„<code>download</code>æ–¹æ³•å³å¯</p>
<p><code>option</code> ä¸æ”¯æŒ <strong>number</strong> æ‰€ä»¥éœ€è¦å¯¹æ•°å­—å­—ç¬¦ä¸²åšä¸€ä¸‹æ˜¾ç¤ºè½¬æ¢</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defaultCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CLIOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    maxRedirects: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">location,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    timeout: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">timeout,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    proxy,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    override,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    filename</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error url:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error msg:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">redStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err.message))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'file save:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">underlineStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yellowStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯ä½¿ç”¨æ¼”ç¤º</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg1MDU4NzY1OQ==668850587659" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="ä¸‹è½½è¿›åº¦å±•ç¤º" tabindex="-1">ä¸‹è½½è¿›åº¦å±•ç¤º <a class="header-anchor" href="#ä¸‹è½½è¿›åº¦å±•ç¤º" aria-label="Permalink to &quot;ä¸‹è½½è¿›åº¦å±•ç¤º&quot;">&ZeroWidthSpace;</a></h3>
<p>å°æ–‡ä»¶è¿˜èƒ½æ— æ„Ÿç­‰å¾…ï¼Œå¤§æ–‡ä»¶å’±å°±å¾—æ•´ä¸ªè¿›åº¦æ¡æ¥æ˜¾ç¤ºäº†ï¼Œæ–¹éäº†è§£è¿›åº¦ã€‚</p>
<p>åœ¨<code>npm</code>ä¸­æ£€ç´¢ï¼Œé™¤äº†æ¨èäº†è€ç‰Œåº“ <a href="https://www.npmjs.com/package/progress" target="_blank" rel="noreferrer">progress</a>ï¼Œè¿˜çœ‹åˆ°äº†1ä¸ª <a href="https://www.npmjs.com/package/cli-progress" target="_blank" rel="noreferrer">cli-progress</a></p>
<p>å’±ä»¬è¿™é‡Œå°±ç”¨åè€…ï¼ˆæœ€è¿‘æ›´æ–°æ—¶é—´çœ‹ç€è¿‘ä¸€äº›ï¼‰</p>
<p>æœ€ç®€å•çš„ç¤ºä¾‹ä¸ç»“æœå¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cliProgress </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'cli-progress'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> progressBar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cliProgress.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SingleBar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">downloadByUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">progress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">rec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getProgress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sum, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ›´æ–°è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (rec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg2NDk4NjA2OA==668864986068" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å±•ç¤ºå†…å®¹è¿‡äºç®€å•ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸‹æ˜¾ç¤ºï¼Œå±•ç¤ºæ–‡ä»¶å¤§å°å’Œä¸‹è½½é€Ÿåº¦ï¼Œ<a href="https://www.npmjs.com/package/cli-progress" target="_blank" rel="noreferrer">å‚è€ƒæ–‡æ¡£</a>ï¼Œç»“åˆå†…ç½®çš„ä¸€äº›å€¼è®¾å®šåˆå§‹åŒ–å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '[{bar}] {percentage}% | ETA: {eta}s | {rec}/{sum} | Speed {speed}'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> progressBar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cliProgress.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SingleBar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    format,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    barsize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cliProgress.Presets.shades_classic</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ç´§æ¥ç€æ˜¯<code>start</code>æ—¶è®¾ç½®<code>sum</code>å’Œ<code>speed</code>é»˜è®¤å€¼</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆå§‹åŒ–çš„æ—¶å€™è®¡ç®—æ€»å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sum, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sum: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sum)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿‡ç¨‹ä¸­æ›´æ–°è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">progressBar.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rec, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  rec: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rec),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  speed: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">speed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cur)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><code>formatSize</code>æ–¹æ³•å®ç°å¦‚ä¸‹(æ¥æºäºè°·æ­Œæ¨èä»£ç )ï¼ŒçŸ­å°ç²¾æ‚çš„ä»£ç ï¼Œå°†Bè½¬æ¢ä¸ºå…¶å®ƒå•ä½å±•ç¤ºã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  pointLength</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  units</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> unit</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  units </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> units </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'B'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'K'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'M'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'G'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'TB'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((unit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> units.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1024</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    (unit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'B'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> size</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> size.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pointLength </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pointLength)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> unit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1234</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1.21K</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10240</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 10.00K</span></span></code></pre>
</div><h3 id="è®¡ç®—ä¸‹è½½é€Ÿåº¦" tabindex="-1">è®¡ç®—ä¸‹è½½é€Ÿåº¦ <a class="header-anchor" href="#è®¡ç®—ä¸‹è½½é€Ÿåº¦" aria-label="Permalink to &quot;è®¡ç®—ä¸‹è½½é€Ÿåº¦&quot;">&ZeroWidthSpace;</a></h3>
<p><code>speed</code>æ–¹æ³•å®ç°å¦‚ä¸‹</p>
<ul>
<li>ä½¿ç”¨é—­åŒ…</li>
<li>ä¸€æ®µæ—¶é—´è®¡ç®—ä¸€æ¬¡é€Ÿåº¦ï¼ˆ1000ms / æ—¶é—´å‘¨æœŸ * å‘¨æœŸå†…ä¸‹è½½é‡Bï¼‰</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cycle</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> å¤šä¹…ç®—ä¸€æ¬¡ï¼ˆmsï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSpeedCalculator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cycle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> endTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> speed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'N/A'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è®°å½•é€Ÿåº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // è®¡ç®—ä¹‹å‰æ”¶åˆ°äº†å¤šå°‘B</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chunk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    endTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è®¡ç®—ä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (endTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cycle) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      speed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatSize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">endTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/s`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      sum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> speed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–åˆ°è®¡ç®—é€Ÿåº¦çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> speed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSpeedCalculator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(speed, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(speed, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(speed, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10240</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">speed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 23.49K/s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ä¼˜åŒ–åçš„ä¸‹è½½æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg2ODI5MjgxNg==668868292816" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="æŒä¹…åŒ–é…ç½®å­˜å‚¨" tabindex="-1">æŒä¹…åŒ–é…ç½®å­˜å‚¨ <a class="header-anchor" href="#æŒä¹…åŒ–é…ç½®å­˜å‚¨" aria-label="Permalink to &quot;æŒä¹…åŒ–é…ç½®å­˜å‚¨&quot;">&ZeroWidthSpace;</a></h3>
<p>åƒ<code>proxy</code>ï¼Œ<code>timeout</code>å‚æ•°ä¸å¸Œæœ›æ¯æ¬¡éƒ½è®¾ç½®ï¼Œå°±éœ€è¦å°†è¿™äº›é…ç½®å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥è¯»å–ã€‚</p>
<p>é€šå¸¸çš„CLIå·¥å…·éƒ½ä¼šåœ¨<code>/Users/$username/.xxx</code>ç›®å½•ä¸­å­˜æ”¾è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œå³<code>HOME</code>ç›®å½•ä¸‹ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg2ODgwOTU3Mw==668868809573" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŒç†æˆ‘ä»¬å¯ä»¥å¼€è¾Ÿä¸€ä¸ªæ–‡ä»¶å­˜æ”¾<code>.efstrc</code>ï¼Œ<code>process.env.HOME</code>å³å¯è·å–åˆ°<code>HOME</code>ç›®å½•,<code>process.env.USERPROFILE</code>ç”¨äºå…¼å®¹<code>win32</code>å¹³å°ã€‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">USERPROFILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  '.efstrc'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>è¯»å†™é…ç½®å®ç°å¦‚ä¸‹,åˆ©ç”¨<code>Array.prototype.reduce</code>æ–¹æ³•åœ¨éå†çš„è¿‡ç¨‹ä¸­åšå­˜å–å€¼æ“ä½œ</p>
<ul>
<li>æ”¯æŒ<strong>å¤šçº§çš„key</strong>çš„è¯»å†™</li>
<li>å…¼å®¹å¼‚å¸¸åœºæ™¯ï¼Œè¿”å›ç©ºæˆ–ç©ºå¯¹è±¡</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre?.[key]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }, value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nowCfg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ”¯æŒä¼ å…¥å¤šçº§çš„key</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> keys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // éå†è®¾ç½®çš„æ‰€æœ‰éƒ½é…ç½®éƒ½ä¸nowCfgç›´æ¥æˆ–é—´æ¥çš„è¿›è¡Œäº†å¼•ç”¨å…³è”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> keys.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre[k]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }, nowCfg)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è¾“å‡ºåˆ°æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nowCfg, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'proxy'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://127.0.0.1:7890'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2000'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'github.name'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ATQQ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'github.info.url'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://github.com/ATQQ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg2OTk1MzUyNA==668869953524" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å†æ·»åŠ ä¸€ä¸ªç§»é™¤é…ç½®çš„æ–¹æ³•ï¼Œä¸è®¾ç½®çš„çš„æ–¹æ³•ç±»ä¼¼åªæ˜¯ä½¿ç”¨<code>delete</code>æ“ä½œç¬¦åˆ é™¤ç›¸å…³çš„<code>key</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> delCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nowCfg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> keys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ç§»é™¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> keys.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre[k]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }, nowCfg)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(nowCfg, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">delCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timeout'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">delCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'github.info.name'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">delCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'github.name'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg3MDYzODk1NA==668870638954" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æœ‰äº†è¿™3ä¸ªæ–¹æ³•æ”¯æ’‘å°±å¯ä»¥å°è£…æˆä¸€ä¸ª<code>config</code>æŒ‡ä»¤ç”¨äºé…ç½®çš„<code>CRUD</code></p>
<h3 id="configæŒ‡ä»¤å®ç°" tabindex="-1">configæŒ‡ä»¤å®ç° <a class="header-anchor" href="#configæŒ‡ä»¤å®ç°" aria-label="Permalink to &quot;configæŒ‡ä»¤å®ç°&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆæ˜¯å®šä¹‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'config &#x3C;type> &#x3C;key> [value]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'c'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'crud config &#x3C;type> in [del,get,set]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configCommand)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg3MjMzMzkzNQ==668872333935" alt="å›¾ç‰‡" loading="lazy"></p>
<p><code>configCommand</code>å°è£…å®ç°ï¼Œå°†ä¸Šè¿°å®ç°çš„æ–¹æ³•æŒ‰åœºæ™¯æ”¾å…¥å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ConfigType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'set'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'get'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'del'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defaultCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ConfigType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'set'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    setCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key, value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'del'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    delCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'get'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getCLIConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä½¿ç”¨æ¼”ç¤ºå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2ODg3MzQyNzc2Nw==668873427767" alt="å›¾ç‰‡" loading="lazy"></p>
<p>config æŒ‡ä»¤è¿™éƒ¨åˆ†é€»è¾‘å®Œå…¨å¯ä»¥åˆ†ç¦»æˆä¸€ä¸ªé€šç”¨çš„ <code>commander</code> æ¨¡å—ï¼Œåœ¨éœ€è¦çš„CLIé‡Œç›´æ¥æ³¨å†Œå³å¯ï¼Œç®€åŒ–åå¤§æ¦‚å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Command } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'commander'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> program</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">registerConfigCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(program,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.efstrc'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¬”è€…å¯¹è¿™ä¸ªå·¥å…·çš„æƒ³æ³•è¿˜æœ‰å¾ˆå¤šï¼Œåç»­å…ˆæŠŠåŠŸèƒ½ğŸ´å‡ºæ¥å†å†™ç»­é›†ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™é‡Œã€‚</p>
<p>å†…å®¹æœ‰ä¸å¦¥çš„ä¹‹å¤„ï¼Œè¿˜è¯·è¯„è®ºåŒºæ–§æ­£ã€‚</p>
<p>CLIå®Œæ•´æºç è§<a href="https://github.com/ATQQ/tools/tree/main/packages/cli/efst" target="_blank" rel="noreferrer">GitHub</a></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2ODkyMDg3NDEwNg==668920874106" length="0" type="image//mdImg/MTY2ODkyMDg3NDEwNg==668920874106"/>
        </item>
        <item>
            <title><![CDATA[SourceMapè§£æCLIå·¥å…·å®ç°]]></title>
            <link>https://www.dmsrs.org/technology/works/sm-cli.html</link>
            <guid>https://www.dmsrs.org/technology/works/sm-cli.html</guid>
            <pubDate>Sat, 29 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
source-map å¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œé€šå¸¸æƒ…å†µå°±æ˜¯äº§ç‰©é‡Œçš„`xx.js.map`æ–‡ä»¶é‡Œçš„å†…å®¹ã€‚
å¯ç”¨äºå¯¹å‹ç¼©æ··æ·†åçš„ä»£ç è¿˜åŸã€‚é€šå¸¸ç”¨äºå¸®åŠ©å®šä½æºç é—®é¢˜ã€‚
åŒºåˆ«äºæ„å»ºæ—¶çš„é…ç½®ï¼ˆä»¥webpack çš„]]></description>
            <content:encoded><![CDATA[<h1 id="sourcemapè§£æcliå·¥å…·å®ç°" tabindex="-1">SourceMapè§£æCLIå·¥å…·å®ç° <a class="header-anchor" href="#sourcemapè§£æcliå·¥å…·å®ç°" aria-label="Permalink to &quot;SourceMapè§£æCLIå·¥å…·å®ç°&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼</p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>source-map</strong> å¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œé€šå¸¸æƒ…å†µå°±æ˜¯äº§ç‰©é‡Œçš„<code>xx.js.map</code>æ–‡ä»¶é‡Œçš„å†…å®¹ã€‚</p>
<p>å¯ç”¨äºå¯¹å‹ç¼©æ··æ·†åçš„ä»£ç è¿˜åŸã€‚é€šå¸¸ç”¨äºå¸®åŠ©å®šä½æºç é—®é¢˜ã€‚</p>
<p>åŒºåˆ«äºæ„å»ºæ—¶çš„é…ç½®ï¼ˆ<a href="https://webpack.docschina.org/configuration/devtool/#special-cases" target="_blank" rel="noreferrer">ä»¥webpack çš„devtoolé…ç½®é¡¹ä¸ºä¾‹</a>ï¼‰ä¸åŒé…ç½®ï¼Œ<code>source-map</code>æš´éœ²çš„ä¿¡æ¯ç¨‹åº¦ä¹Ÿå°±ä¹Ÿä¸ä¸€æ ·</p>
<p>ä¸€èˆ¬å…¬å¸é‡Œçš„é¡¹ç›®ï¼Œæ˜¯ä¼šæŠŠ<code>.map</code>æ–‡ä»¶ä¸Šä¼ åˆ°å†…ç½‘ç¯å¢ƒï¼Œä¸è€½è¯¯é—®é¢˜æ’æŸ¥ï¼Œä¹Ÿä¸æš´éœ²æºç </p>
<p>ä¸ªäººçš„å¼€æºé¡¹ç›®ï¼Œä¸€èˆ¬å°±æ²¡è¿™ä¹ˆè®²ç©¶äº†ï¼Œç›´æ¥å’Œäº§ç‰©ä¸€èµ·ä¼ äº†ã€‚</p>
<p>å‰ç«¯ç›‘æ§å¹³å°ï¼Œä¸€èˆ¬éƒ½æ”¯æŒé”™è¯¯å †æ ˆè§£æï¼Œé€šè¿‡<code>.map</code>ï¼Œè¿˜åŸå‡ºé”™ä»£ç ä½ç½®è°ƒç”¨å †æ ˆä¿¡æ¯ã€‚</p>
<p>æœ‰æ—¶å€™æ²¡æœ‰è‡ªåŠ¨è§£æçš„å¹³å°å¯ç”¨çš„æ—¶å€™ï¼ˆæ¯”å¦‚ä¸€äº›å•†ç”¨ç›‘æ§å¹³å°ï¼Œå…è´¹ç‰ˆé€šå¸¸ä¸æä¾›è‡ªåŠ¨source-mapè§£æèƒ½åŠ›ï¼‰</p>
<p>å°±ä¼šæœäº›åœ¨çº¿<code>source-map</code>è§£æå·¥å…·å‡‘åˆä¸€ä¸‹ï¼ŒåŒ…å«åœ¨çº¿ç½‘é¡µï¼Œä»¥åŠCLIç‰ˆæœ¬çš„ã€‚ä½œè€…ä¹Ÿä½“éªŒä½¿ç”¨äº†ä¸€äº›ï¼ˆéƒ½è´´åˆ°æœ€åé™„å½•åˆ—è¡¨ä¸­ï¼Œè¯»è€…æœ‰å…¶å®ƒæ¨èçš„ä¹Ÿå¯è¯„è®ºåŒºè¡¥å……ï¼‰ã€‚</p>
<p>æœ¬æ–‡å°†ç»¼åˆç°æœ‰çš„source-map cliè§£æå·¥å…·ä¼˜ç¼ºç‚¹ï¼Œå–é•¿è¡¥çŸ­ï¼ŒğŸ´ä¸€ä¸ªç¼åˆæ€ªï¼ˆä¸»è¦åŒ…å«<code>æŠ¥é”™æºç è§£æ</code>å’Œ<code>æ ¹æ®sourceMapæ–‡ä»¶ç”Ÿæˆæºç </code>2ä¸ªèƒ½åŠ›ï¼‰ã€‚</p>
<p>å…ˆä¸Šä¸ªæ¼”ç¤ºï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯æ¥ç€å¾€ä¸‹çœ‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/source-map-cli</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzY2NTE1NzQwOQ==667665157409" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="source-mapåº“çš„ç®€ä»‹" tabindex="-1">source-mapåº“çš„ç®€ä»‹ <a class="header-anchor" href="#source-mapåº“çš„ç®€ä»‹" aria-label="Permalink to &quot;source-mapåº“çš„ç®€ä»‹&quot;">&ZeroWidthSpace;</a></h2>
<p>npmåœ°å€ï¼š<a href="https://www.npmjs.com/package/source-map" target="_blank" rel="noreferrer">source-map</a></p>
<p>å¯ä»¥ç”¨äºç”Ÿæˆå’Œè§£æsourcemapçš„åº“ï¼Œæœ¬æ–‡ä¸»è¦ç”¨åˆ°å…¶è§£æçš„èƒ½åŠ›ï¼Œå…³æ³¨<a href="https://www.npmjs.com/package/source-map#sourcemapconsumer" target="_blank" rel="noreferrer">API:SourceMapConsumer</a>å³å¯</p>
<p>ä¸‹é¢æ˜¯ç¤ºä¾‹ï¼Œå…¶è¿”å›å€¼<code>consumer</code>æ˜¯ä¸€ä¸ª<code>Promise</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'source-map'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createSourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourceMapCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapCode)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>consumer</code>ä¸­åŒ…å«ä¸€ä¸ª<code>sources</code>å±æ€§ï¼Œæ ‡æ˜äº†åŒ…å«çš„æ‰€ç”¨åˆ°çš„æºç æ–‡ä»¶è·¯å¾„ä¿¡æ¯ï¼Œé€šè¿‡å®ä¾‹ä¸Šçš„<code>sourceContentFor</code>æ–¹æ³•å³å¯è·å–åˆ°å¯¹åº”<code>æ–‡ä»¶(source)</code>çš„<code>æºç (sourceCode)</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// mapContent å†…å®¹æ¥æº https://script.sugarat.top/js/tests/index.9bb0da5c.js.map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createSourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mapContent)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // '../../vite/modulepreload-polyfill',</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // '../../node_modules/.pnpm/@vue+shared@3.2.37/node_modules/@vue/shared/dist/shared.esm-bundler.js',</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç±»ä¼¼çš„æºæ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceFileNames</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.sources</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æºæ–‡ä»¶ä¸ªæ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceFileNames.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç¬¬ä¸€ä¸ªæºæ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceFileNames[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})()</span></span></code></pre>
</div><p><code>consumer</code>å®ä¾‹ä¸Šçš„å¦ä¸€ä¸ªæœ€å¸¸ç”¨çš„æ–¹æ³•<code>originalPositionFor</code>å¯ä»¥é€šè¿‡å‹ç¼©æ··æ·†åçš„ä»£ç è¡Œåˆ—å·ï¼Œè§£æå‡ºæºæ–‡ä»¶ä¿¡æ¯ã€‚</p>
<p>åŒ…å«<code>æºæ–‡ä»¶source</code>,<code>è¡Œå·line</code>,<code>åˆ—å·column</code>,<code>name</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç¬¬ä¸€ä¸ªæºæ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceFileNames[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é€šè¿‡å‹ç¼©æ··æ·†åçš„ä»£ç çš„è¡Œåˆ—å·ï¼Œå®šä½åˆ°æºæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">originalPositionFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  line: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  column: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">17596</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿™ä¸ªä¾‹å­çš„ç»“æœå¦‚ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceInfo)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//   {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//     source: '../../node_modules/.pnpm/vue-router@4.0.14_vue@3.2.37/node_modules/vue-router/dist/vue-router.esm-bundler.js',</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//     line: 2882,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//     column: 12,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//     name: null</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//   }</span></span></code></pre>
</div><p>é€šè¿‡å¦‚ä¸Š2ä¸ªç®€å•çš„<code>API</code>å³å¯å®Œæˆå¸¸ç”¨èƒ½åŠ›çš„å°è£…ã€‚</p>
<p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/source-map/__test__/sourcemap.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<h2 id="mapèµ„æºåŠ è½½" tabindex="-1">.mapèµ„æºåŠ è½½ <a class="header-anchor" href="#mapèµ„æºåŠ è½½" aria-label="Permalink to &quot;.mapèµ„æºåŠ è½½&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šå¸¸æ¯ä¸ªjsäº§ç‰©éƒ½å¯¹åº”æœ‰ä¸€ä»½<code>.map</code>æ–‡ä»¶ï¼Œæ–‡ä»¶å‘½åä¸º<code>åŸæ–‡ä»¶å.js.map</code></p>
<p>åœ¨ä¸è€ƒè™‘ç‰¹æ®Šçš„çº¦å®šæ¡ä»¶æƒ…å†µä¸‹ï¼Œé€šå¸¸æƒ…å†µæ˜¯åœ¨jsäº§ç‰©æœ«å°¾éƒ½æœ‰1ä¸ª<code>// #sourceMappingURL=xx.js.map</code>æ³¨é‡Šè¡¨æ˜jsèµ„æºå…³è”çš„mapæ–‡ä»¶è·¯å¾„</p>
<p>äºæ˜¯ä¹å’±ä»¬ï¼Œå¯ä»¥å…ˆå†™ä¸ªæ–¹æ³•æ¥è·å–ä¼ å…¥æ–‡ä»¶å¯¹åº”çš„sourceMapæ–‡ä»¶è·¯å¾„</p>
<h3 id="æœ¬åœ°sourcemapè·¯å¾„è·å–" tabindex="-1">æœ¬åœ°sourceMapè·¯å¾„è·å– <a class="header-anchor" href="#æœ¬åœ°sourcemapè·¯å¾„è·å–" aria-label="Permalink to &quot;æœ¬åœ°sourceMapè·¯å¾„è·å–&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆæ˜¯è€ƒè™‘æœ¬åœ°çš„æƒ…å†µï¼Œé€šè¿‡è·¯å¾„æ‹¼æ¥<code>.map</code>ä¸è¯»å–æ–‡ä»¶æ–‡ä»¶æœ«å°¾<code>sourceMappingURL</code>2ç§æ–¹å¼ç›¸ç»“åˆ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getLocalSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourceJsPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ–‡ä»¶ä¸å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> NOT_FOUND</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…ˆç›´æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨.js.mapæ–‡ä»¶å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sourceJsPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.map`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sourceJsPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.map`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è·å–ä»£ç é‡Œçš„ // #sourceMappingURL= æ³¨é‡Šçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> flag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '//# sourceMappingURL='</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> flagIdx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">lastIndexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(flag)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (flagIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> NOT_FOUND</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMappingURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(flagIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> flag.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¦‚æœæ˜¯httpè·¯å¾„è¡¨æ˜ æ˜¯ç»å¯¹è·¯å¾„ ç›´æ¥è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isHTTPSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMappingURL)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMappingURL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¦åˆ™æ‹¼æ¥jsèµ„æºçš„ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath), sourceMappingURL)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/9cee3f881157199c365b0a41ababe31d2f5b6fdf/packages/cli/source-map/src/util/index.ts#L26" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<h3 id="è¿œç¨‹èµ„æºåŠ è½½" tabindex="-1">è¿œç¨‹èµ„æºåŠ è½½ <a class="header-anchor" href="#è¿œç¨‹èµ„æºåŠ è½½" aria-label="Permalink to &quot;è¿œç¨‹èµ„æºåŠ è½½&quot;">&ZeroWidthSpace;</a></h3>
<p>é™¤äº†æœ¬åœ°æƒ…å†µé‚£ä¹Ÿæœ‰çº¿ä¸Šèµ„æºçš„æƒ…å†µï¼Œæ¯”å¦‚ç”¨äºæµ‹è¯•çš„<code>https://script.sugarat.top/js/tests/index.9bb0da5c.js</code></p>
<p>ä¸‹é¢ä»‹ç»3ç§å¸¸è§æ–¹å¼è·å–<code>http</code>èµ„æºï¼Œ<code>http</code>,<code>axios</code>,<code>fetch</code></p>
<p>é¦–å…ˆæ˜¯<code>http</code>ï¼Œnodeå†…ç½®ç½‘ç»œæ¨¡å—ï¼Œä½¿ç”¨ä¸Šçš„æ„Ÿå®˜å’Œwebé‡Œçš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noreferrer">XMLHttpRequest</a>å·®ä¸å¤šï¼Œä¸å¤ªä¼˜é›…</p>
<p>ç®€å•åœºæ™¯ä¹¦å†™ä»£ç é‡ä¹Ÿåœ¨å¯æ¥å—çš„èŒƒå›´</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'http'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> https </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'https'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åŒºåˆ«httpsä¸httpèµ„æº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> HTTP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> https </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // é€šè¿‡å›è°ƒçš„å½¢å¼è·å–</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    HTTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è®¾ç½®å¯è¯»æµçš„å­—ç¬¦ç¼–ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å“åº”å†…å®¹æ‹¼æ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chunk</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è¯»å®Œå¯¹å¤–æš´éœ²å†…å®¹å’ŒçŠ¶æ€ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'end'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          body: content,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          code: res.statusCode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'error'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>axios</code>ï¼Œå‰ç«¯å¸¸ç”¨çš„è·¨å¹³å°ç½‘ç»œè¯·æ±‚åº“ï¼ˆweb/node/å…¶å®ƒåœºæ™¯æä¾›adaptorå±‚åšé€‚é…ï¼‰</p>
<p>ç”¨è¿™ä¸ªä»£ç é‡å°±æ›´ç®€æ´äº†ï¼Œ3è¡Œå°±èƒ½æå®š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSourceByAxios</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> axios.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      code: v.status,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      body: v.data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>fetch</code>ï¼Œåœ¨webä¾§å·²ç»å‡ºç°å¾ˆä¹…äº†ï¼ŒNode.js&gt;=v17.5.0 å†…ç½®ï¼Œä½ç‰ˆæœ¬å¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„<a href="https://www.npmjs.com/package/node-fetch" target="_blank" rel="noreferrer">node-fetch</a></p>
<p>è¿™é‡Œä½¿ç”¨<code>node-fetch</code>è¿›è¡Œä¸¾ä¾‹ï¼Œä½¿ç”¨ä¹Ÿæ˜¯éå¸¸ç®€å•</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fetch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'node-fetch'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSourceByFetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.status</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      code,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      body</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åŒ…å«ä½†ä¸é™äºä»¥ä¸Šä¸‰ç§æ–¹å¼è¾¾åˆ°éœ€è¦çš„ç›®çš„ã€‚æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/source-map/__test__/remoteSource.ts" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<h3 id="è¿œç¨‹sourcemapè·¯å¾„è·å–" tabindex="-1">è¿œç¨‹sourceMapè·¯å¾„è·å– <a class="header-anchor" href="#è¿œç¨‹sourcemapè·¯å¾„è·å–" aria-label="Permalink to &quot;è¿œç¨‹sourceMapè·¯å¾„è·å–&quot;">&ZeroWidthSpace;</a></h3>
<p>æ€è·¯å’Œæœ¬åœ°çš„èµ„æºé€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å†…å®¹è·å–å’Œåˆ¤æ–­éœ€è¦èµ°ç½‘ç»œï¼Œå®ç°å¦‚ä¸‹ï¼Œæ¥è¿‘ä¸€åŠéƒ½æ˜¯é‡å¤ä»£ç ï¼Œæœ‰ä¼˜åŒ–ç©ºé—´ï¼Œè¿™é‡Œä¸èµ˜è¿°äº†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourceJsPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (context.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> NOT_FOUND</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sourceJsPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.map`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sourceJsPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.map`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> context.body</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> flag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '//# sourceMappingURL='</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> flagIdx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">lastIndexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(flag)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (flagIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> NOT_FOUND</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMappingURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(flagIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> flag.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isHTTPSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMappingURL)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMappingURL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath), sourceMappingURL)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç®€å•åšåˆå¹¶åçš„æ–¹æ³•å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isHTTPSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourcePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sourcePath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourceJsPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isHTTPSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getLocalSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceJsPath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/9cee3f881157199c365b0a41ababe31d2f5b6fdf/packages/cli/source-map/src/util/index.ts#L19" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<h2 id="è¿˜åŸæŠ¥é”™æºç " tabindex="-1">è¿˜åŸæŠ¥é”™æºç  <a class="header-anchor" href="#è¿˜åŸæŠ¥é”™æºç " aria-label="Permalink to &quot;è¿˜åŸæŠ¥é”™æºç &quot;">&ZeroWidthSpace;</a></h2>
<p>æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œå’±ä»¬ç¬¬ä¸€ä¸ªæ•´åˆåŠŸèƒ½å°±å¯ä»¥å®ç°äº† <strong>æ ¹æ®æŠ¥é”™èµ„æºä¿¡æ¯ï¼Œè¿˜åŸæºç å’Œè¡Œåˆ—å·</strong>ï¼Œå…ˆç»™å‡ºæ–¹æ³•çš„å®šä¹‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SourceResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * æºç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  sourceCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * æºç æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * è¡Œå·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   * åˆ—å·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * æ ¹æ®æŠ¥é”™èµ„æºä¿¡æ¯ï¼Œè·å–å¯¹åº”æºç ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æŠ¥é”™èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> line</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> è¡Œå·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> column</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> åˆ—å·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getErrorSourceResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SourceResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>åˆ©ç”¨ä¸Šé¢å®ç°çš„<code>getSourceMapFilePath</code>,é…åˆ<code>source-map</code>çš„2ä¸ªAPIå³å¯å®ç°<code>originalPositionFor</code>,<code>sourceContentFor</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs/promises'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMapURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceMapFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// sourceMap å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMapCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isHTTPSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapURL)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRemoteSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapURL).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.body)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapURL, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createSourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapCode)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£æå‡ºåŸæ¥çš„è¡Œåˆ—å·ï¼Œæºæ–‡ä»¶è·¯å¾„ç­‰ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">rest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">originalPositionFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  line,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  column</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–æºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rest.source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">rest,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sourceCode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ–¹ä¾¿ç»ˆç«¯é‡Œé¢„è§ˆç»“æœï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ª<code>printSourceResult</code>æ–¹æ³•ï¼Œå‹å¥½çš„æ‰“å°è¾“å‡ºä¸€äº›å†…å®¹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getErrorSourceResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'https://script.sugarat.top/js/tests/index.9bb0da5c.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  17596</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(printResult)</span></span></code></pre>
</div><p>ç¤ºä¾‹æ‰“å°ç»“æœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzYzNTkxODE1OQ==667635918159" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ–¹æ³•å®ç°å¦‚ä¸‹(è¯¦ç»†é‡Šä¹‰è§æ³¨é‡Š)</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> showMaxLine</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ§åˆ¶æ˜¾ç¤ºçš„è¡Œæ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> printResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SourceResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">showMaxLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sourceCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æºç æ‹†æˆæ•°ç§Ÿ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ‰“å°é”™è¯¯è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`error in  ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">column</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è®¡ç®—è¦å±•ç¤ºçš„è¡Œçš„èµ·å§‹ä½ç½®ï¼Œèµ·å§‹è¡Œå·ä¸èƒ½å°äº1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> startLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(showMaxLine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç»“æŸä½ç½®ä¸èƒ½å¤§äºæ€»è¡Œæ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> endLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(lines.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, startLine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> showMaxLine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> showCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> lines</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æˆªå–éœ€è¦å±•ç¤ºçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(startLine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, endLine)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // åŠ ä¸Šé»„è‰²è¡Œå·</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        `${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yellowStr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">startLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> idx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // é’ˆå¯¹é”™è¯¯çš„è¡Œè¿›è¡Œä¸‹åˆ’çº¿+çº¢è‰²å±•ç¤º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> line</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            ?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // ä»é”™è¯¯çš„åˆ—å·å¼€å§‹å±•ç¤º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> redStr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">underlineStr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        }`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(showCode)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ‰“å°å½©è‰²çš„åœºæ™¯æœ‰é™ï¼Œè¿™é‡Œç›´æ¥å°†éœ€è¦çš„æ•ˆæœé¢œè‰²å¯¹åº”çš„<code>ANSI Escape code</code>ä»<code>chalk</code>åº“ä¸­æˆªå–å‡ºæ¥</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzYzNDUwMzk2Ng==667634503966" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> underlineStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[4m${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[24m`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> yellowStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[33m${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[39m`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> redStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[31m${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[39m`</span></span></code></pre>
</div><p>åˆ°æ­¤ç¬¬ä¸€ä¸ªåŠŸèƒ½çš„æ ¸å¿ƒä»£ç å°±å°è£…å¥½äº†</p>
<p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/9cee3f881157199c365b0a41ababe31d2f5b6fdf/packages/cli/source-map/__test__/util.ts#L15-L27" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<h2 id="å®Œæ•´sourceç”Ÿæˆ" tabindex="-1">å®Œæ•´sourceç”Ÿæˆ <a class="header-anchor" href="#å®Œæ•´sourceç”Ÿæˆ" aria-label="Permalink to &quot;å®Œæ•´sourceç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>éƒ½çŸ¥é“é€šè¿‡<code>sourceMap</code>å¯ä»¥è·å–å®Œæ•´çš„æºç ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„éå¼€æºåº”ç”¨ï¼Œéƒ½æ˜¯å¯¹<code>sourceMap</code>æ–‡ä»¶åšäº†ç¯å¢ƒéš”ç¦»ï¼Œé˜²æ­¢æºç æ³„éœ²ã€‚</p>
<p>è¿™éƒ¨åˆ†å°±å°è£…1ä¸ªæ–¹æ³•ï¼Œ<strong>å®ç°å°†sourceMapä¸­åŒ…å«çš„æ‰€æœ‰æºæ–‡ä»¶è¾“å‡ºåˆ°æœ¬åœ°æŒ‡å®šç›®å½•</strong></p>
<p>é¦–å…ˆå®ç°1ä¸ªæ–¹æ³•ï¼Œå°†sourceMapä¸­éœ€è¦çš„ä¿¡æ¯è§£æå‡ºæ¥</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourcesBySourceMapCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sourceMapCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createSourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapCode)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">sources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      source,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      code: consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(source)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é…åˆæ–‡ä»¶æ“ä½œ(<code>fs</code>æ¨¡å—)ï¼Œå°†å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { existsSync, mkdirSync, writeFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> outPutSources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  sources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SourceItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  outPutDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'source-map-result/project'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceItem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sources) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceItem</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), outPutDir, source)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath))) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      mkdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath), { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath, code, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç¤ºä¾‹ä»£ç ä¸è¿è¡Œç»“æœå¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getRemoteSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'https://script.sugarat.top/js/tests/index.9bb0da5c.js.map'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourcesBySourceMapCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(body)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sources.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä¸ªæ–‡ä»¶'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  outPutSources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sources)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzYzOTU5NTgwOA==667639595808" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/9cee3f881157199c365b0a41ababe31d2f5b6fdf/packages/cli/source-map/__test__/util.ts#L30-L36" target="_blank" rel="noreferrer">ç¤ºä¾‹ä»£ç </a></p>
<p>åˆ°æ­¤å¸¸ç”¨çš„2ä¸ªèƒ½åŠ›çš„æ ¸å¿ƒå®ç°å°±å®Œæˆäº†ï¼Œä¸‹é¢å°†æŠŠå…¶å°è£…ä¸ºä¸€ä¸ªCLIå·¥å…·ï¼Œæ–¹ä¾¿æ¥å…¥ä½¿ç”¨</p>
<h2 id="å°è£…cli" tabindex="-1">å°è£…CLI <a class="header-anchor" href="#å°è£…cli" aria-label="Permalink to &quot;å°è£…CLI&quot;">&ZeroWidthSpace;</a></h2>
<p>åŸºäº<code>commander</code>è¿›è¡Œå®è·µ</p>
<h3 id="parseæŒ‡ä»¤" tabindex="-1">parseæŒ‡ä»¤ <a class="header-anchor" href="#parseæŒ‡ä»¤" aria-label="Permalink to &quot;parseæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>é¦–å…ˆæ˜¯æŒ‡ä»¤çš„å®šä¹‰</p>
<p>ä¸»è¦åŠŸèƒ½å°±æ˜¯å°†æŒ‡å®šçš„ <code>error js</code> èµ„æºçš„é€šè¿‡<code>sourcemap</code>è¿˜åŸå‡ºå…·ä½“çš„æŠ¥é”™æºç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // sourceUrl æ ¼å¼ &#x3C;url>[:line][:column]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'parse &#x3C;sourceUrl>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'parse error form url source'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'p'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ ‡æ˜sourceUrl æ˜¯å¦ä¸º sourceMap èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-s, --source-map'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set url source as sourceMap type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•ç‹¬è®¾ç½®è¡Œå·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-l, --line &#x3C;number>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set line number'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•ç‹¬è®¾ç½®åˆ—å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-c, --column &#x3C;number>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set column number'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å°†ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-o, --output [string]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set log output dir'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è®¾ç½®å±•ç¤ºçš„é”™è¯¯ä¿¡æ¯è¡Œæ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-n, --show-num &#x3C;number>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set show error source lines'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(parseCommand)</span></span></code></pre>
</div><p>ä¸ºä¿è¯ä¸‹é¢3ä¸ªæŒ‡ä»¤ä¸€æ ·çš„æ•ˆæœï¼Œéœ€è¦å¯¹ <strong>&lt;sourceUrl&gt;</strong> ä¸ <code>-c</code>,<code>-l</code> <strong>Option</strong>åšä¸€å±‚å¤„ç†</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">smt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> parse</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> xxx.js:24:17596</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">smt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> parse</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> xxx.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -l</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 24</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 17596</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">smt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> parse</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> xxx.js:24</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 17596</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> match</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceUrl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceUrl</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> c</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (match?.index) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ;[l, c] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceUrl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match.index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">':'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceUrl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, match.index)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æœ€ç»ˆéœ€è¦çš„è¡Œå·å’Œåˆ—å·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options.line</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options.column</span></span></code></pre>
</div><p>åç»­çš„å¤„ç†é€»è¾‘åªéœ€è¦æŠŠ<code>url</code>,<code>line</code>,<code>column</code>3ä¸ªå‚æ•°ä¼ ç»™å‰é¢å®ç°çš„<code>getErrorSourceResult</code>æ–¹æ³•å³å¯</p>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzY1NzIwMDI4OQ==667657200289" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/source-map/src/command/parse.ts" target="_blank" rel="noreferrer">æºç </a></p>
<h3 id="sourcesæŒ‡ä»¤" tabindex="-1">sourcesæŒ‡ä»¤ <a class="header-anchor" href="#sourcesæŒ‡ä»¤" aria-label="Permalink to &quot;sourcesæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>sourcesæŒ‡ä»¤å®šä¹‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sources &#x3C;sourceUrl>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'generating source files by source-map'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'s'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-s, --source-map'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set url source as sourceMap type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-o, --output [string]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set log output dir'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourcesCommand)</span></span></code></pre>
</div><p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NzY2MDI1Mjg4MA==667660252880" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æœ¬å°èŠ‚<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/source-map/src/command/sources.ts" target="_blank" rel="noreferrer">æºç </a></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™ä¸ªCLIæœ¬èº«èƒ½åŠ›æ¯”è¾ƒç®€å•ï¼Œä¾èµ–çš„æ ¸å¿ƒåº“ä¹Ÿåªæœ‰<code>source-map</code>ã€‚ä¸»è¦ç”¨äºå¼¥è¡¥ç¼ºå¤±å¹³å°è‡ªåŠ¨è§£æsource-mapèƒ½åŠ›çš„åœºæ™¯ï¼ŒååŠ©å®šä½<code>js error</code>çš„æŠ¥é”™æºç </p>
<p>åç»­å†å‡ºä¸€ç¯‡åœ¨çº¿sourcemapè§£æçš„å·¥å…·ï¼ŒåŠŸèƒ½ä¸CLIç±»ä¼¼ï¼Œä¸è¿‡æ˜¯Webç‰ˆçš„</p>
<p>CLIå®Œæ•´æºç è§<a href="https://github.com/ATQQ/tools/tree/main/packages/cli/source-map" target="_blank" rel="noreferrer">GitHub</a></p>
<h2 id="é™„å½•" tabindex="-1">é™„å½• <a class="header-anchor" href="#é™„å½•" aria-label="Permalink to &quot;é™„å½•&quot;">&ZeroWidthSpace;</a></h2>
<p>å…¶å®ƒåŒç±» Web&amp;CLI å·¥å…·</p>
<p>Web</p>
<ul>
<li><a href="https://www.hai-fe.com/decodeSourceMap" target="_blank" rel="noreferrer">decodeSourceMap</a></li>
</ul>
<p>CLI</p>
<ul>
<li><a href="https://www.npmjs.com/package/restore-source-tree" target="_blank" rel="noreferrer">restore-source-tree</a></li>
<li><a href="https://www.npmjs.com/package/source-map-tools" target="_blank" rel="noreferrer">source-map-tools</a></li>
<li><a href="https://www.npmjs.com/package/source-map-cli" target="_blank" rel="noreferrer">source-map-cli</a></li>
<li><a href="https://www.npmjs.com/package/source-map-to-source" target="_blank" rel="noreferrer">source-map-to-source</a></li>
<li><a href="https://www.npmjs.com/package/kaifu" target="_blank" rel="noreferrer">kaifu</a></li>
<li><a href="https://www.npmjs.com/package/@hl-cli/restore-code" target="_blank" rel="noreferrer">@hl-cli/restore-code</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2NzY2NTE1NzQwOQ==667665157409" length="0" type="image//mdImg/MTY2NzY2NTE1NzQwOQ==667665157409"/>
        </item>
        <item>
            <title><![CDATA[å†…è”JSå¤„ç†(ESè¯­æ³•é™çº§&å†…å®¹å‹ç¼©)]]></title>
            <link>https://www.dmsrs.org/technology/works/html-inline-js-transform.html</link>
            <guid>https://www.dmsrs.org/technology/works/html-inline-js-transform.html</guid>
            <pubDate>Sat, 22 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å½“å‰`html`åœ¨ç°ä»£å·¥ç¨‹ä¸­çš„ç°çŠ¶ï¼Œå¹¶é˜è¿°å†…è”jsä»£ç å¯èƒ½å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶ä»‹ç»ä¸€ç³»åˆ—å¤„ç†é¡µé¢å†…è”è„šæœ¬çš„æ–¹æ³•ï¼Œä»¥åŠé€šè¿‡`SWC`å¦‚ä½•è½¬æ¢ç›®æ ‡ä»£ç ï¼Œé€šè¿‡`CLIå·¥å…·å¦‚ä½•ç»„åˆè¿™äº›èƒ½åŠ›`ã€‚]]></description>
            <content:encoded><![CDATA[<h1 id="å†…è”jså¤„ç†-esè¯­æ³•é™çº§-å†…å®¹å‹ç¼©" tabindex="-1">å†…è”JSå¤„ç†(ESè¯­æ³•é™çº§&amp;å†…å®¹å‹ç¼©) <a class="header-anchor" href="#å†…è”jså¤„ç†-esè¯­æ³•é™çº§-å†…å®¹å‹ç¼©" aria-label="Permalink to &quot;å†…è”JSå¤„ç†(ESè¯­æ³•é™çº§&amp;å†…å®¹å‹ç¼©)&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼</p>
</blockquote>
<p>æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å½“å‰<code>html</code>åœ¨ç°ä»£å·¥ç¨‹ä¸­çš„ç°çŠ¶ï¼Œå¹¶é˜è¿°å†…è”jsä»£ç å¯èƒ½å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶ä»‹ç»ä¸€ç³»åˆ—å¤„ç†é¡µé¢å†…è”è„šæœ¬çš„æ–¹æ³•ï¼Œä»¥åŠé€šè¿‡<code>SWC</code>å¦‚ä½•è½¬æ¢ç›®æ ‡ä»£ç ï¼Œé€šè¿‡<code>CLIå·¥å…·å¦‚ä½•ç»„åˆè¿™äº›èƒ½åŠ›</code>ã€‚</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>å½“ä¸‹</strong>å¤§éƒ¨åˆ†ç°ä»£å‰ç«¯Webå·¥ç¨‹ä¸­ï¼ŒHTMLæ–‡ä»¶å¤§éƒ¨åˆ†éƒ½æ˜¯ä»¥<code>public/index.html</code>æˆ–<code>&lt;projectRoot&gt;/index.html</code>å­˜åœ¨</p>
<p>å…¶å†…å®¹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé€šå¸¸åƒä¸‹é¢è¿™æ ·ã€‚</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"en"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &#x3C;!-- some meta or link source --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"app"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>é¡¹ç›®é€šè¿‡æ„å»ºå·¥å…·ï¼Œå°†ç¼–å†™çš„&quot;æºç &quot;è¿›è¡Œ<code>ä¸€ç³»åˆ—æ“ä½œ</code>åè½¬æ¢æˆä¾›æµè§ˆå™¨å¯ç›´æ¥è¿è¡Œçš„js</p>
<p>åœ¨äº§ç”Ÿçš„<code>HTMLæ–‡ä»¶</code>ä¸­ä½“ç°çš„å°±æ˜¯é€šè¿‡<code>&lt;script src&gt;</code>å’Œ<code>&lt;link href&gt;</code>æ ‡ç­¾å¼•å…¥äº†æ„å»ºåçš„èµ„æº</p>
<p>å…¶ä¸­éƒ¨åˆ†æ’ä»¶ä¼šå¾€é¡µé¢ä¸­ç›´æ¥æ’å…¥<code>å†…è”çš„JSä»£ç </code>ã€‚</p>
<p>å½“ç„¶ä¹Ÿä¸æ’é™¤ä¸€äº›é¡¹ç›®ä¹Ÿä¼šä¸»åŠ¨é€šè¿‡<code>CDN</code>å¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹çš„SDKï¼Œç„¶åä¼šåœ¨æ¨¡æ¿ä¸­æ’å…¥ä¸€äº›<code>åˆå§‹åŒ–æˆ–è€…æ¿€æ´»ç›¸åº”åŠŸèƒ½ç‰¹æ€§çš„ä»£ç </code>ã€‚</p>
<p>é’ˆå¯¹ä¸Šé¢2ç§æƒ…å†µäº§ç”Ÿçš„<code>JS</code>ä»£ç ï¼Œ<code>å¤§éƒ¨åˆ†æƒ…å†µä¸‹</code>æ˜¯æ²¡æœ‰é€šè¿‡<code>babel</code>è¿›è¡Œç¼–è¯‘çš„ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›è´¨é‡é—®é¢˜ï¼ˆå…¼å®¹æ€§é—®é¢˜ä¸ºä¸»ï¼‰ã€‚</p>
<p>å¦‚æœåªæ˜¯<code>ESè¯­æ³•æ£€æŸ¥</code>ï¼Œå¯ä»¥ç”¨å‰é¢æ–‡ç« ä»‹ç»çš„<a href="https://juejin.cn/post/7148618887787970597" target="_blank" rel="noreferrer">å¢å¼ºESCheckå·¥å…·</a>è¿›è¡Œæ£€æµ‹ã€‚</p>
<p>æœ¬æ–‡å°†è¿›ä¸€æ­¥ä»‹ç»ä¸€ä¸‹æå–<code>HTML inline Code</code>çš„å¤šç§æ–¹æ³•ï¼Œç„¶åè¿›ä¸€æ­¥ä½¿ç”¨<code>SWC</code>å¯¹å†…è”è„šæœ¬è¿›è¡Œ<code>å‹ç¼©</code>ï¼Œ<code>ESè¯­æ³•è½¬æ¢é™çº§</code>ç­‰ç­‰æ“ä½œã€‚</p>
<h2 id="inlinejså†…å®¹å¤„ç†" tabindex="-1">InlineJSå†…å®¹å¤„ç† <a class="header-anchor" href="#inlinejså†…å®¹å¤„ç†" aria-label="Permalink to &quot;InlineJSå†…å®¹å¤„ç†&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”¨äºæµ‹è¯•çš„ç›®æ ‡ä»£ç å¦‚ä¸‹</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"app"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hello</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hello'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> world</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hello'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(hello,world);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>ç›®çš„æ˜¯å°†é‡Œé¢çš„<code>js code</code>å…ˆæå–å‡ºæ¥ï¼Œç„¶åå°†é‡Œé¢çš„<code>const</code>ç®€å•çš„æ›¿æ¢æˆ<code>var</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç®€å•è½¬æ¢ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> simpleConst2Var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">const </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'var '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æ­£åˆ™" tabindex="-1">æ­£åˆ™ <a class="header-anchor" href="#æ­£åˆ™" aria-label="Permalink to &quot;æ­£åˆ™&quot;">&ZeroWidthSpace;</a></h3>
<p>ææ–‡æœ¬å†…å®¹çš„å¤„ç†é¦–å…ˆæƒ³åˆ°çš„æ–¹æ³•ï¼Œ<a href="https://regexper.com/#%2F%3Cscript%3E%28%5B%5Cs%5CS%5D*%3F%29%3C%5C%2Fscript%3E%2Fg" target="_blank" rel="noreferrer">ç®€å•çš„æ­£åˆ™</a>å¦‚ä¸‹</p>
<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span>/&#x3C;script>([\s\S]*?)&#x3C;\/script>/g</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjQzNTk5MjcyMg==666435992722" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åˆ©ç”¨<code>replace</code>æ–¹æ³•ï¼Œå‡ è¡Œä»£ç å°±èƒ½æå®š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverseScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htmlCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rScriptTag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">&#x3C;script>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[\s\S]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">script></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlCode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rScriptTag, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">$1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> all.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($1, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($1))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å±€é™æ€§å°±æ˜¯æ— æ³•åŒºåˆ†å‡ºæ³¨é‡Šï¼Œå­—ç¬¦ä¸²çš„å€¼ï¼Œå‹‰å¼ºå¯ç”¨ã€‚</p>
<p>ç¤ºä¾‹ä»£ç åœ°å€:<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/inlinejs-transform/__test__/inline-code/regexp.ts" target="_blank" rel="noreferrer">inline-code/regexp.ts</a></p>
<h3 id="gogocode" tabindex="-1">GoGoCode <a class="header-anchor" href="#gogocode" aria-label="Permalink to &quot;GoGoCode&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>GoGoCode æ˜¯ä¸€ä¸ªåŸºäº AST çš„ JavaScript/Typescript/HTML ä»£ç è½¬æ¢å·¥å…·ï¼ŒAPIæ˜¯jQueryé£æ ¼ï¼ŒAPIè¿˜æ˜¯å¾ˆç®€æ´å¥½ç”¨</p>
</blockquote>
<p>å…¶ä¸­<code>HTML</code>çš„è§£æä½¿ç”¨çš„æ˜¯<a href="https://www.npmjs.com/package/hyntax-yx" target="_blank" rel="noreferrer">hyntax-yx</a>çœ‹ä¸Šå»æ˜¯ fork<a href="https://www.npmjs.com/package/hyntax" target="_blank" rel="noreferrer">hyntax</a>é‡æ–°å‘äº†ä¸ªç‰ˆ</p>
<p>å› æ­¤ç”¨<code>GoGoCode</code>åŒæ ·å¯ä»¥å¾ˆç®€å•çš„å®ç°</p>
<p>å…ˆç”ŸæˆAST</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'gogocode'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { parseOptions: { language: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } })</span></span></code></pre>
</div><p>éå†<code>&lt;script&gt;</code>èŠ‚ç‚¹ï¼Œå…¶ä¸­<code>$scriptNode</code>èŠ‚ç‚¹ç»“æ„å¦‚ä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>attr</code>æ–¹æ³•è¿›è¡Œå€¼çš„<code>å­˜å–æ“ä½œ</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">htmlAST.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`&#x3C;script>$_$&#x3C;/script>`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">$scriptNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $scriptNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content.value.content'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $scriptNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content.value.content'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(origin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjQ0OTc4NTQxMQ==666449785411" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverseScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htmlCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> $</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { parseOptions: { language: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  htmlAST.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`&#x3C;script>$_$&#x3C;/script>`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">$scriptNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $scriptNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content.value.content'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    $scriptNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content.value.content'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(origin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlAST.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">generate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä»£ç é‡å’Œä½¿ç”¨æ­£åˆ™å·®ä¸å¤šï¼Œä½†ä½¿ç”¨ASTæ“ä½œå‡†ç¡®æ€§æ›´é«˜ï¼Œå¯ç©æ€§ä¹Ÿå¼ºã€‚</p>
<p><code>hyntax</code>åªæä¾›äº†ASTä¸Tokensçš„ç”Ÿæˆï¼ŒèŠ‚ç‚¹éå†ä¸ASTå†…å®¹è½¬æ¢è¾“å‡ºç”±<a href="https://github.com/thx/gogocode/tree/main/packages/gogocode-core/src/html-core" target="_blank" rel="noreferrer">GoGoCodeå®ç°</a>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç åœ°å€:<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/inlinejs-transform/__test__/inline-code/gogocode.ts" target="_blank" rel="noreferrer">inline-code/gogocode.ts</a></p>
<h3 id="svelte" tabindex="-1">svelte <a class="header-anchor" href="#svelte" aria-label="Permalink to &quot;svelte&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p><a href="https://www.sveltejs.cn/" target="_blank" rel="noreferrer">Svelte</a> æ˜¯ä¸€ç§å…¨æ–°çš„æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–¹æ³•ã€‚ä¼ ç»Ÿæ¡†æ¶å¦‚ React å’Œ Vue åœ¨æµè§ˆå™¨ä¸­éœ€è¦åšå¤§é‡çš„å·¥ä½œï¼Œè€Œ Svelte å°†è¿™äº›å·¥ä½œæ”¾åˆ°æ„å»ºåº”ç”¨ç¨‹åºçš„ç¼–è¯‘é˜¶æ®µæ¥å¤„ç†ã€‚</p>
</blockquote>
<p><em>å½“ç„¶ä¸äº†è§£è¿™ä¸ªæ¡†æ¶ï¼Œä¹Ÿä¸å½±å“ç†è§£åç»­çš„ä»£ç ï¼Œå¯ä»¥æ¥ç€å¾€ä¸‹çœ‹</em></p>
<p>è¿™ä¸ªæ˜¯ä» <a href="https://astexplorer.net/#/gist/d08dcb5d93461b5811a254a8f9630a6f/5032128f77e49280e3fbfc4656bd9560f6ce6dec" target="_blank" rel="noreferrer">AST Explorer</a> transformç¤ºä¾‹demoä¸­çœ‹åˆ°çš„</p>
<p>çœ‹äº†ä¸€ä¸‹<a href="https://github1s.com/fkling/astexplorer/blob/HEAD/website/src/parsers/html/transformers/svelte/index.js#L35" target="_blank" rel="noreferrer">demoå®ç°ä»£ç </a></p>
<p><a href="https://github.com/sveltejs/svelte/blob/146e7a6310627d4599bb60760d573dffa5d1d2ce/src/compiler/compile/index.ts#L88" target="_blank" rel="noreferrer">sevlte/compiler</a>æä¾›äº†ç›´æ¥ç”ŸæˆASTçš„æ–¹æ³•<code>compile</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> svelte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'svelte/compiler'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> AST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> svelte.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode).ast</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> AST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.html</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjUxMjc4MTc4MQ==666512781781" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŒæ—¶æä¾›äº†ä¸€ä¸ªé¢„å¤„ç†æ–¹æ³•<code>preprocess</code>ï¼Œå¯ä»¥å®ç°<code>script</code>,<code>style</code>ä¸å…¶ä»–æ ‡ç­¾å†…å®¹çš„éå†ä¸ä¿®æ”¹ï¼Œæœ€åè¿”å›å¤„ç†åçš„ç»“æœ</p>
<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼Œå…¶è¿”å›å€¼æ˜¯<code>promise</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> svelte </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'svelte/compiler'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">svelte.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">preprocess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      code: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ops.content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>åŒæ ·æŒ‰ç…§ä¸Šé¢è¦æ±‚å®ç°<code>scriptä»£ç çš„è½¬æ¢</code>ï¼Œä»£ç å¾ˆç®€æ´</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverseScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htmlCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> svelte</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">preprocess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          code: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ops.content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç¤ºä¾‹ä»£ç åœ°å€:<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/inlinejs-transform/__test__/inline-code/svelte.ts" target="_blank" rel="noreferrer">inline-code/svelte.ts</a></p>
<h3 id="posthtml" tabindex="-1">posthtml <a class="header-anchor" href="#posthtml" aria-label="Permalink to &quot;posthtml&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p><a href="https://github.com/posthtml/posthtml" target="_blank" rel="noreferrer">PostHTML</a> æ˜¯ä¸€ä¸ªæ”¯æŒä½¿ç”¨ç”¨ JS æ’ä»¶è½¬æ¢ HTML/XML çš„åº“ã€‚æœ¬èº«åªåŒ…å«<code>HTML parser</code>, <code>HTML node tree API</code>, <code>node tree stringifier</code>ä¸‰éƒ¨åˆ†ã€‚</p>
</blockquote>
<p>æ’ä»¶å¼€å‘ä¹Ÿå¾ˆç®€å•ï¼Œå…¶å®˜æ–¹çš„<a href="https://github.com/posthtml/awesome-posthtml" target="_blank" rel="noreferrer">awesome</a>é‡Œæä¾›äº†å¾ˆå¤šç¤ºä¾‹çš„æ’ä»¶ï¼Œä¹Ÿæœ‰å¯å‚è€ƒçš„<a href="https://posthtml.org/#/api" target="_blank" rel="noreferrer">APIæ–‡æ¡£</a></p>
<p>å…ˆé€šè¿‡<a href="https://astexplorer.net/#/gist/d08dcb5d93461b5811a254a8f9630a6f/cc9ab894776ff836030a82a44bbe6794ad5c306c" target="_blank" rel="noreferrer">AST Explorer demo ç¤ºä¾‹</a>çœ‹ä¸€ä¸‹å…¶ç”Ÿæˆçš„ASTé¢è²Œ</p>
<p>å…¶ASTç»“æ„æè¿°å¾ˆæœ´ç´ </p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjUxNjA5NzE0NQ==666516097145" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹,ä¹Ÿå¾ˆç®€å•</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> posthtml, { Node } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'posthtml'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(posthtmlPlugin)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { sync: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).html</span></span></code></pre>
</div><p>è¿™é‡Œå°±ç®€å•å®ç°ä¸€ä¸‹<code>posthtmlScriptContentTransform</code></p>
<ul>
<li>åˆ©ç”¨<code>match</code>éå†<code>script</code>èŠ‚ç‚¹</li>
<li>ä½¿ç”¨ç”¨æˆ·ä¼ å…¥çš„<code>transformFn</code>å¤„ç†<code>content</code>å†…å®¹</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Node } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'posthtml'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtmlScriptContentTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tree.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (node?.content?.[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ€ç»ˆä½¿ç”¨ä»£ç å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverseScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htmlCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtmlScriptContentTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(transformFn))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { sync: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç¤ºä¾‹ä»£ç åœ°å€:<a href="https://github.com/ATQQ/tools/blob/main/packages/cli/inlinejs-transform/__test__/inline-code/posthtml.ts" target="_blank" rel="noreferrer">inline-code/posthtml.ts</a></p>
<h3 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™éƒ¨åˆ†é™¤äº†<code>æ­£åˆ™</code>å¤–ï¼Œä»‹ç»äº†3ä¸ªå¯ä»¥ç”¨æ¥æå–<code>inline js</code>åº“ï¼ˆ<code>gogocode</code>ï¼Œ<code>svelte</code>ï¼Œ<code>posthtml</code>ï¼‰</p>
<p>ä»ä¸“ä¸šç¨‹åº¦æ¥çœ‹<code>posthtml</code>æ›´åŠ åˆé€‚ï¼Œæ‹“å±•èµ·æ¥ä¹Ÿæ–¹ä¾¿ï¼Œåé¢çš„åŠŸèƒ½ä¹Ÿå°†åŸºäºå…¶ç›´æ¥å¼€å‘æ’ä»¶ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚</p>
<h2 id="ä½¿ç”¨swcå¤„ç†" tabindex="-1">ä½¿ç”¨SWCå¤„ç† <a class="header-anchor" href="#ä½¿ç”¨swcå¤„ç†" aria-label="Permalink to &quot;ä½¿ç”¨SWCå¤„ç†&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p><a href="https://swc.rs/" target="_blank" rel="noreferrer">SWC</a> æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºæ›¿æ¢babelçš„å·¥å…·ï¼ŒåŸºäºRustå®ç°ï¼Œåœ¨å•çº¿ç¨‹ä¸Šæ¯” Babel å¿«20å€ã€‚</p>
</blockquote>
<p>å‰é¢ä¸»è¦é˜è¿°äº†htmlä¸­jsä»£ç çš„æå–ï¼Œè¿™ä¸ªéƒ¨åˆ†å°±ç®€å•é˜è¿°ä¸€ä¸‹ä½¿ç”¨<code>SWC</code>å¯¹jséƒ¨åˆ†ä»£ç è¿›è¡Œ<code>ESè¯­æ³•é™çº§</code>ä¸<code>å‹ç¼©</code>ã€‚</p>
<p>ç›´æ¥åˆ©ç”¨<a href="https://swc.rs/docs/usage/core#transformfilesync" target="_blank" rel="noreferrer">transformSync</a>æ–¹æ³•å¯¹ä»£ç è¿›è¡Œè¯­æ³•é™çº§</p>
<ul>
<li><a href="https://swc.rs/docs/configuration/compilation#jscexternalhelpers" target="_blank" rel="noreferrer">jsc</a>ï¼šjsä»£ç ç¼–è¯‘ç›¸å…³é…ç½®</li>
<li><a href="https://swc.rs/docs/configuration/minification" target="_blank" rel="noreferrer">minify</a>ï¼šæ˜¯å¦å‹ç¼©</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { transformSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@swc/core'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { JscTarget } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@swc/core'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JscTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'es5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  minify</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    jsc: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      target</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    minify</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }).code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><a href="https://swc.rs/docs/usage/core#minify" target="_blank" rel="noreferrer">minifySync</a>ç›´æ¥å¯¹ä»£ç è¿›è¡Œå‹ç¼©å¤„ç†ã€‚</p>
<ul>
<li><a href="https://swc.rs/docs/configuration/minification#jscminifycompress" target="_blank" rel="noreferrer">compresså‚æ•°</a>ï¼šå¯ç”¨äºæ›´ç»†ç²’åº¦çš„æ§åˆ¶å‹ç¼©ç­–ç•¥</li>
<li><a href="https://swc.rs/docs/configuration/minification#jscminifymangle" target="_blank" rel="noreferrer">mangleå‚æ•°</a>ï¼šç»†ç²’åº¦çš„æ§åˆ¶ä»£ç æ··æ·†ç­–ç•¥</li>
</ul>
<p>ç”±äºåœ¨HTMLä¸­çš„JS ä»£ç å¯èƒ½ä¼šè¢«åç»­çš„<code>script</code>æ‰€å¼•ç”¨ã€‚æ‰€ä»¥å…³æ‰æ··æ·†ç­–ç•¥ï¼Œé¿å…å½±å“ä»£ç æ­£å¸¸å·¥ä½œ</p>
<p><strong>ä¾‹å¦‚</strong></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hello</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hello'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¼€å¯æ··æ·†åç»“æœæ˜¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { minifySync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@swc/core'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { JsMinifyOptions } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@swc/core'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> minifyCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JsMinifyOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> minifySync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    compress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mangle: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ops</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }).code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶å®ƒå‹ç¼©ç›¸å…³çš„ç»†èŠ‚å‚æ•°è¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†,å¯ä»¥çœ‹ç»“åˆæ–‡æ¡£ä»‹ç»å’Œå®˜æ–¹çš„<a href="https://swc.rs/playground" target="_blank" rel="noreferrer">playground</a>è¿›è¡Œå®è·µéªŒè¯</p>
<h2 id="posthtmlæ’ä»¶å°è£…" tabindex="-1">posthtmlæ’ä»¶å°è£… <a class="header-anchor" href="#posthtmlæ’ä»¶å°è£…" aria-label="Permalink to &quot;posthtmlæ’ä»¶å°è£…&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™é‡Œå°±å°è£…2ä¸ª<code>posthtmlSWCMinify</code>å’Œ<code>posthtmlSWCTransform</code>2ä¸ªæ–¹æ³•ï¼Œç”¨äºå‹ç¼©å’Œè½¬æ¢ä¸¤ä¸ªåœºæ™¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtmlSWCTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JscTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'es5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  minify</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tree.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (node?.content?.[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          target,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          minify</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtmlSWCMinify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JsMinifyOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tree.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (node?.content?.[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> minifyCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(node.content[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), ops)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> posthtml </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'posthtml'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtmlSWCTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { sync: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtmlSWCMinify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlCode, { sync: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span></code></pre>
</div><p>è‡³æ­¤å¯¹<code>HTML</code>ä¸­inlineJSçš„æå–ä¸ä½¿ç”¨<code>SWC</code>å¤„ç†çš„æ–¹æ³•è¿›è¡Œäº†è¾ƒä¸ºè¯¦ç»†çš„é˜è¿°ï¼Œä¸‹é¢å°±æ˜¯é€šè¿‡CLIç»„åˆèƒ½åŠ›ï¼Œç„¶åå¯¹å¤–æä¾›ä½¿ç”¨ã€‚</p>
<h2 id="cliå°è£…" tabindex="-1">CLIå°è£… <a class="header-anchor" href="#cliå°è£…" aria-label="Permalink to &quot;CLIå°è£…&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šè¿‡å°è£…ä¸€ä¸ªç®€å•çš„CLIå·¥å…·ï¼Œç›´æ¥å¯¹ç›®æ ‡HTMLè¿›è¡Œè½¬æ¢ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ çš„ä¾¿æ·ï¼Œä¹Ÿæ–¹ä¾¿çš„åœ¨ç°æœ‰å·¥ç¨‹ä¸­é›†æˆã€‚</p>
<h3 id="å‚æ•°å®šä¹‰" tabindex="-1">å‚æ•°å®šä¹‰ <a class="header-anchor" href="#å‚æ•°å®šä¹‰" aria-label="Permalink to &quot;å‚æ•°å®šä¹‰&quot;">&ZeroWidthSpace;</a></h3>
<p>ä½¿ç”¨<code>commander</code>åšå‚æ•°è§£æï¼Œå…ˆå®šä¹‰ä¸€ä¸‹æŒ‡ä»¤å’Œä¼ å‚ï¼Œå°±2ä¸ªæŒ‡ä»¤<code>transform</code>å’Œ<code>minify</code>ï¼ŒåªåŒ…å«ä¸Šè¿°æ–¹æ³•çš„åŸºæœ¬çš„ä¼ å…¥å‚æ•°</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#!/usr/bin/env node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Command } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'commander'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pkg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../package.json'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { minifyCommand, transformCommand } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './command'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> program</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pkg.version)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'transform [paths...]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'transform inlineJS code ESVersion by SWC'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'t'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '-e, --ecmaVersion [ecmaVersion]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'set transform jsc target version'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'es5'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-m, --minify'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'minify transform result'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(transformCommand)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'minify [paths...]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'minify inlineJS code by SWC'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'m'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(minifyCommand)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.argv)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjUzOTE5NjI2Ng==666539196266" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="æŒ‡ä»¤å®ç°" tabindex="-1">æŒ‡ä»¤å®ç° <a class="header-anchor" href="#æŒ‡ä»¤å®ç°" aria-label="Permalink to &quot;æŒ‡ä»¤å®ç°&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸‹é¢æ˜¯ <code>transformCommand</code> çš„ç®€å•å®ç°</p>
<ul>
<li>ä½¿ç”¨<code>fs</code>æ¨¡å—è¯»å†™æ–‡ä»¶å†…å®¹</li>
<li>ç›´æ¥é€šè¿‡<code>posthtml</code>è°ƒç”¨å‰é¢å®ç°çš„<code>posthtmlSWCTransform</code>æ’ä»¶å¯¹å†…å®¹è¿›è¡Œè½¬æ¢</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// transformCommand</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { JscTarget } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@swc/core'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> posthtml </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'posthtml'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { posthtmlSWCTransform } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../index'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  ecmaVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JscTarget</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  minify</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filesArg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filesArg) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> posthtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">posthtmlSWCTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(options.ecmaVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'es5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">options.minify))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content, { sync: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath, result, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>minifyCommand</code>çš„å®ç°æ˜¯ç±»ä¼¼çš„è¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p>
<h3 id="æ•ˆæœ" tabindex="-1">æ•ˆæœ <a class="header-anchor" href="#æ•ˆæœ" aria-label="Permalink to &quot;æ•ˆæœ&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>å®‰è£… npm i -g @sugarat/inlinejs-transform</p>
</blockquote>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ijs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> minify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __test__/test.html</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjU0MTExNzIyMw==666541117223" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ijs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> transform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __test__/test.html</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --minify</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjU0MTE5Mjk3NQ==666541192975" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ–‡ç« ä¸­æ¶‰åŠç¤ºä¾‹ä»£ç ä»¥åŠå·¥å…·å®Œæ•´æºç è§ <a href="https://github.com/ATQQ/tools/tree/main/packages/cli/inlinejs-transform" target="_blank" rel="noreferrer">GitHub</a></p>
<p>å¦‚å†…å®¹æœ‰è¯¯è¿˜è¯·è¯„è®ºåŒºæ–§æ­£ï¼Œè¯»è€…æœ‰å…¶å®ƒğŸ’¡æƒ³æ³•å¯è¯„è®º&amp;ç§ä¿¡äº¤æµæ¢è®¨ã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2NjQzNTk5MjcyMg==666435992722" length="0" type="image//mdImg/MTY2NjQzNTk5MjcyMg==666435992722"/>
        </item>
        <item>
            <title><![CDATA[NodeCLIå·¥å…·åŸç†è§£æ]]></title>
            <link>https://www.dmsrs.org/technology/works/node-cli.html</link>
            <guid>https://www.dmsrs.org/technology/works/node-cli.html</guid>
            <pubDate>Mon, 17 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ¬æ–‡å°†ä¸»è¦ä»‹ç»`CLIç›¸å…³å‘¨è¾¹çŸ¥è¯†`ï¼Œé€šè¿‡æœ¬æ–‡è¯»è€…å¯ä»¥äº†è§£åˆ°`CLIçš„åŸºæœ¬å·¥ä½œåŸç†`ï¼Œ`æ³¨å†Œå…¨å±€æŒ‡ä»¤`çš„å‡ ç§æ–¹å¼ã€`Node CLIçš„åŸºæœ¬å·¥ä½œåŸç†`ã€‚
 å‰è¨€
&gt;CLI(Command-Line]]></description>
            <content:encoded><![CDATA[<h1 id="node-cliå·¥å…·åŸç†è§£æ" tabindex="-1">Node CLIå·¥å…·åŸç†è§£æ <a class="header-anchor" href="#node-cliå·¥å…·åŸç†è§£æ" aria-label="Permalink to &quot;Node CLIå·¥å…·åŸç†è§£æ&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼</p>
</blockquote>
<p>æœ¬æ–‡å°†ä¸»è¦ä»‹ç»<code>CLIç›¸å…³å‘¨è¾¹çŸ¥è¯†</code>ï¼Œé€šè¿‡æœ¬æ–‡è¯»è€…å¯ä»¥äº†è§£åˆ°<code>CLIçš„åŸºæœ¬å·¥ä½œåŸç†</code>ï¼Œ<code>æ³¨å†Œå…¨å±€æŒ‡ä»¤</code>çš„å‡ ç§æ–¹å¼ã€<code>Node CLIçš„åŸºæœ¬å·¥ä½œåŸç†</code>ã€‚</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>CLI(Command-Line Interface) å‘½ä»¤è¡Œç•Œé¢</p>
</blockquote>
<p>æå¼€å‘çš„åŒå­¦ï¼Œæˆ–å¤šæˆ–å°‘çš„éƒ½ä¼šæ¥è§¦åˆ°è®¸å¤šçš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p>
<p>æœ‰ç”Ÿäº§åŠ›å·¥å…·ï¼Œä¹Ÿæœ‰æœ‰æ„æ€çš„å°ç©æ„ã€è‡ªåŠ¨åŒ–ä»»åŠ¡å¤„ç†ç­‰ç­‰ã€‚</p>
<p>å‘½ä»¤è¡Œå·¥å…·çš„å®‰è£…æ–¹å¼å°±å¾ˆå¤šäº†ã€‚</p>
<p><code>win</code>ä¸Šå¤§éƒ¨åˆ†æ˜¯é€šè¿‡è½¯ä»¶å®‰è£…åŒ…å®‰è£…ï¼Œå®‰è£…åŒæ—¶ä¼šé€šè¿‡<code>ç¯å¢ƒå˜é‡</code>é…ç½®ç›¸å…³æŒ‡ä»¤ã€‚</p>
<p><code>linux</code>å’Œ<code>mac</code>ä¸Šå°±æ¯”è¾ƒä¸°å¯Œäº†ï¼Œå‰è€…å¸¸ç”¨<code>yum</code>å’Œ<code>api-get</code>ã€mac ä¸Šå°±<code>brew</code>ã€‚</p>
<p>ä¹Ÿæœ‰ä½¿ç”¨<code>wget</code>å’Œ<code>curl</code>æ‹‰å–ç›¸å…³å·¥å…·çš„<code>shell</code>è„šæœ¬æ‰§è¡Œå®‰è£…ã€‚</p>
<p>è¯´äº†è¿™ä¹ˆå¤šå·¥å…·ï¼Œéƒ½ä¸æ˜¯æœ¬æ–‡è¦è®²çš„å·¥å…·ï¼Œå‰ç«¯æ¬ç –å½“ç„¶é¦–é€‰<code>node</code>ï¼Œç„¶ååŸºäº<code>npm</code>åšåŒ…çš„åˆ†å‘ã€‚</p>
<p><em>PSï¼šæ–‡ä¸­çš„ç¤ºä¾‹éƒ½ä»¥<code>mac</code>ä¸ºä¸»</em></p>
<h2 id="å¯æ‰§è¡Œshell" tabindex="-1">å¯æ‰§è¡Œshell <a class="header-anchor" href="#å¯æ‰§è¡Œshell" aria-label="Permalink to &quot;å¯æ‰§è¡Œshell&quot;">&ZeroWidthSpace;</a></h2>
<p><code>unix</code>ç³»ä¸Šå¤§éƒ¨åˆ†å¯æ‰§è¡Œæ–‡ä»¶éƒ½æ˜¯åŸºäº<code>shell</code>çš„è„šæœ¬ã€‚</p>
<p>æ¯”å¦‚éšæ‰‹å†™ä¸ª<code>hello world</code></p>
<p>æ–‡ä»¶å<code>hello</code>,å†…å®¹å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Hello world"</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkwNjg1MjMwNQ==665906852305" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ­¤æ—¶æˆ‘ä»¬ç›´æ¥æ‰§è¡Œæ˜¯ä¼šæé†’æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œæˆ‘ä»¬ä¸ºå½“å‰ç”¨æˆ·åŠ 1ä¸ªå¯æ‰§è¡Œæƒé™</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> u+x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> hello</span></span></code></pre>
</div><p>ç„¶åå†å½“å‰ç›®å½•æ‰§è¡Œï¼Œå°±çœ‹åˆ°è¾“å‡ºç»“æœäº†</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">./hello</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkwNzgzMTQ1OA==665907831458" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æ³¨å†Œå…¨å±€æŒ‡ä»¤" tabindex="-1">æ³¨å†Œå…¨å±€æŒ‡ä»¤ <a class="header-anchor" href="#æ³¨å†Œå…¨å±€æŒ‡ä»¤" aria-label="Permalink to &quot;æ³¨å†Œå…¨å±€æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸ºäº†ä½¿â€œæŒ‡ä»¤â€åœ¨å…¨å±€ä»»æ„ä½ç½®éƒ½èƒ½è¢«ä½¿ç”¨ï¼Œå°±éœ€è¦åšç›¸å…³æ“ä½œäº†ã€‚</p>
<h3 id="ç¯å¢ƒå˜é‡" tabindex="-1">ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;ç¯å¢ƒå˜é‡&quot;">&ZeroWidthSpace;</a></h3>
<p>ç›¸ä¿¡å¤§å¤šæ•°é¦–æ¬¡æ¥è§¦è¿™ä¸ªè¯çš„æœ‹å‹éƒ½åœ¨<code>win</code>ä¸Šæ·±æœ‰ä½“ä¼šã€‚è£…<code>JDK</code>ã€<code>MySQL</code>æ—¶éƒ½é¿å…ä¸äº†æœ‰é…ç½®çš„æ“ä½œã€‚</p>
<p>å¦‚æœæƒ³åœ¨å…¶å®ƒç›®å½•ç›´æ¥æ‰§è¡Œ<code>hello</code>å°±ç”Ÿæ•ˆå‘¢ï¼Ÿé‚£è¿™å°±ç¦»ä¸å¼€ç¯å¢ƒå˜é‡é…ç½®äº†</p>
<p>å’±ä»¬å…ˆçœ‹ç»ˆç«¯ç”¨çš„<code>shell</code>å·¥å…·æ˜¯ä»€ä¹ˆã€‚</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> $0</span></span></code></pre>
</div><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>zsh</code>,å…¶å®ƒçš„å¸¸è§çš„è¿˜æœ‰<code>bash</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkwODA4MDA1NA==665908080054" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç›¸åº”çš„é…ç½®æ–‡ä»¶åˆ†åˆ«æ˜¯<code>.zshrc</code>å’Œ<code>.bashrc</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkwODIzNDg1Mw==665908234853" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="aliasæŒ‡ä»¤" tabindex="-1">aliasæŒ‡ä»¤ <a class="header-anchor" href="#aliasæŒ‡ä»¤" aria-label="Permalink to &quot;aliasæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>ä½¿ç”¨ aliasæŒ‡ä»¤è®¾ç½®åˆ«å</strong></p>
<p>æŒ‡ä»¤æ ¼å¼</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">alias</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">åˆ«</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">å</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">æŒ‡ä»¤æˆ–å¯æ‰§è¡Œæ–‡ä»¶è·¯</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">å¾„</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p>æ·»åŠ å†…å®¹å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> hello</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/Users/sugar/Documents/diy-cli/hello</span></span></code></pre>
</div><p>ç«‹å³ç”Ÿæ•ˆé…ç½®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.zshrc</span></span></code></pre>
</div><h3 id="exportæŒ‡ä»¤" tabindex="-1">exportæŒ‡ä»¤ <a class="header-anchor" href="#exportæŒ‡ä»¤" aria-label="Permalink to &quot;exportæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>ä½¿ç”¨exportå‘½ä»¤æ·»åŠ æ·»åŠ ç›¸å…³ç›®å½•</strong></p>
<p>æŒ‡ä»¤æ ¼å¼</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$PATH:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">è·¯å¾„ 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">è·¯å¾„ 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">è·¯å¾„ N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p>æ·»åŠ å†…å®¹å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$PATH:/Users/sugar/Documents/diy-cli</span></span></code></pre>
</div><p>ä»¥ä¸Š2ç§æ–¹æ¡ˆéƒ½èƒ½è¾¾åˆ°ç›®æ ‡çš„æ•ˆæœ</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkwOTgzNDM0NQ==665909834345" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¦‚æœæ¯ä¸ªå·¥å…·éƒ½å•ç‹¬é…ä¸€æ¡è§„åˆ™ã€‚é‚£ä¼šå¯¼è‡´ç›¸å…³é…ç½®æ–‡ä»¶éå¸¸çš„åºå¤§ï¼Œä¹Ÿä¸æ–¹ä¾¿ç»´æŠ¤ã€‚</p>
<p>å®é™…ä¸Šæˆ‘ä»¬åœ¨ç”¨<code>npm i -g</code>å®‰è£…çš„å…¨å±€åŒ…çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æ‰‹åŠ¨é…ç½®ã€‚é‚£ä¹ˆè¿™ä¸ªæ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ã€‚è¿™ä¸ªå°±ç¦»ä¸å¼€ä¸‹é¢å°†è¦è¯´åˆ°çš„<code>ç¬¦å·é“¾æ¥</code>äº†</p>
<h2 id="ç¬¦å·é“¾æ¥" tabindex="-1">ç¬¦å·é“¾æ¥ <a class="header-anchor" href="#ç¬¦å·é“¾æ¥" aria-label="Permalink to &quot;ç¬¦å·é“¾æ¥&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p><code>è½¯é“¾æ¥</code>ç±»ä¼¼äºå¿«æ·æ–¹å¼ï¼Œå®ƒå¯ä»¥æŒ‡å‘ä»»æ„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼›ç¡¬é“¾æ¥ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„å¿«æ·æ–¹å¼ï¼Œä½†æºæ–‡ä»¶åˆ é™¤äº†ä¹Ÿä¸å½±å“<code>ç¡¬é“¾æ¥</code>ã€‚</p>
</blockquote>
<p>å…ˆé€šè¿‡<code>which npm</code>çœ‹ä¸€ä¸‹npmæ‰€åœ¨ä½ç½®</p>
<p>æ‰“å°ä¸€ä¸‹<code>$PATH</code>çš„å€¼ï¼Œå¯ä»¥çœ‹åˆ°<code>npm</code>æŒ‡ä»¤å¯¹åº”æ–‡ä»¶æ‰€åœ¨ç›®å½•å°±åœ¨å…¶ä¸­</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkxOTUwNzgzMQ==665919507831" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å±•å¼€ç›®å½•å†…å®¹å¯ä»¥çœ‹åˆ°æ–‡ä»¶ç±»å‹éƒ½æ˜¯<code>lï¼ˆè½¯è¿æ¥ï¼‰</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkxOTgwODA1OQ==665919808059" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å› æ­¤å’±ä»¬å¯ä»¥å°ç»“å‡ºæ¥ <strong>é€šè¿‡å‘å·²æ·»åŠ åˆ°$PATHå˜é‡ä¸­çš„ç›®å½•ï¼Œç›´æ¥åˆ›å»ºçŸ­é“¾å¯ä»¥å®ç°æŒ‡ä»¤çš„è‡ªåŠ¨æ³¨å†Œå…¨å±€</strong></p>
<p>ä¸‹é¢å®è·µæ¼”ç¤ºä¸€ä¸‹</p>
<h3 id="lnæŒ‡ä»¤" tabindex="-1">lnæŒ‡ä»¤ <a class="header-anchor" href="#lnæŒ‡ä»¤" aria-label="Permalink to &quot;lnæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>æŒ‡ä»¤æ ¼å¼</strong></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç¡¬é“¾æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ln</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> target</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># è½¯è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> target</span></span></code></pre>
</div><p>æ¥ç€ä¸Šé¢ä¹‹å‰çš„ä¾‹å­ï¼Œå†ä½¿ç”¨<code>export</code>å®Œæˆå¯¹ç›®å½•çš„æ·»åŠ åã€‚å’±ä»¬å†éšä¾¿å»ºç«‹ä¸ªæ–‡ä»¶<code>hello2.sh</code>è¿›è¡Œæ“ä½œ</p>
<p>å†…å®¹å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Hello world2"</span></span></code></pre>
</div><p>åˆ›å»ºä¸€ä¸ªè½¯é“¾</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">sourc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/hello.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">targe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/hello2</span></span></code></pre>
</div><p>æ“ä½œç»“æœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkyMDk5MDQ3NA==665920990474" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å‰é¢ä»£ç éƒ½æ˜¯ç®€å•çš„å†™çš„<code>shell</code>è„šæœ¬</p>
<p>å‰ç«¯å½“ç„¶æ˜¯ç¾§<code>js</code>ï¼Œå’±ä»¬æŠŠä»£ç æ”¹æˆjsã€‚</p>
<p><code>hello.js</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>æŒ‰ç…§å‰é¢çš„æ­¥éª¤ï¼Œå®Œæˆå¯æ‰§è¡Œæƒé™æ·»åŠ å’Œè½¯é“¾çš„åˆ›å»ºã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTkyMTQzOTg0Ng==665921439846" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç»“æœå¯ä»¥é¢„æµ‹æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé»˜è®¤ä¼šè¢«å½“åš<code>shell</code>è„šæœ¬è¿›è¡Œæ‰§è¡Œã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•æŒ‡å®šä¸ºä½¿ç”¨<code>node</code>å»æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Ÿ</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬ä¸‹æ–‡è¦è¯´åˆ°çš„<code>hashbang</code></p>
<h2 id="hashbang" tabindex="-1">Hashbang <a class="header-anchor" href="#hashbang" aria-label="Permalink to &quot;Hashbang&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p><code>Hashbang</code>ï¼ˆä¹Ÿç§°ä¸º<code>Shebang</code>ï¼‰æ˜¯ä¸€ä¸ªç”±äº•å·å’Œå¹å·æ„æˆçš„å­—ç¬¦åºåˆ— #!ï¼Œé€šå¸¸å‡ºç°åœ¨æ–‡ä»¶å¼€å¤´ï¼Œä¾‹å¦‚ <code>#!/usr/bin/env bash</code></p>
</blockquote>
<p>ç”¨äºæŒ‡å®šè„šæœ¬çš„è¿è¡Œç¯å¢ƒ</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬ç»™å‰é¢çš„<code>hello.js</code>å¤´éƒ¨åŠ ä¸Š<code>#!/usr/bin/env node</code> å†æ¬¡è¿è¡Œå°±æˆäº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTk3NjM5NTkyNQ==665976395925" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è‡³æ­¤åŸºæœ¬æ¸…æ¥šäº†ï¼Œå¦‚ä½•å°†1ä¸ª<code>js</code>è„šæœ¬ä¾¿æ·çš„æ³¨å†Œä¸º1ä¸ªå…¨å±€å¯æ‰§è¡ŒæŒ‡ä»¤</p>
<h2 id="node-cli" tabindex="-1">Node CLI <a class="header-anchor" href="#node-cli" aria-label="Permalink to &quot;Node CLI&quot;">&ZeroWidthSpace;</a></h2>
<p><code>node</code>å®˜é…åŒ…ç®¡ç†å·¥å…·<code>npm</code>ï¼Œé€šå¸¸æ¯ä¸ªé¡¹ç›®ä¸­æœ‰ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„ä¸€äº›ä¿¡æ¯æˆ–è€…åŒ…å«é¡¹ç›®ç›¸å…³çš„é…ç½®å†…å®¹</p>
<h3 id="æŒ‡ä»¤æ³¨å†Œ" tabindex="-1">æŒ‡ä»¤æ³¨å†Œ <a class="header-anchor" href="#æŒ‡ä»¤æ³¨å†Œ" aria-label="Permalink to &quot;æŒ‡ä»¤æ³¨å†Œ&quot;">&ZeroWidthSpace;</a></h3>
<p>å…¶ä¸­<code>bin</code>å±æ€§ç”¨äºè®¾ç½®<code>æŒ‡ä»¤åç§°</code>å’Œ<code>æ‰§è¡Œè„šæœ¬æ‰€åœ¨ä½ç½®</code></p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"pkgName"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "bin"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "command"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"exec/filepath.js"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä½¿ç”¨<code>npm install</code>å®‰è£…ä¾èµ–ï¼Œä¼šæ ¹æ®<code>bin</code>ä¸­çš„æè¿°ï¼Œåˆ›å»º1ä¸ª<code>command</code>åˆ°<code>exec/filepath.js</code>çš„è½¯é“¾</p>
<p>è½¯é“¾æ‰€åœ¨ç›®å½•åŒºåˆ«äºæ˜¯å¦æ˜¯<code>global</code>å®‰è£…</p>
<p>è¿™ä¸ªç›®å½•å¯ä»¥é€šè¿‡<code>npm bin</code>æŒ‡ä»¤æŸ¥çœ‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NTk3NzgzMzUyOQ==665977833529" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å…¨å±€è·¯å¾„å’Œå‰é¢ä½¿ç”¨ <code>which npm</code>è·å–çš„ä¸€è‡´ï¼Œå½“å‰é¡¹ç›®çš„è·¯å¾„å³åœ¨<code>node_modules/.bin</code>ä¸­</p>
<p>å¦‚æœæ˜¯æœ¬åœ°å¼€å‘CLIæ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>npm link</code>æŒ‡ä»¤æ ¹æ®<code>bin</code>æè¿°ä¿¡æ¯ï¼Œè‡ªåŠ¨åˆ›å»ºè½¯é“¾åˆ°<code>npm bin</code>æ‰€ç¤ºçš„ç›®å½•ä¸­ï¼Œé€šè¿‡<code>-g</code>å‚æ•°åŒºåˆ«æ˜¯å¦æ˜¯å…¨å±€</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># é¡¹ç›®å·¥ä½œç›®å½•ä¸‹æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span></span></code></pre>
</div><h3 id="å‘½ä»¤è¡Œå‚æ•°" tabindex="-1">å‘½ä»¤è¡Œå‚æ•° <a class="header-anchor" href="#å‘½ä»¤è¡Œå‚æ•°" aria-label="Permalink to &quot;å‘½ä»¤è¡Œå‚æ•°&quot;">&ZeroWidthSpace;</a></h3>
<p>å‰é¢ä¸»è¦éƒ½åœ¨å›´ç»•å‘½ä»¤å±•å¼€ä»‹ç»ã€‚è¦å®ç°å·¥å…·çš„ä¸°å¯ŒåŠŸèƒ½ç¦»ä¸å¼€å‚æ•°çš„ç»„åˆï¼Œæœ¬å°èŠ‚å°±ä»‹ç»ä¸‹<code>Node</code>é‡Œå¦‚ä½•å¤„ç†<code>Command</code>ä¸<code>Options</code>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>process.argv</code>æ–¹æ³•è·å–åˆ°è¿è¡Œæ—¶çš„ å‘½ä»¤è¡Œå…¥å‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.argv);</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjAxMzEwMTkzNQ==666013101935" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å„ä½ç½®å‚æ•°é‡Šä¹‰</p>
<ul>
<li><code>0</code>ï¼šNodeå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨è·¯å¾„</li>
<li><code>1</code>ï¼šæ‰§è¡Œçš„jsè„šæœ¬è·¯å¾„</li>
<li><code>&gt;1</code>ï¼šç”¨æˆ·è¿è¡Œæ—¶ä¼ å…¥çš„å‚æ•°</li>
</ul>
<p>é€šè¿‡è¿™äº›å‚æ•°ï¼Œå°±èƒ½åŒºåˆ†å‡ºç”¨æˆ·è¦æ‰§è¡Œçš„è¡Œä¸º</p>
<p>å½“ç„¶åœ¨å®é™…å¼€å‘ä¸­å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œéƒ½ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å»è§£æ<code>å‘½ä»¤è¡Œå‚æ•°</code>ï¼Œæ¥é™ä½ä»£ç çš„å¤æ‚åº¦ï¼Œæé«˜å¯è¯»æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>commander</code>çš„ä¾‹å­</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#!/usr/bin/env node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'commander'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> program</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pkg.version)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello [paths...]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello world demo'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-p, --pkg &#x3C;path>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set package.json path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ğŸ˜„ğŸ˜„ğŸ˜„'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(paths);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(options);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">program.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.argv)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjAxNDgwMjQ1MQ==666014802451" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¾…åŠ©å¤„ç†<code>å‚æ•°</code>ï¼Œå·²ç»éå¸¸å®Œå–„äº†</p>
<p>é™¤äº†è€ç‰Œçš„<a href="https://www.npmjs.com/package/commander" target="_blank" rel="noreferrer">commander</a>ä¹‹å¤–è¿˜æœ‰å…¶å®ƒçš„ç›¸åŒä½œç”¨çš„åº“ï¼Œè¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†ã€‚</p>
<h3 id="å½©è‰²æ‰“å°" tabindex="-1">å½©è‰²æ‰“å° <a class="header-anchor" href="#å½©è‰²æ‰“å°" aria-label="Permalink to &quot;å½©è‰²æ‰“å°&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªå¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œå¤§éƒ¨åˆ†CLIæ‰“å°ç»“æœéƒ½æ˜¯<code>äº”é¢œå…­è‰²</code>çš„</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '[36mhello  world[39m'</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjAxNjQ3NTM3OA==666016475378" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç›¸å…³çŸ¥è¯†ç‚¹æ˜¯<code>ANSI Escape code</code>ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´æ˜äº†ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œä¹Ÿå¾ˆå°‘ç›´æ¥å†™è¿™ç§åŸå§‹çš„æ•°å€¼ã€‚é€šå¸¸ä¼šä½¿ç”¨<a href="https://www.npmjs.com/package/chalk" target="_blank" rel="noreferrer">chalk</a>è¿™ä¸ªåº“è¾…åŠ©ï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªé¢œè‰²å¯¹åº”ä»£ç å¦‚ä¸‹ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Chalk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'chalk'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cyan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello world'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span></code></pre>
</div><p>æ¸å˜è‰²æ‰“å°å°±å¸¸ç”¨<a href="https://www.npmjs.com/package/gradient-string" target="_blank" rel="noreferrer">gradient-string</a>è¿™ä¸ªåº“</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> gradient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'gradient-string'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cyan'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'pink'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Hello world!'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjAxNzA5NTYwOQ==666017095609" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç®€å•ä¸¤è¡Œä»£ç æ•ˆæœå°±å‡ºæ¥äº†</p>
<h3 id="ç»ˆç«¯äº¤äº’" tabindex="-1">ç»ˆç«¯äº¤äº’ <a class="header-anchor" href="#ç»ˆç«¯äº¤äº’" aria-label="Permalink to &quot;ç»ˆç«¯äº¤äº’&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ä½¿ç”¨ ä¾‹å¦‚<code>Vue CLI</code> æ­¤ç±»å·¥å…·è¿›è¡Œé¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šæœ‰<code>è¾“å…¥</code>ï¼Œ<code>å•é€‰</code>ï¼Œ<code>å¤šé€‰</code>ç­‰äº¤äº’æ“ä½œã€‚</p>
<p><em>ç›¸å…³åŸç†æ¶‰åŠå†…å®¹å¤ªâ€œæŠ½è±¡â€ï¼Œç¯‡å¹…è¾ƒå¤§ï¼Œåç»­é€šä¿—ç²¾ç®€äº†å†åšåˆ†äº«</em></p>
<p>å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“å°±æ˜¯<a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="noreferrer">inquirer</a>è¿™ä¸ªåº“</p>
<p>ä¸‹é¢æ˜¯ç®€å•<code>checkbox</code>ç¤ºä¾‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> inquirer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inquirer'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inquirer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">prompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'checkbox'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ°´æœé€‰æ‹©'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fruits'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            choices: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ğŸŒ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ğŸ‰'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ğŸ‡'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">answers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(answers);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NjAyMDU3NDQzOQ==666020574439" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ¬æ–‡æ²¡æœ‰é˜è¿°éå¸¸æ·±å¥¥çš„çŸ¥è¯†ç‚¹ï¼Œåªæ¶‰åŠæ—¥å¸¸çš„ä¸€äº›<code>åŸºæ“</code>ï¼Œæœ‰åŠ©äºè¯»è€…äº†è§£Node CLI èƒŒåçš„å·¥ä½œåŸç†ã€‚</p>
<p>å¦‚å†…å®¹æœ‰ä¸å¦¥ä¹‹å¤„ï¼Œå¯ä»¥è¯„è®ºåŒºäº¤æµï¼›æœ‰æ„Ÿå…´è¶£å¸Œæœ›æ·±å…¥äº†è§£çš„çŸ¥è¯†ç‚¹ä¹Ÿå¯è¯„è®ºåŒº@ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹ä»£ç ç§»æ­¥=&gt;<a href="https://github.com/ATQQ/tools/tree/main/packages/demos/diy-cli" target="_blank" rel="noreferrer">Github</a></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2NTkwNjg1MjMwNQ==665906852305" length="0" type="image//mdImg/MTY2NTkwNjg1MjMwNQ==665906852305"/>
        </item>
        <item>
            <title><![CDATA[Macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š]]></title>
            <link>https://www.dmsrs.org/technology/learn/yanglegeyang.html</link>
            <guid>https://www.dmsrs.org/technology/learn/yanglegeyang.html</guid>
            <pubDate>Mon, 19 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ€è¿‘è¿™æ¸¸æˆæ˜¯ç«å¾—ä¸è¡Œï¼Œç¡å‰ç©å‡ æŠŠï¼Œå‡ å¤©äº†ä»æœªé€šè¿‡ã€‚é‚£åªèƒ½ä¸Šç§‘æŠ€äº†ã€‚ã€‚ã€‚
 å‰è¨€
çœ‹ç½‘ä¸Šå¤§éƒ¨åˆ†æ˜¯ Windows å¾®ä¿¡å°æ¸¸æˆçš„æŠ“åŒ…æ•™ç¨‹é€šå…³æ–‡ç« ï¼Œå› ä¸ºMacå¾®ä¿¡ä¸æ”¯æŒå°æ¸¸æˆï¼ˆå°´å°¬äº†ã€‚ï¼‰
å¯¹äºçœŸæœºæŠ“åŒ…çš„è¯ï¼Œ]]></description>
            <content:encoded><![CDATA[<h1 id="macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š" tabindex="-1">Macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š <a class="header-anchor" href="#macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š" aria-label="Permalink to &quot;Macä¸ŠæŠ“åŒ…ç§’é€šå…³ç¾Šäº†ä¸ªç¾Š&quot;">&ZeroWidthSpace;</a></h1>
<p>æœ€è¿‘è¿™æ¸¸æˆæ˜¯ç«å¾—ä¸è¡Œï¼Œç¡å‰ç©å‡ æŠŠï¼Œå‡ å¤©äº†ä»æœªé€šè¿‡ã€‚é‚£åªèƒ½ä¸Šç§‘æŠ€äº†ã€‚ã€‚ã€‚</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>çœ‹ç½‘ä¸Š<strong>å¤§éƒ¨åˆ†æ˜¯ Windows å¾®ä¿¡å°æ¸¸æˆ</strong>çš„æŠ“åŒ…æ•™ç¨‹é€šå…³æ–‡ç« ï¼Œå› ä¸ºMacå¾®ä¿¡ä¸æ”¯æŒå°æ¸¸æˆï¼ˆå°´å°¬äº†ã€‚ï¼‰</p>
<p>å¯¹äºçœŸæœºæŠ“åŒ…çš„è¯ï¼Œé«˜ç‰ˆæœ¬Androidé…ç½®CAå¤ªéº»çƒ¦ï¼ˆRootï¼‰ï¼Œç›¸ä¿¡ å¤§éƒ¨åˆ†éƒ½æ˜¯10å·¦å³çš„å®‰å“</p>
<p>æ‰‹é‡Œåªæœ‰å°Macï¼Œé‚£å’±å°±ç›´æ¥ç”¨ Mac é…å®‰å“æ¨¡æ‹Ÿå™¨æå®šæŠ“åŒ…ï¼ˆ<code>Whistle</code> + <code>MuMu</code>ï¼‰</p>
<p>PSï¼šæ–‡ä¸­æœ‰æœ€ç»ˆæ¼”ç¤ºè§†é¢‘</p>
<h2 id="å·¥å…·ä»‹ç»-ä½¿ç”¨" tabindex="-1">å·¥å…·ä»‹ç»&amp;ä½¿ç”¨ <a class="header-anchor" href="#å·¥å…·ä»‹ç»-ä½¿ç”¨" aria-label="Permalink to &quot;å·¥å…·ä»‹ç»&amp;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="whistle" tabindex="-1">Whistle <a class="header-anchor" href="#whistle" aria-label="Permalink to &quot;Whistle&quot;">&ZeroWidthSpace;</a></h3>
<p><a href="https://github.com/avwo/whistle" target="_blank" rel="noreferrer">whistle</a>ï¼Œæ˜¯åŸºäº Node å®ç°çš„è·¨å¹³å°æŠ“åŒ…è°ƒè¯•å·¥å…·</p>
<p>å¯¹å’±å‰ç«¯åŒå­¦æ¯”è¾ƒå‹å¥½ï¼Œå®‰è£…é…ç½®éƒ½å¾ˆç®€å•</p>
<p>å®‰è£…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> whistle</span></span></code></pre>
</div><p>å¯åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> start</span></span></code></pre>
</div><p>è®¿é—® <code>http://localhost:8899/#network</code> å³å¯çœ‹åˆ°</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjE2NzMwMg==663566167302" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç„¶åå°±æ˜¯é…ç½®CAè¯ä¹¦ï¼Œå‚ç…§<a href="http://wproxy.org/whistle/webui/https.html" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£: Macå®‰è£…æ ¹è¯ä¹¦</a>ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼ˆCVï¼‰ï¼Œåªæœ‰å‡ ä¸ªæ­¥éª¤1åˆ†é’Ÿå°±èƒ½å®Œæˆé…ç½®ã€‚</p>
<p>è·å–ä¸€ä¸‹ipï¼Œåé¢ä¼šç”¨åˆ°</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">172.30.43.170</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjIyNjg3MQ==663566226871" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="mumu" tabindex="-1">MuMu <a class="header-anchor" href="#mumu" aria-label="Permalink to &quot;MuMu&quot;">&ZeroWidthSpace;</a></h3>
<p><a href="https://mumu.163.com/mac/index.html" target="_blank" rel="noreferrer">MuMuæ¨¡æ‹Ÿå™¨</a> ç½‘æ˜“å‡ºå“çš„å®‰å“æ¨¡æ‹Ÿå™¨ï¼ˆAndroid6ï¼‰ï¼Œåœ¨Macä¸Šè¿è¡Œç¨³å®šï¼Œç”¨æ¥å¨±ä¹æˆ–è€…å¼€å‘è°ƒè¯•éƒ½è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿</p>
<p>å®‰è£…å°±æ˜¯å®˜ç½‘ä¸‹è½½ï¼Œä¸€é¡¿ä¸‹ä¸€æ­¥å°±è¡Œï¼Œä¸‹é¢ä»‹ç»æ¨¡æ‹Ÿå™¨ä¸­çš„é…ç½®ï¼ˆå½“ç„¶å¤§å®¶è£…å®ŒåæŠŠå¾®ä¿¡å®‰è£…å¹¶ç™»å½•ä¸Šï¼‰</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjQ3NjE0NA==663566476144" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç™»å½•å¾®ä¿¡åï¼Œå’±å°±å¼€å§‹é…ç½®CAè¯ä¹¦</p>
<p>å…ˆé…ç½®æ¨¡æ‹Ÿå™¨ç½‘ç»œï¼Œæ·»åŠ ä»£ç†ï¼ŒIPå°±æ˜¯å’±ä»¬å‰é¢è·å–çš„æœ¬æœºip</p>
<p>é•¿æŒ‰Wifiå  =&gt; ä¿®æ”¹ç½‘ç»œ =&gt; ä»£ç†ï¼ˆæ‰‹åŠ¨ï¼‰</p>
<p>è¾“å…¥æœ¬æœºipï¼Œç«¯å£<code>8899</code>ï¼Œwhistleä½¿ç”¨</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjY4ODc0Ng==663566688746" alt="å›¾ç‰‡" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjU0MzE4OQ==663566543189" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä½¿ç”¨æµè§ˆå™¨è®¿é—® <code>rootca.pro</code> å®‰è£…CAè¯ä¹¦</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU4NjA4MjIzNQ==663586082235" alt="å›¾ç‰‡" loading="lazy"></p>
<p>é…ç½®å®Œæ¯•ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå’±ä»¬æ‰“å¼€ç¾Šäº†ä¸ªç¾Šå°±çœ‹è§ç½‘ç»œè¯·æ±‚äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NzAxMDc0MQ==663567010741" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æ–¹æ¡ˆ1-ä¿®æ”¹å…³å¡æ•°æ®" tabindex="-1">æ–¹æ¡ˆ1ï¼šä¿®æ”¹å…³å¡æ•°æ® <a class="header-anchor" href="#æ–¹æ¡ˆ1-ä¿®æ”¹å…³å¡æ•°æ®" aria-label="Permalink to &quot;æ–¹æ¡ˆ1ï¼šä¿®æ”¹å…³å¡æ•°æ®&quot;">&ZeroWidthSpace;</a></h2>
<p>å’±æŠŠç¬¬äºŒå…³çš„æ•°æ®æ”¹æˆç¬¬ä¸€å…³ï¼Œäº«å—æ¸¸æˆçš„ä¹è¶£</p>
<p>ç‚¹å‡»åŠ å…¥ç¾Šç¾¤ï¼ˆå¼€å§‹æ¸¸æˆï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ¥å£  /maps/xxxx.txt</p>
<p>â€PS:å¦‚æœçœ‹åˆ°çš„æ˜¯ä¸€ä¸ªå°±æ“ä½œåˆ é™¤ç¾Šäº†ä¸ªç¾Šå°ç¨‹åºï¼Œé‡æ–°æ‰“å¼€â€œ</p>
<p>è¿”å›çš„å°±æ˜¯æ¸¸æˆåœ°å›¾æ•°æ®</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2ODA2MDg4MQ==663568060881" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¥½å®¶ä¼™ï¼šç¬¬äºŒå…³æ¯”ç¬¬ä¸€å…³çš„æ•°æ®å¤šäº†ä¸æ˜¯ç‚¹å§ç‚¹</p>
<p>ä¸‹é¢å¼€å§‹ä¸€é¡¿æ“ä½œä¿®æ”¹å…³å¡æ•°æ®</p>
<ol>
<li>å¤åˆ¶ç¬¬ä¸€å…³çš„æ•°æ®ï¼Œæ·»åŠ åˆ°whistle Values é¢æ¿</li>
</ol>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2OTM2OTcyNw==663569369727" alt="å›¾ç‰‡" loading="lazy"></p>
<ol start="2">
<li>æ·»åŠ è½¬å‘è§„åˆ™ï¼Œåœ¨whistle Rules é¢æ¿æ“ä½œ</li>
</ol>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">^cat-match-static.easygame2021.com/maps/***.txt$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> resBody://{ç¾Š1}</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2OTk5OTIxNQ==663569999215" alt="å›¾ç‰‡" loading="lazy"></p>
<ol start="3">
<li>åˆ é™¤å°æ¸¸æˆé‡æ–°è¿›å…¥</li>
</ol>
<p>â€ç¾Šäº†ä¸ªç¾Šâ€œä¼šä½¿ç”¨å·²ç»æ‹‰å–çš„å…³å¡æ•°æ®ï¼Œä¸ä¼šé‡å¤è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦åˆ é™¤ï¼Œé‡æ–°è¿›å…¥</p>
<p>å†æ¬¡æ‰“å¼€å³å¯çœ‹è§ï¼Œ2å…³éƒ½æ˜¯ç”¨çš„å’±ä»¬ä¿®æ”¹åçš„æ•°æ®</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2OTczNTA0Mg==663569735042" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¸‹é¢æ˜¯æ¼”ç¤ºå½•å±
<video controls style="width:100%;" src="https://img.cdn.sugarat.top/mdImg/MTY2MzU4MTkxODU3Mw==ç¾Šäº†ä¸ªç¾Š.mp4"></video></p>
<h2 id="æ–¹æ¡ˆ2-ç›´æ¥è°ƒç”¨æˆåŠŸæ¥å£" tabindex="-1">æ–¹æ¡ˆ2ï¼šç›´æ¥è°ƒç”¨æˆåŠŸæ¥å£ <a class="header-anchor" href="#æ–¹æ¡ˆ2-ç›´æ¥è°ƒç”¨æˆåŠŸæ¥å£" aria-label="Permalink to &quot;æ–¹æ¡ˆ2ï¼šç›´æ¥è°ƒç”¨æˆåŠŸæ¥å£&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><s>æ¥å£1ï¼š<code>https://cat-match.easygame2021.com/sheep/v1/game/game_over?rank_score=1&amp;rank_state=1&amp;rank_time=40&amp;rank_role=1&amp;skin=1</code></s> è¿‡äº†ä¸€å¤©æ¢æ¥å£äº†</li>
<li>æ¥å£2ï¼šPOST <a href="https://cat-match.easygame2021.com/sheep/v1/game/game_over_ex" target="_blank" rel="noreferrer">https://cat-match.easygame2021.com/sheep/v1/game/game_over_ex</a></li>
<li>é‰´æƒï¼šrequest header ä¸Šçš„ t å‚æ•°ï¼Œæ‰’æ‹‰ä¸‹æ¥å°±èƒ½ç”¨
<img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NzI2NzkzNA==663567267934" alt="å›¾ç‰‡" loading="lazy"></li>
</ul>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU4MjE5MjQwNw==663582192407" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä½¿ç”¨ whistle ç›´æ¥å‘èµ·è¯·æ±‚</p>
<p>é€‰æ‹©ç›®æ ‡è¯·æ±‚
<img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU4MjM5Nzk2OQ==663582397969" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¿®æ”¹å‚æ•°ï¼Œç‚¹å‡»å³ä¸Šè§’å°é£æœºå‘èµ·è¯·æ±‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MzU4NjIyMjcyNQ==663586222725" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>Whistle è¿™ä¸ªå·¥å…·çœŸçš„å¾ˆå¥½ç”¨ï¼Œå†æ¬¡å®‰åˆ©ä¸€ä¸‹</p>
<p>å¦‚æœä¸Šè¿°æ–¹æ³•æœ‰é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµ</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2MzU2NjE2NzMwMg==663566167302" length="0" type="image//mdImg/MTY2MzU2NjE2NzMwMg==663566167302"/>
        </item>
        <item>
            <title><![CDATA[ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°]]></title>
            <link>https://www.dmsrs.org/technology/works/escheck.html</link>
            <guid>https://www.dmsrs.org/technology/works/escheck.html</guid>
            <pubDate>Mon, 19 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[# ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°
> æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼
## å‰è¨€

2022äº†ï¼Œå¤§å®¶åšçš„é¢å‘Cç«¯çš„äº§å“ï¼ˆWebï¼Œå°ç¨‹åºï¼Œå…¶å®ƒè·¨ç«¯æ–¹æ¡ˆï¼‰ï¼Œæ¶‰åŠJSäº§ç‰©çš„è¿˜æ˜¯é¿ä¸å¼€å…¼å®¹æ€§çš„è¯é¢˜ï¼ˆå³ä½¿IEå·²å®˜å®£åœæ­¢æ”¯æŒï¼‰

ä½†å°±ç›®å‰çœ‹æ¥è¿™ä¸ªåœæ­¢ç»´æŠ¤è¿˜æ˜¯é¿å…ä¸äº†å¤§å®¶åšå¼€å‘è¿˜æ˜¯è¦è€ƒè™‘å…¼å®¹ä½ç«¯æœºï¼Œç”šè‡³`IE11`

é’ˆå¯¹jsç›®å‰é€šå¸¸çš„æ‰‹æ®µéƒ½æ˜¯é€šè¿‡å·¥å…·å¯¹jsè¿›è¡Œè¯­æ³•é™çº§è‡³ ES5ï¼ŒåŒæ—¶å¼•å…¥å¯¹åº”çš„ polyfillï¼ˆå«ç‰‡ï¼‰

å·¥å…·é¦–é€‰è¿˜æ˜¯è€ç‰Œ [Babel](https://babeljs.io/)ï¼Œå½“ç„¶ç°åœ¨è¿˜æœ‰ [SWC](https://swc.rs/) è¿™ä¸ªå†‰å†‰å‡èµ·çš„æ–°æ˜Ÿ

ç»è¿‡ä¸€é¡¿æ“ä½œä¸ºé¡¹ç›®é…ç½® Babel ä¹‹åï¼Œä¸ºäº†ä¿è¯äº§ç‰©ä¸å‡ºç° ES5 ä¹‹å¤–çš„è¯­æ³•ï¼Œé€šå¸¸éƒ½ä¼šæ­é…ä¸€ä¸ª Check å·¥å…·å»æ£€æµ‹äº§ç‰©æ˜¯å¦ç¬¦åˆè¦æ±‚

æœ¬æ–‡å°†é˜è¿°å¸‚é¢ä¸Šå·²æœ‰å·¥å…·çš„`å®ç°åŸç†`ï¼Œ`åŠŸèƒ½å¯¹æ¯”`ï¼Œæœ€å`å®ç°å¢å¼ºå‹çš„es-check`ï¼Œæä¾› CLI å’Œ Lib ä¸¤ç§ä½¿ç”¨æ–¹å¼

ä¸‹é¢å…ˆåˆ†åˆ«ä»‹ç»ä¸€ä¸‹ç¤¾åŒºç‰ˆçš„[es-check](https://github.com/yowainwright/es-check)å’Œæ»´æ»´ç‰ˆçš„[@mpxjs/es-check](https://github.com/mpx-ecology/mpx-es-check)å®ç°åŸç†ï¼Œæœ€åå†å®ç°ä¸€ä¸ªé›†å¤§æˆè€…

## es-check
å…ˆçœ‹ä¸€ä¸‹å…¶æ•ˆæœï¼Œä¸‹é¢æ˜¯ç”¨äºæµ‹è¯•çš„ä»£ç 
```js
// test.js
var str = 'hello'
var str2 = 'world'

const varConst = 'const'
let varLet = 'let'
const arrFun = () => {
    console.log('hello world');
}
```
```sh
npx es-check es5 testProject/**/*.js
```
![å›¾ç‰‡](https://img.cdn.sugarat.top/mdImg/MTY2NDAyODU1NTI3OA==664028555278)

å¯ä»¥çœ‹åˆ°å…¶æŠ¥é”™ä¿¡æ¯æ¯”è¾ƒç®€å•ï¼Œåªè¾“å‡ºäº†ä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªESè¯­æ³•é—®é¢˜`const`,ç„¶åå¯¹åº”çš„æ˜¯è¡Œæ•°å’Œå…·ä½“æ–‡ä»¶è·¯å¾„

æˆ‘ä»¬å†æŠŠè¿™ä¸ªæµ‹è¯•æ–‡ä»¶`æ„å»ºå‹ç¼©æ··æ·†ä¸€ä¸‹`(æ¨¡æ‹Ÿbuildäº§ç‰©)

```sh
npx tsup __test__/testProject/js/index.js --sourcemap -d __test__/testProject/dist --minify
```
é€šè¿‡ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåªè¯´æœ‰è§£æé—®é¢˜ï¼Œå¹¶æœªå‘ŠçŸ¥æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åæœ‰å¯¹åº”çš„è¡Œåˆ—æ•°

![å›¾ç‰‡](https://img.cdn.sugarat.top/mdImg/MTY2NDAyOTcwMjg4Ng==664029702886)

å¦‚æœæœ‰`sourcemap`é‚£ä¹ˆæˆ‘ä»¬æš‚ä¸”æ˜¯å¯ä»¥é€šè¿‡[source-map](https://www.npmjs.com/package/source-map)è¿™ä¸ªåº“è§£æä¸€ä¸‹ï¼Œä»¥ä¸Šé¢çš„æŠ¥é”™ä¸ºä¾‹
```ts
// npx esno source-map.ts
import sourceMap from 'source-map'
import fs from 'fs'
import path from 'path'

const file = path.join(__dirname, 'testProject/dist/index.js.map')
const lineNumber = 1
const columnNumber = 45

;(async () => {
  const consumer = await new sourceMap.SourceMapConsumer(
    fs.readFileSync(file, 'utf-8')
  )
  const sm = consumer.originalPositionFor({
    column: columnNumber,
    line: lineNumber
  })
  // å¯¹åº”æ–‡ä»¶çš„æºç 
  const content = consumer.sourceContentFor(sm.source!)
  // é”™è¯¯è¡Œçš„ä»£ç 
  const errCode = content?.split(/\r?\n/g)[sm.line! - 1]
  console.log(errCode)
})()
```
æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„é”™è¯¯ä»£ç 

![å›¾ç‰‡](https://img.cdn.sugarat.top/mdImg/MTY2NDAzMjI5MTA1Mw==664032291053)

### åŸç†åˆ†æ
æ‰“å¼€[æºç ](https://github.com/yowainwright/es-check/blob/master/index.js)å¯ä»¥çœ‹åˆ°å®ç°éå¸¸ç®€å•ï¼Œå…³é”®ä¸è¿‡100è¡Œã€‚å¯ä»¥æ€»ç»“ä¸º3æ­¥éª¤

1. ä½¿ç”¨ [fast-glob](https://www.npmjs.com/package/fast-glob) è·å–ç›®æ ‡æ–‡ä»¶
2. ä½¿ç”¨ [acorn](https://github.com/acornjs/acorn/tree/master/acorn) è§£ææºç ç”Ÿå±‚ASTï¼Œå¹¶æ•è·è§£æé”™è¯¯
3. åˆ¤æ–­æ˜¯å¦å­˜åœ¨è§£æé”™è¯¯ï¼Œæœ‰å°±æ‰“å°

`acorn` æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ js è§£æåº“ï¼Œå¯ä»¥ç”¨äºASTçš„ç”Ÿæˆä¸CRUDæ“ä½œï¼Œå…¶åŒ…å«1ä¸ª `ecmaVersion` å‚æ•°ç”¨äºæŒ‡å®šè¦è§£æçš„ `ECMAScript` ç‰ˆæœ¬ã€‚`es-check`æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§

```ts
import * as acorn from 'acorn'

try {
  acorn.parse(`const a = 'hello'`, {
    ecmaVersion: 5,
    silent: true
    // sourceType: 'module'
    // allowHashBang:true
  })
} catch (err) {
  // The keyword 'const' is reserved (1:0)
  console.log(err)
  // err é™¤äº†ç»§æ‰¿å¸¸è§„ Error å¯¹è±¡ï¼ŒåŒ…å« stack å’Œ message ç­‰å†…å®¹å¤–ï¼Œè¿˜åŒ…å«å¦‚ä¸‹ä¿¡æ¯
  // {
  //   pos: 0,
  //   loc: Position { line: 1, column: 0 },
  //   raisedAt: 7
  // }
}
```

ä¸‹é¢æ˜¯`es-check`çš„ç²¾ç®€å®ç°ï¼Œå®Œæ•´æºç è§ [Github](https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/es-check.ts)

```ts
// npx esno es-check.ts
import fg from 'fast-glob'
import path from 'path'
import * as acorn from 'acorn'
import fs from 'fs'

const testPattern = path.join(__dirname, 'testProject/**/*.js')
// è¦æ£€æŸ¥çš„æ–‡ä»¶
const files = fg.sync(testPattern)

// acorn è§£æé…ç½®
const acornOpts = {
  ecmaVersion: 5,// ç›®æ ‡ç‰ˆæœ¬
  silent: true
  // sourceType: 'module'
  // allowHashBang:true
}

// é”™è¯¯
const errArr: any[] = []

// éå†æ–‡ä»¶
files.forEach((file) => {
  const code = fs.readFileSync(file, 'utf8')
  try {
    acorn.parse(code, acornOpts as any)
  } catch (err: any) {
    errArr.push({
      err,
      stack: err.stack,
      file
    })
  }
})

// æ‰“å°é”™è¯¯ä¿¡æ¯
if (errArr.length > 0) {
  console.error(
    `ES-Check: there were ${errArr.length} ES version matching errors.`
  )
  errArr.forEach((o) => {
    console.info(`
        ES-Check Error:
        ]]></description>
            <content:encoded><![CDATA[<h1 id="escheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°" tabindex="-1">ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç° <a class="header-anchor" href="#escheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°" aria-label="Permalink to &quot;ESCheckå·¥å…·åŸç†è§£æåŠå¢å¼ºå®ç°&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æœ¬æ–‡ä¸ºç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒºé¦–å‘ç­¾çº¦æ–‡ç« ï¼Œ14å¤©å†…ç¦æ­¢è½¬è½½ï¼Œ14å¤©åæœªè·æˆæƒç¦æ­¢è½¬è½½ï¼Œä¾µæƒå¿…ç©¶ï¼</p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>2022äº†ï¼Œå¤§å®¶åšçš„é¢å‘Cç«¯çš„äº§å“ï¼ˆWebï¼Œå°ç¨‹åºï¼Œå…¶å®ƒè·¨ç«¯æ–¹æ¡ˆï¼‰ï¼Œæ¶‰åŠJSäº§ç‰©çš„è¿˜æ˜¯é¿ä¸å¼€å…¼å®¹æ€§çš„è¯é¢˜ï¼ˆå³ä½¿IEå·²å®˜å®£åœæ­¢æ”¯æŒï¼‰</p>
<p>ä½†å°±ç›®å‰çœ‹æ¥è¿™ä¸ªåœæ­¢ç»´æŠ¤è¿˜æ˜¯é¿å…ä¸äº†å¤§å®¶åšå¼€å‘è¿˜æ˜¯è¦è€ƒè™‘å…¼å®¹ä½ç«¯æœºï¼Œç”šè‡³<code>IE11</code></p>
<p>é’ˆå¯¹jsç›®å‰é€šå¸¸çš„æ‰‹æ®µéƒ½æ˜¯é€šè¿‡å·¥å…·å¯¹jsè¿›è¡Œè¯­æ³•é™çº§è‡³ ES5ï¼ŒåŒæ—¶å¼•å…¥å¯¹åº”çš„ polyfillï¼ˆå«ç‰‡ï¼‰</p>
<p>å·¥å…·é¦–é€‰è¿˜æ˜¯è€ç‰Œ <a href="https://babeljs.io/" target="_blank" rel="noreferrer">Babel</a>ï¼Œå½“ç„¶ç°åœ¨è¿˜æœ‰ <a href="https://swc.rs/" target="_blank" rel="noreferrer">SWC</a> è¿™ä¸ªå†‰å†‰å‡èµ·çš„æ–°æ˜Ÿ</p>
<p>ç»è¿‡ä¸€é¡¿æ“ä½œä¸ºé¡¹ç›®é…ç½® Babel ä¹‹åï¼Œä¸ºäº†ä¿è¯äº§ç‰©ä¸å‡ºç° ES5 ä¹‹å¤–çš„è¯­æ³•ï¼Œé€šå¸¸éƒ½ä¼šæ­é…ä¸€ä¸ª Check å·¥å…·å»æ£€æµ‹äº§ç‰©æ˜¯å¦ç¬¦åˆè¦æ±‚</p>
<p>æœ¬æ–‡å°†é˜è¿°å¸‚é¢ä¸Šå·²æœ‰å·¥å…·çš„<code>å®ç°åŸç†</code>ï¼Œ<code>åŠŸèƒ½å¯¹æ¯”</code>ï¼Œæœ€å<code>å®ç°å¢å¼ºå‹çš„es-check</code>ï¼Œæä¾› CLI å’Œ Lib ä¸¤ç§ä½¿ç”¨æ–¹å¼</p>
<p>ä¸‹é¢å…ˆåˆ†åˆ«ä»‹ç»ä¸€ä¸‹ç¤¾åŒºç‰ˆçš„<a href="https://github.com/yowainwright/es-check" target="_blank" rel="noreferrer">es-check</a>å’Œæ»´æ»´ç‰ˆçš„<a href="https://github.com/mpx-ecology/mpx-es-check" target="_blank" rel="noreferrer">@mpxjs/es-check</a>å®ç°åŸç†ï¼Œæœ€åå†å®ç°ä¸€ä¸ªé›†å¤§æˆè€…</p>
<h2 id="es-check" tabindex="-1">es-check <a class="header-anchor" href="#es-check" aria-label="Permalink to &quot;es-check&quot;">&ZeroWidthSpace;</a></h2>
<p>å…ˆçœ‹ä¸€ä¸‹å…¶æ•ˆæœï¼Œä¸‹é¢æ˜¯ç”¨äºæµ‹è¯•çš„ä»£ç </p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// test.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hello'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'world'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> varConst</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'const'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> varLet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'let'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> arrFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello world'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> es-check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> es5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.js</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDAyODU1NTI3OA==664028555278" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°å…¶æŠ¥é”™ä¿¡æ¯æ¯”è¾ƒç®€å•ï¼Œåªè¾“å‡ºäº†ä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªESè¯­æ³•é—®é¢˜<code>const</code>,ç„¶åå¯¹åº”çš„æ˜¯è¡Œæ•°å’Œå…·ä½“æ–‡ä»¶è·¯å¾„</p>
<p>æˆ‘ä»¬å†æŠŠè¿™ä¸ªæµ‹è¯•æ–‡ä»¶<code>æ„å»ºå‹ç¼©æ··æ·†ä¸€ä¸‹</code>(æ¨¡æ‹Ÿbuildäº§ç‰©)</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tsup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __test__/testProject/js/index.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --sourcemap</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> __test__/testProject/dist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --minify</span></span></code></pre>
</div><p>é€šè¿‡ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåªè¯´æœ‰è§£æé—®é¢˜ï¼Œå¹¶æœªå‘ŠçŸ¥æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åæœ‰å¯¹åº”çš„è¡Œåˆ—æ•°</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDAyOTcwMjg4Ng==664029702886" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¦‚æœæœ‰<code>sourcemap</code>é‚£ä¹ˆæˆ‘ä»¬æš‚ä¸”æ˜¯å¯ä»¥é€šè¿‡<a href="https://www.npmjs.com/package/source-map" target="_blank" rel="noreferrer">source-map</a>è¿™ä¸ªåº“è§£æä¸€ä¸‹ï¼Œä»¥ä¸Šé¢çš„æŠ¥é”™ä¸ºä¾‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// npx esno source-map.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'source-map'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'testProject/dist/index.js.map'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> lineNumber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> columnNumber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 45</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">originalPositionFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    column: columnNumber,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    line: lineNumber</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¯¹åº”æ–‡ä»¶çš„æºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sm.source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é”™è¯¯è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> errCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> content?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)[sm.line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(errCode)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})()</span></span></code></pre>
</div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„é”™è¯¯ä»£ç </p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDAzMjI5MTA1Mw==664032291053" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="åŸç†åˆ†æ" tabindex="-1">åŸç†åˆ†æ <a class="header-anchor" href="#åŸç†åˆ†æ" aria-label="Permalink to &quot;åŸç†åˆ†æ&quot;">&ZeroWidthSpace;</a></h3>
<p>æ‰“å¼€<a href="https://github.com/yowainwright/es-check/blob/master/index.js" target="_blank" rel="noreferrer">æºç </a>å¯ä»¥çœ‹åˆ°å®ç°éå¸¸ç®€å•ï¼Œå…³é”®ä¸è¿‡100è¡Œã€‚å¯ä»¥æ€»ç»“ä¸º3æ­¥éª¤</p>
<ol>
<li>ä½¿ç”¨ <a href="https://www.npmjs.com/package/fast-glob" target="_blank" rel="noreferrer">fast-glob</a> è·å–ç›®æ ‡æ–‡ä»¶</li>
<li>ä½¿ç”¨ <a href="https://github.com/acornjs/acorn/tree/master/acorn" target="_blank" rel="noreferrer">acorn</a> è§£ææºç ç”Ÿå±‚ASTï¼Œå¹¶æ•è·è§£æé”™è¯¯</li>
<li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨è§£æé”™è¯¯ï¼Œæœ‰å°±æ‰“å°</li>
</ol>
<p><code>acorn</code> æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ js è§£æåº“ï¼Œå¯ä»¥ç”¨äºASTçš„ç”Ÿæˆä¸CRUDæ“ä½œï¼Œå…¶åŒ…å«1ä¸ª <code>ecmaVersion</code> å‚æ•°ç”¨äºæŒ‡å®šè¦è§£æçš„ <code>ECMAScript</code> ç‰ˆæœ¬ã€‚<code>es-check</code>æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acorn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'acorn'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`const a = 'hello'`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ecmaVersion: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    silent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // sourceType: 'module'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // allowHashBang:true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // The keyword 'const' is reserved (1:0)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // err é™¤äº†ç»§æ‰¿å¸¸è§„ Error å¯¹è±¡ï¼ŒåŒ…å« stack å’Œ message ç­‰å†…å®¹å¤–ï¼Œè¿˜åŒ…å«å¦‚ä¸‹ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  //   pos: 0,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  //   loc: Position { line: 1, column: 0 },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  //   raisedAt: 7</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯<code>es-check</code>çš„ç²¾ç®€å®ç°ï¼Œå®Œæ•´æºç è§ <a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/es-check.ts" target="_blank" rel="noreferrer">Github</a></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// npx esno es-check.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fast-glob'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acorn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'acorn'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> testPattern</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'testProject/**/*.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¦æ£€æŸ¥çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testPattern)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// acorn è§£æé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> acornOpts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ecmaVersion: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç›®æ ‡ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  silent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // sourceType: 'module'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // allowHashBang:true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> errArr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éå†æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, acornOpts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    errArr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      err,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      stack: err.stack,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ‰“å°é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (errArr.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    `ES-Check: there were ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">errArr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ES version matching errors.`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  errArr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        ES-Check Error:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        ----</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        Â· erroring file: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        Â· error: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">err</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        Â· see the printed err.stack below for context</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        ----</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">stack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ES-Check: there were no ES version matching errors!  ğŸ‰`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDEwNzY1NjA0Nw==664107656047" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>åªèƒ½æ£€æµ‹æºç ä¸­æ˜¯å¦å­˜åœ¨ä¸ç¬¦åˆå¯¹åº”ECMAScriptç‰ˆæœ¬çš„è¯­æ³•</li>
<li>åªä¼šååº”å‡ºæ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªè¯­æ³•é—®é¢˜</li>
<li>é”™è¯¯ä¿¡æ¯åªåŒ…å«æ‰€åœ¨æ–‡ä»¶ä¸­çš„<code>è¡Œåˆ—å·</code>ä»¥åŠ<code>parser error</code></li>
<li>ä¸æ”¯æŒhtml</li>
</ol>
<h2 id="mpx-es-check" tabindex="-1">mpx-es-check <a class="header-anchor" href="#mpx-es-check" aria-label="Permalink to &quot;mpx-es-check&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>æ»´æ»´å‡ºå“çš„ <a href="https://mpxjs.cn/" target="_blank" rel="noreferrer">mpx</a> (å¢å¼ºå‹è·¨ç«¯å°ç¨‹åºæ¡†æ¶)çš„é…å¥—å·¥å…· <a href="https://github.com/mpx-ecology/mpx-es-check" target="_blank" rel="noreferrer">@mpxjs/es-check</a></p>
</blockquote>
<p>å’±ä»¬è¿˜æ˜¯ç”¨ä¸Šé¢çš„ä¾‹å­å…ˆå®æµ‹ä¸€ä¸‹æ•ˆæœ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @mpxjs/es-check</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mpx-es-check</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --ecma=6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.js</span></span></code></pre>
</div><p>å¯ä»¥çœ‹åˆ°å…¶å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ°äº†1ä¸ªlogæ–‡ä»¶ä¸­</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDA3Mzg0NTcxNw==664073845717" alt="å›¾ç‰‡" loading="lazy"></p>
<p>logæ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ï¼Œè¿˜æ˜¯å¾ˆæ¸…æ™°çš„æŒ‡å‡ºäº†æœ‰å“ªäº›é”™è¯¯å¹¶æ ‡æ˜äº†é”™è¯¯çš„å…·ä½“ä½ç½®ï¼Œå†…ç½®äº†<code>source-map</code>è§£æã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDA3NDExNjQ3Ng==664074116476" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¸‹é¢æ¥æ¢ç©¶ä¸€ä¸‹å®ç°åŸç†</p>
<h3 id="åŸç†åˆ†æ-1" tabindex="-1">åŸç†åˆ†æ <a class="header-anchor" href="#åŸç†åˆ†æ-1" aria-label="Permalink to &quot;åŸç†åˆ†æ&quot;">&ZeroWidthSpace;</a></h3>
<p>æ‰“å¼€æºç ï¼Œä»<a href="https://github.com/mpx-ecology/mpx-es-check/blob/master/index.js" target="_blank" rel="noreferrer">å…¥å£æ–‡ä»¶</a>å¼€å§‹çœ‹ï¼Œå¤§ä½“åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>glob</code>è·å–è¦æ£€æµ‹ç›®æ ‡æ–‡ä»¶</li>
<li>è·å–æ–‡ä»¶å¯¹åº”çš„<code>æºç </code>å’Œ<code>sourcemap</code>æ–‡ä»¶å†…å®¹</li>
<li>ä½¿ç”¨<a href="https://babel.dev/docs/en/babel-parser" target="_blank" rel="noreferrer">@babel/parser</a>è§£æç”ŸæˆAST</li>
<li>ä½¿ç”¨<a href="https://babel.dev/docs/en/babel-traverse" target="_blank" rel="noreferrer">@babel/traverse</a>éå†èŠ‚ç‚¹</li>
<li>å°†æ‰€æœ‰éES5è¯­æ³•çš„èŠ‚ç‚¹è§„åˆ™è¿›è¡Œæšä¸¾ï¼Œå†éå†èŠ‚ç‚¹æ—¶ï¼Œæ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹</li>
<li>æ ¼å¼åŒ–è¾“å‡ºä¿¡æ¯</li>
</ol>
<p>å…¶ä¸­<code>@babel/parser</code>ä¸<code>@babel/traverse</code>æ˜¯<code>babel</code>çš„æ ¸å¿ƒæ„æˆéƒ¨åˆ†ã€‚ä¸€ä¸ªç”¨äºè§£æä¸€ä¸ªç”¨äºéå†</p>
<p>èŠ‚ç‚¹è§„åˆ™ç¤ºä¾‹å¦‚ä¸‹ï¼Œè¿™ä¸ªæ–¹æ³•å‡†ç¡®ï¼Œå°±æ˜¯è´¹æ—¶è´¹åŠ›ï¼Œéœ€è¦å°†æ¯ä¸ªç‰ˆæœ¬çš„ç‰¹æ€§éƒ½ç©·ä¸¾å‡ºæ¥</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éƒ¨åˆ†èŠ‚ç‚¹è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> partRule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // let and const</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  VariableDeclaration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (node.kind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'let'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.kind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'const'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      errArr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        node,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Using ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">kind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} is not allowed`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç®­å¤´å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ArrowFunctionExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    errArr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      node,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Using ArrowFunction(ç®­å¤´å‡½æ•°) is not allowed'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯éå†è§„åˆ™ä¸èŠ‚ç‚¹çš„é€»è¾‘</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å­˜æ”¾æ‰€æœ‰èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nodeQueue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç”ŸæˆAST</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> babelParser.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, acornOpts)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éå†è·å–æ‰€æœ‰èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">babelTraverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ast, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  enter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    nodeQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ node, path })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œæ‰§è¡Œå¯¹åº”çš„è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">nodeQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  partRule[node.type]?.(node)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£ææ ¼å¼åŒ–é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">errArr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // çœç•¥ sourcemap è§£ææ­¥éª¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  problems.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    file,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    message: err.message,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    startLine: err.node.loc.start.line,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    startColumn: err.node.loc.start.column</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ç²¾ç®€å®ç°çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå®Œæ•´æºç è§<a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/mpx-es-check.ts" target="_blank" rel="noreferrer">Github</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDA5MjM0NDgyNQ==664092344825" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="å°ç»“-1" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“-1" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>æ£€æµ‹è¾“å‡ºçš„ç»“æœç›¸å¯¹å‹å¥½ï¼ˆæ¯”è¾ƒç†æƒ³çš„æ ¼å¼ï¼‰ï¼Œå†…ç½®äº†sourcemapè§£æé€»è¾‘</li>
<li>ä¸æ”¯æŒhtml</li>
<li>éœ€è¦é¢å¤–ç»´æŠ¤ä¸€å¥—è§„åˆ™ï¼ˆç›¸å¯¹ECMAScriptè¿­ä»£é¢‘ç‡æ¥è¯´ï¼Œå¯ä»¥æ¥å—ï¼‰</li>
</ol>
<h2 id="å¢å¼ºå®ç°es-check" tabindex="-1">å¢å¼ºå®ç°es-check <a class="header-anchor" href="#å¢å¼ºå®ç°es-check" aria-label="Permalink to &quot;å¢å¼ºå®ç°es-check&quot;">&ZeroWidthSpace;</a></h2>
<p>ç»¼ä¸Š2ä¸ªå¯¹æ¯”ï¼Œä»æºç å®ç°ååº”æ¥çœ‹ <code>es-check</code> çš„å®ç°æ›´ç®€å•ï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿç›¸å¯¹è¾ƒä½</p>
<!-- è¡¥è¶…é“¾æ¥ -->
<p>@sugarat/es-check ä¹Ÿå°†åŸºäº<code>es-check</code>åš1ä¸ªå¢å¼ºå®ç°ï¼Œå¼¥è¡¥<code>å•æ–‡ä»¶å¤šæ¬¡æ£€æµ‹</code>,<code>æ”¯æŒHTML</code>ã€<code>sourcemapè§£æ</code>ç­‰èƒ½åŠ›</p>
<h3 id="å•æ–‡ä»¶å¤šæ¬¡æ£€æµ‹" tabindex="-1">å•æ–‡ä»¶å¤šæ¬¡æ£€æµ‹ <a class="header-anchor" href="#å•æ–‡ä»¶å¤šæ¬¡æ£€æµ‹" aria-label="Permalink to &quot;å•æ–‡ä»¶å¤šæ¬¡æ£€æµ‹&quot;">&ZeroWidthSpace;</a></h3>
<p>ç°çŠ¶ï¼šåˆ©ç”¨<code>acorn.parse</code>ç›´æ¥å¯¹<code>code</code>è¿›è¡Œè§£ææ—¶å€™ï¼Œå°†ä¼šç›´æ¥æŠ›å‡º<code>code</code>ä¸­çš„ä¸€å¤„<code>è§£æé”™è¯¯</code>ï¼Œç„¶åå°±ç»“æŸäº†</p>
<p>é‚£å’±ä»¬åªéœ€è¦å°†<code>code</code>æ‹†æˆå¤šä¸ªä»£ç ç‰‡æ®µï¼Œé‚£è¿™ä¸ªé—®é¢˜ç†è®ºä¸Šå°±è¿åˆƒè€Œè§£äº†</p>
<p>ç°åœ¨çš„é—®é¢˜å°±æ˜¯æ€ä¹ˆæ‹†äº†ï¼Ÿ</p>
<p>æˆ‘ä»¬è¿™ç›´æ¥ç®€å•æš´åŠ›ä¸€ç‚¹ï¼Œ<strong>å¯¹ASTç›´æ¥è¿›è¡ŒèŠ‚ç‚¹éå†ï¼Œç„¶ååˆ†åˆ«æ£€æµ‹æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”çš„ä»£ç æ˜¯å¦åˆæ³•</strong></p>
<p>é¦–å…ˆä½¿ç”¨<code>latest</code>ç‰ˆæœ¬ç”Ÿæˆè¿™æ£µAST</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ecmaVersion: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'latest'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æ¥ä¸‹æ¥ä½¿ç”¨<a href="https://github.com/acornjs/acorn/tree/master/acorn-walk" target="_blank" rel="noreferrer">acorn-walk</a>è¿›è¡Œéå†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acornWalk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'acorn-walk'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">acornWalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">full</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ast, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // èŠ‚ç‚¹å¯¹åº”çš„æºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeSnippet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(node.start, node.end)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeSnippet, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ecmaVersion,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åœ¨è¿™é‡Œè¾“å‡ºé”™è¯¯ç‰‡æ®µå’Œè§£ææŠ¥é”™åŸå› </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeSnippet)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(error.message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>è¿˜æ˜¯ä»¥å‰é¢çš„æµ‹è¯•ä»£ç ä¸ºä¾‹ï¼Œè¾“å‡ºçš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hello'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'world'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> varConst</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'const'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> varLet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'let'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> arrFun</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello world'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/more-error/1.ts" target="_blank" rel="noreferrer">å®Œæ•´demo1ä»£ç </a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MDc0Mzc4MA==664290743780" alt="å›¾ç‰‡" loading="lazy"></p>
<p>éƒ¨åˆ†èŠ‚ç‚¹å¯¹åº”çš„ç‰‡æ®µå¯èƒ½ä¸å®Œæ•´ï¼Œä¼šå¯¼è‡´è§£æé”™è¯¯</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MTE3Nzc2NQ==664291177765" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç”¨äºæµ‹è¯•çš„ç‰‡æ®µå¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  'boolean'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™é‡Œå¯ä»¥å†<code>parse</code>æ£€æµ‹<code>error</code>å‰å†parseä¸€æ¬¡<code>latest</code> ç”¨äºæ’é™¤è¯­æ³•é”™è¯¯ï¼Œé¢å¤–é€»è¾‘å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> isValidCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆ¤æ–­ä»£ç ç‰‡æ®µ æ˜¯å¦åˆæ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeSnippet, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ecmaVersion: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'latest'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (_) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  isValidCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä¸åˆæ³•ä¸å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isValidCode) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MTMyMzU1MQ==664291323551" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/more-error/2.ts" target="_blank" rel="noreferrer">å®Œæ•´demo2ä»£ç </a></p>
<p>æ­¤æ—¶è¾“å‡ºçš„é”™è¯¯å­˜åœ¨ä¸€äº›é‡å¤çš„æƒ…å†µï¼Œæ¯”å¦‚<code>çˆ¶èŠ‚ç‚¹åŒ…å«å­èŠ‚ç‚¹çš„é—®é¢˜ä»£ç </code>ï¼Œè¿™é‡Œåšä¸€ä¸‹è¿‡æ»¤</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeErrorList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">acornWalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">full</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ast, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // èŠ‚ç‚¹å¯¹åº”çš„æºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeSnippet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(node.start, node.end)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // çœç•¥é‡å¤ä»£ç ã€‚ã€‚ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeSnippet, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ecmaVersion: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸å…ˆå­˜é”™è¯¯è¿›è¡Œæ¯”è¾ƒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isRepeat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> codeErrorList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // åˆ¤æ–­æ˜¯å¦æ˜¯åŒ…å«å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e.start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e.end </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isRepeat) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      codeErrorList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        codeSnippet,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        message: error.message,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        start: node.start,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        end: node.end</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeErrorList)</span></span></code></pre>
</div><p>ä¿®æ­£åç»“æœå¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MjA0MDk1Ng==664292040956" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/more-error/3.ts" target="_blank" rel="noreferrer">å®Œæ•´demo3ä»£ç </a></p>
<p>å¦‚æœ‰ä¸€äº›è¾¹ç•Œæƒ…å†µä¹Ÿæ˜¯åœ¨ <code>catch err</code>éƒ¨åˆ†æ ¹æ® <code>message</code>åšä¸€ä¸‹è¿‡æ»¤å³å¯</p>
<p>æ¯”å¦‚ä¸‹ä»£ç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:hello } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MjY5Mjg2Ng==664292692866" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/more-error/4.ts" target="_blank" rel="noreferrer">å®Œæ•´demo4ä»£ç </a></p>
<p>åšä¸€ä¸‹è¿‡æ»¤ï¼Œ<code>catch message</code>æ·»åŠ è¿‡æ»¤é€»è¾‘</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filterMessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">The keyword </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (filterMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(error.message))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è°ƒæ•´åçš„æŠ¥é”™ä¿¡æ¯å°±æ˜¯<code>è§£æ„èµ‹å€¼</code>çš„è¯­æ³•é”™è¯¯äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDI5MjkxNDY0MQ==664292914641" alt="å›¾ç‰‡" loading="lazy"></p>
<p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/more-error/5.ts" target="_blank" rel="noreferrer">å®Œæ•´demo5ä»£ç </a></p>
<p>è‡³æ­¤åŸºæœ¬èƒ½å®Œæˆäº†<code>å•æ–‡ä»¶çš„å¤šæ¬¡es-checkæ£€æµ‹</code>ï¼Œè™½ç„¶ä¸åƒ<code>mpx-es-check</code>é‚£æ ·ç”¨ç›´ç™½çš„è¯­è¨€ç›´æ¥è¯´é¢æ˜¯ä»€ä¹ˆè¯­æ³•ã€‚ä½†è¿˜æœ‰æ”¹è¿›ç©ºé—´å˜›ï¼Œåé¢å†å•ç‹¬å†™ä¸ªæ–‡ç« åšä¸ªå·¥å…·æ£€æµ‹ç›®æ ‡ä»£ç ç”¨äº†å“ªäº›<code>ES6+</code>ç‰¹æ€§ã€‚å°±ä¸å†è¿™é‡Œèµ˜è¿°äº†</p>
<h3 id="sourcemapè§£æ" tabindex="-1">sourcemapè§£æ <a class="header-anchor" href="#sourcemapè§£æ" aria-label="Permalink to &quot;sourcemapè§£æ&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªä¸»è¦é’ˆå¯¹æ£€æµ‹èµ„æºæ˜¯<code>buildäº§ç‰©</code>çš„ä¸€é¡¹ä¼˜åŒ–ï¼Œé€šè¿‡<code>source-map</code>è§£ææŠ¥é”™ä¿¡æ¯å¯¹åº”çš„æºç </p>
<p>å‰é¢çš„ä»£ç æˆ‘ä»¬åªè·å–äº†<code>é—®é¢˜æºç </code>çš„èµ·æ­¢å­—ç¬¦ä½ç½®<code>start</code>,<code>end</code></p>
<p>é€šè¿‡source-mapè§£æï¼Œé¦–å…ˆè¦è·å–æŠ¥é”™ä»£ç åœ¨èµ„æºä¸­çš„è¡Œåˆ—ä¿¡æ¯</p>
<p>è¿™é‡Œé€šè¿‡<code>acorn.getLineInfo</code>æ–¹æ³•å¯ç›´æ¥è·å–è¡Œåˆ—ä¿¡æ¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥äº†é‡å¤ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeErrorList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">acornWalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">full</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ast, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // èŠ‚ç‚¹å¯¹åº”çš„æºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeSnippet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> code.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(node.start, node.end)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeSnippet, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ecmaVersion: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> locStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getLineInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, node.start)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> locEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> acorn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getLineInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, node.end)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    codeErrorList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      loc: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        start: locStart,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        end: locEnd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(codeErrorList, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  depth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ç»“æœå¦‚ä¸‹ï¼Œ<a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/source-map/1.ts" target="_blank" rel="noreferrer">å®Œæ•´demo1ä»£ç </a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDMzNzAxMjIyOQ==664337012229" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æœ‰äº†è¡Œåˆ—å·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®<code>*.map</code>æ–‡ä»¶è¿›è¡Œæºç çš„è§£æ</p>
<p>é»˜è®¤<code>map</code>æ–‡ä»¶ç”±åŸæ–‡ä»¶ååŠ <code>.map</code>åç¼€</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourcemapFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMapFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.map`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapFile)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapFile, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è§£æ<code>map</code>æ–‡ä»¶ç›´æ¥ä½¿ç”¨ <code>sourceMap.SourceMapConsumer</code>,è¿”å›çš„å®ä¾‹æ˜¯1ä¸ª<code>Promise</code>,ä½¿ç”¨æ—¶éœ€æ³¨æ„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseSourceMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">SourceMapConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ ¹æ®å‰é¢<code>source-map</code>è§£æçš„ä¾‹å­ï¼ŒæŠŠè¿™å—é€»è¾‘æ”¾åˆ°<code>checkCode</code>ä¹‹åå³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ps: checkCode å³ä¸ºä¸Šä¸€å°èŠ‚å®ç°ä»£ç æ£€æµ‹èƒ½åŠ›çš„å°è£…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> codeErrorList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> checkCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceMapContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourcemapFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(file)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (sourceMapContent) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseSourceMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceMapContent)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  codeErrorList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è§£æè·å–åŸæ–‡ä»¶ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> smStart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">originalPositionFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      line: v.loc.start.line,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      column: v.loc.start.column</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> smEnd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">originalPositionFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      line: v.loc.end.line,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      column: v.loc.end.column</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // startå¯¹åº”æºç æ‰€åœ¨è¡Œçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceStartCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(smStart.source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)[smStart.line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceEndCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> consumer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sourceContentFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(smEnd.source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)[smEnd.line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // çœç•¥ console æ‰“å°ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/source-map/2.ts" target="_blank" rel="noreferrer">å®Œæ•´demo2ä»£ç </a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDMzNzM4NTkyMw==664337385923" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¿™å—å°±å¯¹é½äº†<code>mpx-es-check</code>çš„<code>source-map</code>è§£æèƒ½åŠ›</p>
<h3 id="htmlæ”¯æŒ" tabindex="-1">HTMLæ”¯æŒ <a class="header-anchor" href="#htmlæ”¯æŒ" aria-label="Permalink to &quot;HTMLæ”¯æŒ&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªå°±æ¯”è¾ƒå¥½åŠäº†ï¼Œåªéœ€è¦å°†<code>script</code>é‡Œçš„å†…å®¹æå–å‡ºæ¥ï¼Œè°ƒç”¨ä¸Šè¿°çš„<code>checkCode</code>æ–¹æ³•ï¼Œç„¶åå¯¹ç»“æœè¿›è¡Œä¸€ä¸ªè¡Œåˆ—å·çš„ä¼˜åŒ–å³å¯</p>
<p>è¿™é‡Œæå–çš„æ–¹æ³•å¾ˆå¤šï¼Œå¯ä»¥</p>
<ol>
<li><code>æ­£åˆ™åŒ¹é…</code></li>
<li><a href="https://cheerio.js.org/" target="_blank" rel="noreferrer">cheerio</a>ï¼šåƒjQueryä¸€æ ·æ“ä½œ</li>
<li><a href="https://github.com/inikulin/parse5" target="_blank" rel="noreferrer">parse5</a>ï¼šç”ŸæˆASTï¼Œé€’å½’éå†éœ€è¦çš„èŠ‚ç‚¹</li>
<li><a href="https://github.com/fb55/htmlparser2" target="_blank" rel="noreferrer">htmlparser2</a>ï¼šç”ŸæˆASTï¼Œç›¸æ¯”<code>parse5</code>æ›´åŠ ï¼Œè§£æç­–ç•¥æ›´åŠ â€åŒ…å®¹â€œ</li>
</ol>
<p>å°è¯•å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œæœ€åå‘ç°æ˜¯ç”¨<code>parse5</code>æ›´ç¬¦åˆè¿™ä¸ªåœºæ™¯ï¼ˆç¼–å†™ä»£ç æ›´å°‘ï¼‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> parse5 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'parse5'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> parse5.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sourceCodeLocationInfo: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ä¸‹é¢æ˜¯ç”Ÿæˆçš„ASTç¤ºä¾‹: <a href="https://astexplorer.net/#/gist/03728790dcd82e64204cdf4641a43d8f/c988f350916bfe04c642333b0839ed35e7578ca6" target="_blank" rel="noreferrer">https://astexplorer.net/#/gist/03728790dcd82e64204cdf4641a43d8f/c988f350916bfe04c642333b0839ed35e7578ca6</a></p>
<p>é€šè¿‡<code>nodeName</code>æˆ–è€…<code>tagName</code>å°±å¯ä»¥åŒºåˆ†èŠ‚ç‚¹ç±»å‹ï¼Œè¿™é‡Œç®€å•å†™ä¸ªéå†æ–¹æ³•</p>
<p>èŠ‚ç‚¹å¯ä»¥é€šè¿‡<code>childNodes</code>å±æ€§åŒºåˆ†æ˜¯å¦åŒ…å«å­èŠ‚ç‚¹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">traverseSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  traverseSchema?.[ast?.nodeName]?.(ast)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (ast?.nodeName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ast?.tagName) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    traverseSchema?.[ast?.tagName]?.(ast)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ast?.childNodes?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(n, traverseSchema)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™é‡Œéå†ä¸€ä¸‹demoä»£ç ç”Ÿæˆçš„ast</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlAST, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">childNodes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> loc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.sourceCodeLocation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (code) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(loc)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/html-check/1.ts" target="_blank" rel="noreferrer">å®Œæ•´demo1ä»£ç </a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDM1MTM3NDUyMA==664351374520" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è·å¾—å¯¹åº”çš„æºç åå°±å¯ä»¥è°ƒç”¨ä¹‹å‰çš„<code>checkCode</code>æ–¹æ³•ï¼Œå¯¹é”™è¯¯è¡Œå·åšä¸€ä¸ªæ‹¼æ¥å³å¯å¾—åˆ°é”™è¯¯ä¿¡æ¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlAST, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">childNodes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> loc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.sourceCodeLocation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (code) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> errList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> checkCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      errList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          'line:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          loc.startLine </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> err.loc.start.line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          'column:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          err.loc.start.column</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err.source)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/tools/blob/feature/es-check/packages/cli/es-check/__test__/demos/html-check/2.ts" target="_blank" rel="noreferrer">å®Œæ•´demo2ä»£ç </a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDM1MzM1OTY4OA==664353359688" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="ç»„å»ºclièƒ½åŠ›" tabindex="-1">ç»„å»ºCLIèƒ½åŠ› <a class="header-anchor" href="#ç»„å»ºclièƒ½åŠ›" aria-label="Permalink to &quot;ç»„å»ºCLIèƒ½åŠ›&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œå°±ä¸å†èµ˜è¿°CLIè¿‡ç¨‹ä»£ç ï¼Œæ ¸å¿ƒçš„å·²åœ¨å‰é¢é˜è¿°ï¼Œè¿™é‡Œç›´æ¥ä¸Šæœ€ç»ˆæˆå“çš„ä½¿ç”¨æ¼”ç¤ºï¼Œå‚æ•°åŒ<code>es-check</code>ä¿æŒä¸€è‡´</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/es-check</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span></span></code></pre>
</div><p>æ£€æµ‹ç›®æ ‡æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">escheck</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> es5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.html</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDM3ODMyNjc0OQ==664378326749" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">escheck</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> es5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> testProject/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">**</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.html</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --out</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTY2NDM3ODU2NzI1OA==664378567258" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æœ€ç»ˆå¯¹æ¯”" tabindex="-1">æœ€ç»ˆå¯¹æ¯” <a class="header-anchor" href="#æœ€ç»ˆå¯¹æ¯”" aria-label="Permalink to &quot;æœ€ç»ˆå¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h2>
<table tabindex="0">
<thead>
<tr>
<th>Name</th>
<th>JS</th>
<th>HTML</th>
<th>Friendly</th>
</tr>
</thead>
<tbody>
<tr>
<td>es-check</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âŒ</td>
</tr>
<tr>
<td>@mpxjs/es-check</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>@sugarat/es-check</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<p>å–äº†2è€…çš„ä¼˜ç‚¹ç›¸ç»“åˆç„¶ååšäº†ä¸€å®šçš„å¢å¼º</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>å½“ç„¶è¿™ä¸ªå·¥å…·å¯èƒ½å­˜åœ¨bugï¼Œé—æ¼éƒ¨åˆ†åœºæ™¯ç­‰æƒ…å†µï¼Œè¯»è€…è¯•ç”¨å¯ä»¥è¯„è®ºåŒºç»™åé¦ˆï¼Œæˆ–è€…åº“é‡Œç›´æ¥æ<code>issues</code></p>
<p>æœ‰å…¶å®ƒåŠŸèƒ½ä¸Šçš„å»ºè®®ä¹Ÿå¯è¯„è®ºåŒºç•™è¨€äº¤æµ</p>
<p>å®Œæ•´æºç ç§»æ­¥=&gt;<a href="https://github.com/ATQQ/tools/tree/main/packages/cli/es-check" target="_blank" rel="noreferrer">Github</a></p>
<h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://github.com/yowainwright/es-check" target="_blank" rel="noreferrer">es-check</a>ï¼šç¤¾åŒºå‡ºå“</li>
<li><a href="https://github.com/mpx-ecology/mpx-es-check" target="_blank" rel="noreferrer">mpx-es-check</a>ï¼šæ»´æ»´å‡ºå“ <a href="https://mpxjs.cn/" target="_blank" rel="noreferrer">MPX</a> æ¡†æ¶çš„é…å¥—å·¥å…·</li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2NDAyODU1NTI3OA==664028555278" length="0" type="image//mdImg/MTY2NDAyODU1NTI3OA==664028555278"/>
        </item>
        <item>
            <title><![CDATA[ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen]]></title>
            <link>https://www.dmsrs.org/technology/works/codeNote.html</link>
            <guid>https://www.dmsrs.org/technology/works/codeNote.html</guid>
            <pubDate>Sun, 28 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[# ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen
## å‰è¨€
emmmã€‚ã€‚ã€‚ï¼Œæœ‰å¥½é•¿ä¸€æ®µæ—¶é—´æ²¡ç æ–‡äº†ï¼ˆè¿‘å‡ ä¸ªæœˆå®åœ¨æ˜¯å¤ªå¿™äº†ï¼‰ï¼Œè¿™ä¸ªç©å…·åˆšå¥½æ˜¯è¿™ä¸¤å‘¨æŠ½ç©º`æ‹¼`çš„æ‹¿å‡ºæ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹

æœ‹å‹æœ€è¿‘åˆšå­¦å‰ç«¯ï¼Œç»å¸¸é—®ä¸€äº›é—®é¢˜ï¼Œé€šè¿‡èŠå¤©è½¯ä»¶å‘ä»£ç å’Œè´´å›¾å®åœ¨æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œå°±ç»™å®ƒæ¨èäº†[CodePen](https://codepen.io/) å’Œ [ğŸ´ä¸Šæ˜é‡‘](https://code.juejin.cn/)

å‰è€…å›½å†…è®¿é—®å®åœ¨ä¸ç¨³å®šï¼Œåè€…emmæœ‰ä¸ªå†…å®¹å®¡æ ¸ï¼Œå¯¼è‡´å†…å®¹`å®æ—¶æ€§`è¾ƒå·®ã€‚

å°±æœäº†æœGitHubä¸Šæœ‰ä¸æœ‰ç±»ä¼¼çš„é¡¹ç›®ï¼Œæœäº†ä¸€åœˆè¿˜çœŸæœ‰ä¸å°‘ï¼Œè¿™é‡Œè´´ä¸¤ä¸ªæ„Ÿè§‰ä¸é”™çš„ [CodeRun](https://wanglin2.github.io/code-run-online/#/) å’Œ [CodePan](https://codepan.egoist.sh/)

æœ‹å‹ä½¿ç”¨ååé¦ˆï¼Œé—®äº†é—®æœ‰ä¸æœ‰å•¥æ”¯æŒç›´æ¥åœ¨æ—è¾¹ **å†™ç¬”è®°**ï¼Œ**è´´å›¾ç‰‡ï¼ˆè¿™ä¸ªï¼‰**ï¼Œæ–¹ä¾¿åšè®°å½•

emm...ï¼Œæ£€ç´¢äº†ä¸€åœˆè®°å¿†ä¸­é™¤äº† `VsCode` å¥½åƒè¿˜çœŸæ²¡æœ‰è¿™ç§ä¸œè¥¿ï¼ˆå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œè¯»è€…æœ‰æ¨èçš„å¯ä»¥è¯„è®ºåŒºè¡¥å……ï¼‰

é‚£å°±ç»™ä»–é€ ä¸ªå§ï¼Œç»ƒç»ƒæ‰‹ï¼Œæœ‰æ®µæ—¶é—´æ²¡å†™è‡ªå·±çš„ä»£ç äº†

ç­‰ä¸åŠäº†ï¼Ÿå…ˆä½“éªŒä½“éªŒğŸ‘‰ğŸ» [ç¤ºä¾‹1ï¼šåº”ç”¨é¦–é¡µ](https://code.sugarat.top)ï¼Œ[ç¤ºä¾‹2ï¼šåˆ†äº«ä»£ç ](https://code.sugarat.top/share/63035c10a6ea447087355f55)

## æŠ€æœ¯é€‰å‹
è¡ŒåŠ¨è‚¯å®šæ˜¯è¦ç«™åœ¨å·¨äººçš„"é”®ç›˜ä¸Š"(æ‰‹æ»‘æ‰“é”™äº†ï¼Œé‚£å°±è¿™æ ·å§)ï¼Œå…ˆçœ‹çœ‹æœ‰å“ªäº›å¯ç”¨çš„ "é›¶ä»¶"

### å†…å®¹ç¼–è¾‘å™¨
å…ˆæ˜¯å†™ç¬”è®°éƒ¨åˆ†ï¼ŒæŒ‘äº†å‡ ä¸ªåº“ç©äº†ä¸€ä¸‹
* [wangEditor](https://www.wangeditor.com/) - å¼€æº Web å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¼€ç®±å³ç”¨ï¼Œé…ç½®ç®€å•
* [prosemirror](https://prosemirror.net/) - æ”¯æŒéƒ¨åˆ†MarkDownè¯­æ³•ï¼Œå¯æ‹“å±•å®šåˆ¶çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
* [ğŸ§´ Lotion](https://lotion.dashibase.com/) - åŸºäºVue3å¼€å‘çš„å—ç¼–è¾‘å™¨
* [Editor.js](https://editorjs.io/) - å®˜æ–¹:"Next generation block styled editor.",ä¸‹ä¸€ä»£å—ç¼–è¾‘å™¨

å› ä¸ºå±å¹•ä¸­éœ€è¦å±•ç¤º ç¬”è®°/ä»£ç /é¢„è§ˆ 3ä¸ªéƒ¨åˆ†ï¼Œç›´æ¥ä½¿ç”¨markdownè¯­æ³•ä¼šæœ‰ä¸ªåˆ‡æ¢çš„åŠ¨ä½œï¼ˆè¿™é‡Œå°±ä¸è€ƒè™‘markdownæ ¼å¼åšç¼–è¾‘äº†ï¼‰

ä¸Šè¿°çš„å‡ ä¸ªåº“åˆ†å¤§ä½“ä¸Šåˆ†ä¸ºä¸¤ç±»`å¯Œæ–‡æœ¬ç¼–è¾‘å™¨`ï¼Œ`å—ç¼–è¾‘å™¨`

|                                å¯Œæ–‡æœ¬ç¼–è¾‘å™¨                                 |                                  å—ç¼–è¾‘å™¨                                   |
| :]]></description>
            <content:encoded><![CDATA[<h1 id="ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„codepen" tabindex="-1">ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen <a class="header-anchor" href="#ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„codepen" aria-label="Permalink to &quot;ç»„è£…ä¸ªæ”¯æŒè®°ç¬”è®°çš„CodePen&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>emmmã€‚ã€‚ã€‚ï¼Œæœ‰å¥½é•¿ä¸€æ®µæ—¶é—´æ²¡ç æ–‡äº†ï¼ˆè¿‘å‡ ä¸ªæœˆå®åœ¨æ˜¯å¤ªå¿™äº†ï¼‰ï¼Œè¿™ä¸ªç©å…·åˆšå¥½æ˜¯è¿™ä¸¤å‘¨æŠ½ç©º<code>æ‹¼</code>çš„æ‹¿å‡ºæ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹</p>
<p>æœ‹å‹æœ€è¿‘åˆšå­¦å‰ç«¯ï¼Œç»å¸¸é—®ä¸€äº›é—®é¢˜ï¼Œé€šè¿‡èŠå¤©è½¯ä»¶å‘ä»£ç å’Œè´´å›¾å®åœ¨æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œå°±ç»™å®ƒæ¨èäº†<a href="https://codepen.io/" target="_blank" rel="noreferrer">CodePen</a> å’Œ <a href="https://code.juejin.cn/" target="_blank" rel="noreferrer">ğŸ´ä¸Šæ˜é‡‘</a></p>
<p>å‰è€…å›½å†…è®¿é—®å®åœ¨ä¸ç¨³å®šï¼Œåè€…emmæœ‰ä¸ªå†…å®¹å®¡æ ¸ï¼Œå¯¼è‡´å†…å®¹<code>å®æ—¶æ€§</code>è¾ƒå·®ã€‚</p>
<p>å°±æœäº†æœGitHubä¸Šæœ‰ä¸æœ‰ç±»ä¼¼çš„é¡¹ç›®ï¼Œæœäº†ä¸€åœˆè¿˜çœŸæœ‰ä¸å°‘ï¼Œè¿™é‡Œè´´ä¸¤ä¸ªæ„Ÿè§‰ä¸é”™çš„ <a href="https://wanglin2.github.io/code-run-online/#/" target="_blank" rel="noreferrer">CodeRun</a> å’Œ <a href="https://codepan.egoist.sh/" target="_blank" rel="noreferrer">CodePan</a></p>
<p>æœ‹å‹ä½¿ç”¨ååé¦ˆï¼Œé—®äº†é—®æœ‰ä¸æœ‰å•¥æ”¯æŒç›´æ¥åœ¨æ—è¾¹ <strong>å†™ç¬”è®°</strong>ï¼Œ<strong>è´´å›¾ç‰‡ï¼ˆè¿™ä¸ªï¼‰</strong>ï¼Œæ–¹ä¾¿åšè®°å½•</p>
<p>emm...ï¼Œæ£€ç´¢äº†ä¸€åœˆè®°å¿†ä¸­é™¤äº† <code>VsCode</code> å¥½åƒè¿˜çœŸæ²¡æœ‰è¿™ç§ä¸œè¥¿ï¼ˆå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œè¯»è€…æœ‰æ¨èçš„å¯ä»¥è¯„è®ºåŒºè¡¥å……ï¼‰</p>
<p>é‚£å°±ç»™ä»–é€ ä¸ªå§ï¼Œç»ƒç»ƒæ‰‹ï¼Œæœ‰æ®µæ—¶é—´æ²¡å†™è‡ªå·±çš„ä»£ç äº†</p>
<p>ç­‰ä¸åŠäº†ï¼Ÿå…ˆä½“éªŒä½“éªŒğŸ‘‰ğŸ» <a href="https://code.sugarat.top" target="_blank" rel="noreferrer">ç¤ºä¾‹1ï¼šåº”ç”¨é¦–é¡µ</a>ï¼Œ<a href="https://code.sugarat.top/share/63035c10a6ea447087355f55" target="_blank" rel="noreferrer">ç¤ºä¾‹2ï¼šåˆ†äº«ä»£ç </a></p>
<h2 id="æŠ€æœ¯é€‰å‹" tabindex="-1">æŠ€æœ¯é€‰å‹ <a class="header-anchor" href="#æŠ€æœ¯é€‰å‹" aria-label="Permalink to &quot;æŠ€æœ¯é€‰å‹&quot;">&ZeroWidthSpace;</a></h2>
<p>è¡ŒåŠ¨è‚¯å®šæ˜¯è¦ç«™åœ¨å·¨äººçš„&quot;é”®ç›˜ä¸Š&quot;(æ‰‹æ»‘æ‰“é”™äº†ï¼Œé‚£å°±è¿™æ ·å§)ï¼Œå…ˆçœ‹çœ‹æœ‰å“ªäº›å¯ç”¨çš„ &quot;é›¶ä»¶&quot;</p>
<h3 id="å†…å®¹ç¼–è¾‘å™¨" tabindex="-1">å†…å®¹ç¼–è¾‘å™¨ <a class="header-anchor" href="#å†…å®¹ç¼–è¾‘å™¨" aria-label="Permalink to &quot;å†…å®¹ç¼–è¾‘å™¨&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆæ˜¯å†™ç¬”è®°éƒ¨åˆ†ï¼ŒæŒ‘äº†å‡ ä¸ªåº“ç©äº†ä¸€ä¸‹</p>
<ul>
<li><a href="https://www.wangeditor.com/" target="_blank" rel="noreferrer">wangEditor</a> - å¼€æº Web å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¼€ç®±å³ç”¨ï¼Œé…ç½®ç®€å•</li>
<li><a href="https://prosemirror.net/" target="_blank" rel="noreferrer">prosemirror</a> - æ”¯æŒéƒ¨åˆ†MarkDownè¯­æ³•ï¼Œå¯æ‹“å±•å®šåˆ¶çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</li>
<li><a href="https://lotion.dashibase.com/" target="_blank" rel="noreferrer">ğŸ§´ Lotion</a> - åŸºäºVue3å¼€å‘çš„å—ç¼–è¾‘å™¨</li>
<li><a href="https://editorjs.io/" target="_blank" rel="noreferrer">Editor.js</a> - å®˜æ–¹:&quot;Next generation block styled editor.&quot;,ä¸‹ä¸€ä»£å—ç¼–è¾‘å™¨</li>
</ul>
<p>å› ä¸ºå±å¹•ä¸­éœ€è¦å±•ç¤º ç¬”è®°/ä»£ç /é¢„è§ˆ 3ä¸ªéƒ¨åˆ†ï¼Œç›´æ¥ä½¿ç”¨markdownè¯­æ³•ä¼šæœ‰ä¸ªåˆ‡æ¢çš„åŠ¨ä½œï¼ˆè¿™é‡Œå°±ä¸è€ƒè™‘markdownæ ¼å¼åšç¼–è¾‘äº†ï¼‰</p>
<p>ä¸Šè¿°çš„å‡ ä¸ªåº“åˆ†å¤§ä½“ä¸Šåˆ†ä¸ºä¸¤ç±»<code>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</code>ï¼Œ<code>å—ç¼–è¾‘å™¨</code></p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</th>
<th style="text-align:center">å—ç¼–è¾‘å™¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY2MTY5ODE0NTY2OQ==661698145669" alt="å›¾ç‰‡" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY2MTY5ODIyNjk3NQ==661698226975" alt="å›¾ç‰‡" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>å‰è€…æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„ç¼–è¾‘å™¨ï¼Œåè€…ä»ç¤¾åŒºååº”æ¥çœ‹åƒæ˜¯<code>ä¸‹ä¸€ä»£è¶‹åŠ¿</code>ï¼Œä½†å›½å†…å¥½åƒè¿˜æ²¡çœ‹åˆ°ä½¿ç”¨æ­¤æ–¹æ¡ˆçš„æˆç†Ÿäº§å“ï¼ˆå¯èƒ½æ˜¯æˆ‘å­¤é™‹å¯¡é—»äº†ï¼Œè¯»è€…æœ‰æ¨èçš„å¯ä»¥è¯„è®ºåŒºè¡¥å……ï¼‰</p>
<p>æœ€åæœ¬ç€æŠ€æœ¯å°é²œï¼ˆå–œæ¬¢æŠ˜è…¾ï¼‰çš„ç²¾ç¥é€‰äº†<a href="https://editorjs.io/" target="_blank" rel="noreferrer">Editor.js</a>ï¼Œå®˜æ–¹æä¾›äº†ä¸€ç³»åˆ—çš„åŸºç¡€æ’ä»¶ï¼Œæä¾›äº†ç®€å•çš„APIæ”¯æŒè‡ªå®šä¹‰çš„æ’ä»¶ï¼ˆåé¢å•ç‹¬å¼€æ–‡ç« ä»‹ç»ï¼‰</p>
<h3 id="ä»£ç ç¼–è¾‘å™¨" tabindex="-1">ä»£ç ç¼–è¾‘å™¨ <a class="header-anchor" href="#ä»£ç ç¼–è¾‘å™¨" aria-label="Permalink to &quot;ä»£ç ç¼–è¾‘å™¨&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªå°±<a href="https://github.com/microsoft/monaco-editor" target="_blank" rel="noreferrer">monaco-editor</a> æ²¡å¾—è·‘äº†</p>
<p>ä¸è¿‡åœ¨ä½¿ç”¨ä¹‹å‰å…ˆçœ‹äº†ä¸€ä¸‹æœ€è¿‘é˜¿é‡Œå¼€æºçš„<a href="https://opensumi.com/zh" target="_blank" rel="noreferrer">OpenSumi</a>ï¼Œçœ‹ä¹‹å‰ä»¥ä¸ºæ˜¯ä¸ªå¯ç›´æ¥ç”¨çš„<code>NPM</code>åŒ…ï¼Œæ–‡æ¡£ç¿»äº†åŠå¤©ï¼Œåªç»™äº†ä¸ªdemoï¼Œemm æ‹‰ä¸‹æ¥ï¼Œæœç„¶å¦‚å®˜æ–¹é¢„æ–™ å¡åœ¨äº† <code>yarn install</code>ï¼Œæ„Ÿè§‰æœ‰ä¸€å®šä¸Šæ‰‹æˆæœ¬ï¼Œå…ˆä¸çœ‹äº†</p>
<h3 id="åç«¯éƒ¨åˆ†" tabindex="-1">åç«¯éƒ¨åˆ† <a class="header-anchor" href="#åç«¯éƒ¨åˆ†" aria-label="Permalink to &quot;åç«¯éƒ¨åˆ†&quot;">&ZeroWidthSpace;</a></h3>
<p>æ€è€ƒäº†ä¸€ä¸‹éƒ½æ˜¯ç®€å•çš„<code>CRUD</code>åœºæ™¯ï¼Œå­˜å‚¨å’Œé‰´æƒ<code>MongoDB</code>ä¸<code>Redis</code>æ„Ÿè§‰å°±å¤Ÿäº†ï¼ˆä¹Ÿæ²¡æœ‰é…ç½®æˆæœ¬ï¼Œå®‰è£…å³ç”¨ï¼‰</p>
<p>æœåŠ¡ç«¯æ¡†æ¶éƒ¨åˆ†å°±ç›´æ¥æ‹¿è‡ªå·±çš„ä¹‹å‰å†™çš„ç©å…·<a href="https://github.com/ATQQ/flash-wolves" target="_blank" rel="noreferrer">flash-wolves</a>å¼€æ•´</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯ç»„è£…äº†</p>
<h2 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="é¡¹ç›®æ­å»º" tabindex="-1">é¡¹ç›®æ­å»º <a class="header-anchor" href="#é¡¹ç›®æ­å»º" aria-label="Permalink to &quot;é¡¹ç›®æ­å»º&quot;">&ZeroWidthSpace;</a></h3>
<p>ç²—ç³™çš„åŸå‹å›¾å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MTY5OTkyOTE2OQ==661699929169" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¸ƒå±€ä¹Ÿæ¯”è¾ƒç®€å•</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>å·¥å…·æ¡...&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!-- ä¸»ä½“å†…å®¹ --></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">Note</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">Code</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">Render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>ç›´æ¥æ‹¿ä¹‹å‰æ•´çš„æ¨¡æ¿è¿›è¡Œåˆ›å»º<a href="https://github.com/ATQQ/vite-vue3-template" target="_blank" rel="noreferrer">vite-vue3-template</a>å‡ºå‰ç«¯å·¥ç¨‹</p>
<h3 id="æ–‡æœ¬ç¼–è¾‘éƒ¨åˆ†" tabindex="-1">æ–‡æœ¬ç¼–è¾‘éƒ¨åˆ† <a class="header-anchor" href="#æ–‡æœ¬ç¼–è¾‘éƒ¨åˆ†" aria-label="Permalink to &quot;æ–‡æœ¬ç¼–è¾‘éƒ¨åˆ†&quot;">&ZeroWidthSpace;</a></h3>
<p>ç¤ºä¾‹ä»£ç åœ¨çº¿æ¼”ç¤ºï¼š<a href="https://code.sugarat.top/share/630b8793789c242a31e57c40" target="_blank" rel="noreferrer">https://code.sugarat.top/share/630b8793789c242a31e57c40</a></p>
<p>ç›´æ¥<a href="https://editorjs.io/configuration" target="_blank" rel="noreferrer">å‚ç…§å®˜æ–¹æ–‡æ¡£</a>ï¼ŒCVèµ·æ¥å°±èƒ½è¿è¡Œï¼Œè¿™é‡Œä»…ä»…è´´å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼ˆé¿å…ä»£ç å ç”¨å¤ªå¤§ç¯‡å¹…ï¼Œé™ä½æ–‡ç« å¯è¯»æ€§ï¼‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> editor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> EditorJS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    holder: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'note-editor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    placeholder: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'åœ¨è¿™é‡Œå¼€å§‹è®°å½•ä½ çš„ç¬”è®°'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    onReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Editor.js is ready to work!'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å†…å®¹åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // ä¸‹æ–¹æ‹¿åˆ°çš„outputDataç›´æ¥å¡è¿›æ¥å°±è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å¯ä»¥åœ¨é¡µé¢åŠ è½½çš„æ—¶å€™ä»æ•°æ®åº“å–å†å²æ•°æ®è¿›è¡Œå±•ç¤º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(xxx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    onChange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      editor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">outputData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // å–å¾—ç¼–å†™çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // å¯ä»¥å°†è¿™ä¸ªå†…å­˜å­˜èµ·æ¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // åœ¨åˆé€‚çš„æ—¶æœºè°ƒæ¥å£å­˜å…¥æ•°æ®åº“å³å¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Saving failed: '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, error)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tools: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å›¾ç‰‡å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      image: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        class: Image,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        config: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          uploader: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            uploadByFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">              // éœ€è¦è‡ªå·±å¤„ç†å›¾ç‰‡ä¸Šä¼ é€»è¾‘ </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">              // æŒ‰ç»“æ„è¿›è¡Œè¿”å›å³å¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">              return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                file: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://img.cdn.sugarat.top/online-editor/6302403434e52962875fbf3e/1661169105550/pupza3m486'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€ç³»åˆ—å®˜æ–¹æ’ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      header: Header,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      list: List,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    //   ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    i18n: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å›½é™…åŒ–ç›¸å…³é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span></code></pre>
</div><h3 id="ä»£ç ç¼–è¾‘" tabindex="-1">ä»£ç ç¼–è¾‘ <a class="header-anchor" href="#ä»£ç ç¼–è¾‘" aria-label="Permalink to &quot;ä»£ç ç¼–è¾‘&quot;">&ZeroWidthSpace;</a></h3>
<p>å‚ç…§<a href="https://github.com/microsoft/monaco-editor/blob/main/docs/integrate-esm.md" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå‡ æ­¥å°±èµ·é£ï¼Œç›´æ¥è°ƒç”¨ <code>monaco-editor</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œä»¥HTMLç¼–è¾‘å™¨ä¸ºä¾‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> monaco </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlEditor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> monaco.editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'html-editor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆå§‹åŒ–å±•ç¤ºçš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;h1>hello world&#x3C;/h1>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    language: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    theme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vs-dark'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fontSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    automaticLayout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¦‚æœæ•°æ®æ˜¯å¼‚æ­¥ä»æ¥å£æ‹¿ï¼Œé‚£ä¹ˆå¯ä»¥è°ƒç”¨setValueæ–¹æ³•ï¼Œè®¾ç½®å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  htmlEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;h2>hello world&#x3C;/h2>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åœ¨è¿™ä¸ªæ–¹æ³•ç›‘å¬ç¼–è¾‘å™¨çš„å†…å®¹å˜åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">htmlEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onDidChangeModelContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> newValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>é€šè¿‡ä¸Šè¿°<code>3</code>ä¸ªç®€å•çš„æ–¹æ³•å³å¯å®ç°1ä¸ªç®€å•ç¼–è¾‘å™¨çš„å†…å®¹è¯»å†™</p>
<p>å½“ç„¶ç¬”è€…è¿™é‡Œç”¨çš„Vite + Vue3ï¼Œ<strong>è¿™é‡Œè¿˜æœ‰å‡ ä¸ªå‘</strong></p>
<p>å¯¼å…¥workerï¼Œå‚è€ƒ<a href="https://github.com/vitejs/vite/discussions/1791#discussioncomment-321046" target="_blank" rel="noreferrer">å°¤å¤§ç»™çš„ç¤ºä¾‹</a></p>
<blockquote></blockquote>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// main.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> EditorWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor/esm/vs/editor/editor.worker?worker'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> JSONWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor/esm/vs/language/json/json.worker?worker'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> CSSWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor/esm/vs/language/css/css.worker?worker'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> HTMLWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor/esm/vs/language/html/html.worker?worker'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TSWorker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'monaco-editor/esm/vs/language/typescript/ts.worker?worker'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">self.MonacoEnvironment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  getWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> JSONWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'css'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'scss'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'less'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CSSWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'html'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'handlebars'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'razor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HTMLWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'typescript'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'javascript'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TSWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> EditorWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>editorä½¿ç”¨refç»‘å®šè°ƒç”¨çš„æ—¶å€™éœ€è¦toRawï¼Œä¸ç„¶åº”ç”¨å°±ä¼šå¡æ­»</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlEditor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">monaco</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">editor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">IStandaloneCodeEditor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ ¹æ®propsæ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">watchEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (htmlEditor.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> props.html) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    toRaw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlEditor.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(props.html)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // åˆå§‹åŒ–å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  htmlEditor.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> monaco.editor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ops})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    toRaw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlEditor.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onDidChangeModelContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toRaw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlEditor.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h3 id="ä»£ç æ¸²æŸ“" tabindex="-1">ä»£ç æ¸²æŸ“ <a class="header-anchor" href="#ä»£ç æ¸²æŸ“" aria-label="Permalink to &quot;ä»£ç æ¸²æŸ“&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œä½¿ç”¨<code>iframe</code>æ‰¿è½½å†…å®¹ï¼ŒæœŸæœ›iframeé‡Œé¡µé¢æœ€ç»ˆç»“æ„å¦‚ä¸‹</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /* å†…ç½®ä¸€äº›æ ·å¼é‡è½½ */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /* ç”¨æˆ·ä¹¦å†™æ ·å¼ */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &#x3C;!--consoleä¿¡æ¯é¢æ¿ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.jsdelivr.net/npm/eruda"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(window.eruda){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      window.eruda.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        defaults: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          displaySize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          transparency: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      window.eruda.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- ...ç”¨æˆ·htmlä»£ç  --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ç”¨æˆ·jsä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>å…¶ä¸­ <a href="https://github.com/liriliri/eruda" target="_blank" rel="noreferrer">eruda</a> ä¸»è¦ç”¨äºå±•ç¤º iframe é¡µé¢çš„ log æ—¥å¿—ä¿¡æ¯ã€ Dom ç»“æ„ç­‰ï¼Œé¿å…æ‰“å¼€Chrome DevTools</p>
<p>æ‰€æœ‰domçš„åˆ›å»ºå‡é€šè¿‡ Dom API å®Œæˆ</p>
<p><strong>åœ¨çº¿é¢„è§ˆç¤ºä¾‹ä»£ç æ•ˆæœï¼š<a href="https://code.sugarat.top/share/6312ffa045a77f0bc4b881dc" target="_blank" rel="noreferrer">https://code.sugarat.top/share/6312ffa045a77f0bc4b881dc</a></strong></p>
<p>ä¸‹é¢ç®€å•è¿‡ä¸€ä¸‹å®ç°çš„ä»£ç </p>
<p>å…ˆç»™iframeæä¸ªæ ·å¼,é¿å…çœ‹ä¸åˆ°</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">iframe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>ç„¶åæ¥3ä¸ªdomæ‰¿è½½æˆ‘ä»¬çš„<code>ä¸‰å‰‘å®¢</code>ä»£ç </p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä¸€ç³»åˆ—ç”¨æˆ·ç¼–å†™çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cssCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `h1{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    color:red;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `&#x3C;h1>hello world&#x3C;/h1>`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `console.log("hello world")`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 3ä¸ªdom</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> $style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"style"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$style.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cssCode;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> $html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"div"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$html.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlCode;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> $userScript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"script"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$userScript.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsCode;</span></span></code></pre>
</div><p>ç´§æ¥ç€åˆ›å»º<code>iframe</code>å°†å…¶è£…è¿›å» å°±okkäº†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> $iframe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"iframe"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$iframe.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"load"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $iframe.contentDocument?.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($style);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $iframe.contentDocument.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($html, $userScript);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($iframe);</span></span></code></pre>
</div><p>å¦‚æœè¦å¼•å…¥erudaï¼Œå’±ä»¬éœ€è¦å…ˆç­‰erudaåŠ è½½å®Œå†æ’å…¥å’±ä»¬å¾—<code>script</code>ï¼Œä¸ç„¶æ•è·ä¸åˆ°ä»£ç <code>console</code></p>
<p>è¯¦ç»†å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$iframe.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"load"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $iframe.contentDocument.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($style);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // eruda cdnèµ„æº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> $eruda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"script"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $eruda.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "//cdn.jsdelivr.net/npm/eruda"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ‰“å¼€é¢æ¿çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> debugExec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"script"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  debugExec.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `window.eruda.init({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      defaults: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        displaySize: 25,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        transparency: 0.9,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    })</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    eruda.show()</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $iframe.contentDocument?.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">($eruda);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // eruda åŠ è½½å®Œå†åŠ è½½HTMLä¸ç”¨æˆ·è„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  $eruda.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    $iframe.contentDocument?.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(debugExec, $html, $userScript);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><h3 id="ä»£ç æ ¼å¼åŒ–" tabindex="-1">ä»£ç æ ¼å¼åŒ– <a class="header-anchor" href="#ä»£ç æ ¼å¼åŒ–" aria-label="Permalink to &quot;ä»£ç æ ¼å¼åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>å†™å®Œä»£ç åï¼Œæ ¼å¼åŒ–æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œé¿å…ä¹±ç³Ÿç³Ÿ</p>
<p>ç¬”è€…è¿™é‡Œç›´æ¥é‡‡ç”¨<code>prettier</code>ï¼Œå•¥éƒ½æä¾›å¥½äº†ï¼ŒCVä¸€ä¸‹å°±èƒ½ç”¨</p>
<p>å‡ºå‚å…¥å‚éƒ½æ¯”è¾ƒç®€å•</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prettier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'prettier/standalone'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlPlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'prettier/parser-html'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cssPlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'prettier/parser-postcss'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsPlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'prettier/parser-babel'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatHTML</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prettier.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    parser: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    plugins: [htmlPlugin]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatJS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tsCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prettier.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tsCode, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    parser: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'babel'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    plugins: [jsPlugin]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatCSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> prettier.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(css, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    parser: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    plugins: [cssPlugin]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ°è¿™é‡Œæ„æˆåº”ç”¨çš„å‡ ä¸ªä¸»è¦<code>å¼€æºåº“</code>çš„ä½¿ç”¨ä»‹ç»å·®ä¸å¤šå®Œäº†</p>
<p><code>å‰äººæ ½æ ‘åäººä¹˜å‡‰</code>ï¼Œå¯¹UI/UEè¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œæ‹¼å‡‘å‡ºä¸€ä¸ªæ–°çš„åº”ç”¨èŠ±è´¹æ—¶é—´ä¸é«˜</p>
<p>å½“æœ‰ä¸€ä¸æƒ³æ³•çš„æ—¶å€™ï¼Œå¾—åŠæ—¶æŠ“ä½ã€‚</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p><code>EditorJS</code>è¿˜æ˜¯æœ‰å¾ˆå¤§çš„å¯ç©æ€§ï¼Œåé¢æœ‰æœºä¼šå›´ç»•è¾“å‡ºä¸€äº›æ’ä»¶å®è·µï¼Œè¯•ç€æ•´ä¸ªç¼–è¾‘å™¨æ›¿ä»£æ—¥å¸¸çš„Markdown</p>
<p>è¿™ä¸ªåœ¨çº¿çš„Codeä¹Ÿä¼šåœ¨åç»­ä¸­ä¼šæŠŠä¸€äº›æƒ³æ³•è¿­ä»£è¿›å»ï¼Œç›®å‰çœ‹ä¸»è¦æ˜¯ä»£ç ç¼–è¾‘éƒ¨åˆ†ä¸å¤ªå‹å¥½ï¼ˆä»£ç æç¤ºè¿™ä¸€å—ï¼‰ï¼Œè®¿é—®äº†å…¶å®ƒçš„åœ¨çº¿ç¼–ç çš„ï¼ŒåŸºæœ¬éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼ˆæ— è®ºæ€ä¹ˆæéƒ½è¾¾ä¸åˆ°æœ¬åœ°VS Codeçš„åœ°æ­¥ï¼‰</p>
<p>åé¢å‡†å¤‡å¦è¾Ÿè¹Šå¾„æä¸€æï¼Œå…ˆæŠŠWebç‰ˆçš„äº¤äº’ä¼˜åŒ–ä¸€ä¸‹ä¸‹</p>
<p><strong>ä¸‰è¿ç ´Xï¼Œæ›´æ–°ä¸‹ä¸€æœŸï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰</strong></p>
<p>è¯»è€…å¯¹å…¶å®ƒå®ç°ç»†èŠ‚æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥<a href="https://code.sugarat.top/" target="_blank" rel="noreferrer">è¯•ç©å</a>ï¼Œè¯„è®ºåŒºç•™è¨€ï¼Œä¸‹ä¸€æœŸé€ä¸Šè§£è¯»</p>
<p>é¡¹ç›®å®Œæ•´æºç è§<a href="https://github.com/ATQQ/onlineDemoEditor" target="_blank" rel="noreferrer">GitHub</a></p>
<p><em>-------------åä¸½çš„åˆ†å‰²çº¿------------</em></p>
<p>æˆç­¾çº¦ä½œè€…äº†ï¼Œåé¢å‡ ä¸ªæœˆè¾“å‡ºå¯èƒ½ä¼šç¨å¾®é¢‘ç¹ä¸€ç‚¹äº†ï¼Œåˆ°æ—¶å€™å°±æ‰“æ‰°äº†ï¼Œå¤§å®¶ä¸è¦åå•¬3è¿</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY2MjE3MTI4OTg5OA==662171289898" alt="å›¾ç‰‡" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY2MTY5ODE0NTY2OQ==661698145669" length="0" type="image//mdImg/MTY2MTY5ODE0NTY2OQ==661698145669"/>
        </item>
        <item>
            <title><![CDATA[å®ç°ä¸€ä¸ªWeb UIæ£€æµ‹(è§†è§‰èµ°æŸ¥)å·¥å…·ing]]></title>
            <link>https://www.dmsrs.org/technology/works/ewuit.html</link>
            <guid>https://www.dmsrs.org/technology/works/ewuit.html</guid>
            <pubDate>Tue, 05 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[# å®ç°ä¸€ä¸ªWeb UIæ£€æµ‹(è§†è§‰èµ°æŸ¥)å·¥å…·ing

## æ¼”ç¤º
åºŸè¯ä¸å¤šå…ˆçœ‹æ•ˆæœï¼Œç›®å‰æ”¯æŒå…ƒç´ çš„æµ‹è·ï¼Œå±æ€§æŸ¥çœ‹è¿™ä¸¤ä¸ªåŠŸèƒ½

| H5                                                                                             | PC                                                                                             |
| ]]></description>
            <content:encoded><![CDATA[<h1 id="å®ç°ä¸€ä¸ªweb-uiæ£€æµ‹-è§†è§‰èµ°æŸ¥-å·¥å…·ing" tabindex="-1">å®ç°ä¸€ä¸ªWeb UIæ£€æµ‹(è§†è§‰èµ°æŸ¥)å·¥å…·ing <a class="header-anchor" href="#å®ç°ä¸€ä¸ªweb-uiæ£€æµ‹-è§†è§‰èµ°æŸ¥-å·¥å…·ing" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªWeb UIæ£€æµ‹(è§†è§‰èµ°æŸ¥)å·¥å…·ing&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="æ¼”ç¤º" tabindex="-1">æ¼”ç¤º <a class="header-anchor" href="#æ¼”ç¤º" aria-label="Permalink to &quot;æ¼”ç¤º&quot;">&ZeroWidthSpace;</a></h2>
<p>åºŸè¯ä¸å¤šå…ˆçœ‹æ•ˆæœï¼Œç›®å‰æ”¯æŒå…ƒç´ çš„æµ‹è·ï¼Œå±æ€§æŸ¥çœ‹è¿™ä¸¤ä¸ªåŠŸèƒ½</p>
<table tabindex="0">
<thead>
<tr>
<th>H5</th>
<th>PC</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://img.cdn.sugarat.top/mdImg/MTY0OTA4NDk4MDg4Nw==ewuit-h5.gif" width="200px" /></td>
<td><img src="https://img.cdn.sugarat.top/mdImg/MTY0OTA4MzcwNTUzNQ==ewuit-pc.gif" width="300px" /></td>
</tr>
</tbody>
</table>
<h2 id="å¿«é€Ÿä½“éªŒ" tabindex="-1">å¿«é€Ÿä½“éªŒ <a class="header-anchor" href="#å¿«é€Ÿä½“éªŒ" aria-label="Permalink to &quot;å¿«é€Ÿä½“éªŒ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ–¹å¼1" tabindex="-1">æ–¹å¼1 <a class="header-anchor" href="#æ–¹å¼1" aria-label="Permalink to &quot;æ–¹å¼1&quot;">&ZeroWidthSpace;</a></h3>
<p>æ‰“å¼€ä¸€ä¸ªç½‘ç«™åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œ</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '//unpkg.com/ewuit@latest/dist/index.min.js'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> script </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () { </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ewuit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Ewuit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // open a ui tool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ewuit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">openUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})();</span></span></code></pre>
</div><h3 id="æ–¹å¼2" tabindex="-1">æ–¹å¼2 <a class="header-anchor" href="#æ–¹å¼2" aria-label="Permalink to &quot;æ–¹å¼2&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨ä½ çš„é¡µé¢æ¨¡æ¿ä¸­åŠ å…¥å¦‚ä¸‹è„šæœ¬</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '//unpkg.com/ewuit@latest/dist/index.min.js'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> script </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () { </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ewuit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Ewuit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // open a ui tool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ewuit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">openUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><h3 id="å…¶å®ƒæ–¹å¼" tabindex="-1">å…¶å®ƒæ–¹å¼ <a class="header-anchor" href="#å…¶å®ƒæ–¹å¼" aria-label="Permalink to &quot;å…¶å®ƒæ–¹å¼&quot;">&ZeroWidthSpace;</a></h3>
<p>å‚è€ƒ Github ä¸Šçš„<a href="https://github.com/ATQQ/ewuit" target="_blank" rel="noreferrer">README</a></p>
<h2 id="èƒ½åšä»€ä¹ˆ" tabindex="-1">èƒ½åšä»€ä¹ˆ <a class="header-anchor" href="#èƒ½åšä»€ä¹ˆ" aria-label="Permalink to &quot;èƒ½åšä»€ä¹ˆ&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="åŠŸèƒ½å®ç°" tabindex="-1">åŠŸèƒ½å®ç° <a class="header-anchor" href="#åŠŸèƒ½å®ç°" aria-label="Permalink to &quot;åŠŸèƒ½å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·]]></title>
            <link>https://www.dmsrs.org/bigWeb/node/phantom-dep-cli.html</link>
            <guid>https://www.dmsrs.org/bigWeb/node/phantom-dep-cli.html</guid>
            <pubDate>Sun, 15 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[# å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·

## ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–

**é¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€äº›æ²¡æœ‰è¢«å®šä¹‰åœ¨å…¶ package.json æ–‡ä»¶ä¸­çš„åŒ…ã€‚**

éƒ¨åˆ†åœ°æ–¹ä¹Ÿè¢«ç¿»è¯‘æˆäº†â€å¹»å½±ä¾èµ–â€œï¼Œåœ¨è‹±æ–‡æ–‡ç« ä¸­ä¸€èˆ¬ç§°ä¸º`phantom dependencies`

## ç°çŠ¶
åœ¨ç°æœ‰å·¥ç¨‹é‡Œï¼Œé™¤ `pnpm` å¤–ä½¿ç”¨çš„æœ€å¤šçš„åŒ…ç®¡ç†å·¥å…·å°±æ˜¯ `yarn` å…¶æ¬¡æ‰æ˜¯ `npm`ã€‚

åä¸¤è€…ï¼Œåœ¨å®Œæˆä¾èµ–å®‰è£…åï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªä¾èµ–æå‡çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯ä¾èµ–çš„ `æ‰å¹³åŒ–`ã€‚

äºæ˜¯è£…ä¸€ä¸ªåº“ `vue`ï¼Œä¸åŒåŒ…ç®¡ç†å™¨çš„ç»“æœå¦‚ä¸‹

|                                     npm                                     |                                    yarn                                     |                                    pnpm                                     |
| :]]></description>
            <content:encoded><![CDATA[<h1 id="å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·" tabindex="-1">å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…· <a class="header-anchor" href="#å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·" aria-label="Permalink to &quot;å®ç°ä¸€ä¸ªå¹½çµä¾èµ–æ‰«æå·¥å…·&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–" tabindex="-1">ä»€ä¹ˆæ˜¯å¹½çµä¾èµ– <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>é¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€äº›æ²¡æœ‰è¢«å®šä¹‰åœ¨å…¶ package.json æ–‡ä»¶ä¸­çš„åŒ…ã€‚</strong></p>
<p>éƒ¨åˆ†åœ°æ–¹ä¹Ÿè¢«ç¿»è¯‘æˆäº†â€å¹»å½±ä¾èµ–â€œï¼Œåœ¨è‹±æ–‡æ–‡ç« ä¸­ä¸€èˆ¬ç§°ä¸º<code>phantom dependencies</code></p>
<h2 id="ç°çŠ¶" tabindex="-1">ç°çŠ¶ <a class="header-anchor" href="#ç°çŠ¶" aria-label="Permalink to &quot;ç°çŠ¶&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨ç°æœ‰å·¥ç¨‹é‡Œï¼Œé™¤ <code>pnpm</code> å¤–ä½¿ç”¨çš„æœ€å¤šçš„åŒ…ç®¡ç†å·¥å…·å°±æ˜¯ <code>yarn</code> å…¶æ¬¡æ‰æ˜¯ <code>npm</code>ã€‚</p>
<p>åä¸¤è€…ï¼Œåœ¨å®Œæˆä¾èµ–å®‰è£…åï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªä¾èµ–æå‡çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯ä¾èµ–çš„ <code>æ‰å¹³åŒ–</code>ã€‚</p>
<p>äºæ˜¯è£…ä¸€ä¸ªåº“ <code>vue</code>ï¼Œä¸åŒåŒ…ç®¡ç†å™¨çš„ç»“æœå¦‚ä¸‹</p>
<table tabindex="0">
<thead>
<tr>
<th style="text-align:center">npm</th>
<th style="text-align:center">yarn</th>
<th style="text-align:center">pnpm</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYyNDkxNDc0OQ==652624914749" alt="å›¾ç‰‡" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYwNDEyMzUwMQ==652604123501" alt="å›¾ç‰‡" loading="lazy"></td>
<td style="text-align:center"><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYwNDIxODMwMA==652604218300" alt="å›¾ç‰‡" loading="lazy"></td>
</tr>
</tbody>
</table>
<p>ç”±äºä¾èµ–çš„<code>æ‰å¹³åŒ–</code>ï¼Œå¯ä»¥çœ‹åˆ°å‰ä¸¤è€…ä¼šä½¿ <code>node_modules</code> ä¸­å¤šå‡ºä¸€äº›å…¶å®ƒçš„ä¸œè¥¿</p>
<p>ä¹Ÿç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œå¾ˆå¤šåŸºäº <code>yarn</code> çš„å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼Œä¼šå°†è®¸å¤šå¸¸ç”¨çš„ä¾èµ–æˆ–è€…é‡è¦ä¾èµ–å»åšä¸€ä¸ªç‰ˆæœ¬çš„ç®¡æ§å’Œä¾èµ–çš„æ”¶æ•›ï¼Œäºæ˜¯é¡¹ç›®é‡Œéœ€è¦å®‰è£…çš„ä¾èµ–å°±å°‘äº†ï¼Œçœ‹ä¸Šå»å°±ååˆ†æ¸…æ™°ã€‚</p>
<p>æ¯”å¦‚å®‰è£…<code>@xx/vue</code>ï¼ŒåŒæ—¶å°†ç›¸å…³çš„<code>lint</code>ï¼Œ<code>test-util</code>ï¼Œ<code>git hooks</code>ï¼Œ<code>lodash</code>ï¼Œ<code>xx-utils</code>ç­‰ç­‰åŒ…éƒ½åšäº†å®‰è£…ï¼Œè¿™æ ·åœ¨å·¥ç¨‹é‡Œåªéœ€è¦è£…ä¸€ä¸ªåŒ…å°±èƒ½ä½¿ç”¨è¿™äº›åŒ…çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿç®—æ˜¯<code>å¹½çµä¾èµ–</code>çš„å¥½å¤„ã€‚</p>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åŒ…ç®¡ç†å·¥å…·åˆ‡æ¢pnpm" tabindex="-1">åŒ…ç®¡ç†å·¥å…·åˆ‡æ¢pnpm <a class="header-anchor" href="#åŒ…ç®¡ç†å·¥å…·åˆ‡æ¢pnpm" aria-label="Permalink to &quot;åŒ…ç®¡ç†å·¥å…·åˆ‡æ¢pnpm&quot;">&ZeroWidthSpace;</a></h3>
<p>éšç€é¡¹ç›®çš„è¿­ä»£æ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œå·¥ç¨‹é‡Œçš„ä¾èµ–åŒ…è¶Šæ¥è¶Šå¤šã€‚ä¾èµ–å®‰è£…æ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œå³ä¾¿æœ‰å®‰è£…ç¼“å­˜ï¼Œè¿˜æ˜¯è§‰å¾—éå¸¸çš„æ…¢ã€‚äºæ˜¯æœ‰äº†æ¢ä¾èµ–ç®¡ç†å·¥å…·çš„è¯‰æ±‚ã€‚</p>
<p>ä¸€ç•ªè°ƒç ”åï¼Œé€‰æ‹©æŠŠåŒ…ç®¡ç†å·¥å…·åˆ‡æ¢ä¸º<code>pnpm</code>ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆæ˜¯-pnpm" tabindex="-1">ä¸ºä»€ä¹ˆæ˜¯ pnpm <a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯-pnpm" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆæ˜¯ pnpm&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡ pnpm <a href="https://www.pnpm.cn/benchmarks" target="_blank" rel="noreferrer">å®˜æ–¹çš„æµ‹è¯„æ•°æ®</a> å¯ä»¥çœ‹å‡ºï¼Œåœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹</p>
<p>å®‰è£…é€Ÿåº¦æ˜¯ <code>npm/yarn</code> çš„ <code>2-3</code>å€ï¼Œä¸€ä¸ªé¡¹ç›®å°±ç®—èŠ‚çº¦<code>å‡ åç§’</code>ï¼Œå¯¹äºæ‰¿è½½ä¸Šå‰å·¥ç¨‹çš„<code>CI/CD</code>å¹³å°æ¥è¯´ï¼Œå‡ ä¹æ—¶æ—¶åˆ»åˆ»éƒ½å­˜åœ¨å‘å¸ƒçš„æƒ…å†µï¼Œæ¯å¤©çš„æ”¶ç›Šæ˜¯å¾ˆå¯è§‚çš„ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ç­‰å¾…æ—¶é—´ä¹Ÿå¤§å¹…ç¼©çŸ­ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆåšäº†è¿™ä¸ªå·¥å…·" tabindex="-1">ä¸ºä»€ä¹ˆåšäº†è¿™ä¸ªå·¥å…· <a class="header-anchor" href="#ä¸ºä»€ä¹ˆåšäº†è¿™ä¸ªå·¥å…·" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆåšäº†è¿™ä¸ªå·¥å…·&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨<code>yarn</code>åˆ‡æ¢åˆ°<code>pnpm</code>,å¯ä»¥é€šè¿‡<code>pnpm import</code>æŒ‡ä»¤å®ç°lockæ–‡ä»¶çš„ä¸€é”®è½¬æ¢ï¼Œé¿å…ä¾èµ–ç‰ˆæœ¬å‘ç”Ÿå˜æ›´ã€‚</p>
<p>ä½†ç”±äº<code>pnpm</code>æ²¡æœ‰ä¾èµ–æ‰å¹³åŒ–çš„åŠ¨ä½œï¼Œå¤§éƒ¨åˆ†é¡¹ç›®åˆ‡æ¢åæ²¡å‘ç›´æ¥æ­£å¸¸å·¥ä½œï¼Œä¸»è¦åŸå› å°±æ˜¯<code>å¹½çµä¾èµ–</code></p>
<p>éœ€è¦ä¸ºpnpmé¡¹ç›®å•ç‹¬æ·»åŠ <a href="https://www.pnpm.cn/npmrc#public-hoist-pattern" target="_blank" rel="noreferrer">ä¾èµ–æå‡çš„é…ç½®</a></p>
<p>äºæ˜¯å°±éœ€è¦ä¸€ä¸ªæ‰«æå¹½çµä¾èµ–çš„å·¥å…·ï¼ŒååŠ©åšåŒ…ç®¡ç†å·¥å…·çš„è¿ç§»ã€‚ç½‘ä¸Šæœç´¢äº†ä¸€ç•ªï¼Œæ²¡æœ‰æ‰¾åˆ°èƒ½ç”¨çš„å°±åªå¥½è‡ªå·±ğŸ´ä¸€ä¸ªäº†ã€‚</p>
<h2 id="åŸç†ä»‹ç»" tabindex="-1">åŸç†ä»‹ç» <a class="header-anchor" href="#åŸç†ä»‹ç»" aria-label="Permalink to &quot;åŸç†ä»‹ç»&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸€å›¾èƒœåƒè¨€</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYwODIzODM1NA==652608238354" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ€»ç»“ä¸‹å°±æ˜¯4æ­¥</p>
<ol>
<li>æ‰«æ–‡ä»¶</li>
<li>æå–å¯¼å…¥èµ„æºè·¯å¾„</li>
<li>æå–åŒ…å</li>
<li>å‰”é™¤<code>package.json</code>ä¸­å­˜åœ¨çš„</li>
</ol>
<h2 id="å…·ä½“å®ç°" tabindex="-1">å…·ä½“å®ç° <a class="header-anchor" href="#å…·ä½“å®ç°" aria-label="Permalink to &quot;å…·ä½“å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™é‡Œåªè´´å‡ ä¸ªå…³é”®æ­¥éª¤çš„ä»£ç ï¼Œä»£ç çš„ç»„ç»‡é€»è¾‘å³ä¸Šè¿°æµç¨‹å›¾æ‰€ç¤º</p>
<h3 id="è·å–æ‰«æç›®æ ‡æ–‡ä»¶" tabindex="-1">è·å–æ‰«æç›®æ ‡æ–‡ä»¶ <a class="header-anchor" href="#è·å–æ‰«æç›®æ ‡æ–‡ä»¶" aria-label="Permalink to &quot;è·å–æ‰«æç›®æ ‡æ–‡ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™å—åˆ©ç”¨<code>path</code>ä¸<code>fs</code>æ¨¡å—é…åˆå³å¯å®ç°</p>
<ul>
<li>ä½¿ç”¨<code>fs.readdirSync</code>è¯»å–æ–‡ä»¶åˆ—è¡¨ï¼Œç„¶åé€’å½’å³å¯</li>
<li>é€šè¿‡æ–‡ä»¶åç¼€<code>ext</code>ç­›é€‰å‡ºéœ€è¦çš„æ–‡ä»¶</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Exclude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RegExp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> scanDirFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  extList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  exclude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Exclude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.git'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.vscode'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, { withFileTypes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, file.name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename, exclude)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      continue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      (extList.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> extList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename).ext))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scanDirFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filename, extList, exclude))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">exclude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Exclude</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> patterns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [exclude].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> patterns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'string'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(value)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è°ƒç”¨ç¤ºä¾‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scanDirFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scanDirFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname), [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">])</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scanDirFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname), [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'test'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><ul>
<li>js ç³»èµ„æºä¸»è¦åŒ…å«<code>.js</code>,<code>.jsx</code>,<code>.ts</code>,<code>.tsx</code>å››ç±»èµ„æº</li>
<li>css ç³»èµ„æºåŒ…å«<code>.css</code>,<code>.scss</code>,<code>.less</code>,<code>.sass</code></li>
<li>vue ä¸»è¦å°±æ˜¯<code>.vue</code>
<ul>
<li>åªéœ€è¦æŠŠ <code>script</code> å’Œ <code>style</code>å†…å®¹åˆ†åˆ«æ‹†å¼€å¤„ç†å³å¯</li>
</ul>
</li>
</ul>
<h3 id="jsèµ„æºå¼•å…¥è·¯å¾„æå–" tabindex="-1">JSèµ„æºå¼•å…¥è·¯å¾„æå– <a class="header-anchor" href="#jsèµ„æºå¼•å…¥è·¯å¾„æå–" aria-label="Permalink to &quot;JSèµ„æºå¼•å…¥è·¯å¾„æå–&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œä½¿ç”¨ <a href="https://github.com/thx/gogocode" target="_blank" rel="noreferrer">gogocode</a> æ“ä½œASTï¼Œé…åˆ<a href="https://astexplorer.net/" target="_blank" rel="noreferrer">astexplorer</a>ç€ä½¿ç”¨ï¼Œæ“ä½œèµ·æ¥éå¸¸ç®€å•</p>
<p>å¯¼å…¥æ¨¡å—çš„æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹4ç§</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(value)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(value)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">export x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span></code></pre>
</div><p><code>import/export</code>æå–</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> AST, { GoGoAST } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'gogocode'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileText)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> GoGoAST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> importPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">attr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'source.value'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(importPath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ImportDeclaration'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(callback)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ExportNamedDeclaration'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(callback)</span></span></code></pre>
</div><p><code>require/import()</code>æå–</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> GoGoAST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> importPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> node.match[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]?.value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(importPath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¤„ç†import('')</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'import($_$)'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(callback)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¤„ç†require('')</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'require($_$)'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">each</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(callback)</span></span></code></pre>
</div><h3 id="cssèµ„æºå¼•å…¥è·¯å¾„æå–" tabindex="-1">CSSèµ„æºå¼•å…¥è·¯å¾„æå– <a class="header-anchor" href="#cssèµ„æºå¼•å…¥è·¯å¾„æå–" aria-label="Permalink to &quot;CSSèµ„æºå¼•å…¥è·¯å¾„æå–&quot;">&ZeroWidthSpace;</a></h3>
<p>é’ˆå¯¹cssï¼Œåªè€ƒè™‘<code>@import</code>åœºæ™¯çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ­£åˆ™ <code>/^@import\s+['&quot;](.*)?['&quot;]/</code>å³å¯å®ç°æå–</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYxMDQwMjUxNw==652610402517" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCssFileImportSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fileText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> importRegexp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">@import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">['"]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">['"]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> lines</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fileText.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> lines) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> match</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> line.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(importRegexp)?.[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (match) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="vueæ–‡ä»¶ä¸­å¼•å…¥è·¯å¾„æå–" tabindex="-1">Vueæ–‡ä»¶ä¸­å¼•å…¥è·¯å¾„æå– <a class="header-anchor" href="#vueæ–‡ä»¶ä¸­å¼•å…¥è·¯å¾„æå–" aria-label="Permalink to &quot;Vueæ–‡ä»¶ä¸­å¼•å…¥è·¯å¾„æå–&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸€ä¸ª<code>.vue</code>æ–‡ä»¶ä¸»è¦å°± <code>template</code>, <code>script</code>, <code>style</code>ä¸‰éƒ¨åˆ†æ„æˆï¼Œåªéœ€è¦æŠŠ<code>è„šæœ¬</code>ä¸<code>æ ·å¼</code>æ‹†å¼€å¤„ç†å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> AST </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'gogocode'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getVueFileImportSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fileText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sources</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç›®å‰å‘ç°Vue3 &#x3C;script lang="ts" setup> çš„æ— æ³•æ­£å¸¸è§£æï¼Œæ‰€ä»¥åœ¨è§£æå‰å…ˆå¤„ç†ä¸€ä¸‹setupå…³é”®å­—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileText.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">&#x3C;script(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)setup(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;script$1$2>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    parseOptions: { language: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æå–scriptå†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ast.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;script>&#x3C;/script>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">generate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getJsFileImportSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // cssç›´æ¥æ­£åˆ™å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  sources.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getCssFileImportSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileText))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sources</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="ç¬¬ä¸‰æ–¹ä¾èµ–åˆ¤æ–­" tabindex="-1">ç¬¬ä¸‰æ–¹ä¾èµ–åˆ¤æ–­ <a class="header-anchor" href="#ç¬¬ä¸‰æ–¹ä¾èµ–åˆ¤æ–­" aria-label="Permalink to &quot;ç¬¬ä¸‰æ–¹ä¾èµ–åˆ¤æ–­&quot;">&ZeroWidthSpace;</a></h3>
<p>èµ„æºè·¯å¾„æå–å‡ºæ¥åï¼Œå°±åªéœ€è¦åˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯node_modulesä¸‹çš„èµ„æºå³å¯äº†ï¼Œæµç¨‹å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY1MjYyNDQ2ODAyNw==652624468027" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path, { parse } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'path'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { existsSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fs'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isValidNodeModulesSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  filePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  importSourcePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filePath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">importSourcePath) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (importSourcePath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'~@/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'`'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      importSourcePath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(prefix)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cssExt, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jsExt].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">importSourcePath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ext</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æå–åŒ…å" tabindex="-1">æå–åŒ…å <a class="header-anchor" href="#æå–åŒ…å" aria-label="Permalink to &quot;æå–åŒ…å&quot;">&ZeroWidthSpace;</a></h3>
<p>æ¥ä¸‹æ¥å°±æ˜¯ä»ç­›é€‰å‡ºæ¥çš„<code>æœ‰æ•ˆèµ„æºè·¯å¾„</code>é‡Œæå–å‡ºåŒ…åäº†ï¼Œé€šå¸¸å°±ä¸¤ç§åœºæ™¯<code>pkgName</code>å’Œ<code>@scope/pkgName</code>ï¼Œé€šè¿‡å‡ ä¸ªå¸¸ç”¨çš„APIå°±èƒ½æå®š</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pkgPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> paths</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pkgPath</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">node_modules</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> paths[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> paths.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> paths[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'getPkgNameBySourcePath'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@vue/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@vue/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vue/dist/index.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../node_modules/vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getPkgNameBySourcePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'~@element/ui/dist/index.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    '@element/ui'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h3 id="è¿‡æ»¤æ‰ä¸åˆæ³•çš„åŒ…å" tabindex="-1">è¿‡æ»¤æ‰ä¸åˆæ³•çš„åŒ…å <a class="header-anchor" href="#è¿‡æ»¤æ‰ä¸åˆæ³•çš„åŒ…å" aria-label="Permalink to &quot;è¿‡æ»¤æ‰ä¸åˆæ³•çš„åŒ…å&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸Šè¿°è§„åˆ™ä¸èƒ½æ¶µç›–åˆ°æ‰€æœ‰æƒ…å†µï¼Œå–åˆ°çš„åŒ…åå¯èƒ½æœ‰ä¸åˆæ³•çš„å¦‚<code>this.xxx</code>,<code>xx.resolve(yyy)</code>,<code>Nodeå†…ç½®çš„åŒ… fs/path/process/...etc</code></p>
<p>é’ˆå¯¹Nodeå†…ç½®çš„åŒ…å¯ä»¥ç›´æ¥å†™ä¸ªæ­£åˆ™æå®š,å½“ç„¶è¿™æ®µæ­£åˆ™æ¥æºäº<code>Copilot</code>æ¨è</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isNodeLib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">v:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">child_process</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cluster</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">console</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">constants</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dgram</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">domain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">events</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">https</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">net</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">os</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">punycode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querystring</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">repl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">string_decoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">tls</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">tty</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">util</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">zlib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/.test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å½“ç„¶ä¹Ÿæœ‰ç°æˆçš„ç¬¬ä¸‰æ–¹åŒ…å¯ä»¥ç›´æ¥ä½¿ç”¨ <a href="https://www.npmjs.com/package/validate-npm-package-name" target="_blank" rel="noreferrer">validate-npm-package-name</a> ,è¿™ä¸ªæ˜¯å®˜æ–¹å‡ºå“çš„ï¼Œç”¨æ³•ä¹Ÿå°±æ›´åŠ ç®€å•äº†</p>
<ul>
<li>ä¸ä»…ä»…èƒ½è¿‡æ»¤æ‰Nodeå†…ç½®åŒ…ï¼Œè¿˜èƒ½è¿‡æ»¤æ‰ä¸åˆæ³•å‘½åçš„åŒ…</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> validPkgName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'validate-npm-package-name'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pkgName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">validForNewPackages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">validForOldPackages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> validPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pkgName)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> validForNewPackages</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'isValidPkgName'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'some-package'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@jane/foo.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'r.resolve("custom-token.js")'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isValidPkgName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dayjs/dsds/abc.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>å…³é”®ä¸€ç³»åˆ—æ–¹æ³•æå®šåï¼Œåªéœ€è¦è¿›è¡Œé€»è¾‘çš„ç»„ç»‡å³å¯ï¼Œ<a href="https://github.com/ATQQ/tools/blob/8e0a79d093b3f03a47adff4d7fc0569f19a398e4/packages/cli/ghost/src/util/index.ts#L15-L81" target="_blank" rel="noreferrer">GithubæŸ¥çœ‹æœ€ç»ˆæ–¹æ³•æºç </a></p>
<h2 id="ä¸Šæ‰‹ä½“éªŒ" tabindex="-1">ä¸Šæ‰‹ä½“éªŒ <a class="header-anchor" href="#ä¸Šæ‰‹ä½“éªŒ" aria-label="Permalink to &quot;ä¸Šæ‰‹ä½“éªŒ&quot;">&ZeroWidthSpace;</a></h2>
<p>å·²å°†æœ€ç»ˆå®ç°æ•´æˆäº†<code>npm</code>åŒ…<code>@sugarat/ghost</code>ï¼Œé¡¹ç›®å¯å¼•å…¥ç›´æ¥ä½¿ç”¨</p>
<p>ä¸ºä»€ä¹ˆå«<code>ghost</code>è€Œä¸æ˜¯<code>phantom</code>ï¼Ÿå¯èƒ½å¤§å®¶å¯¹<code>ghost</code>ğŸ‘»è¿™ä¸ªå•è¯çš„æ„æ€æ›´åŠ ç†Ÿæ‚‰ä¸€äº›</p>
<h3 id="cli-å·¥å…·" tabindex="-1">CLI å·¥å…· <a class="header-anchor" href="#cli-å·¥å…·" aria-label="Permalink to &quot;CLI å·¥å…·&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/ghost</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># default scan src </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ghost</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> scan</span></span></code></pre>
</div><h3 id="é¡¹ç›®ä¸­è°ƒç”¨" tabindex="-1">é¡¹ç›®ä¸­è°ƒç”¨ <a class="header-anchor" href="#é¡¹ç›®ä¸­è°ƒç”¨" aria-label="Permalink to &quot;é¡¹ç›®ä¸­è°ƒç”¨&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/ghost</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/ghost</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @sugarat/ghost</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { findGhost } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@sugarat/ghost'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// or</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { findPhantom } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@sugarat/ghost'</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> phantomDependency</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> findGhost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'package.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p><code>pnpm</code> æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæ¨èå¤§å®¶å¯ä»¥ç”¨èµ·æ¥äº†</p>
<p>æ¬¢è¿è¯„è®ºåŒºäº¤æµæŒ‡æ­£ï¼Œæœ‰ <code>case</code> å¯ä»¥æŠ›å‡ºæ¥å¸®åŠ©å·¥å…·å®Œå–„å¾—æ›´å¥½</p>
<ul>
<li><a href="https://github.com/ATQQ/tools/tree/main/packages/cli/ghost" target="_blank" rel="noreferrer">é¡¹ç›®å®Œæ•´æºç </a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY1MjYyNDkxNDc0OQ==652624914749" length="0" type="image//mdImg/MTY1MjYyNDkxNDc0OQ==652624914749"/>
        </item>
        <item>
            <title><![CDATA[é¢è¯•é¢˜åˆé›†]]></title>
            <link>https://www.dmsrs.org/interview/problem/</link>
            <guid>https://www.dmsrs.org/interview/problem/</guid>
            <pubDate>Sun, 15 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Q&A
å‰ç«¯é¢è¯•å¸¸è§é—®é¢˜ä¸ä¸ªäººçš„æ€»ç»“æ•´ç†
ä¸‹é¢æ˜¯è®°å½•çš„æ‰€æœ‰é¢è¯•é¢˜ç›®å½•:smile:
 js
&lt;solve ok
åŸå§‹ç±»å‹æœ‰å“ªäº›ï¼Ÿ
&lt;/solve&gt;
&lt;solve ok&gt;
]]></description>
            <content:encoded><![CDATA[<h1 id="q-a" tabindex="-1">Q&amp;A <a class="header-anchor" href="#q-a" aria-label="Permalink to &quot;Q&amp;A&quot;">&ZeroWidthSpace;</a></h1>
<p>å‰ç«¯é¢è¯•å¸¸è§é—®é¢˜ä¸ä¸ªäººçš„æ€»ç»“æ•´ç†</p>
<p><strong>ä¸‹é¢æ˜¯è®°å½•çš„æ‰€æœ‰é¢è¯•é¢˜ç›®å½•ğŸ˜„</strong></p>
<h2 id="js" tabindex="-1">js <a class="header-anchor" href="#js" aria-label="Permalink to &quot;js&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../js/primitiveType.html">åŸå§‹ç±»å‹æœ‰å“ªäº›ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/nullobj.html">nullæ˜¯å¯¹è±¡å—ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/numNotEqual.html">ä¸ºä»€ä¹ˆ0.1+0.2!=0.3?</a></p>
</solve>
<solve ok>
<p><a href="./../js/objDiffPrim.html">å¯¹è±¡ç±»å‹ä¸åŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„?</a></p>
</solve>
<solve ok>
<p><a href="./../js/objparam.html">å‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜?</a></p>
</solve>
<solve ok>
<p><a href="./../js/typeof.html">typeofèƒ½å¦æ­£å¸¸åˆ¤æ–­ç±»å‹?</a></p>
</solve>
<solve ok>
<p><a href="./../js/instanceof.html">instanceofèƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹çš„åŸå› æ˜¯ä»€ä¹ˆ?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/prototype.html">æ¦‚è¿°åŸå‹ä¸åŸå‹é“¾?</a></p>
</solve>
<solve ok>
<p><a href="./../js/this.html">å¦‚ä½•æ­£ç¡®åˆ¤æ–­this?</a></p>
</solve>
<solve ok>
<p><a href="./../js/equal.html">==ä¸===æœ‰ä»€ä¹ˆåŒºåˆ«?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/closure.html">ä»€ä¹ˆæ˜¯é—­åŒ…?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/copy.html">æ·±æ‹·è´ä¸æµ…æ‹·è´?</a></p>
</solve>
<solve ok>
<p><a href="./../js/module.html">ä¸ºä»€ä¹ˆä½¿ç”¨æ¨¡å—åŒ–ï¼ŸJSå®ç°æ¨¡å—åŒ–çš„å‡ ç§æ–¹å¼</a></p>
</solve>
<solve ok>
<p><a href="./../js/promise.html#ç‰¹ç‚¹">Promiseçš„ç‰¹ç‚¹/ä¼˜ç‚¹/ç¼ºç‚¹ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/promise.html#promiseé“¾">ä»€ä¹ˆæ˜¯Promiseé“¾ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/promise.html#promiseé“¾">Promiseæ„é€ å‡½æ•°æ‰§è¡Œå’Œthenå‡½æ•°æ‰§è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/asyncawait.html">asyncåŠawaitçš„ç‰¹ç‚¹/ä¼˜ç‚¹/ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/asyncawait.html">awaitåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myNew.html">newåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myNew.html">newåˆ›å»ºå¯¹è±¡ä¸å­—é¢é‡åˆ›å»ºå¯¹è±¡çš„åŒºåˆ«ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/v8garbage.html">v8ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/event.html">äº‹ä»¶è§¦å‘è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../js/event.html">ä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cors.html">ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿä½¿ç”¨åŒæºç­–ç•¥çš„åŸå› ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cors.html">è§£å†³è·¨åŸŸçš„æ–¹å¼ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cors.html#é¢„æ£€è¯·æ±‚">ä»€ä¹ˆæ˜¯é¢„æ£€è¯·æ±‚ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/currying.html#æŸ¯é‡ŒåŒ–">ä»€ä¹ˆæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/garbage.html">JSçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/throttling.html#é˜²æŠ–">ä»€ä¹ˆæ˜¯èŠ‚æµ,é˜²æŠ–ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/eventloop.html">æµè§ˆå™¨ä¸Nodeä¸­event loop?ä»–ä»¬æœ‰ä½•ä¸åŒï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/scope.html">æ¦‚è¿°ä¸€ä¸‹jsä¸­çš„è¯æ³•ä½œç”¨åŸŸï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../interview/js/diff-for-in-of.html">for inéå†æ•°ç»„ä¼šæœ‰å“ªäº›é—®é¢˜</a></p>
</solve>
<solve ok>
<p><a href="./../js/onload-ready.html">window.onloadä¸document.readyæ‰§è¡Œé¡ºåº</a></p>
</solve>
<solve >äº†è§£JSBridgeå—</solve>
<h2 id="css" tabindex="-1">css <a class="header-anchor" href="#css" aria-label="Permalink to &quot;css&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../bigWeb/css/reflow.html#å›æµ">ä»€ä¹ˆæ˜¯å›æµä¸é‡ç»˜ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/css/box.html">ä»€ä¹ˆæ˜¯ç›’æ¨¡å‹ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/css/level.html">CSSçš„å±‚çº§å…³ç³»ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/css/bfc.html">ä»€ä¹ˆæ˜¯BFCï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/css/flex.html">flexå¼¹æ€§å¸ƒå±€ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../css/display.html">displayå±æ€§æœ‰å“ªäº›?ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ?</a></p>
</solve>
<solve ok>
<p><a href="./../css/position.html">positionçš„å€¼æœ‰å“ªäº›?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/html/semantic.html">ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–æ ‡ç­¾?æœ‰å“ªäº›?ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ</a></p>
</solve>
<solve ok>
<p><a href="./../css/inherit.html">å“ªäº›å±æ€§ä¸å¯ä»¥è¢«ç»§æ‰¿</a></p>
</solve>
<solve ok>
<p><a href="./../css/hideElement.html">display:none,opactiy:0,visibility:hiddenåŒºåˆ«</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/css/ifc.html">ä»€ä¹ˆæ˜¯IFCï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noreferrer">gridå¸ƒå±€ï¼Ÿ</a></p>
</solve>
<h2 id="vue" tabindex="-1">vue <a class="header-anchor" href="#vue" aria-label="Permalink to &quot;vue&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../bigWeb/vue/dep.html">å®ç°æ•°æ®çš„å“åº”å¼çš„åŸç†ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/vue/routing.html">è·¯ç”±åŸç†,ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¸ä¼šåˆ·æ–°</a></p>
</solve>
<h2 id="es6" tabindex="-1">ES6 <a class="header-anchor" href="#es6" aria-label="Permalink to &quot;ES6&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../js/es6.html">å¸¸è§es6é—®é¢˜?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/symbol.html">Symbolçš„ç”¨æ³•?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/arrowfun.html#ç‰¹ç‚¹">ç®­å¤´å‡½æ•°ç‰¹ç‚¹?</a></p>
</solve>
<solve ok>
<p><a href="./../other/promote.html">ä»€ä¹ˆæ˜¯æå‡/æš‚æ—¶æ€§æ­»åŒº?var/let/conståŒºåˆ«</a></p>
</solve>
<h2 id="å°ç¨‹åº" tabindex="-1">å°ç¨‹åº <a class="header-anchor" href="#å°ç¨‹åº" aria-label="Permalink to &quot;å°ç¨‹åº&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../mini/feature.html">å°ç¨‹åºçš„ç‰¹ç‚¹?</a></p>
</solve>
<solve ok>
<p><a href="./../mini/principle.html">å°ç¨‹åºçš„åŸç†?</a></p>
</solve>
<solve ok>
<p><a href="./../mini/differentweb.html">ä¸ä¼ ç»Ÿç§»åŠ¨webçš„å¼‚åŒ?</a></p>
</solve>
<solve>å°ç¨‹åºæ˜¯å¦‚ä½•ä¸webviewé€šä¿¡çš„?</solve>
<h2 id="æµè§ˆå™¨" tabindex="-1">æµè§ˆå™¨ <a class="header-anchor" href="#æµè§ˆå™¨" aria-label="Permalink to &quot;æµè§ˆå™¨&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../bigWeb/browser/cache.html">æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cache.html#å¼ºç¼“å­˜">ä»€ä¹ˆæ˜¯å¼ºç¼“å­˜/åå•†ç¼“å­˜ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cache.html#åå•†ç¼“å­˜">åå•†ç¼“å­˜çš„ä½œç”¨ï¼Ÿå¦‚ä½•å·¥ä½œçš„ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/safe.html">æµè§ˆå™¨å®‰å…¨é—®é¢˜ï¼Ÿ</a></p>
</solve>
<h2 id="ç¼–ç¨‹é¢˜" tabindex="-1">ç¼–ç¨‹é¢˜ <a class="header-anchor" href="#ç¼–ç¨‹é¢˜" aria-label="Permalink to &quot;ç¼–ç¨‹é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../coding/js/inherit.html">å¦‚ä½•å®ç°ç»§æ‰¿</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myNew.html">æ¨¡æ‹Ÿå®ç°newå‘½ä»¤</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/equalA.html">å¦‚ä½•å®ç° a==1&amp;&amp;a==2</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/algorithm/quickSort.html">å¿«æ’å®ç°</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/algorithm/linkReserve.html">å•é“¾è¡¨è½¬ç½®</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myCall.html">æ¨¡æ‹Ÿå®ç°call</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myApply.html">æ¨¡æ‹Ÿå®ç°apply</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/myBind.html">æ¨¡æ‹Ÿå®ç°bind</a></p>
</solve>
<solve ok>
<p><a href="./../code/debounce-throttle.html">èŠ‚æµä¸é˜²æŠ–å®ç°</a></p>
</solve>
<solve ok>
<p><a href="./../code/myClock.html">ä½¿ç”¨requestAnimationFrameå®ç°setTimeout/setInterval</a></p>
</solve>
<solve ok>
<p><a href="./../code/middle-center.html">å¦‚ä½•å®ç°æ°´å¹³å±…ä¸­,å‚ç›´å±…ä¸­,å‚ç›´æ°´å¹³å±…ä¸­</a></p>
</solve>
<solve ok>
<p><a href="./../code/transfer.html">å®ç°36è¿›åˆ¶è½¬æ¢</a></p>
</solve>
<solve ok>
<p><a href="./../code/treeTraverse.html">äºŒå‰æ ‘æ ‘çš„éå†æ–¹å¼,å‰/ä¸­/å,å±‚æ¬¡</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/js/currying.html">å‡½æ•°æŸ¯é‡ŒåŒ–å®ç°</a></p>
</solve>
<solve ok>
<p><a href="./../code/kmp.html">æ¨¡å¼ä¸²åŒ¹é…,åœ¨æ‰¾å‡ºå­ä¸²åœ¨æ¨¡å¼ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</a></p>
</solve>
<solve>å¯¹ç§°äºŒå‰æ ‘</solve>
<solve>å¹¶å‘è¯·æ±‚?</solve>
<solve>å®ç°ä¸€ä¸ªajax</solve>
<solve>åˆ¤æ–­ä¸€ä¸ªæœ‰å‘å›¾æ˜¯å¦åŒ…å«ç¯</solve>
<h2 id="ç½‘ç»œ" tabindex="-1">ç½‘ç»œ <a class="header-anchor" href="#ç½‘ç»œ" aria-label="Permalink to &quot;ç½‘ç»œ&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../computerBase/Internet/tcp.html">æ¦‚è¿°ä¸€ä¸‹TCP</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/udp.html">æ¦‚è¿°ä¸€ä¸‹UDP</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/tcp-udp.html">TCPä¸UDPåŒºåˆ«</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html">æ¦‚è¿°HTTP</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html#HTTPS">HTTPä¸HTTPSçš„åŒºåˆ«</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html#TLS">TLSåè®®æ¡æ‰‹è¿‡ç¨‹,å¦‚ä½•å·¥ä½œçš„</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html#http2">HTTP2çš„ç‰¹ç‚¹</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•æ‰èƒ½ä½¿ç”¨HTTP2,æœ‰ä»€ä¹ˆå‰ææ¡ä»¶</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/http.html#QUIC">HTTP3ä¸­ä½¿ç”¨çš„QUICåè®®åŸºäºUDPçš„åŸå› ?</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/Internet/clength.html">å¦‚æœå“åº”å¤´Content-Length=0é‚£ä¹ˆæ˜¯å‘å‡ºæ¥è¢«æˆªå–äº†è¿˜æ˜¯æ²¡å‘å‡ºæ¥?</a></p>
</solve>
<solve ok>
<p><a href="./../../bigWeb/browser/cors.html">è·¨åŸŸå¦‚ä½•æºå¸¦cookie</a></p>
</solve>
<h2 id="æ“ä½œç³»ç»Ÿ" tabindex="-1">æ“ä½œç³»ç»Ÿ <a class="header-anchor" href="#æ“ä½œç³»ç»Ÿ" aria-label="Permalink to &quot;æ“ä½œç³»ç»Ÿ&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../../computerBase/os/difprothr.html">çº¿ç¨‹ä¸è¿›ç¨‹çš„æ¦‚å¿µ/åŒºåˆ«/å¦‚ä½•å·¥ä½œçš„?</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/os/communicate.html">è¿›ç¨‹å’Œçº¿ç¨‹æ€ä¹ˆé€šä¿¡?</a></p>
</solve>
<solve ok>
<p><a href="./../../computerBase/os/deadlock.html">ä»€ä¹ˆæ˜¯æ­»é”?ä¸ºä»€ä¹ˆä¼šå‡ºç°?å¦‚ä½•é¿å…</a></p>
</solve>
<solve>è¿›ç¨‹ä¹‹é—´å¦‚ä½•è¿›è¡Œåˆ‡æ¢çš„?</solve>
<solve>å‡ ç§å¸¸è§çš„é¡µé¢ç½®æ¢ç®—æ³•</solve>
<h2 id="ç»¼åˆé—®é¢˜" tabindex="-1">ç»¼åˆé—®é¢˜ <a class="header-anchor" href="#ç»¼åˆé—®é¢˜" aria-label="Permalink to &quot;ç»¼åˆé—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<solve ok>
<p><a href="./../other/engineering.html">æ€ä¹ˆç†è§£å‰ç«¯å·¥ç¨‹åŒ–ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../other/inputurl.html">æµè§ˆå™¨è¾“å…¥urlä¹‹ååˆ°ç½‘é¡µæ˜¾ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆ</a></p>
</solve>
<solve ok>
<p><a href="./../../coding/js/inherit.html">åŸå‹å¦‚ä½•å®ç°ç»§æ‰¿,Class å¦‚ä½•å®ç°ç»§æ‰¿,Class æœ¬è´¨æ˜¯ä»€ä¹ˆ</a></p>
</solve>
<solve ok>
<p><a href="./../other/judgeType.html">typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹,instanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆ</a></p>
</solve>
<solve ok>
<p><a href="./../other/object.html">å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„ï¼Ÿå‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../../interview/js/primitiveType.html">åŸå§‹ç±»å‹æœ‰å“ªå‡ ç§ï¼Ÿnull æ˜¯å¯¹è±¡å—ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../other/promote.html">ä»€ä¹ˆæ˜¯æå‡ï¼Ÿä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒºï¼Ÿvarã€let åŠ const åŒºåˆ«ï¼Ÿ</a></p>
</solve>
<solve ok>
<p><a href="./../other/prototype.html">å¦‚ä½•ç†è§£åŸå‹ï¼Ÿå¦‚ä½•ç†è§£åŸå‹é“¾ï¼Ÿ</a></p>
</solve>
<h2 id="éæŠ€æœ¯é—®é¢˜" tabindex="-1">éæŠ€æœ¯é—®é¢˜ <a class="header-anchor" href="#éæŠ€æœ¯é—®é¢˜" aria-label="Permalink to &quot;éæŠ€æœ¯é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<solve>æœªæ¥çš„èŒä¸šè§„åˆ’</solve><solve>é™¤å¼€å‘å¤–çš„å…´è¶£çˆ±å¥½</solve><solve>è‡ªå·±çš„é•¿å¤„/ä¼˜åŠ¿</solve><solve>è‡ªå·±çš„ä¸è¶³</solve><solve>è·Ÿå…¶å®ƒå€™é€‰äººç›¸æ¯”,ä½ è§‰å¾—ä½ çš„ä¼˜åŠ¿åœ¨å“ªé‡Œ</solve><solve>å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£</solve><solve>ä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯</solve><solve>å¹³æ—¶æ€ä¹ˆå­¦ä¹ çš„,æœ€è¿‘åœ¨çœ‹ä»€ä¹ˆ</solve><solve>ä½ è§‰å¾—è‡ªå·±æœ€æˆåŠŸçš„ä¸€æ¬¡åˆ†äº«æˆ–è€…æˆæœæ˜¯ä»€ä¹ˆ</solve><solve>ä½ å¦‚ä½•çœ‹å¾…å‰ç«¯è¿™ä¸ªè¡Œä¸š</solve><solve>ä½ ä¸ºä»€ä¹ˆä¼šé€‰æ‹©æˆ‘ä»¬</solve><h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">&ZeroWidthSpace;</a></h2>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Nodeä¾§å®ç°å†…å®¹å‹ç¼©(gzip/br/deflate)ä»‹ç»ä¸å®è·µ]]></title>
            <link>https://www.dmsrs.org/bigWeb/node/compress-response.html</link>
            <guid>https://www.dmsrs.org/bigWeb/node/compress-response.html</guid>
            <pubDate>Sat, 05 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
åœ¨æŸ¥çœ‹è‡ªå·±çš„åº”ç”¨æ—¥å¿—æ—¶ï¼Œå‘ç°è¿›å…¥æ—¥å¿—é¡µé¢åæ€»æ˜¯è¦å‡ ç§’é’Ÿæ‰ä¼šåŠ è½½ï¼ˆæ¥å£æ²¡åšåˆ†é¡µï¼‰ï¼Œäºæ˜¯æ‰“å¼€ç½‘ç»œé¢æ¿æŸ¥çœ‹
è¿™æ‰å‘ç°æ¥å£è¿”å›çš„æ•°æ®éƒ½æ²¡æœ‰è¢«å‹ç¼©ï¼Œæœ¬ä»¥ä¸ºæ¥å£ç”¨Nginxåå‘ä»£ç†äº†ï¼ŒNginxä¼šè‡ªåŠ¨å¸®æˆ‘åš]]></description>
            <content:encoded><![CDATA[<h1 id="nodeä¾§å®ç°å†…å®¹å‹ç¼©-gzip-br-deflate-ä»‹ç»ä¸å®è·µ" tabindex="-1">Nodeä¾§å®ç°å†…å®¹å‹ç¼©(gzip/br/deflate)ä»‹ç»ä¸å®è·µ <a class="header-anchor" href="#nodeä¾§å®ç°å†…å®¹å‹ç¼©-gzip-br-deflate-ä»‹ç»ä¸å®è·µ" aria-label="Permalink to &quot;Nodeä¾§å®ç°å†…å®¹å‹ç¼©(gzip/br/deflate)ä»‹ç»ä¸å®è·µ&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨æŸ¥çœ‹è‡ªå·±çš„<a href="https://ep2.sugarat.top/" target="_blank" rel="noreferrer">åº”ç”¨</a>æ—¥å¿—æ—¶ï¼Œå‘ç°è¿›å…¥æ—¥å¿—é¡µé¢åæ€»æ˜¯è¦å‡ ç§’é’Ÿæ‰ä¼šåŠ è½½ï¼ˆæ¥å£æ²¡åšåˆ†é¡µï¼‰ï¼Œäºæ˜¯æ‰“å¼€ç½‘ç»œé¢æ¿æŸ¥çœ‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjExMjc0NTg3Nw==646112745877" alt="å›¾ç‰‡" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjExMjc1NzE2OA==646112757168" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¿™æ‰å‘ç°æ¥å£è¿”å›çš„æ•°æ®éƒ½æ²¡æœ‰è¢«å‹ç¼©ï¼Œæœ¬ä»¥ä¸ºæ¥å£ç”¨Nginxåå‘ä»£ç†äº†ï¼ŒNginxä¼šè‡ªåŠ¨å¸®æˆ‘åšè¿™ä¸€å±‚ï¼ˆè¿™å—åé¢æ¢ç©¶ä¸€ä¸‹ï¼Œç†è®ºä¸Šæ˜¯å¯è¡Œçš„ï¼‰</p>
<p>è¿™é‡Œçš„åç«¯æ˜¯ Node æœåŠ¡</p>
<p>æœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹ <code>HTTPæ•°æ®å‹ç¼©</code>ç›¸å…³çŸ¥è¯†ä»¥åŠç¬”è€…çš„åœ¨<code>Nodeä¾§çš„å®è·µ</code></p>
<h2 id="å‰ç½®çŸ¥è¯†" tabindex="-1">å‰ç½®çŸ¥è¯† <a class="header-anchor" href="#å‰ç½®çŸ¥è¯†" aria-label="Permalink to &quot;å‰ç½®çŸ¥è¯†&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>ä¸‹é¢çš„å®¢æˆ·ç«¯å‡æŒ‡æµè§ˆå™¨</p>
</blockquote>
<h3 id="accept-encoding" tabindex="-1">accept-encoding <a class="header-anchor" href="#accept-encoding" aria-label="Permalink to &quot;accept-encoding&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjExMzE0NjMyNQ==646113146325" alt="accept-encoding" loading="lazy"></p>
<p>å®¢æˆ·ç«¯åœ¨å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šåœ¨è¯·æ±‚å¤´(request header)ä¸­æ·»åŠ <code>accept-encoding</code>å­—æ®µï¼Œå…¶å€¼æ ‡æ˜å®¢æˆ·ç«¯<code>æ”¯æŒçš„å‹ç¼©å†…å®¹ç¼–ç </code>æ ¼å¼</p>
<h3 id="content-encoding" tabindex="-1">content-encoding <a class="header-anchor" href="#content-encoding" aria-label="Permalink to &quot;content-encoding&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjExMzI0OTczMQ==646113249731" alt="content-encoding" loading="lazy"></p>
<p>æœåŠ¡ç«¯åœ¨å¯¹è¿”å›å†…å®¹æ‰§è¡Œå‹ç¼©åï¼Œé€šè¿‡åœ¨å“åº”å¤´ï¼ˆresponse headerï¼‰ä¸­æ·»åŠ <code>content-encoding</code>ï¼Œæ¥å‘Šè¯‰æµè§ˆå™¨å†…å®¹<code>å®é™…å‹ç¼©ä½¿ç”¨çš„ç¼–ç ç®—æ³•</code></p>
<h3 id="deflate-gzip-br" tabindex="-1">deflate/gzip/br <a class="header-anchor" href="#deflate-gzip-br" aria-label="Permalink to &quot;deflate/gzip/br&quot;">&ZeroWidthSpace;</a></h3>
<p><code>deflate</code>æ˜¯åŒæ—¶ä½¿ç”¨äº†<code>LZ77</code>ç®—æ³•ä¸<code>å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰</code>çš„ä¸€ä¸ªæ— æŸæ•°æ®å‹ç¼©ç®—æ³•ã€‚</p>
<p><code>gzip</code> æ˜¯åŸºäº <code>DEFLATE</code> çš„ç®—æ³•</p>
<p><code>br</code>æŒ‡ä»£<code>Brotli</code>ï¼Œè¯¥æ•°æ®æ ¼å¼æ—¨åœ¨è¿›ä¸€æ­¥æé«˜å‹ç¼©æ¯”ï¼Œå¯¹æ–‡æœ¬çš„å‹ç¼©ç›¸å¯¹<code>deflate</code>èƒ½å¢åŠ <code>20%</code>çš„å‹ç¼©å¯†åº¦ï¼Œè€Œå…¶å‹ç¼©ä¸è§£å‹ç¼©é€Ÿåº¦åˆ™å¤§è‡´ä¸å˜</p>
<h2 id="zlibæ¨¡å—" tabindex="-1">zlibæ¨¡å— <a class="header-anchor" href="#zlibæ¨¡å—" aria-label="Permalink to &quot;zlibæ¨¡å—&quot;">&ZeroWidthSpace;</a></h2>
<p>Node.jsåŒ…å«ä¸€ä¸ª<code>zlib æ¨¡å—</code>ï¼Œæä¾›äº†ä½¿ç”¨ <code>Gzip</code>ã€<code>Deflate/Inflate</code>ã€ä»¥åŠ <code>Brotli</code> å®ç°çš„å‹ç¼©åŠŸèƒ½</p>
<p>è¿™é‡Œä»¥<code>gzip</code>ä¸ºä¾‹åˆ†åœºæ™¯åˆ—ä¸¾å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œ<code>Deflate/Inflate</code>ä¸<code>Brotli</code>ä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼Œåªæ˜¯APIä¸ä¸€æ ·</p>
<p><strong>åŸºäº<code>stream</code>çš„æ“ä½œ</strong></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjQ2NjMwMzA4MA==646466303080" alt="åŸºäºçš„æ“ä½œ" loading="lazy"></p>
<p><strong>åŸºäº<code>buffer</code>çš„æ“ä½œ</strong></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjQ2NjY4NDUyMw==646466684523" alt="åŸºäºçš„æ“ä½œ" loading="lazy"></p>
<p>å¼•å…¥å‡ ä¸ªæ‰€éœ€çš„æ¨¡å—</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> zlib</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'zlib'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'stream'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> testFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'tests/origin.log'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> targetFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.gz`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decodeFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">testFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.un.gz`</span></span></code></pre>
</div><h2 id="æ–‡ä»¶çš„è§£-å‹ç¼©" tabindex="-1">æ–‡ä»¶çš„è§£/å‹ç¼© <a class="header-anchor" href="#æ–‡ä»¶çš„è§£-å‹ç¼©" aria-label="Permalink to &quot;æ–‡ä»¶çš„è§£/å‹ç¼©&quot;">&ZeroWidthSpace;</a></h2>
<p>è§£/å‹ç¼©ç»“æœæŸ¥çœ‹ï¼Œè¿™é‡Œä½¿ç”¨<code>du</code>æŒ‡ä»¤ç›´æ¥ç»Ÿè®¡è§£å‹ç¼©å‰åç»“æœ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">du</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -ah</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tests</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># ç»“æœå¦‚ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">108K</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    tests/origin.log.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">2.2M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    tests/origin.log</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">2.2M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    tests/origin.log.un.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">4.6M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    tests</span></span></code></pre>
</div><h3 id="åŸºäºæµ-stream-çš„æ“ä½œ" tabindex="-1">åŸºäº<code>æµ(stream)</code>çš„æ“ä½œ <a class="header-anchor" href="#åŸºäºæµ-stream-çš„æ“ä½œ" aria-label="Permalink to &quot;åŸºäº`æµ(stream)`çš„æ“ä½œ&quot;">&ZeroWidthSpace;</a></h3>
<p>ä½¿ç”¨<code>createGzip</code>ä¸<code>createUnzip</code></p>
<ul>
<li>æ³¨ï¼šæ‰€æœ‰ <code>zlib</code> APIï¼Œé™¤äº†é‚£äº›æ˜¾å¼åŒæ­¥çš„ APIï¼Œéƒ½ä½¿ç”¨ Node.js å†…éƒ¨çº¿ç¨‹æ± ï¼Œå¯ä»¥çœ‹åšæ˜¯å¼‚æ­¥çš„</li>
<li>å› æ­¤ä¸‹é¢çš„ç¤ºä¾‹ä¸­çš„å‹ç¼©å’Œè§£å‹ä»£ç åº”åˆ†å¼€æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<p><strong>æ–¹å¼1ï¼š</strong> ç›´æ¥åˆ©ç”¨å®ä¾‹ä¸Šçš„<code>pipe</code>æ–¹æ³•ä¼ é€’æµ</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createGzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(writeStream)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decodeFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createUnzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(writeStream)</span></span></code></pre>
</div><p><strong>æ–¹å¼2ï¼š</strong> åˆ©ç”¨<code>stream</code>ä¸Šçš„<code>pipeline</code>ï¼Œå¯åœ¨å›æ‰ä¸­å•ç‹¬åšå…¶å®ƒçš„å¤„ç†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(readStream, zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createGzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), writeStream, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decodeFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(readStream, zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createUnzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), writeStream, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><strong>æ–¹å¼3ï¼š</strong> PromiseåŒ–<code>pipeline</code>æ–¹æ³•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">promisify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'util'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pipeline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> promisify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(stream.pipeline)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(readStream, zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createGzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), writeStream)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> writeStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decodeFile)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(readStream, zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createUnzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), writeStream)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><h3 id="åŸºäºbufferçš„æ“ä½œ" tabindex="-1">åŸºäº<code>Buffer</code>çš„æ“ä½œ <a class="header-anchor" href="#åŸºäºbufferçš„æ“ä½œ" aria-label="Permalink to &quot;åŸºäº`Buffer`çš„æ“ä½œ&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ©ç”¨ <code>gzip</code> ä¸ <code>unzip</code> APIï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åŒ…å«<code>åŒæ­¥</code>ä¸<code>å¼‚æ­¥</code>ç±»å‹</p>
<ul>
<li>å‹ç¼©
<ul>
<li><code>gzip</code></li>
<li><code>gzipSync</code></li>
</ul>
</li>
<li>è§£å‹
<ul>
<li><code>unzip</code></li>
<li><code>unzipSync</code></li>
</ul>
</li>
</ul>
<p><strong>æ–¹å¼1ï¼š</strong> å°†<code>readStream</code>è½¬<code>Buffer</code>,ç„¶åè¿›è¡Œè¿›ä¸€æ­¥æ“ä½œ</p>
<ul>
<li>gzipï¼šå¼‚æ­¥</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    buff.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chunk)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'end'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(buff), targetFile, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resBuff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile,resBuff)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><ul>
<li>gzipSyncï¼šåŒæ­¥</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    buff.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chunk)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">readStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'end'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile,zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzipSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(buff)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p><strong>æ–¹å¼2ï¼š</strong> ç›´æ¥é€šè¿‡<code>readFileSync</code>è¯»å–</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‹ç¼©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decodeBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzipSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(readBuffer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile,decodeBuffer)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è§£å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> decodeBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzipSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(decodeFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile,decodeBuffer)</span></span></code></pre>
</div><h2 id="æ–‡æœ¬å†…å®¹çš„è§£-å‹ç¼©" tabindex="-1">æ–‡æœ¬å†…å®¹çš„è§£/å‹ç¼© <a class="header-anchor" href="#æ–‡æœ¬å†…å®¹çš„è§£-å‹ç¼©" aria-label="Permalink to &quot;æ–‡æœ¬å†…å®¹çš„è§£/å‹ç¼©&quot;">&ZeroWidthSpace;</a></h2>
<p>é™¤äº†å¯¹æ–‡ä»¶å‹ç¼©ï¼Œæœ‰æ—¶å€™ä¹Ÿè®¸è¦å¯¹ä¼ è¾“çš„å†…å®¹è¿›è¡Œç›´æ¥è¿›è¡Œè§£å‹ç¼©</p>
<p>è¿™é‡Œä»¥å‹ç¼©æ–‡æœ¬å†…å®¹ä¸ºä¾‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> testData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testFile, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span></code></pre>
</div><h3 id="åŸºäºæµ-stream-æ“ä½œ" tabindex="-1">åŸºäº<code>æµ(stream)</code>æ“ä½œ <a class="header-anchor" href="#åŸºäºæµ-stream-æ“ä½œ" aria-label="Permalink to &quot;åŸºäº`æµ(stream)`æ“ä½œ&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™å—å°±è€ƒè™‘ <code>string</code> =&gt;  <code>buffer</code> =&gt; <code>stream</code>çš„è½¬æ¢å°±è¡Œ</p>
<p><code>string</code> =&gt;  <code>buffer</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testData)</span></span></code></pre>
</div><p><code>buffer</code> =&gt; <code>stream</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> transformStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">PassThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">transformStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(buffer)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// or</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> transformStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Duplex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">transformStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testData))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">transformStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>è¿™é‡Œä»¥å†™å…¥åˆ°æ–‡ä»¶ç¤ºä¾‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™åˆ°å…¶å®ƒçš„æµé‡Œï¼Œå¦‚<code>HTTPçš„Response</code>ï¼ˆåé¢ä¼šå•ç‹¬ä»‹ç»ï¼‰</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">transformStream</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createGzip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile))</span></span></code></pre>
</div><h3 id="åŸºäºbufferæ“ä½œ" tabindex="-1">åŸºäº<code>Buffer</code>æ“ä½œ <a class="header-anchor" href="#åŸºäºbufferæ“ä½œ" aria-label="Permalink to &quot;åŸºäº`Buffer`æ“ä½œ&quot;">&ZeroWidthSpace;</a></h3>
<p>åŒæ ·åˆ©ç”¨<code>Buffer.from</code>å°†å­—ç¬¦ä¸²è½¬<code>buffer</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testData)</span></span></code></pre>
</div><p>ç„¶åç›´æ¥ä½¿ç”¨åŒæ­¥APIè¿›è¡Œè½¬æ¢ï¼Œè¿™é‡Œresultå°±æ˜¯å‹ç¼©åçš„å†…å®¹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzipSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(buffer)</span></span></code></pre>
</div><p>å¯ä»¥å†™å…¥æ–‡ä»¶ï¼Œåœ¨<code>HTTP Server</code>ä¸­ä¹Ÿå¯ç›´æ¥å¯¹å‹ç¼©åçš„å†…å®¹è¿›è¡Œè¿”å›</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(targetFile, result)</span></span></code></pre>
</div><h2 id="node-serverä¸­çš„å®è·µ" tabindex="-1">Node Serverä¸­çš„å®è·µ <a class="header-anchor" href="#node-serverä¸­çš„å®è·µ" aria-label="Permalink to &quot;Node Serverä¸­çš„å®è·µ&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™é‡Œç›´æ¥ä½¿ç”¨Nodeä¸­ <code>http</code> æ¨¡å—åˆ›å»ºä¸€ä¸ªç®€å•çš„ Server è¿›è¡Œæ¼”ç¤º</p>
<p>åœ¨å…¶ä»–çš„ <code>Node Web</code> æ¡†æ¶ä¸­ï¼Œå¤„ç†æ€è·¯ç±»ä¼¼ï¼Œå½“ç„¶ä¸€èˆ¬ä¹Ÿæœ‰ç°æˆçš„æ’ä»¶ï¼Œä¸€é”®æ¥å…¥</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0NjUzMzExNDE3OQ==646533114179" alt="è¿è¡Œç»“æœ" loading="lazy"></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">PassThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'stream'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> zlib</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'zlib'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> testTxt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'æµ‹è¯•æ•°æ®123'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">repeat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è¯»å–æ”¯æŒçš„å‹ç¼©ç®—æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> acceptEncoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req.headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'accept-encoding'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(br</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">deflate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">gzip)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // é»˜è®¤å“åº”çš„æ•°æ®ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Content-Type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/json; charset=utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å‡ ä¸ªç¤ºä¾‹çš„è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> routes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/gzip'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (acceptEncoding.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'gzip'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-encoding'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'gzip'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // ä½¿ç”¨åŒæ­¥APIç›´æ¥å‹ç¼©æ–‡æœ¬å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">gzipSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt)))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/deflate'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (acceptEncoding.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'deflate'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-encoding'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'deflate'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // åŸºäºæµçš„å•æ¬¡æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PassThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createDeflate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/br'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (acceptEncoding.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'br'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-encoding'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'br'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Content-Type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'text/html; charset=utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // åŸºäºæµçš„å¤šæ¬¡å†™æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PassThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                pipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(originStream, zlib.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createBrotliCompress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), res, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;h1>BrotliCompress&#x3C;/h1>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;h2>æµ‹è¯•æ•°æ®&#x3C;/h2>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                originStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(testTxt)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> routes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (route) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        route[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å…œåº•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Content-Type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'text/html; charset=utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`&#x3C;h1>404: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&#x3C;/h1></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    &#x3C;h2>å·²æ³¨å†Œè·¯ç”±&#x3C;/h2></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    &#x3C;ul></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">routes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `&#x3C;li>&#x3C;a href="${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&#x3C;/a>&#x3C;/li>`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    &#x3C;/ul></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://juejin.cn/post/6844903618441641991#heading-2" target="_blank" rel="noreferrer">æ˜é‡‘:Node.js æµï¼ˆstreamï¼‰ï¼šä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</a></li>
<li><a href="https://juejin.cn/post/6844904062974951437#heading-1" target="_blank" rel="noreferrer">æ˜é‡‘:Node.jså®æˆ˜--èµ„æºå‹ç¼©ä¸zlibæ¨¡å—</a></li>
<li><a href="https://segmentfault.com/a/1190000009374437" target="_blank" rel="noreferrer">segmentfault:ä½¿ç”¨Brotliæé«˜ç½‘ç«™è®¿é—®é€Ÿåº¦</a></li>
<li><a href="https://tech.meituan.com/2021/01/07/pack-gzip-zstd-lz4.html" target="_blank" rel="noreferrer">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ:é€Ÿåº¦ä¸å‹ç¼©æ¯”å¦‚ä½•å…¼å¾—ï¼Ÿå‹ç¼©ç®—æ³•åœ¨æ„å»ºéƒ¨ç½²ä¸­çš„ä¼˜åŒ–</a></li>
<li><a href="http://nodejs.cn/api/zlib.html#zlib" target="_blank" rel="noreferrer">Node.js v16.14.0 æ–‡æ¡£:zlib</a></li>
<li><a href="https://github.com/ayqy/string-to-file-stream/blob/2f43145ca9515345fb0b9b697414bcfd0effe276/index.js" target="_blank" rel="noreferrer">Github:ayqy/string-to-file-stream</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY0NjExMjc0NTg3Nw==646112745877" length="0" type="image//mdImg/MTY0NjExMjc0NTg3Nw==646112745877"/>
        </item>
        <item>
            <title><![CDATA[é…ç½®SSHå…å¯†ç™»å½•æœåŠ¡å™¨]]></title>
            <link>https://www.dmsrs.org/technology/learn/ssh-no-pwd-login.html</link>
            <guid>https://www.dmsrs.org/technology/learn/ssh-no-pwd-login.html</guid>
            <pubDate>Sat, 12 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ€è¿‘æœåŠ¡å™¨ä»é˜¿é‡Œäº‘æ¢åˆ°äº†è…¾è®¯äº‘ï¼Œéœ€è¦æŠŠæœåŠ¡è¿›è¡Œä¸€æ¬¡æ•´ä½“çš„è¿ç§»
ä¸ºäº†æ–¹ä¾¿èµ„æºçš„éƒ¨ç½²ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹SSHçš„å…å¯†ç™»å½•ï¼Œé¿å…é¢‘ç¹çš„è¾“å…¥å¯†ç 
 å–å¾—æœ¬åœ°å…¬é’¥
å…ˆæŸ¥çœ‹æœ¬åœ°æ˜¯å¦å­˜åœ¨`id_rsa.pub`æ–‡ä»¶
``]]></description>
            <content:encoded><![CDATA[<h1 id="æœ¬åœ°é…ç½®sshå…å¯†è¿œç¨‹ç™»å½•æœåŠ¡å™¨" tabindex="-1">æœ¬åœ°é…ç½®SSHå…å¯†è¿œç¨‹ç™»å½•æœåŠ¡å™¨ <a class="header-anchor" href="#æœ¬åœ°é…ç½®sshå…å¯†è¿œç¨‹ç™»å½•æœåŠ¡å™¨" aria-label="Permalink to &quot;æœ¬åœ°é…ç½®SSHå…å¯†è¿œç¨‹ç™»å½•æœåŠ¡å™¨&quot;">&ZeroWidthSpace;</a></h1>
<p>æœ€è¿‘æœåŠ¡å™¨ä»é˜¿é‡Œäº‘æ¢åˆ°äº†è…¾è®¯äº‘ï¼Œéœ€è¦æŠŠæœåŠ¡è¿›è¡Œä¸€æ¬¡æ•´ä½“çš„è¿ç§»</p>
<p>ä¸ºäº†æ–¹ä¾¿èµ„æºçš„éƒ¨ç½²ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹SSHçš„å…å¯†ç™»å½•ï¼Œé¿å…é¢‘ç¹çš„è¾“å…¥å¯†ç </p>
<h2 id="å–å¾—æœ¬åœ°å…¬é’¥" tabindex="-1">å–å¾—æœ¬åœ°å…¬é’¥ <a class="header-anchor" href="#å–å¾—æœ¬åœ°å…¬é’¥" aria-label="Permalink to &quot;å–å¾—æœ¬åœ°å…¬é’¥&quot;">&ZeroWidthSpace;</a></h2>
<p>å…ˆæŸ¥çœ‹æœ¬åœ°æ˜¯å¦å­˜åœ¨<code>id_rsa.pub</code>æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.ssh</span></span></code></pre>
</div><p>ä¸å­˜åœ¨å¯ä»¥é€šè¿‡å¦‚ä¸‹æŒ‡ä»¤åˆ›å»ºï¼ˆä¸€è·¯å›è½¦å³å¯ï¼‰</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> rsa</span></span></code></pre>
</div><h2 id="æœåŠ¡å™¨æ·»åŠ ä¿¡ä»»" tabindex="-1">æœåŠ¡å™¨æ·»åŠ ä¿¡ä»» <a class="header-anchor" href="#æœåŠ¡å™¨æ·»åŠ ä¿¡ä»»" aria-label="Permalink to &quot;æœåŠ¡å™¨æ·»åŠ ä¿¡ä»»&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ä¸Šä¼ å…¬é’¥" tabindex="-1">ä¸Šä¼ å…¬é’¥ <a class="header-anchor" href="#ä¸Šä¼ å…¬é’¥" aria-label="Permalink to &quot;ä¸Šä¼ å…¬é’¥&quot;">&ZeroWidthSpace;</a></h3>
<p>å°†æœ¬åœ°å…¬é’¥ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨</p>
<ul>
<li>å…¶ä¸­ <code>$host</code>æ¢æˆç›®æ ‡æœåŠ¡å™¨ç»‘å®šçš„ <strong>åŸŸå</strong> æˆ– <strong>IP</strong> å³å¯</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">:~/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å¦‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@baidu.com:~/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ~/.ssh/id_rsa.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@39.156.66.18:~/</span></span></code></pre>
</div><h3 id="æ·»åŠ ä¿¡ä»»" tabindex="-1">æ·»åŠ ä¿¡ä»» <a class="header-anchor" href="#æ·»åŠ ä¿¡ä»»" aria-label="Permalink to &quot;æ·»åŠ ä¿¡ä»»&quot;">&ZeroWidthSpace;</a></h3>
<p>å…ˆæ£€æŸ¥æœåŠ¡å™¨ä¸Šæ˜¯<code>root</code>ç”¨æˆ·æ˜¯å¦å­˜åœ¨<code>.ssh</code>ç›®å½•</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ls -al"</span></span></code></pre>
</div><p>ä¸å­˜åœ¨åˆ™è¿è¡Œä¸Šè¿°ä¸€æ ·çš„æ–¹å¼è¿›è¡Œåˆ›å»º</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ssh-keygen -t rsa"</span></span></code></pre>
</div><p>æ·»åŠ ä¿¡ä»»</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat ~/id_rsa.pub >> ~/.ssh/authorized_keys"</span></span></code></pre>
</div><h2 id="é‡å¯ssh" tabindex="-1">é‡å¯ssh <a class="header-anchor" href="#é‡å¯ssh" aria-label="Permalink to &quot;é‡å¯ssh&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -p22</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"service sshd restart"</span></span></code></pre>
</div><h2 id="å…å¯†ç™»å½•root" tabindex="-1">å…å¯†ç™»å½•root <a class="header-anchor" href="#å…å¯†ç™»å½•root" aria-label="Permalink to &quot;å…å¯†ç™»å½•root&quot;">&ZeroWidthSpace;</a></h2>
<p>é…ç½®å®Œæˆåå³å¯è¿›è¡Œå…å¯†ç™»å½•</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> root@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">$host</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ–°å¹´å¿«ä¹ï¼Œè™è™ç”Ÿå¨]]></title>
            <link>https://www.dmsrs.org/_configDoc/newyear/2022.html</link>
            <guid>https://www.dmsrs.org/_configDoc/newyear/2022.html</guid>
            <pubDate>Mon, 31 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ç»™å¤§å®¶é€ä¸Š`çº¢åŒ…å°é¢`å’Œ`çº¢åŒ…`
æ–°çš„ä¸€å¹´ç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼Œè™å¹´å¤§å‰ï¼Œè™è™ç”Ÿå¨ï¼Œå¦‚è™æ·»ç¿¼ï¼Œæ­å–œå‘è´¢ï¼Œè´¢æºæ»šæ»š
å¾®ä¿¡`æ‰«ç é¢†å–`çº¢åŒ…`å°é¢`
æ”¯ä»˜å®æœç´¢`çº¢åŒ…`,é€‰æ‹©`æ”¶å£ä»¤çº¢åŒ…`
è¾“å…¥`ä»£ç æ”¶å®¹æ‰€01`]]></description>
            <content:encoded><![CDATA[<h1 id="æ–°å¹´å¿«ä¹-è™è™ç”Ÿå¨" tabindex="-1">æ–°å¹´å¿«ä¹ï¼Œè™è™ç”Ÿå¨ <a class="header-anchor" href="#æ–°å¹´å¿«ä¹-è™è™ç”Ÿå¨" aria-label="Permalink to &quot;æ–°å¹´å¿«ä¹ï¼Œè™è™ç”Ÿå¨&quot;">&ZeroWidthSpace;</a></h1>
<p>ç»™å¤§å®¶é€ä¸Š<code>çº¢åŒ…å°é¢</code>å’Œ<code>çº¢åŒ…</code></p>
<p>æ–°çš„ä¸€å¹´ç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼Œè™å¹´å¤§å‰ï¼Œè™è™ç”Ÿå¨ï¼Œå¦‚è™æ·»ç¿¼ï¼Œæ­å–œå‘è´¢ï¼Œè´¢æºæ»šæ»š</p>
<p>å¾®ä¿¡<code>æ‰«ç é¢†å–</code>çº¢åŒ…<code>å°é¢</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0MzYzMTQ2MjY5OQ==643631462699" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ”¯ä»˜å®æœç´¢<code>çº¢åŒ…</code>,é€‰æ‹©<code>æ”¶å£ä»¤çº¢åŒ…</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0MzYzMTg5MDgzNA==643631890834" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¾“å…¥<code>ä»£ç æ”¶å®¹æ‰€01</code>é¢†å–<code>çº¢åŒ…</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0MzcyMDEyMzQyMw==643720123423" alt="å›¾ç‰‡" loading="lazy"></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY0MzYzMTQ2MjY5OQ==643631462699" length="0" type="image//mdImg/MTY0MzYzMTQ2MjY5OQ==643631462699"/>
        </item>
        <item>
            <title><![CDATA[ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨]]></title>
            <link>https://www.dmsrs.org/technology/learn/fixed-page.html</link>
            <guid>https://www.dmsrs.org/technology/learn/fixed-page.html</guid>
            <pubDate>Sat, 22 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨
åœ¨åšH5å¼€å‘æ—¶ï¼Œå¾ˆå¤šåœºæ™¯ä¸‹éƒ½éœ€è¦å¼¹çª—
å½“å‡ºç°å¼¹çª—æ—¶ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹æ˜¯æœŸæœ›å¼¹çª—ä¸‹å±‚é¡µé¢ä¸èƒ½è¢«æ»‘åŠ¨çš„
å½“ç„¶ä¹Ÿä¸æœŸæœ›å¼¹çª—è¢«æ»‘åŠ¨
è¿‘æœŸè‚é¡µé¢åˆç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜
ä¸‹é¢ä»‹ç»å‡ ç§æœ€å¸¸ç”¨çš„æ–¹]]></description>
            <content:encoded><![CDATA[<h1 id="ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨" tabindex="-1">ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨ <a class="header-anchor" href="#ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨" aria-label="Permalink to &quot;ç§»åŠ¨ç«¯é˜»æ­¢å¼¹çª—ä¸‹å±‚é¡µé¢è¢«æ»‘åŠ¨&quot;">&ZeroWidthSpace;</a></h1>
<p>åœ¨åšH5å¼€å‘æ—¶ï¼Œå¾ˆå¤šåœºæ™¯ä¸‹éƒ½éœ€è¦å¼¹çª—</p>
<p>å½“å‡ºç°å¼¹çª—æ—¶ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹æ˜¯æœŸæœ›å¼¹çª—ä¸‹å±‚é¡µé¢ä¸èƒ½è¢«æ»‘åŠ¨çš„</p>
<p>å½“ç„¶ä¹Ÿä¸æœŸæœ›å¼¹çª—è¢«æ»‘åŠ¨</p>
<p>è¿‘æœŸè‚é¡µé¢åˆç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜</p>
<p>ä¸‹é¢ä»‹ç»å‡ ç§æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œä»¥åŠä¸€äº›è¾¹ç•Œæƒ…å†µä¸åº”å¯¹ç­–ç•¥</p>
<h2 id="overflow-hidden" tabindex="-1">overflow:hidden <a class="header-anchor" href="#overflow-hidden" aria-label="Permalink to &quot;overflow:hidden&quot;">&ZeroWidthSpace;</a></h2>
<p>æµä¼ æœ€å¹¿çš„æ–¹å¼å°±æ˜¯ ç»™å…ƒç´ è®¾ç½® <code>overflow:hidden</code></p>
<p>ç»™<code>body</code>è®¾ç½®ï¼Œå°±èƒ½è¾¾åˆ°é˜»æ­¢é¡µé¢æ»‘åŠ¨çš„ç›®çš„</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.style.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'hidden'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.style.overflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'visible'</span></span></code></pre>
</div><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿™ä¸ªæ˜¯èƒ½æœ‰æ•ˆæœçš„</p>
<p>ä½†åœ¨<code>éƒ¨åˆ†æœºå™¨ä¸Šï¼Œè¿™ä¸ªæ˜¯ä¸ç”Ÿæ•ˆçš„</code>:</p>
<h2 id="å¼¹çª—é®ç½©" tabindex="-1">å¼¹çª—é®ç½© <a class="header-anchor" href="#å¼¹çª—é®ç½©" aria-label="Permalink to &quot;å¼¹çª—é®ç½©&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿˜æœ‰ä¸€ç§æƒ…å†µå¦‚ä¸‹ï¼Œ<code>é¡µé¢éƒ¨åˆ†å…ƒç´ æœ‰å±€éƒ¨æ»‘åŠ¨</code></p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:hidden;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:scroll;height:100%;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- more element --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>å½“å‰æƒ…å†µç»™<code>body</code>è®¾ç½® <code>overflow:hidden</code>ä¾æ—§æ˜¯æ— æ•ˆæœçš„</p>
<p>æ­¤æ—¶ç»™å¼¹çª—åŠ ä¸Šé®ç½©å¦‚ä¸‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸‹å±‚å…ƒç´ å°±ä¸ä¼šæ”¶åˆ°<code>touchmove</code>äº‹ä»¶</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:hidden;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:scroll;height:100%;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- more element --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &#x3C;!-- dialog --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dialog"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- é®ç½© --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"mask"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"position:fixed;inset:0;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>å…¶ä¸­<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/inset" target="_blank" rel="noreferrer">inset</a>å±æ€§æ˜¯<code>left,top,right,bottom</code>çš„ç®€å†™</p>
<p>ä½†åœ¨éƒ¨åˆ†æœºå‹ä¸‹ï¼Œä¸‹å±‚å…ƒç´ ä»ç„¶ä¼šæ”¶åˆ°<code>touchmove</code>äº‹ä»¶ï¼Œå› æ­¤ä¼šè·Ÿç€æ»‘åŠ¨</p>
<p>äºæ˜¯éœ€è¦ç¥­å‡ºä¸‹é¢çš„æ–¹æ³•</p>
<h2 id="prevent-touchmove" tabindex="-1">prevent touchmove <a class="header-anchor" href="#prevent-touchmove" aria-label="Permalink to &quot;prevent touchmove&quot;">&ZeroWidthSpace;</a></h2>
<p>é˜»æ­¢è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶<code>touchmove</code>çš„é»˜è®¤è¡Œä¸º</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> touchHandle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¼¹çª—çš„äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onShow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'touchmove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, preventDefault, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      passive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onHide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'touchmove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, preventDefault);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åœ¨å¼¹çª—æ‰“å¼€æ—¶ç›´æ¥é˜»æ­¢ç›®æ ‡å…ƒç´ çš„æ»‘åŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</p>
<p>å¼¹çª—å†…å®¹æ˜¯ä¸å¯æ»‘åŠ¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•æ˜¯æœ€çœäº‹é«˜æ•ˆçš„</p>
<p>å¦‚æœå¼¹çª—ä¸­æœ‰å¯æ»‘åŠ¨çš„å†…å®¹ï¼Œä¸”æ»‘åŠ¨çš„å†…å®¹æ¯”è¾ƒå¤æ‚</p>
<p>é‚£ä¹ˆé€šè¿‡<code>touchmove</code>å»ç»†åŠ›åº¦çš„æ§åˆ¶é˜»æ­¢æ»‘åŠ¨äº‹ä»¶æ—¶å°±å¾ˆéº»çƒ¦</p>
<h2 id="position-fixed" tabindex="-1">position:fixed <a class="header-anchor" href="#position-fixed" aria-label="Permalink to &quot;position:fixed&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿˜æœ‰ä¸€ç§å¸¸ç”¨çš„å°±æ˜¯<code>position:fixed</code></p>
<p>åœ¨å¼¹çª—æ‰“å¼€æ—¶ï¼Œå°†ç›®æ ‡å…ƒç´ è¿›è¡Œå›ºå®šï¼Œåœ¨å…³é—­æ—¶æ¢å¤</p>
<p>ç”±äºå®šä½ä¼šæ”¹å˜å…ƒç´ åœ¨é¡µé¢ä¸Šçš„ä½ç½®ï¼Œæ‰€ä»¥éœ€è¦å†<code>fixed</code>å‰è®°å½•å…ƒç´ çš„ä½ç½®</p>
<p>å–æ¶ˆ<code>fixed</code>ä¹‹åå°†å…ƒç´ åˆæ»šåŠ¨åˆ°åŸæ¥çš„ä½ç½®</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¼¹çª—çš„äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onShow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.style.top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      document</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">body</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getClientRects</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">()[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">].</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">top</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    }px`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.style.position </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'fixed'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.style.left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.style.right </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onHide</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.style.position </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'visible'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">scrollTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.style.top.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'px'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="ä½¿ç”¨classä»£æ›¿style" tabindex="-1">ä½¿ç”¨classä»£æ›¿style <a class="header-anchor" href="#ä½¿ç”¨classä»£æ›¿style" aria-label="Permalink to &quot;ä½¿ç”¨classä»£æ›¿style&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™ä¸ªä¹Ÿæ˜¯ç¢°å·§å‘ç°çš„ï¼Œåœ¨<code>iOS</code>ä½ç«¯æœºå°†ä¸Šè¿°æ–¹å¼éƒ½å°è¯•å</p>
<p>ä»å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç°è±¡å¦‚ä¸‹ï¼ˆTODOï¼šè¡¥å›¾ï¼‰</p>
<p>ä¸‹å±‚é¡µé¢ä¸ä¼šè¢«æ»‘åŠ¨äº†ï¼Œä½†é®ç½©å’Œå¼¹çª—æ•´ä½“è¿˜èƒ½è¢«ä¸‹æ‹‰</p>
<p>å¼¹çª—æ˜¯ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨å¼¹çª—ï¼Œå…¶å‡ºç°çš„ä½ç½®éœ€è¦åŠ¨æ€çš„è®¡ç®—ï¼Œå¦‚ä¸‹ç»“æ„</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:hidden;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &#x3C;!-- dialog --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dialog"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"top:88px;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- é®ç½© --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"mask"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"position:fixed;inset:0;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- å†…å®¹ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>æœ€ç»ˆå‘ç°æ˜¯ç”±äº<code>style</code>ä¸<code>class</code>è®¾ç½®çš„æ ·å¼åœ¨è¿™ä¸ªæœºå‹ä¸Šå±•ç¤ºè™½ç„¶ä¸€è‡´</p>
<p>ä½†å®é™…äº¤äº’èµ·æ¥çš„è¡¨ç°å´ä¸ä¸€è‡´</p>
<p>ä¿®å¤åçš„<code>html</code>ç»“æ„å¦‚ä¸‹,åœ¨å…ƒç´ é‡Œæ’å…¥äº†ä¸€ä¸ª<code>style</code>æ ‡ç­¾ï¼Œä½¿ç”¨<code>class</code>é€‰æ‹©å™¨ä¸<code>!important</code>é‡è½½è¿™ä¸ªè·ç¦»çš„æ ·å¼</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"overflow:hidden;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &#x3C;!-- dialog --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dialog"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"top:88px;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- é®ç½© --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"mask"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"position:fixed;inset:0;"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- å†…å®¹ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      .dialog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">88</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">px</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !important</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>ä»£ç å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onShow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dialogEl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.dialog'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">dialogEl) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'style'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      style.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      .dialog{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        top:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">dialogEl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">style</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">top</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} !important;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      `</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      dialogEl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(style)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>éå¸¸ä»¤äººè¿·æƒ‘çš„ä¸€ä¸ªæ“ä½œï¼Œä½†å°±æ˜¯è§£å†³äº†é—®é¢˜</p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>é’ˆå¯¹ç§»åŠ¨ç«¯å¼¹çª—ä¸‹å±‚é¡µé¢å¯è¢«æ»‘åŠ¨çš„å¼‚å¸¸åœºæ™¯</p>
<p>æœ¬æ–‡ä»‹ç»äº†<code>4ç§å¸¸è§</code>è§£å†³æ–¹æ³•ï¼Œä¸<code>1ç§&quot;è°œä¹‹æ“ä½œ&quot;</code></p>
<h2 id="demoæ¼”ç¤º" tabindex="-1">demoæ¼”ç¤º <a class="header-anchor" href="#demoæ¼”ç¤º" aria-label="Permalink to &quot;demoæ¼”ç¤º&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTY0MjkzODA2NTUyNA==642938065524" alt="å›¾ç‰‡" loading="lazy"></p>
<ul>
<li><a href="https://test-demo-6gd4lnn3e3ca39f5-1256505457.tcloudbaseapp.com/dialog-h5-fixed-case/" target="_blank" rel="noreferrer">demoåœ°å€</a></li>
<li>PCæ‰«ç ä½“éªŒ
<ul>
<li><img src="https://img.cdn.sugarat.top/mdImg/MTY0MjkzODExOTA1MQ==642938119051" alt="å›¾ç‰‡" loading="lazy"></li>
</ul>
</li>
<li><a href="https://stackblitz.com/edit/vitejs-vite-xgqbt6?file=src%2Fmain.ts&amp;terminal=dev" target="_blank" rel="noreferrer">demoæºç åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTY0MjkzODA2NTUyNA==642938065524" length="0" type="image//mdImg/MTY0MjkzODA2NTUyNA==642938065524"/>
        </item>
        <item>
            <title><![CDATA[å°æŠ€å·§ï¼šfor ofä¸­è·å–index]]></title>
            <link>https://www.dmsrs.org/technology/learn/forof-idx.html</link>
            <guid>https://www.dmsrs.org/technology/learn/forof-idx.html</guid>
            <pubDate>Mon, 17 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æ—¥å¸¸å¼€å‘ä¸­åœ¨éå†æ•°æ®æ—¶ç»å¸¸ä½¿ç”¨`for...of`,`forEach`
å‰è€…ä½¿ç”¨æ—¶èƒ½å¤Ÿé…åˆ`async await`,`continue`,`break`ç­‰ç­‰
```ts
const data = []]></description>
            <content:encoded><![CDATA[<h1 id="å°æŠ€å·§-for-ofä¸­è·å–index" tabindex="-1">å°æŠ€å·§ï¼šfor ofä¸­è·å–index <a class="header-anchor" href="#å°æŠ€å·§-for-ofä¸­è·å–index" aria-label="Permalink to &quot;å°æŠ€å·§ï¼šfor ofä¸­è·å–index&quot;">&ZeroWidthSpace;</a></h1>
<p>æ—¥å¸¸å¼€å‘ä¸­åœ¨éå†æ•°æ®æ—¶ç»å¸¸ä½¿ç”¨<code>for...of</code>,<code>forEach</code></p>
<p>å‰è€…ä½¿ç”¨æ—¶èƒ½å¤Ÿé…åˆ<code>async await</code>,<code>continue</code>,<code>break</code>ç­‰ç­‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xm1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xm2'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xm3'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xm4'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, age: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> end){}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> people</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (people.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (people.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      continue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(people.age)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(people.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// xm2</span></span></code></pre>
</div><p>ä½†æœ‰æ—¶å€™æƒ³è·å–å…ƒç´ çš„<code>idx</code>ï¼Œæœ‰å“ªäº›ç®€å•çš„æ–¹å¼å‘¢</p>
<h2 id="_1-array-prototype-map" tabindex="-1">1-Array.prototype.map <a class="header-anchor" href="#_1-array-prototype-map" aria-label="Permalink to &quot;1-Array.prototype.map&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MapWithIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">arr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ([idx, v]))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">of</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MapWithIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(data)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(idx, v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="_2-array-prototype-entries" tabindex="-1">2-Array.prototype.entries <a class="header-anchor" href="#_2-array-prototype-entries" aria-label="Permalink to &quot;2-Array.prototype.entries&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯ES6æ–°å¢çš„API</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(idx, v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="_3-array-prototype-keys" tabindex="-1">3-Array.prototype.keys <a class="header-anchor" href="#_3-array-prototype-keys" aria-label="Permalink to &quot;3-Array.prototype.keys&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ES6æ–°å¢çš„API</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data[idx]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(idx, v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å…³äºè‡ªå·±]]></title>
            <link>https://www.dmsrs.org/aboutme.html</link>
            <guid>https://www.dmsrs.org/aboutme.html</guid>
            <pubDate>Sat, 11 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[
# å…³äºæˆ‘

]]></description>
            <content:encoded><![CDATA[<h1 id="å…³äºæˆ‘" tabindex="-1">å…³äºæˆ‘ <a class="header-anchor" href="#å…³äºæˆ‘" aria-label="Permalink to &quot;å…³äºæˆ‘&quot;">&ZeroWidthSpace;</a></h1>
<hr>
<p>40å²ç å†œå¤§å”,çƒ­çˆ±å¼€æºä¸çŸ¥è¯†åˆ†äº«</p>
<p>ç›®å‰å°±èŒäº <code>å®‡å®™å¤§è¯å‚</code></p>
<p><img src="./digital_pharmaceutical.jpg" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åœ¨åšä»€ä¹ˆ" tabindex="-1">âœ¨åœ¨åšä»€ä¹ˆ <a class="header-anchor" href="#åœ¨åšä»€ä¹ˆ" aria-label="Permalink to &quot;:sparkles:åœ¨åšä»€ä¹ˆ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å…¬å¸" tabindex="-1">å…¬å¸ <a class="header-anchor" href="#å…¬å¸" aria-label="Permalink to &quot;å…¬å¸&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>2014 - ingï¼š<a href="https://www.dmsrs.org/" target="_blank" rel="noreferrer">é¡¹ç›®ç®¡ç†</a></li>
<li>2012 - 2014ï¼š<a href="https://www.dmsrs.org" target="_blank" rel="noreferrer">åˆ›ä¸šï¼Œçƒ­è®¡é‡ä¸æ”¶è´¹</a></li>
<li>2008 - 2010ï¼š<a href="https://www.dmsrs.org" target="_blank" rel="noreferrer">ä½ä»£ç å¹³å°</a></li>
<li>2006 - 2008ï¼š<a href="https://www.dmsrs.org" target="_blank" rel="noreferrer">è”ç½‘ç…¤çŸ¿å®‰å…¨ç›‘æ§</a></li>
</ul>
<h3 id="æŠ€æœ¯" tabindex="-1">æŠ€æœ¯ <a class="header-anchor" href="#æŠ€æœ¯" aria-label="Permalink to &quot;æŠ€æœ¯&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>.Net Framework &amp; dotnet</li>
<li>Java</li>
<li>Htmlã€Cssã€Javascript</li>
<li>Delphi</li>
<li>Python</li>
</ul>
<h3 id="å¼€æº" tabindex="-1">å¼€æº <a class="header-anchor" href="#å¼€æº" aria-label="Permalink to &quot;å¼€æº&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li></li>
<li></li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<h2 id="å½“ä¸‹" tabindex="-1">ğŸš€å½“ä¸‹ <a class="header-anchor" href="#å½“ä¸‹" aria-label="Permalink to &quot;:rocket:å½“ä¸‹&quot;">&ZeroWidthSpace;</a></h2>
<p>æ²‰æ·€æŠ€æœ¯ï¼Œå¹¿åº¦ä¸æ·±åº¦3/7åˆ†ï¼Œæ‰“ç£¨è‡ªå·±åšçš„ä¸€äº›å°åº”ç”¨ï¼Œç¡®å®šè‡ªå·±æœ€ç»ˆæ·±æŒ–çš„é¢†åŸŸã€‚</p>
<h2 id="åº§å³é“­" tabindex="-1">ğŸ“åº§å³é“­ <a class="header-anchor" href="#åº§å³é“­" aria-label="Permalink to &quot;:pencil:åº§å³é“­&quot;">&ZeroWidthSpace;</a></h2>
<p>å¤©é“é…¬å‹¤ï¼Œæ’ä»¥è‡´é ğŸ˜„</p>
<h2 id="è”ç³»æˆ‘" tabindex="-1">â˜ï¸è”ç³»æˆ‘ <a class="header-anchor" href="#è”ç³»æˆ‘" aria-label="Permalink to &quot;:phone:è”ç³»æˆ‘&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>é‚®ç®±</strong>ï¼šhappycoder@foxmail.com</p>
<p><strong>å¾®ä¿¡</strong>ï¼š</p>
]]></content:encoded>
            <enclosure url="https://www.dmsrs.org/mp-code.png" length="0" type="image/png"/>
        </item>
        <item>
            <title><![CDATA[webpacké¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»]]></title>
            <link>https://www.dmsrs.org/technology/learn/webapck2vite.html</link>
            <guid>https://www.dmsrs.org/technology/learn/webapck2vite.html</guid>
            <pubDate>Sat, 04 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æ„¿æ™¯
å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œèƒ½ç»™è¯»è€…æä¾›ä¸€ä¸ªå­˜/å¢é‡é¡¹ç›®ï¼ˆåŒ…å«ä½†ä¸é™äºwebpackå·¥ç¨‹ï¼‰æ¥å…¥Viteçš„ç‚¹å­ï¼Œèµ·æŠ›ç –å¼•ç‰çš„ä½œç”¨ï¼Œå‡å°‘è¿™æ–¹é¢èƒ½åŠ›çš„å»ºè®¾æˆæœ¬
åœ¨é˜è¿°è¿‡ç¨‹ä¸­åŒæ—¶ä¹Ÿä¼šé€æ¸å®Œå–„webpack-vite-]]></description>
            <content:encoded><![CDATA[<h1 id="webpack-é¡¹ç›®æ¥å…¥viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»" tabindex="-1">webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç» <a class="header-anchor" href="#webpack-é¡¹ç›®æ¥å…¥viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»" aria-label="Permalink to &quot;webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="æ„¿æ™¯" tabindex="-1">æ„¿æ™¯ <a class="header-anchor" href="#æ„¿æ™¯" aria-label="Permalink to &quot;æ„¿æ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œèƒ½ç»™è¯»è€…æä¾›ä¸€ä¸ªå­˜/å¢é‡é¡¹ç›®ï¼ˆåŒ…å«ä½†ä¸é™äºwebpackå·¥ç¨‹ï¼‰æ¥å…¥Viteçš„ç‚¹å­ï¼Œèµ·æŠ›ç –å¼•ç‰çš„ä½œç”¨ï¼Œå‡å°‘è¿™æ–¹é¢èƒ½åŠ›çš„å»ºè®¾æˆæœ¬</p>
<p>åœ¨é˜è¿°è¿‡ç¨‹ä¸­åŒæ—¶ä¹Ÿä¼šé€æ¸å®Œå–„<a href="https://github.com/ATQQ/webpack-vite-serve" target="_blank" rel="noreferrer">webpack-vite-serve</a>è¿™ä¸ªå·¥å…·</p>
<p>è¯»è€…å¯ç›´æ¥forkè¿™ä¸ªå·¥å…·ä»“åº“ï¼Œé’ˆå¯¹ä¸ªäºº/å…¬å¸é¡¹ç›®åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–çš„äºŒæ¬¡å¼€å‘ï¼Œä¹Ÿå¯åœ¨issuesä¸­ç•™è¨€é‡åˆ°çš„é—®é¢˜</p>
<h2 id="_1-èƒŒæ™¯" tabindex="-1">1 èƒŒæ™¯ <a class="header-anchor" href="#_1-èƒŒæ™¯" aria-label="Permalink to &quot;1 èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-1-ç°çŠ¶-viteè¯ç”ŸèƒŒæ™¯" tabindex="-1">1.1 ç°çŠ¶ - Viteè¯ç”ŸèƒŒæ™¯ <a class="header-anchor" href="#_1-1-ç°çŠ¶-viteè¯ç”ŸèƒŒæ™¯" aria-label="Permalink to &quot;1.1 ç°çŠ¶ - Viteè¯ç”ŸèƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>å¼•ç”¨è‡ª<a href="https://cn.vitejs.dev/guide/why.html" target="_blank" rel="noreferrer">Viteå®˜æ–¹æ–‡æ¡£</a>çš„ä»‹ç»</p>
</blockquote>
<p>åœ¨æµè§ˆå™¨æ”¯æŒ ES æ¨¡å—ä¹‹å‰ï¼ŒJavaScript å¹¶æ²¡æœ‰æä¾›çš„åŸç”Ÿæœºåˆ¶è®©å¼€å‘è€…ä»¥æ¨¡å—åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚è¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬å¯¹ â€œæ‰“åŒ…â€ è¿™ä¸ªæ¦‚å¿µç†Ÿæ‚‰çš„åŸå› ï¼šä½¿ç”¨å·¥å…·æŠ“å–ã€å¤„ç†å¹¶å°†æˆ‘ä»¬çš„æºç æ¨¡å—ä¸²è”æˆå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚</p>
<p>æ—¶è¿‡å¢ƒè¿ï¼Œæˆ‘ä»¬è§è¯äº†è¯¸å¦‚ webpackã€Rollup å’Œ Parcel ç­‰å·¥å…·çš„å˜è¿ï¼Œå®ƒä»¬æå¤§åœ°æ”¹å–„äº†å‰ç«¯å¼€å‘è€…çš„å¼€å‘ä½“éªŒã€‚</p>
<p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬å¼€å§‹æ„å»ºè¶Šæ¥è¶Šå¤§å‹çš„åº”ç”¨æ—¶ï¼Œéœ€è¦å¤„ç†çš„ JavaScript ä»£ç é‡ä¹Ÿå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚åŒ…å«æ•°åƒä¸ªæ¨¡å—çš„å¤§å‹é¡¹ç›®ç›¸å½“æ™®éã€‚</p>
<p>æˆ‘ä»¬å¼€å§‹é‡åˆ°æ€§èƒ½ç“¶é¢ˆ â€”â€” ä½¿ç”¨ JavaScript å¼€å‘çš„å·¥å…·é€šå¸¸éœ€è¦å¾ˆé•¿æ—¶é—´ï¼ˆç”šè‡³æ˜¯å‡ åˆ†é’Ÿï¼ï¼‰æ‰èƒ½å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå³ä½¿ä½¿ç”¨ HMRï¼Œæ–‡ä»¶ä¿®æ”¹åçš„æ•ˆæœä¹Ÿéœ€è¦å‡ ç§’é’Ÿæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­åæ˜ å‡ºæ¥ã€‚</p>
<p>å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œè¿Ÿé’çš„åé¦ˆä¼šæå¤§åœ°å½±å“å¼€å‘è€…çš„å¼€å‘æ•ˆç‡å’Œå¹¸ç¦æ„Ÿã€‚</p>
<p><strong>Vite æ—¨åœ¨åˆ©ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ–°è¿›å±•è§£å†³ä¸Šè¿°é—®é¢˜</strong></p>
<ul>
<li>æµè§ˆå™¨å¼€å§‹åŸç”Ÿæ”¯æŒ ES æ¨¡å—</li>
<li>è¶Šæ¥è¶Šå¤š JavaScript å·¥å…·ä½¿ç”¨ç¼–è¯‘å‹è¯­è¨€ç¼–å†™ã€‚</li>
</ul>
<h3 id="_1-2-å½“ä¸‹æµè¡Œè¶‹åŠ¿" tabindex="-1">1.2 å½“ä¸‹æµè¡Œè¶‹åŠ¿ <a class="header-anchor" href="#_1-2-å½“ä¸‹æµè¡Œè¶‹åŠ¿" aria-label="Permalink to &quot;1.2 å½“ä¸‹æµè¡Œè¶‹åŠ¿&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="_1-2-1-swcä¸esbuild" tabindex="-1">1.2.1 SWCä¸esbuild <a class="header-anchor" href="#_1-2-1-swcä¸esbuild" aria-label="Permalink to &quot;1.2.1 SWCä¸esbuild&quot;">&ZeroWidthSpace;</a></h4>
<p>çªç ´Node.jsçš„æ€§èƒ½ç“¶é¢ˆï¼Œå‡ºç°äº†ç”¨å…¶å®ƒè¯­è¨€å†™çš„å·¥å…·ï¼Œå¸®åŠ©æ„å»º/å¼€å‘ææ•ˆï¼Œå¦‚ <a href="https://github.com/swc-project/swc" target="_blank" rel="noreferrer">SWCï¼ˆRustï¼‰</a>ï¼Œ<a href="https://github.com/evanw/esbuild" target="_blank" rel="noreferrer">esbuildï¼ˆGoï¼‰</a>ï¼Œåœ¨éƒ¨åˆ†åœºæ™¯ä¸‹èƒ½æ›¿ä»£ä¼ ç»ŸNode.jså·¥å…·å·¥ä½œï¼Œå¹¶è¡¨ç°éå¸¸å¥½ã€‚</p>
<table-base src="swc-esbuild"/><h4 id="_1-2-2-viteä¸snowpack" tabindex="-1">1.2.2 Viteä¸snowpack <a class="header-anchor" href="#_1-2-2-viteä¸snowpack" aria-label="Permalink to &quot;1.2.2 Viteä¸snowpack&quot;">&ZeroWidthSpace;</a></h4>
<p>å¦ä¸€ç§ç«çƒ­çš„æ–¹æ¡ˆæ˜¯bundlelessï¼Œåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿæ”¯æŒ ES Module çš„ç‰¹æ€§ï¼Œè®©æµè§ˆå™¨æ¥ç®¡&quot;æ‰“åŒ…&quot;çš„éƒ¨åˆ†å·¥ä½œï¼Œå·¥å…·åªè´Ÿè´£å¯¹è¯·æ±‚çš„èµ„æºè¿›è¡Œç®€å•çš„è½¬æ¢ï¼Œä»è€Œæå¤§çš„å‡å°‘æœåŠ¡çš„å¯åŠ¨æ—¶é—´ï¼Œæå‡å¼€å‘ä½“éªŒä¸å¼€å‘å¹¸ç¦æ„Ÿ</p>
<p>æ¯”è¾ƒå‡ºåçš„ä¸¤ä¸ªäº§å“å°±æ˜¯ snowpack ä¸ Vite</p>
<table-base src="vite-snowpack"/><h3 id="_1-3-é—®é¢˜ä¸è¯‰æ±‚" tabindex="-1">1.3 é—®é¢˜ä¸è¯‰æ±‚ <a class="header-anchor" href="#_1-3-é—®é¢˜ä¸è¯‰æ±‚" aria-label="Permalink to &quot;1.3 é—®é¢˜ä¸è¯‰æ±‚&quot;">&ZeroWidthSpace;</a></h3>
<p>å¼€å‘è€…æˆ–æŠ€æœ¯å›¢é˜Ÿä¸ºä¿æŒæ¡†æ¶æŠ€æœ¯çš„å…ˆè¿›æ€§ï¼Œå°†ä¼šæ¥å…¥viteï¼Œä»è€Œæå‡å¼€å‘è€…çš„å·¥ä½œæ•ˆç‡</p>
<h4 id="_1-3-1-é—®é¢˜" tabindex="-1">1.3.1 é—®é¢˜ <a class="header-anchor" href="#_1-3-1-é—®é¢˜" aria-label="Permalink to &quot;1.3.1 é—®é¢˜&quot;">&ZeroWidthSpace;</a></h4>
<p>åœ¨å½“ä¸‹çš„ä¸šåŠ¡å¼€å‘ä¸­å¤„å¤„å¯è§<a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noreferrer">webpack</a>çš„èº«å½±ï¼Œå¤§éƒ¨åˆ†çš„ä¸šåŠ¡é¡¹ç›®é‡‡ç”¨çš„æ„å»ºå·¥å…·ä¹Ÿéƒ½æ˜¯å®ƒï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå­˜é‡è€é¡¹ç›®ä½“ç§¯è¶Šæ¥è¶Šå¤§ï¼Œå¼€å‘å¯åŠ¨(dev)/æ„å»º(build) éœ€è¦çš„æ—¶é—´è¶Šæ¥è¶Šé•¿ã€‚</p>
<p>å­˜é‡webpacké¡¹ç›®æ•°ç›®åºå¤§ï¼ŒåŒæ—¶é¡¹ç›®ä½“ç§¯ä¹Ÿä¸å°ã€‚å›´ç»•webpackæ‰€å»ºç«‹çš„å‘¨è¾¹ä¹Ÿæ˜¯æ¯”viteæ›´åŠ ä¸°å¯Œï¼Œè€é¡¹ç›®å¯¹å…¶ä¾èµ–æ€§å¼ºã€‚</p>
<p>ä»webpackç›´æ¥è¿ç§»åˆ°viteï¼Œè¿ç§»å’Œå›å½’æµ‹è¯•æˆæœ¬éƒ½éå¸¸å¤§ã€‚</p>
<h4 id="_1-3-2-è¯‰æ±‚" tabindex="-1">1.3.2 è¯‰æ±‚ <a class="header-anchor" href="#_1-3-2-è¯‰æ±‚" aria-label="Permalink to &quot;1.3.2 è¯‰æ±‚&quot;">&ZeroWidthSpace;</a></h4>
<p>æœŸæœ›æä¾›ä¸€ä¸ªä½æˆæœ¬ç”šè‡³ä¸€é”®æ¥å…¥Viteæ–¹æ¡ˆï¼Œå¼€å‘è€…æŒ‰éœ€å¼€å¯ä½¿ç”¨ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„é…ç½®ï¼Œä¸webpackå…±å­˜ã€‚</p>
<h3 id="_1-4-ä¸ºä»€ä¹ˆé€‰vite-è€Œä¸æ˜¯snowpack" tabindex="-1">1.4 ä¸ºä»€ä¹ˆé€‰Viteï¼Œè€Œä¸æ˜¯snowpack <a class="header-anchor" href="#_1-4-ä¸ºä»€ä¹ˆé€‰vite-è€Œä¸æ˜¯snowpack" aria-label="Permalink to &quot;1.4 ä¸ºä»€ä¹ˆé€‰Viteï¼Œè€Œä¸æ˜¯snowpack&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="_1-4-1-ç”Ÿäº§æ„å»º" tabindex="-1">1.4.1 ç”Ÿäº§æ„å»º <a class="header-anchor" href="#_1-4-1-ç”Ÿäº§æ„å»º" aria-label="Permalink to &quot;1.4.1 ç”Ÿäº§æ„å»º&quot;">&ZeroWidthSpace;</a></h4>
<p>Snowpack</p>
<ul>
<li>é»˜è®¤æ„å»ºè¾“å‡ºæ˜¯æœªæ‰“åŒ…çš„ï¼šå®ƒå°†æ¯ä¸ªæ–‡ä»¶è½¬æ¢ä¸ºå•ç‹¬çš„æ„å»ºæ¨¡å—ï¼Œç„¶åå°†è¿™äº›æ¨¡å—æä¾›ç»™æ‰§è¡Œå®é™…ç»‘å®šçš„ä¸åŒâ€œä¼˜åŒ–å™¨â€ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸åŒç»ˆç«¯æ‰“åŒ…å™¨ï¼Œä»¥é€‚åº”ä¸åŒéœ€æ±‚ï¼ˆä¾‹å¦‚ webpack, Rollupï¼Œç”šè‡³æ˜¯ ESbuildï¼‰</li>
<li>ç¼ºç‚¹æ˜¯ä½“éªŒæœ‰äº›æ”¯ç¦»ç ´ç¢ â€”â€” ä¾‹å¦‚ï¼Œesbuild ä¼˜åŒ–å™¨ä»ç„¶æ˜¯ä¸ç¨³å®šçš„ï¼ŒRollup ä¼˜åŒ–å™¨ä¹Ÿä¸æ˜¯å®˜æ–¹ç»´æŠ¤ï¼Œè€Œä¸åŒçš„ä¼˜åŒ–å™¨åˆæœ‰ä¸åŒçš„è¾“å‡ºå’Œé…ç½®ã€‚</li>
</ul>
<p>Vite</p>
<ul>
<li>é€‰æ‹©äº†ä¸å•ä¸ªæ‰“åŒ…å™¨ï¼ˆRollupï¼‰è¿›è¡Œæ›´æ·±å…¥çš„é›†æˆã€‚</li>
<li>æ”¯æŒä¸€å¥—é€šç”¨æ’ä»¶API æ‰©å±•äº† Rollup çš„æ’ä»¶æ¥å£ï¼Œå¼€å‘å’Œæ„å»ºä¸¤ç§æ¨¡å¼éƒ½é€‚ç”¨ã€‚</li>
</ul>
<h4 id="_1-4-2-viteæ”¯æŒæ›´å¤šçš„ç‰¹æ€§" tabindex="-1">1.4.2 Viteæ”¯æŒæ›´å¤šçš„ç‰¹æ€§ <a class="header-anchor" href="#_1-4-2-viteæ”¯æŒæ›´å¤šçš„ç‰¹æ€§" aria-label="Permalink to &quot;1.4.2 Viteæ”¯æŒæ›´å¤šçš„ç‰¹æ€§&quot;">&ZeroWidthSpace;</a></h4>
<p>æ”¯æŒç›®å‰åœ¨ Snowpack æ„å»ºä¼˜åŒ–å™¨ä¸­ä¸å¯ç”¨çš„å¤šç§åŠŸèƒ½ï¼š</p>
<ul>
<li>å¤šé¡µé¢åº”ç”¨æ”¯æŒ</li>
<li>åº“æ¨¡å¼</li>
<li>è‡ªåŠ¨åˆ†å‰² CSS ä»£ç </li>
<li>é¢„ä¼˜åŒ–çš„å¼‚æ­¥ chunk åŠ è½½</li>
<li>å¯¹åŠ¨æ€å¯¼å…¥è‡ªåŠ¨ polyfill</li>
<li>å®˜æ–¹ å…¼å®¹æ¨¡å¼æ’ä»¶ æ‰“åŒ…ä¸ºç°ä»£/ä¼ ç»Ÿä¸¤ç§äº§ç‰©ï¼Œå¹¶æ ¹æ®æµè§ˆå™¨æ”¯æŒè‡ªåŠ¨äº¤ä»˜æ­£ç¡®çš„ç‰ˆæœ¬ã€‚</li>
<li>æ›´å¿«çš„ä¾èµ–é¢„æ„å»º</li>
<li>Monorepo æ”¯æŒ</li>
<li>CSS é¢„å¤„ç†å™¨æ”¯æŒã€‚ã€‚ã€‚</li>
</ul>
<h2 id="_2-ç›®æ ‡" tabindex="-1">2 ç›®æ ‡ <a class="header-anchor" href="#_2-ç›®æ ‡" aria-label="Permalink to &quot;2 ç›®æ ‡&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>ä¸ºwebpacké¡¹ç›®å¼€å‘ç¯å¢ƒæä¾›æœ€ç®€å•çš„Viteæ¥å…¥æ–¹æ¡ˆ</strong></p>
<p>å¾…æ¥å…¥é¡¹ç›®åªéœ€è¦åšæå°çš„å˜åŠ¨å°±èƒ½äº«å—åˆ°<code>Vite</code>å¸¦æ¥çš„å¼€å‘ä¹è¶£</p>
<p><strong>é€šè¿‡CLIå·¥å…·ä¸ºé¡¹ç›®æä¾›ä¸€ä¸ªä¸€é”®æ¥å…¥Viteèƒ½åŠ›</strong></p>
<p>Tipsï¼šå¤§éƒ¨åˆ†æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„CLIå·¥å…·ï¼Œæ²¡æœ‰CLIå·¥å…·ä¹Ÿå¯ä»¥CLIå·¥å…·çš„å½¢å¼æä¾›ä½¿ç”¨Viteçš„èƒ½åŠ›ï¼Œæ–¹ä¾¿ç»´æŠ¤ä¸å‡çº§</p>
<h2 id="_3-å®ç°æ–¹æ¡ˆä»‹ç»" tabindex="-1">3 å®ç°æ–¹æ¡ˆä»‹ç» <a class="header-anchor" href="#_3-å®ç°æ–¹æ¡ˆä»‹ç»" aria-label="Permalink to &quot;3 å®ç°æ–¹æ¡ˆä»‹ç»&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_3-1-å†æ¬¡æ€è€ƒviteæ˜¯ä»€ä¹ˆ" tabindex="-1">3.1 å†æ¬¡æ€è€ƒViteæ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_3-1-å†æ¬¡æ€è€ƒviteæ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;3.1 å†æ¬¡æ€è€ƒViteæ˜¯ä»€ä¹ˆ&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>å®˜æ–¹ï¼šä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…· ï¼ˆfeatureï¼šğŸ’¡æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€âš¡ï¸è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼‰</li>
<li>ç¥–å¸ˆçˆ·(yyx)ï¼šä¸Šå±‚çš„å·¥å…·é“¾æ–¹æ¡ˆï¼Œå¯¹æ ‡ ï¼ˆwebpack + é’ˆå¯¹ web çš„å¸¸ç”¨é…ç½® + webpack-dev-serverï¼‰</li>
<li>ç¬”è€…ï¼šä¸€ä¸ªéå¸¸Niceçš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œèƒ½å¤Ÿæé«˜å¼€å‘è€…ç¼–ç å¹¸ç¦æ„Ÿä¸èˆ’é€‚åº¦</li>
</ul>
<h3 id="_3-2-viteåŸç†ä»‹ç»" tabindex="-1">3.2 ViteåŸç†ä»‹ç» <a class="header-anchor" href="#_3-2-viteåŸç†ä»‹ç»" aria-label="Permalink to &quot;3.2 ViteåŸç†ä»‹ç»&quot;">&ZeroWidthSpace;</a></h3>
<p>å®˜æ–¹æ–‡æ¡£ä¸­æœ‰æåˆ°</p>
<ul>
<li>Viteä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…!</li>
<li>Vite å°† index.html è§†ä¸ºæºç å’Œæ¨¡å—å›¾çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>Vite è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;...&quot;&gt;</code>ï¼Œè¿™ä¸ªæ ‡ç­¾æŒ‡å‘ä½ çš„ JavaScript æºç ã€‚</li>
</ul>
<h4 id="_3-2-1-script-module" tabindex="-1">3.2.1 script module <a class="header-anchor" href="#_3-2-1-script-module" aria-label="Permalink to &quot;3.2.1 script module&quot;">&ZeroWidthSpace;</a></h4>
<p>æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„JSçš„æ¨¡å—èƒ½åŠ›ï¼Œéµå¾ªES Moduleè§„èŒƒï¼Œä» <a href="https://caniuse.com/?search=script%20module" target="_blank" rel="noreferrer">caniuse</a> ä¸Šçš„æ•°æ®æ¥çœ‹ï¼Œå¤§çº¦95%çš„æµè§ˆå™¨éƒ½æ”¯æŒ</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwMjk4NDc1Mg==638602984752" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä½¿ç”¨ç¤ºä¾‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwMzAwMDc5Nw==638603000797" alt="å›¾ç‰‡" loading="lazy"></p>
<h4 id="_3-2-2-viteå¿«çš„åŸå› " tabindex="-1">3.2.2 Viteå¿«çš„åŸå›  <a class="header-anchor" href="#_3-2-2-viteå¿«çš„åŸå› " aria-label="Permalink to &quot;3.2.2 Viteå¿«çš„åŸå› &quot;">&ZeroWidthSpace;</a></h4>
<table-base src="vite-webpack"/><p>æœ‰äº†æµè§ˆå™¨æä¾›æ¨¡å—åŒ–çš„åŸºç¡€ï¼ŒViteåªéœ€è¦åšé™æ€èµ„æºçš„è½¬åŒ–å·¥ä½œå°±å¯</p>
<ul>
<li>ts,jsxè½¬æ¢</li>
<li>node_modulesèµ„æºå¤„ç†</li>
<li>ã€‚ã€‚ã€‚and more</li>
</ul>
<h4 id="_3-2-3-å®ç°mini-viteå¼€å‘æœåŠ¡å™¨" tabindex="-1">3.2.3 å®ç°mini Viteå¼€å‘æœåŠ¡å™¨ <a class="header-anchor" href="#_3-2-3-å®ç°mini-viteå¼€å‘æœåŠ¡å™¨" aria-label="Permalink to &quot;3.2.3 å®ç°mini Viteå¼€å‘æœåŠ¡å™¨&quot;">&ZeroWidthSpace;</a></h4>
<p>ViteåŸºæœ¬åŸç†å°±æ˜¯é€šè¿‡Nodeå¯åŠ¨ä¸€ä¸ªHttpServerï¼Œæ‹¦æˆªæµè§ˆå™¨çš„ES Moduleè¯·æ±‚ï¼Œæ ¹æ®èµ„æº/æ¨¡å—è¯·æ±‚è·¯å¾„ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œå†è½¬æ¢æˆES Moduleçš„å½¢å¼è¿”å›ç»™æµè§ˆå™¨ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwMzY4OTYxNQ==vite-mini.png" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŒ…å« scss/css/ts çš„èµ„æºå¤„ç†çš„ä¸€ä¸ªdemoã€‚<a href="https://stackblitz.com/edit/node-qt2m2e?file=README.md" target="_blank" rel="noreferrer">åœ¨çº¿ä½“éªŒåœ°å€ï¼ˆåŒ…å«æºç ï¼‰</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwMzczNDA3Mw==638603734073" alt="å›¾ç‰‡" loading="lazy"></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwMzc0NjE2Mg==638603746163" alt="å›¾ç‰‡" loading="lazy"></p>
<p>demoçš„ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> App.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> app.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> app.scss</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> main.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span></code></pre>
</div><p>å¼€å‘æœåŠ¡å™¨çš„å®ç°å¦‚ä¸‹</p>
<ul>
<li>é€šè¿‡ http æ¨¡å—ï¼Œåˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œç›‘å¬3000ç«¯å£</li>
<li>è¯·æ±‚å¤´åŒ…å« 'text/html', 'application/xhtml+xml' åˆ™è®¤å®šä¸ºè¯·æ±‚htmlæ–‡æ¡£</li>
<li>å…¶ä½™èµ„æºï¼Œäº¤ç”± esbuild ä¸ sass åšè¿›ä¸€æ­¥å¤„ç†</li>
</ul>
<my-details title="ç‚¹å‡»æŸ¥çœ‹å®Œæ•´æºç ä¸å®ç°æ­¥éª¤">
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// vite.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">getSourceType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">transformSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAccepts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'text/html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/xhtml+xml'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">htmlAccepts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req.headers?.accept?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // HTMLæ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (isHtml) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req.url, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://localhost'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…¶å®ƒèµ„æº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pathname)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content-type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/javascript'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(type, pathname));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p>esbuild å¤„ç†jsï¼ˆjsx,ts,cjs,mjsç­‰ç­‰ï¼‰ç›¸å…³çš„æ–‡ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esbuild'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sourceCode, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esm'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ts'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}).code</span></span></code></pre>
</div><p>sass è´Ÿè´£ scssæ–‡ä»¶çš„è½¬æ¢</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sass'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sass.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">renderSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    data: code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}).css.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code></pre>
</div><p>èµ„æºå¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ ¹æ®è¯·æ±‚èµ„æºè·¯å¾„ï¼Œåˆ¤æ–­èµ„æºå¯èƒ½çš„ç±»å‹</li>
<li>åˆ©ç”¨å¯¹åº”çš„è½¬æ¢å™¨ï¼Œå°†èµ„æº<strong>è½¬æ¢æˆæµè§ˆå™¨å¯è¯†åˆ«çš„jsä»£ç </strong></li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// utils.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'sass'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esbuild'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">p);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–èµ„æºç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // TODO: çœç•¥ tsx,jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> jsSourceType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // TODOï¼šè¿˜æœ‰å¾ˆå¤šå…¶å®ƒèµ„æº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">jsSourceType, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'scss'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pathname.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pathname)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsSourceType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">pathname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> type</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–èµ„æºçš„æºç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@returns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pathname))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pathname), { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">pathname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">pathname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * æ·»åŠ å†…è”æ ·å¼è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> addInlineStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        const style = document.createElement('style')    </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        style.textContent = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">code</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        document.head.appendChild(style)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    `</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è½¬æ¢èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sourceCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getSourceCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(type, pathname)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        css</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> addInlineStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        scss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> css</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sass.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">renderSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                data: code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }).css.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">css</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(css)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        ts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esm'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ts'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }).code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esm'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                minify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                loader: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'js'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }).code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops[type] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops[type](sourceCode) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sourceCode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    resolved,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    getSourceType,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    transformSource</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<h3 id="_3-3-viteæ’ä»¶ç³»ç»Ÿç®€ä»‹" tabindex="-1">3.3 Viteæ’ä»¶ç³»ç»Ÿç®€ä»‹ <a class="header-anchor" href="#_3-3-viteæ’ä»¶ç³»ç»Ÿç®€ä»‹" aria-label="Permalink to &quot;3.3 Viteæ’ä»¶ç³»ç»Ÿç®€ä»‹&quot;">&ZeroWidthSpace;</a></h3>
<p>Vite æ’ä»¶æ‰©å±•äº†è®¾è®¡å‡ºè‰²çš„ Rollup æ¥å£ï¼Œå¸¦æœ‰ä¸€äº› Vite ç‹¬æœ‰çš„é…ç½®é¡¹ã€‚</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNDI5OTQwOQ==vite-plugin.png" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="_3-4-æ–¹æ¡ˆæ¦‚è¿°" tabindex="-1">3.4 æ–¹æ¡ˆæ¦‚è¿° <a class="header-anchor" href="#_3-4-æ–¹æ¡ˆæ¦‚è¿°" aria-label="Permalink to &quot;3.4 æ–¹æ¡ˆæ¦‚è¿°&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="_3-4-1-è¦è§£å†³çš„é—®é¢˜" tabindex="-1">3.4.1 è¦è§£å†³çš„é—®é¢˜ <a class="header-anchor" href="#_3-4-1-è¦è§£å†³çš„é—®é¢˜" aria-label="Permalink to &quot;3.4.1 è¦è§£å†³çš„é—®é¢˜&quot;">&ZeroWidthSpace;</a></h4>
<p>è§£å†³è¿™äº›é—®é¢˜ä¹Ÿæ˜¯æ–¹æ¡ˆå®ç°çš„å…³é”®ç‚¹</p>
<table-base src="vite-problem"/><h4 id="_3-4-2-cliç»“æ„" tabindex="-1">3.4.2 CLIç»“æ„ <a class="header-anchor" href="#_3-4-2-cliç»“æ„" aria-label="Permalink to &quot;3.4.2 CLIç»“æ„&quot;">&ZeroWidthSpace;</a></h4>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNTMyOTExNg==638605329116" alt="å›¾ç‰‡" loading="lazy"></p>
<ul>
<li>é€šè¿‡Pluginæ‹“å±•Viteçš„èƒ½åŠ›ï¼Œå°†å¸¸ç”¨æ’ä»¶å…¨éƒ¨å†…ç½®
<ul>
<li>å†…ç½®æ¡†æ¶ç›¸å…³çš„Plugin</li>
<li>å†…ç½®ä¸šåŠ¡å¸¸ç”¨Plugin</li>
</ul>
</li>
<li>å°†Viteç›¸å…³çš„é…ç½®å…¨éƒ¨æ”¶æ•›äºæ’ä»¶å†…ï¼ŒåŒæ—¶æ”¯æŒç”¨æˆ·é€šè¿‡å¤–éƒ¨é…ç½®æ–‡ä»¶ vite.conig.ts ä¿®æ”¹&amp;æ‹“å±•Viteèƒ½åŠ›</li>
<li>å†…éƒ¨é€šè¿‡é…ç½®è½¬æ¢æ’ä»¶è‡ªåŠ¨å°†Webpacké…ç½®è½¬åŒ–ä¸ºViteé…ç½®</li>
<li>é€šè¿‡CLIå·¥å…·ï¼Œå°è£…Viteçš„èƒ½åŠ›</li>
</ul>
<h2 id="_4-æ–¹æ¡ˆå®ç°" tabindex="-1">4 æ–¹æ¡ˆå®ç° <a class="header-anchor" href="#_4-æ–¹æ¡ˆå®ç°" aria-label="Permalink to &quot;4 æ–¹æ¡ˆå®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>èƒ½åŠ›ä¼˜å…ˆé€šè¿‡VIteæ’ä»¶æä¾›ï¼Œç„¶åå°†å®ç°çš„æ’ä»¶è¿›è¡Œå†…ç½®ã€‚</p>
<h3 id="_4-1-dev-htmlæ¨¡æ¿å¤„ç†" tabindex="-1">4.1 Dev-HTMLæ¨¡æ¿å¤„ç† <a class="header-anchor" href="#_4-1-dev-htmlæ¨¡æ¿å¤„ç†" aria-label="Permalink to &quot;4.1 Dev-HTMLæ¨¡æ¿å¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNTQzODg3Mg==638605438872" alt="å›¾ç‰‡" loading="lazy"></p>
<p>Viteé»˜è®¤æ˜¯å°†å¯åŠ¨ç›®å½•ä¸‹çš„ index.htmlçš„æ–‡ä»¶ï¼Œä½œä¸ºå¯åŠ¨å…¥å£ï¼Œè€Œåœ¨ä¼ ç»Ÿçš„webpacké¡¹ç›®ä¸­ï¼Œè¿™ä¸ªæ¨¡æ¿æ–‡ä»¶æ˜¯åœ¨ public/index.htmlæˆ–è€…src/pages/pageNameä¸‹</p>
<p>æ‰€ä»¥éœ€è¦ä¼˜å…ˆå¤„ç†Htmlæ¨¡æ¿çš„é—®é¢˜</p>
<h4 id="_4-1-1-åˆå§‹åŒ–æ¨¡æ¿å†…å®¹" tabindex="-1">4.1.1 åˆå§‹åŒ–æ¨¡æ¿å†…å®¹ <a class="header-anchor" href="#_4-1-1-åˆå§‹åŒ–æ¨¡æ¿å†…å®¹" aria-label="Permalink to &quot;4.1.1 åˆå§‹åŒ–æ¨¡æ¿å†…å®¹&quot;">&ZeroWidthSpace;</a></h4>
<p>é¦–å…ˆé€šè¿‡ configureServer é’©å­æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸­é—´ä»¶ã€‚å¤„ç†å¼€å‘æœåŠ¡å™¨çš„èµ„æºè¯·æ±‚</p>
<p>å½“è¯·æ±‚å¤´åŒ…å« text/html ä¸ application/xhtml+xmlï¼Œå¯ä»¥è®¤å®šä¸ºæ˜¯è¯·æ±‚çš„HTMLæ–‡æ¡£</p>
<p>ç´§æ¥ç€æ ¹æ®è¯·æ±‚çš„èµ„æºè·¯å¾„æŸ¥æ‰¾æœ¬åœ°æ–‡æ¡£</p>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HtmlTemplatePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-html-tpl'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'serve'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">middlewares</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlAccepts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'text/html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/xhtml+xml'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">htmlAccepts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req.headers?.accept?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (isHtml) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadHtmlContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">transformIndexHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req.url, originHtml, req.originalUrl);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    transformIndexHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformTpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<p>SPA é»˜è®¤ä½¿ç”¨ public/index.html</p>
<p>MPAé»˜è®¤æŒ‰ç…§å¦‚ä¸‹è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾</p>
<ul>
<li>src/pages/${entryName}/${entryName}.html</li>
<li>src/pages/${entryName}/index.html</li>
<li>public/${entryName}.html</li>
<li>public/index.html</li>
</ul>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–åŸå§‹æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadHtmlContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…œåº•é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../../public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•é¡µ/å¤šé¡µé»˜è®¤ public/index.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¤šé¡µåº”ç”¨å¯ä»¥æ ¹æ®è¯·æ±‚çš„ è·¯å¾„ ä½œè¿›ä¸€æ­¥çš„åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqPath);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (entryName) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // src/pages/${entryName}/${entryName}.html</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // src/pages/${entryName}/index.html</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // public/${entryName}.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`public/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/index.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // TODOï¼šæ ¹æ®æ¡†æ¶çš„é…ç½®å¯»æ‰¾ï¼Œå¯è‡ªè¡Œè¿›ä¸€æ­¥æ‹“å±•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(page, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<p>è·å–åˆ°åŸå§‹çš„æ¨¡æ¿å†…å®¹åï¼Œé€šå¸¸åŸå§‹æ¨¡æ¿ä¸­å¯èƒ½ä¼šåŒ…å«ä¸€äº›EJSçš„è¯­æ³•</p>
<p>å¯ä»¥é€šè¿‡ transformIndexHtml é’©å­å¯¹æ¨¡æ¿å†…å®¹è¿›è¡Œä¸€ä¸ªè¿›ä¸€æ­¥çš„å¤„ç†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HtmlTemplatePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    transformIndexHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformTpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>transformTplæ–¹æ³•çš„å®ç°ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„åœºæ™¯è¿›è¡Œå®ç°ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªç®€å•çš„æ­£åˆ™æ›¿æ¢å®ç°</p>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> transformTpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tplStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> backup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> matches</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    PUBLIC_URL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    BASE_URL: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    htmlWebpackPlugin: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'App'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">data,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">backup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">matches</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [] } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // match %Name% &#x3C;%Name%></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">&#x3C;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">%=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)%></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(matches).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tpl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(r, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">$1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> keys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (pre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre), data);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> backup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }), tplStr);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<h4 id="_4-1-2-æ’å…¥entryjs" tabindex="-1">4.1.2 æ’å…¥entryJs <a class="header-anchor" href="#_4-1-2-æ’å…¥entryjs" aria-label="Permalink to &quot;4.1.2 æ’å…¥entryJs&quot;">&ZeroWidthSpace;</a></h4>
<p>æ¨¡æ¿å¤„ç†å®Œæˆåï¼Œéœ€è¦å†æ¨¡æ¿ä¸­é€šè¿‡ script æ ‡ç­¾å¼•å…¥entryJsæ‰èƒ½æ­£å¸¸çš„è¿›è¡Œå·¥ä½œ</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"$entryPath"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&#x3C;!--ä¾‹å¦‚--></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/src/main"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/src/pages/pageName/index"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>è¿™éƒ¨åˆ†çš„å¤„ç†ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ transformIndexHtml é’©å­å³å¯</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> pageEntryPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-page-entry'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'serve'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    transformIndexHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPageEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ctx.originalUrl);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entry) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> html.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;/body>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`&#x3C;script type="module" src="${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}">&#x3C;/script></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &#x3C;/body></span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>entryJsçš„è·å–é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>entryå‘½åé€šè¿‡æ­£åˆ™ <code>/(index|main)\.[jt]sx?$/</code> è¿›è¡Œç­›é€‰</li>
<li>SPAæŸ¥æ‰¾ç›®å½• <code>src</code></li>
<li>MPAæŸ¥æ‰¾ç›®å½• <code>src/pages/pageName</code></li>
</ul>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPageEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pageName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPageName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqUrl);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">pageName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">pageName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…¶å®ƒåœºæ™¯è·ŸMPAå¤„ç†ç±»ä¼¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é»˜è®¤SPA</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> SPABase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(SPABase);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dirPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dirPath))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // main|index.js|ts|jsx|tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">main)</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[jt]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">sx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryNames</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dirPath), { withFileTypes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      entryName.lastIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryNames.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dirPath, entryNames[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<p>å…¶ä¸­ pageName æ ¹æ®è¯·æ±‚çš„èµ„æºè·¯å¾„ï¼Œä½¿ç”¨ â€œ/ â€ åˆ†å‰²ï¼Œå¯¹æ¯ä¸ªåˆ†å‰²å†…å®¹è¿›è¡Œæ–‡ä»¶ç›®å½•çš„å­˜åœ¨ä¸å¦è¿›è¡Œåˆ¤æ–­</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPageName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // TODOï¼šå…¼å®¹webpacké…ç½® historyRewrites</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqUrl, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://localhost'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> paths</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pathname.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> paths.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getCWD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, p)));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="_4-2-production-build" tabindex="-1">4.2 Production-Build <a class="header-anchor" href="#_4-2-production-build" aria-label="Permalink to &quot;4.2 Production-Build&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNjI2NTQyMA==638606265420" alt="å›¾ç‰‡" loading="lazy"></p>
<p>viteæ„å»ºçš„å…¥å£ä¹Ÿæ˜¯ htmlï¼Œé€šè¿‡ build.rollup.input å±æ€§è®¾ç½®</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      input: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        index: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages/index/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        second: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages/second/second.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>æŒ‰ç…§å¦‚ä¸Šé…ç½®ï¼Œæ„å»ºäº§ç‰©ä¸­çš„htmlç›®å½•å°†ä¼šå¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src/pages/index/index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src/pages/second/second.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span></code></pre>
</div><p>ä¸å¤ªç¬¦åˆé€šå¸¸çš„ä¹ æƒ¯ï¼Œå¸¸è§„æ ¼å¼å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> second.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span></code></pre>
</div><p>æ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶ å¤„ç†æ„å»ºå…¥å£æ–‡ä»¶ å’Œ è°ƒæ•´æ„å»ºåçš„äº§ç‰©ä½ç½®</p>
<h4 id="_4-2-1-æ’ä»¶ç»“æ„" tabindex="-1">4.2.1 æ’ä»¶ç»“æ„ <a class="header-anchor" href="#_4-2-1-æ’ä»¶ç»“æ„" aria-label="Permalink to &quot;4.2.1 æ’ä»¶ç»“æ„&quot;">&ZeroWidthSpace;</a></h4>
<p>é€šè¿‡ configResolved é’©å­è·å–æœ€ç»ˆé…ç½®ï¼Œé…ç½®æä¾›ç»™å…¶å®ƒé’©å­ä½¿ç”¨</p>
<p>çº¦å®špageEntryçš„ç›®å½•</p>
<ul>
<li>SPAï¼šsrc</li>
<li>MPAï¼šsrc/pages</li>
</ul>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> BuildPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> userConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ResolvedConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-build'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åªåœ¨æ„å»ºé˜¶æ®µç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'build'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è·å–æœ€ç»ˆé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    configResolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cfg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      userConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cfg;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ’ä»¶é…ç½®å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    resolveId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ„å»ºå®Œæˆå</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    closeBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<h4 id="_4-2-2-è·å–æ‰€æœ‰çš„entry" tabindex="-1">4.2.2 è·å–æ‰€æœ‰çš„entry <a class="header-anchor" href="#_4-2-2-è·å–æ‰€æœ‰çš„entry" aria-label="Permalink to &quot;4.2.2 è·å–æ‰€æœ‰çš„entry&quot;">&ZeroWidthSpace;</a></h4>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getMpaPageEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•é¡µåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryHtml: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryJs: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>MPAçš„pageEntryé€»è¾‘è·å–å¦‚ä¸‹:</p>
<ol>
<li>å…ˆè·å–æ‰€æœ‰çš„entryName</li>
<li>å†æŸ¥è¯¢éå†æ¯ä¸ªpageå¯¹åº”çš„ entryJs ä¸ entryHtml</li>
</ol>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getMpaPageEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">baseDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'src/pages'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è·å–æ‰€æœ‰çš„EntryName</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryNameList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(baseDir), { withFileTypes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryNameList</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({ entryName, entryHtml: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, entryJs: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(baseDir, entryName)) }))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v.entryJs)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // src/pages/${entryName}/${entryName}.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // src/pages/${entryName}/index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/index.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // public/${entryName}.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`public/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // åº”ç”¨å…œåº•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // CLIå…œåº•é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        entryHtml,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<h4 id="_4-2-3-ç”Ÿæˆbuildæ‰€éœ€é…ç½®" tabindex="-1">4.2.3 ç”ŸæˆBuildæ‰€éœ€é…ç½® <a class="header-anchor" href="#_4-2-3-ç”Ÿæˆbuildæ‰€éœ€é…ç½®" aria-label="Permalink to &quot;4.2.3 ç”ŸæˆBuildæ‰€éœ€é…ç½®&quot;">&ZeroWidthSpace;</a></h4>
<p>æ ¹æ®è·å–çš„æ‰€æœ‰ entryç”Ÿæˆæœ€ç»ˆæ„å»ºæ‰€éœ€çš„é…ç½®</p>
<ul>
<li>è·å–æ¯ä¸ª entryHtml çš„å†…å®¹,ç„¶åä½¿ç”¨ map è¿›è¡Œä¸´æ—¶çš„å­˜å‚¨</li>
<li>æ„å»ºå…¥å£æ¨¡æ¿è·¯å¾„å– entryJs çš„ç›®å½•åŠ index.html</li>
</ul>
<my-details title="ç‚¹å‡»å±•å¼€æºç ">
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlContentMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥å…¶å®ƒæ— å…³ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryJs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryHtml), path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, entryJs));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlEntryPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryJs).dir, tempHtmlName);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å­˜å‚¨å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      htmlContentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlEntryPath, html);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pre[entryName] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlEntryPath;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, {});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          input,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div></my-details>
<h4 id="_4-2-4-å…¥å£htmlå†…å®¹ç”Ÿæˆ" tabindex="-1">4.2.4 å…¥å£HTMLå†…å®¹ç”Ÿæˆ <a class="header-anchor" href="#_4-2-4-å…¥å£htmlå†…å®¹ç”Ÿæˆ" aria-label="Permalink to &quot;4.2.4 å…¥å£HTMLå†…å®¹ç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h4>
<p>å®é™…ä¸ŠhtmlEntryPathè¿™ä¸ªè·¯å¾„å¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ï¼ˆä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼‰</p>
<p>éœ€è¦é€šè¿‡ resolveId ä¸ load é’©å­ï¼Œåˆ©ç”¨ htmlContentMap å­˜å‚¨çš„å†…å®¹è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlContentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  resolveId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> id;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶ä¸­ id ä¸ºèµ„æºè¯·æ±‚çš„è·¯å¾„ï¼Œç›´æ¥ä» htmlContentMap å–å‡ºæ¨¡æ¿çš„å†…å®¹å³å¯</p>
<p>æ„å»ºå®Œæˆåï¼Œéœ€è¦è°ƒæ•´htmlæ–‡æ¡£çš„ä½ç½®ï¼Œä½¿å…¶ç¬¦åˆé¢„æœŸ</p>
<h4 id="_4-2-5-äº§ç‰©ç›®å½•è°ƒæ•´" tabindex="-1">4.2.5 äº§ç‰©ç›®å½•è°ƒæ•´ <a class="header-anchor" href="#_4-2-5-äº§ç‰©ç›®å½•è°ƒæ•´" aria-label="Permalink to &quot;4.2.5 äº§ç‰©ç›®å½•è°ƒæ•´&quot;">&ZeroWidthSpace;</a></h4>
<p>ä½¿ç”¨ closeBundle é’©å­ï¼Œåœ¨æ„å»ºå®Œæˆåï¼ŒæœåŠ¡å…³é—­å‰è¿›è¡Œæ–‡ä»¶è°ƒæ•´</p>
<ul>
<li>éå†<code>entry</code>å°†<code>dist/src/pages/pageName/index.html</code>ç§»åŠ¨åˆ°<code>dist</code>ä¸‹</li>
<li>ç§»é™¤<code>dist/src</code>ä¸‹çš„å†…å®¹</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">closeBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">outDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> userConfig.build;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç›®å½•è°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryJs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> outputHtmlPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryJs).dir, tempHtmlName);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outputHtmlPath));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç§»é™¤ä¸´æ—¶èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  rmdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="_4-3-viteé…ç½®å¤„ç†" tabindex="-1">4.3 Viteé…ç½®å¤„ç† <a class="header-anchor" href="#_4-3-viteé…ç½®å¤„ç†" aria-label="Permalink to &quot;4.3 Viteé…ç½®å¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="_4-3-1-è¯»å–ç”¨æˆ·é…ç½®" tabindex="-1">4.3.1 è¯»å–ç”¨æˆ·é…ç½® <a class="header-anchor" href="#_4-3-1-è¯»å–ç”¨æˆ·é…ç½®" aria-label="Permalink to &quot;4.3.1 è¯»å–ç”¨æˆ·é…ç½®&quot;">&ZeroWidthSpace;</a></h4>
<p>Vite æä¾›äº†ä¸€ä¸ªç°æˆçš„æ–¹æ³•ç”¨äºè¯»å–ä¸è§£æViteçš„é…ç½®æ–‡ä»¶</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { loadConfigFromFile, ConfigEnv } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getUserConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">configEnv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ConfigEnv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">suffix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite.config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> _suffix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mjs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cjs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (suffix) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    _suffix.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(suffix);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _suffix.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">configName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadConfigFromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configEnv, configFile);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è·å–é…ç½®åé€šè¿‡ config é’©å­ï¼Œå°†é…ç½®å¹¶å…¥æœ€ç»ˆçš„é…ç½®ä¹‹ä¸­</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { PluginOption } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { getUserConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UserConfigPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cfg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> userConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getUserConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(env);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">userConfig?.config,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="_4-3-2-è½¬æ¢webpacké…ç½®" tabindex="-1">4.3.2 è½¬æ¢webpacké…ç½® <a class="header-anchor" href="#_4-3-2-è½¬æ¢webpacké…ç½®" aria-label="Permalink to &quot;4.3.2 è½¬æ¢webpacké…ç½®&quot;">&ZeroWidthSpace;</a></h4>
<p>ç›®å‰ç¤¾åŒºå·²ç»æœ‰ä¸€ä¸ªCLIå·¥å…·ï¼Œ<a href="https://github.com/tnfe/wp2vite" target="_blank" rel="noreferrer">wp2vite</a> æ”¯æŒå¸¸è§„Vue/Reacté¡¹ç›®çš„<a href="https://www.webpackjs.com/configuration/" target="_blank" rel="noreferrer">webpacké…ç½®</a>çš„è‡ªåŠ¨è½¬æ¢åˆ°<a href="https://cn.vitejs.dev/config/" target="_blank" rel="noreferrer">viteé…ç½®</a></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNzE1ODI2OA==638607158268" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> wp2vite</span></span></code></pre>
</div><p>æ ¹ç›®å½•æ‰§è¡Œ wp2vite å³å¯è‡ªåŠ¨è½¬æ¢</p>
<ul>
<li>ä½†ç”±äºæ˜¯ä¸€ä¸ªCLIå·¥å…·ï¼Œå¹¶æ²¡æœ‰å°†å†…éƒ¨è½¬æ¢é…ç½®çš„æ–¹æ³•æš´éœ²å‡ºæ¥</li>
<li>å·¥å…·æ˜¯å¼€æºçš„ã€‚ä½¿ç”¨æ–¹å¯ä»¥å¯¹å…¶è¿›è¡ŒäºŒæ¬¡çš„å®šåˆ¶ï¼Œå¤ç”¨å…¶éƒ¨åˆ†èƒ½åŠ›</li>
<li>è·å–åˆ°è½¬æ¢åçš„é…ç½®åï¼ŒåŒä¸Šé€šè¿‡configé’©å­å¹¶å…¥æœ€ç»ˆé…ç½®å³å¯</li>
</ul>
<h3 id="_4-4-cliå·¥å…·æ”¯æŒ" tabindex="-1">4.4 CLIå·¥å…·æ”¯æŒ <a class="header-anchor" href="#_4-4-cliå·¥å…·æ”¯æŒ" aria-label="Permalink to &quot;4.4 CLIå·¥å…·æ”¯æŒ&quot;">&ZeroWidthSpace;</a></h3>
<p>Viteæ”¯æŒåœ¨å¯åŠ¨å‘½ä»¤ä¸­æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™ä¸ºCLIå†…ç½®Viteèƒ½åŠ›æä¾›äº†ä¾¿åˆ©</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vite</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> configFilePath</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzODYwNzU3MDIwMQ==638607570201" alt="å›¾ç‰‡" loading="lazy"></p>
<p>CLIå†…éƒ¨å¯ä»¥é€šè¿‡ spawn åˆ›å»ºå­è¿›ç¨‹å¯åŠ¨ï¼Œä¹Ÿå¯ä½¿ç”¨viteå¯¹å¤–æš´éœ²çš„<code>createServer</code>æ–¹æ³•</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> spawn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'cross-spawn'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æˆ–è€…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { spawn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'child_process'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> require.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./../config/vite.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, configPath];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (debug) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // æ ‡å¿—debug</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'true'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // vite debug</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--debug'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'string'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(debug);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> viteService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, params, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cwd: process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><h2 id="_5-æ•ˆæœ-æ¥å…¥viteå‰åå¯¹æ¯”" tabindex="-1">5 æ•ˆæœ - æ¥å…¥Viteå‰åå¯¹æ¯” <a class="header-anchor" href="#_5-æ•ˆæœ-æ¥å…¥viteå‰åå¯¹æ¯”" aria-label="Permalink to &quot;5 æ•ˆæœ - æ¥å…¥Viteå‰åå¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h2>
<p>å¯åŠ¨æé€Ÿâ‰ˆ70% - 80% HMRé€Ÿåº¦ç¢¾å‹</p>
<h3 id="_5-1-vue-spa" tabindex="-1">5.1 Vue SPA <a class="header-anchor" href="#_5-1-vue-spa" aria-label="Permalink to &quot;5.1 Vue SPA&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNTE2OTU0MzgyMA==vue.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="_5-2-react-spa" tabindex="-1">5.2 React SPA <a class="header-anchor" href="#_5-2-react-spa" aria-label="Permalink to &quot;5.2 React SPA&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNTA3MDM3NDkyMQ==react-demo2.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="_6-æ€»ç»“ä¸å±•æœ›" tabindex="-1">6 æ€»ç»“ä¸å±•æœ› <a class="header-anchor" href="#_6-æ€»ç»“ä¸å±•æœ›" aria-label="Permalink to &quot;6 æ€»ç»“ä¸å±•æœ›&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_6-1-æ€»ç»“" tabindex="-1">6.1 æ€»ç»“ <a class="header-anchor" href="#_6-1-æ€»ç»“" aria-label="Permalink to &quot;6.1 æ€»ç»“&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ¬æ–‡ä¸»è¦è®²è¿°äº†ï¼Œé¡¹ç›®ï¼ˆåŒ…å«ä½†ä¸é™äºwebpackå·¥ç¨‹ï¼‰æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä¸æ ¸å¿ƒéƒ¨åˆ†é€»è¾‘çš„å®ç°ã€‚</p>
<p>ä¸ºè¯»è€…æä¾›äº†ä¸€ç§Webå·¥ç¨‹æ¥å…¥Viteçš„æ€è·¯ã€‚</p>
<p>ä¼ä¸šï¼šå¤§éƒ¨åˆ†æ˜¯æ‹¥æœ‰è‡ªå·±çš„ç ”å‘æ¡†æ¶ï¼Œåœ¨ç ”å‘æ¡†æ¶ä¸­åªéœ€è¦åŠ å…¥ä¸€ä¸ªViteå¯åŠ¨çš„CLIæŒ‡ä»¤ï¼Œè¿™æ ·å¯¹æ¥å…¥æ–¹çš„å½±å“ä¸ä½¿ç”¨æˆæœ¬æ˜¯æœ€å°çš„</p>
<p>ä¸ªäººï¼šå–œæ¬¢æŠ˜è…¾/ä¸æƒ³æ”¹åŠ¨åŸæ¥çš„ä»£ç ï¼Œå¯ä»¥æŒ‰ä¸Šè¿°æµç¨‹è‡ªå·±æ¥ä¸€ä¸‹ï¼Œæ–°é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨Viteå®˜æ–¹æ¨¡æ¿å¼€å‘</p>
<p>æ€»ä¹‹ï¼š<strong>å¼€å‘ä¸­ä½¿ç”¨<code>Vite</code>è¿˜æ˜¯å¾ˆé¦™çš„</strong></p>
<h3 id="_6-2-æœªæ¥å±•æœ›" tabindex="-1">6.2 æœªæ¥å±•æœ› <a class="header-anchor" href="#_6-2-æœªæ¥å±•æœ›" aria-label="Permalink to &quot;6.2 æœªæ¥å±•æœ›&quot;">&ZeroWidthSpace;</a></h3>
<p>Viteæ˜¯ä¸€é¢—å†‰å†‰å‡èµ·çš„å‰ç«¯æ–°æ˜Ÿï¼Œç›¸ä¿¡éšç€å‘¨è¾¹çš„ä¸æ–­å®Œå–„ã€‚å·¥ç¨‹ä½¿ç”¨Viteä½œä¸ºæ„å»ºå·¥å…·çš„æ¯”ä¾‹ä¼šå¤§å¤§çš„å¢åŠ ã€‚</p>
<p>åœ¨åªå…¼å®¹ç°ä»£æµè§ˆå™¨çš„å‰æä¸‹ï¼Œbundlelessæ–¹æ¡ˆå°†ä¼šå¤§æ”¾å¼‚å½©ï¼Œæå¤§çš„æå‡äº§ç‰©çš„æ„å»ºé€Ÿåº¦ï¼Œå†ä¹Ÿä¸ç”¨å‘ä¸€æ¬¡ç‰ˆè¦ç­‰å‡ åˆ†é’Ÿç”šè‡³å‡ ååˆ†é’Ÿæ‰èƒ½Buildå®Œæˆï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦é¢‘ç¹éƒ¨ç½²çš„æµ‹è¯•ç¯å¢ƒä¹‹ä¸­ã€‚</p>
<h2 id="åç»­è§„åˆ’" tabindex="-1">åç»­è§„åˆ’ <a class="header-anchor" href="#åç»­è§„åˆ’" aria-label="Permalink to &quot;åç»­è§„åˆ’&quot;">&ZeroWidthSpace;</a></h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" id="cbx_0" disabled="true"><label for="cbx_0"> ç›®å‰<code>wp2vite</code>åœ¨é…ç½®è½¬æ¢è¿™ä¸€å—ï¼Œè¿˜ä¸èƒ½å¤ªæ»¡è¶³ä½¿ç”¨è¦æ±‚ï¼Œå‡†å¤‡æPRå¢å¼ºä¸€ä¸‹</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_1" disabled="true"><label for="cbx_1"> å°†å†…éƒ¨èƒ½åŠ›æŠ½æˆä¸€ä¸ªä¸ªå•ç‹¬çš„viteæ’ä»¶</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_2" disabled="true"><label for="cbx_2"> å°†æ—¥å¸¸æ‰€éœ€èƒ½åŠ›è¿›è¡Œå†…ç½®</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_3" disabled="true"><label for="cbx_3"> å°†å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆè¿›è¡Œå†…ç½®</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_4" disabled="true"><label for="cbx_4"> å‡å°åŒ…ä½“ç§¯ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦</label></li>
<li class="task-list-item"><input type="checkbox" id="cbx_5" disabled="true"><label for="cbx_5"> å®Œå–„æ–‡æ¡£</label></li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://juejin.cn/post/7010585760642367496#heading-1" target="_blank" rel="noreferrer">æ˜é‡‘ï¼šjsæ‰“åŒ…æ—¶é—´ç¼©çŸ­90%ï¼Œbundlelessç”Ÿäº§ç¯å¢ƒå®è·µæ€»ç»“</a></li>
<li><a href="https://juejin.cn/post/7026616296426962958" target="_blank" rel="noreferrer">æ˜é‡‘ï¼šå¯èƒ½æ˜¯æœ€å®Œå–„çš„ React+Vite è§£å†³æ–¹æ¡ˆï¼Œé˜¿é‡Œé£å†°å›¢é˜Ÿå‘å¸ƒ icejs 2.0 ç‰ˆæœ¬</a></li>
<li><a href="https://juejin.cn/post/7010922819143860261" target="_blank" rel="noreferrer">è¿‘ 20k Starçš„é¡¹ç›®è¯´ä¸åšå°±ä¸åšäº†ï¼Œä½†æ€»ç»“çš„å†…å®¹å€¼å¾—å€Ÿé‰´</a></li>
<li><a href="https://www.zhihu.com/question/477139054/answer/2156019180" target="_blank" rel="noreferrer">çŸ¥ä¹ï¼šVite çš„ç›®æ ‡ä¸æ˜¯è¦å¹²æ‰ webpack</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/139219361" target="_blank" rel="noreferrer">çŸ¥ä¹ï¼šå½»åº•å‘Šåˆ«ç¼–è¯‘ OOMï¼Œç”¨ esbuild åšå‹ç¼©å™¨</a></li>
<li><a href="https://cn.vitejs.dev/guide/why.html" target="_blank" rel="noreferrer">Viteå®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzODYwMjk4NDc1Mg==638602984752" length="0" type="image//mdImg/MTYzODYwMjk4NDc1Mg==638602984752"/>
        </item>
        <item>
            <title><![CDATA[webpacké¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿]]></title>
            <link>https://www.dmsrs.org/technology/learn/webapck2vite2.html</link>
            <guid>https://www.dmsrs.org/technology/learn/webapck2vite2.html</guid>
            <pubDate>Sun, 14 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æ„¿æ™¯
å¸Œæœ›é€šè¿‡æ­¤ç³»åˆ—æ–‡ç« ï¼Œèƒ½ç»™è¯»è€…æä¾›ä¸€ä¸ªå­˜/å¢é‡é¡¹ç›®æ¥å…¥Viteçš„ç‚¹å­ï¼Œèµ·æŠ›ç –å¼•ç‰çš„ä½œç”¨ï¼Œå‡å°‘è¿™æ–¹é¢èƒ½åŠ›çš„å»ºè®¾æˆæœ¬
åœ¨é˜è¿°è¿‡ç¨‹ä¸­åŒæ—¶ä¹Ÿä¼šé€æ¸å®Œå–„webpack-vite-serveè¿™ä¸ªå·¥å…·
è¯»è€…å¯ç›´]]></description>
            <content:encoded><![CDATA[<h1 id="webpack-é¡¹ç›®æ¥å…¥viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿" tabindex="-1">webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿ <a class="header-anchor" href="#webpack-é¡¹ç›®æ¥å…¥viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿" aria-label="Permalink to &quot;webpack é¡¹ç›®æ¥å…¥Viteçš„é€šç”¨æ–¹æ¡ˆä»‹ç»-è‰ç¨¿&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="æ„¿æ™¯" tabindex="-1">æ„¿æ™¯ <a class="header-anchor" href="#æ„¿æ™¯" aria-label="Permalink to &quot;æ„¿æ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>å¸Œæœ›é€šè¿‡æ­¤ç³»åˆ—æ–‡ç« ï¼Œèƒ½ç»™è¯»è€…æä¾›ä¸€ä¸ªå­˜/å¢é‡é¡¹ç›®æ¥å…¥Viteçš„ç‚¹å­ï¼Œèµ·æŠ›ç –å¼•ç‰çš„ä½œç”¨ï¼Œå‡å°‘è¿™æ–¹é¢èƒ½åŠ›çš„å»ºè®¾æˆæœ¬</p>
<p>åœ¨é˜è¿°è¿‡ç¨‹ä¸­åŒæ—¶ä¹Ÿä¼šé€æ¸å®Œå–„<a href="https://github.com/ATQQ/webpack-vite-serve" target="_blank" rel="noreferrer">webpack-vite-serve</a>è¿™ä¸ªå·¥å…·</p>
<p>è¯»è€…å¯ç›´æ¥forkè¿™ä¸ªå·¥å…·ä»“åº“ï¼Œé’ˆå¯¹ä¸ªäºº/å…¬å¸é¡¹ç›®åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–çš„äºŒæ¬¡å¼€å‘</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨<a href="./webapck2vite.html">ä¸Šä¸€æœŸçš„æ–‡ç« </a>ä¸­ï¼Œå¤§æ¦‚ä»‹ç»äº†webpacké¡¹ç›®æ¥å…¥Viteçš„å¤„ç†æ€è·¯ï¼Œå¤§ä½“å°±æ˜¯ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>htmlæ¨¡æ¿å¤„ç†</li>
<li>entryJså¤„ç†</li>
<li><a href="https://www.webpackjs.com/configuration/" target="_blank" rel="noreferrer">webpacké…ç½®</a>å‘<a href="https://cn.vitejs.dev/config/" target="_blank" rel="noreferrer">viteé…ç½®</a>è¿ç§»</li>
<li>æ›¿ä»£webpackæ’ä»¶çš„viteæ’ä»¶</li>
</ul>
<p>è¿™äº›å†…å®¹çš„å¤„ç†éƒ½æ˜¯å¯ä»¥é€šè¿‡<a href="https://cn.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer">viteæ’ä»¶</a>å®ç°</p>
<h2 id="webpack-vite-serveä»‹ç»" tabindex="-1">webpack-vite-serveä»‹ç» <a class="header-anchor" href="#webpack-vite-serveä»‹ç»" aria-label="Permalink to &quot;webpack-vite-serveä»‹ç»&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™æ®µæ—¶é—´å°±åœ¨ä¸æ–­å®Œå–„è¿™ä¸ªåº“çš„åŠŸèƒ½ï¼Œä¸‹é¢å…ˆç®€å•ä»‹ç»ä¸€ä¸‹å…¶ä½¿ç”¨ï¼Œå†é˜è¿°ä¸€äº›æ’ä»¶çš„å®ç°åŸç†</p>
<p>ç›®æ ‡ï¼š<strong>ä¸ºwebpacké¡¹ç›®æä¾›ä¸€é”®æ¥å…¥Viteçš„èƒ½åŠ›</strong></p>
<h3 id="å®‰è£…ä¾èµ–" tabindex="-1">å®‰è£…ä¾èµ– <a class="header-anchor" href="#å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;å®‰è£…ä¾èµ–&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> webpack-vite-serve</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> webpack-vite-serve</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> webpack-vite-serve</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span></span></code></pre>
</div><h3 id="æ·»åŠ å¯åŠ¨æŒ‡ä»¤" tabindex="-1">æ·»åŠ å¯åŠ¨æŒ‡ä»¤ <a class="header-anchor" href="#æ·»åŠ å¯åŠ¨æŒ‡ä»¤" aria-label="Permalink to &quot;æ·»åŠ å¯åŠ¨æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># devServer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">wvs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [options]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">wvs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [options]</span></span></code></pre>
</div><h3 id="å¯é€‰å‚æ•°" tabindex="-1">å¯é€‰å‚æ•° <a class="header-anchor" href="#å¯é€‰å‚æ•°" aria-label="Permalink to &quot;å¯é€‰å‚æ•°&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li><code>-f,--framework &lt;type&gt;</code>ï¼šæŒ‡å®šä½¿ç”¨çš„ä¸šåŠ¡æ¡†æ¶ (vueï¼Œreact)ï¼Œè‡ªåŠ¨å¼•å…¥ä¸šåŠ¡æ¡†æ¶ç›¸å…³çš„åŸºç¡€æ’ä»¶</li>
<li><code>-s,--spa</code>ï¼šæŒ‰ç…§å•é¡µåº”ç”¨ç›®å½•ç»“æ„å¤„ç† <code>src/${entryJs}</code></li>
<li><code>-m,--mpa</code>ï¼šæŒ‰ç…§å¤šé¡µåº”ç”¨ç›®å½•ç»“æ„å¤„ç† <code>src/pages/${entryName}/${entryJs}</code></li>
<li><code>-d,--debug [feat]</code>ï¼šæ‰“å°debugä¿¡æ¯</li>
<li><code>-w,--wp2vite</code>ï¼šä½¿ç”¨ <a href="https://github.com/tnfe/wp2vite" target="_blank" rel="noreferrer">wp2vite</a> è‡ªåŠ¨è½¬æ¢webpackæ–‡ä»¶</li>
</ul>
<h3 id="å…¶å®ƒè¯´æ˜" tabindex="-1">å…¶å®ƒè¯´æ˜ <a class="header-anchor" href="#å…¶å®ƒè¯´æ˜" aria-label="Permalink to &quot;å…¶å®ƒè¯´æ˜&quot;">&ZeroWidthSpace;</a></h3>
<p>é¡¹ç›®éµå¾ªå¸¸è§„çš„ å•é¡µ/å¤šé¡µåº”ç”¨ é¡¹ç›®çš„ç›®å½•ç»“æ„å³å¯</p>
<p>viteé…ç½®é€šè¿‡å®˜æ–¹çš„<code>vite.config.[tj]s</code>é…ç½®æ–‡ä»¶æ‹“å±•å³å¯</p>
<h3 id="æ•ˆæœ" tabindex="-1">æ•ˆæœ <a class="header-anchor" href="#æ•ˆæœ" aria-label="Permalink to &quot;æ•ˆæœ&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNjg3MzM4NzQzMQ==636873387431" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åœ¨çº¿ä½“éªŒdemoåœ°å€ï¼šå·²åˆ›å»º<a href="https://stackblitz.com/edit/atqq-webpack-vite-serve-mstatq?devtoolsheight=33&amp;file=README.md" target="_blank" rel="noreferrer">stackblitz</a></p>
<p>å¦‚ç”±äºç½‘ç»œåŸå› æ— æ³•è®¿é—®ï¼Œå¯cloneä»“åº“è®¿é—®å…¶ä¸­demoä½“éªŒ</p>
<h2 id="mpaæ”¯æŒ" tabindex="-1">MPAæ”¯æŒ <a class="header-anchor" href="#mpaæ”¯æŒ" aria-label="Permalink to &quot;MPAæ”¯æŒ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="dev-é¡µé¢æ¨¡æ¿" tabindex="-1">Dev-é¡µé¢æ¨¡æ¿ <a class="header-anchor" href="#dev-é¡µé¢æ¨¡æ¿" aria-label="Permalink to &quot;Dev-é¡µé¢æ¨¡æ¿&quot;">&ZeroWidthSpace;</a></h3>
<p>é¦–å…ˆæ˜¯<code>devServer</code>ç¯å¢ƒçš„é¡µé¢æ¨¡æ¿å¤„ç†</p>
<p>æ ¹æ®è¯·æ±‚è·¯å¾„è·å–<code>entryName</code></p>
<ul>
<li>ä½¿ç”¨<code>/</code>æ‹†åˆ†è¯·æ±‚è·¯å¾„å¾—åˆ°<code>paths</code></li>
<li>éå†å¯»æ‰¾ç¬¬ä¸€ä¸ª<code>src/pages/${path}</code>å­˜åœ¨çš„<code>path</code>,æ­¤pathå³ä¸º<code>entryName</code></li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cfg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">pathname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqUrl, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://localhost'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> paths</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pathname.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> paths.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getCWD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, p)));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pathname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'not match any entry'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¯»æ‰¾æ¨¡æ¿æ–‡ä»¶ï¼ŒæŒ‰ç…§å¦‚ä¸‹é¡ºåºæ¢å¯»</p>
<ul>
<li><code>src/pages/${entryName}/${entryName}.html</code></li>
<li><code>src/pages/${entryName}/index.html</code></li>
<li><code>public/${entryName}.html</code></li>
<li><code>public/index.html</code></li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadHtmlContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…œåº•é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../../public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•é¡µ/å¤šé¡µé»˜è®¤ public/index.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¤šé¡µåº”ç”¨å¯ä»¥æ ¹æ®è¯·æ±‚çš„ è·¯å¾„ ä½œè¿›ä¸€æ­¥çš„åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqPath);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (entryName) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`public/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/index.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(page, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="dev-entryjs" tabindex="-1">Dev-entryJs <a class="header-anchor" href="#dev-entryjs" aria-label="Permalink to &quot;Dev-entryJs&quot;">&ZeroWidthSpace;</a></h3>
<p>å¤šé¡µåº”ç”¨çš„<code>entryJs</code>å°±æŒ‰çº¦å®šè¯»å–<code>src/pages/${entryName}/${main|index}</code>æ–‡ä»¶</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPageEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reqUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reqUrl);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // é»˜è®¤SPA</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> SPABase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(SPABase);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="build" tabindex="-1">Build <a class="header-anchor" href="#build" aria-label="Permalink to &quot;Build&quot;">&ZeroWidthSpace;</a></h2>
<p>viteæ„å»ºçš„å…¥å£æ˜¯<code>html</code>æ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡<code>build.rollup.input</code>å±æ€§è®¾ç½®</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      input: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        index: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages/index/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        second: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/pages/second/second.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>æŒ‰ç…§å¦‚ä¸Šé…ç½®ï¼Œæ„å»ºäº§ç‰©ä¸­çš„htmlç›®å½•å°†ä¼šå¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src/pages/index/index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src/pages/second/second.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span></code></pre>
</div><p>ä¸å¤ªç¬¦åˆé€šå¸¸çš„ä¹ æƒ¯ï¼Œå¸¸è§„æ ¼å¼å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dist</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> second.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span></code></pre>
</div><p>æ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶<code>å¤„ç†æ„å»ºå…¥å£æ–‡ä»¶</code>å’Œ<code>è°ƒæ•´æ„å»ºåçš„äº§ç‰©ä½ç½®</code></p>
<h3 id="æ’ä»¶ç»“æ„" tabindex="-1">æ’ä»¶ç»“æ„ <a class="header-anchor" href="#æ’ä»¶ç»“æ„" aria-label="Permalink to &quot;æ’ä»¶ç»“æ„&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> BuildPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> userConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ResolvedConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-build'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åªåœ¨æ„å»ºé˜¶æ®µç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'build'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è·å–æœ€ç»ˆé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    configResolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cfg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      userConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cfg;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ’ä»¶é…ç½®å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    resolveId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ„å»ºå®Œæˆå</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    closeBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é€šè¿‡<code>configResolved</code>é’©å­è·å–æœ€ç»ˆé…ç½®ï¼Œé…ç½®æä¾›ç»™å…¶å®ƒé’©å­ä½¿ç”¨</p>
<h3 id="è·å–entry" tabindex="-1">è·å–entry <a class="header-anchor" href="#è·å–entry" aria-label="Permalink to &quot;è·å–entry&quot;">&ZeroWidthSpace;</a></h3>
<p>é¦–å…ˆè·å–<code>src/pages</code>ä¸‹æ‰€æœ‰çš„entry</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isMPA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getMpaEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å•é¡µåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryHtml: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entryJs: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>entryçš„å®šä¹‰ä¸º</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  entryHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  entryName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  entryJs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è·å–é€»è¾‘å¦‚ä¸‹</p>
<ul>
<li>å…ˆè·å–æ‰€æœ‰çš„<code>EntryName</code></li>
<li>åœ¨éå†è·å–æ¯ä¸ªentryå¯¹åº”çš„<code>entryJs</code>ä¸<code>entryHtml</code></li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getMpaEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">baseDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'src/pages'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryNameList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> readdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(baseDir), { withFileTypes: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entryNameList</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({ entryName, entryHtml: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, entryJs: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getEntryFullPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(baseDir, entryName)) }))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v.entryJs)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entryHtml</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`src/pages/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/index.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`public/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../../public/index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(html));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        entryHtml,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="ç”Ÿæˆæ„å»ºé…ç½®" tabindex="-1">ç”Ÿæˆæ„å»ºé…ç½® <a class="header-anchor" href="#ç”Ÿæˆæ„å»ºé…ç½®" aria-label="Permalink to &quot;ç”Ÿæˆæ„å»ºé…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>æ ¹æ®å¾—åˆ°çš„<code>entry</code>ç”Ÿæˆ <code>build.rollup.input</code></p>
<ul>
<li>è·å–æ¯ä¸ª<code>entryHtml</code>çš„å†…å®¹,ç„¶åä½¿ç”¨<code>map</code>è¿›è¡Œä¸´æ—¶çš„å­˜å‚¨</li>
<li>æ„å»ºå…¥å£æ¨¡æ¿è·¯å¾„<code>htmlEntryPath</code>å–<code>entryJs</code>çš„ç›®å½•åŠ <code>index.html</code></li>
</ul>
<p>å®é™…ä¸Š<code>htmlEntryPath</code>è¿™ä¸ªè·¯å¾„å¹¶ä¸å­˜åœ¨ä»»ä½•æ–‡ä»¶</p>
<p>æ‰€ä»¥éœ€è¦é€šè¿‡å…¶å®ƒé’©å­ï¼Œåˆ©ç”¨<code>htmlContentMap</code>å­˜å‚¨çš„å†…å®¹è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlContentMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥å…¶å®ƒæ— å…³ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryJs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEntryHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryHtml), path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, entryJs));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> htmlEntryPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryJs).dir, tempHtmlName);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å­˜å‚¨å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      htmlContentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(htmlEntryPath, html);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pre[entryName] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlEntryPath;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, {});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          input,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æ„å»ºå…¥å£å†…å®¹ç”Ÿæˆ" tabindex="-1">æ„å»ºå…¥å£å†…å®¹ç”Ÿæˆ <a class="header-anchor" href="#æ„å»ºå…¥å£å†…å®¹ç”Ÿæˆ" aria-label="Permalink to &quot;æ„å»ºå…¥å£å†…å®¹ç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>å…¶ä¸­<code>resolveId</code>ä¸<code>load</code>é’©å­ä¸€èµ·å®Œæˆå…¥å£æ–‡ä»¶çš„å¤„ç†</p>
<ul>
<li>å…¶ä¸­<code>id</code>å³ä¸ºèµ„æºè¯·æ±‚çš„è·¯å¾„</li>
<li>æ¥ç€ç›´æ¥ä»<code>htmlContentMap</code>å»é™¤æ¨¡æ¿çš„å†…å®¹å³å¯</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htmlContentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  resolveId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(id) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">endsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> id;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="äº§ç‰©ç›®å½•è°ƒæ•´" tabindex="-1">äº§ç‰©ç›®å½•è°ƒæ•´ <a class="header-anchor" href="#äº§ç‰©ç›®å½•è°ƒæ•´" aria-label="Permalink to &quot;äº§ç‰©ç›®å½•è°ƒæ•´&quot;">&ZeroWidthSpace;</a></h3>
<p>ä½¿ç”¨<code>closeBundle</code>é’©å­ï¼Œåœ¨æ„å»ºå®Œæˆåï¼ŒæœåŠ¡å…³é—­å‰è¿›è¡Œæ–‡ä»¶è°ƒæ•´</p>
<ul>
<li>éå†<code>entry</code>å°†<code>dist/src/pages/entryName/index.html</code>ç§»åŠ¨åˆ°<code>dist</code>ä¸‹</li>
<li>ç§»é™¤<code>dist/src</code>ä¸‹çš„å†…å®¹</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">closeBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">outDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> userConfig.build;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç›®å½•è°ƒæ•´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">entryJs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> outputHtmlPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entryJs).dir, tempHtmlName);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">entryName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.html`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outputHtmlPath));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ç§»é™¤ä¸´æ—¶èµ„æº</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  rmdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="webpacké…ç½®è½¬æ¢" tabindex="-1">webpacké…ç½®è½¬æ¢ <a class="header-anchor" href="#webpacké…ç½®è½¬æ¢" aria-label="Permalink to &quot;webpacké…ç½®è½¬æ¢&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›®å‰ç¤¾åŒºæœ‰ä¸€ä¸ªCLIå·¥å…·ï¼š<a href="https://github.com/tnfe/wp2vite" target="_blank" rel="noreferrer">wp2vite</a>æ”¯æŒäº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥ç¬”è€…ä¸æ‰“ç®—ä»0-1å†å»ºè®¾ä¸€ä¸ª</p>
<p>ç”±äºæ˜¯cliå·¥å…·ï¼Œæ²¡æœ‰æä¾›ä¸€äº›ç›´æ¥è°ƒç”¨çš„æ–¹æ³•å»è·å–è½¬æ¢å‰åçš„é…ç½®ï¼Œæ‰€ä»¥<strong>æ¥å…¥æ’ä»¶ä¸­çš„ä½¿ç”¨ä½“éªŒè¿˜ä¸æ˜¯å¾ˆå¥½ï¼Œåç»­å‡†å¤‡æPRæ”¹é€ ä¸€ä¸‹è¿™ä¸ªå·¥å…·</strong></p>
<p>æ¥å…¥wp2viteçš„æ’ä»¶å®ç°å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wp2vite </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'wp2vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥ä¸é‡è¦çš„ import</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> wp2vitePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wvs-wp2vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    enforce: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'pre'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cfgFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite.config.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> tplFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'index.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> contentMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([[cfgFile, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], [tplFile, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [cfgFile, tplFile];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wp2vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // åˆ¤æ–­æ˜¯å¦å­˜åœ¨vite.config.js ã€index.html</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // é¿å… wp2vite è¦†ç›–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(f)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          contentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(f, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(f, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è½¬æ¢å‡ºé…ç½®æ–‡ä»¶vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> wp2vite.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getCWD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        force: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ç»Ÿä¸€å¼€å¯debug</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        debug: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // TODO:æPRä¼˜åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è½¬æ¢è€—æ—¶è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timeEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'wp2vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è·å–wp2viteè½¬æ¢å‡ºçš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cfg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getUserConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(env, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      contentMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (v) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // å¦‚æœä¿®æ”¹äº†å†…å®¹ï¼Œè¿˜åŸå†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(k, v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // ç§»é™¤åˆ›å»ºçš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          unlinkSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(k);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (cfg.config) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cfg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {};</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ç•™ä¸‹éœ€è¦çš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          resolve: config?.resolve,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          server: config?.server,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          css: config?.css,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>wp2viteï¼Œå¯¹å¤–æš´éœ²äº†ä¸€ä¸ª<code>start</code>æ–¹æ³•è°ƒç”¨</p>
<p>è°ƒç”¨åä¼šæ ¹æ®é¡¹ç›®çš„webpacké…ç½®ç”Ÿæˆ2ä¸ªæ–°æ–‡ä»¶(<code>vite.config.js</code>ï¼Œ<code>index.html</code>)ï¼Œå¹¶ä¿®æ”¹<code>package.json</code>æ·»åŠ æŒ‡ä»¤ä¸ä¾èµ–</p>
<p>æ‰€ä»¥åœ¨ç”Ÿæˆå‰å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨è¿™äº›æ–‡ä»¶åˆ™éœ€è¦å…ˆå°†è¿™äº›å†…å®¹å­˜å‚¨èµ·æ¥</p>
<p>å…¶ä¸­è·å–ç”¨æˆ·é…ç½®çš„<code>getUserConfig</code>å®ç°å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { loadConfigFromFile, ConfigEnv } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getUserConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">configEnv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ConfigEnv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">suffix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite.config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> _suffix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mjs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cjs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (suffix) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    _suffix.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(suffix);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> _suffix.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">configName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(s));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadConfigFromFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configEnv, configFile);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>viteæä¾›äº†<code>loadConfigFromFile</code>æ–¹æ³•ï¼Œåªéœ€è¦åœ¨æ­¤æ–¹æ³•ä¸­åšä¸€å±‚ç®€å•çš„å°è£…å³å¯ç›´æ¥ä½¿ç”¨ï¼Œæ–¹æ³•å†…éƒ¨ä½¿ç”¨esbuildè‡ªåŠ¨å¯¹tsä¸esè¯­æ³•è¿›è¡Œäº†è½¬æ¢</p>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå»ºè®¾çš„èƒ½åŠ›å·²åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³å¸¸è§„é¡¹ç›®çš„å¼€å‘</p>
<p>èƒ½åŠ›æœªåŠä¹‹å¤„ç”¨æˆ·äº¦å¯ç›´æ¥åœ¨å·¥ç¨‹ä¸­æ·»åŠ <code>vite</code>é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªè¡Œçš„æ‹“å±•</p>
<h2 id="åç»­è§„åˆ’" tabindex="-1">åç»­è§„åˆ’ <a class="header-anchor" href="#åç»­è§„åˆ’" aria-label="Permalink to &quot;åç»­è§„åˆ’&quot;">&ZeroWidthSpace;</a></h2>
<ol>
<li>ç›®å‰<code>wp2vite</code>åœ¨é…ç½®è½¬æ¢è¿™ä¸€å—ï¼Œè¿˜ä¸èƒ½å¤ªæ»¡è¶³ä½¿ç”¨è¦æ±‚ï¼Œå‡†å¤‡æPRå¢å¼ºä¸€ä¸‹</li>
<li>å°†å†…éƒ¨èƒ½åŠ›æŠ½æˆä¸€ä¸ªä¸ªå•ç‹¬çš„viteæ’ä»¶</li>
</ol>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzNjg3MzM4NzQzMQ==636873387431" length="0" type="image//mdImg/MTYzNjg3MzM4NzQzMQ==636873387431"/>
        </item>
        <item>
            <title><![CDATA[ES6+çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç†]]></title>
            <link>https://www.dmsrs.org/bigWeb/js/es6+.html</link>
            <guid>https://www.dmsrs.org/bigWeb/js/es6+.html</guid>
            <pubDate>Wed, 13 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[åªåˆ—ä¸¾äº†æ¯”è¾ƒå®ç”¨çš„è€Œåˆé²œä¸ºäººçŸ¥çš„ä¸€äº›ï¼Œå¹¶ä¸ç»å¯¹å…¨é¢
 ESNext
 ES2022
 ES2021
 ES2020
 1. å·åˆ›å»ºç±»çš„ç§æœ‰å˜é‡
```ts
class p{
    name='xia]]></description>
            <content:encoded><![CDATA[<h1 id="es6-çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç†" tabindex="-1">ES6+çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç† <a class="header-anchor" href="#es6-çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç†" aria-label="Permalink to &quot;ES6+çš„ä¸€äº›æ–°è¯­æ³•ç³–å’Œæ–¹æ³•æ•´ç†&quot;">&ZeroWidthSpace;</a></h1>
<p><strong>åªåˆ—ä¸¾äº†æ¯”è¾ƒå®ç”¨çš„è€Œåˆé²œä¸ºäººçŸ¥çš„ä¸€äº›ï¼Œå¹¶ä¸ç»å¯¹å…¨é¢</strong></p>
<h2 id="esnext" tabindex="-1">ESNext <a class="header-anchor" href="#esnext" aria-label="Permalink to &quot;ESNext&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="es2022" tabindex="-1">ES2022 <a class="header-anchor" href="#es2022" aria-label="Permalink to &quot;ES2022&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="es2021" tabindex="-1">ES2021 <a class="header-anchor" href="#es2021" aria-label="Permalink to &quot;ES2021&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="es2020" tabindex="-1">ES2020 <a class="header-anchor" href="#es2020" aria-label="Permalink to &quot;ES2020&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-å·åˆ›å»ºç±»çš„ç§æœ‰å˜é‡" tabindex="-1">1. #å·åˆ›å»ºç±»çš„ç§æœ‰å˜é‡ <a class="header-anchor" href="#_1-å·åˆ›å»ºç±»çš„ç§æœ‰å˜é‡" aria-label="Permalink to &quot;1. #å·åˆ›å»ºç±»çš„ç§æœ‰å˜é‡&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    #name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xiaoming'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.#name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Property '#name' is not accessible outside class 'p' because it has a private identifier.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a.#name);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// error</span></span></code></pre>
</div><h3 id="_2-promise-allselected" tabindex="-1">2. Promise.allSelected <a class="header-anchor" href="#_2-promise-allselected" aria-label="Permalink to &quot;2. Promise.allSelected&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯ä»¥åœ¨å›è°ƒä¸­å–åˆ°æ‰€æœ‰çš„promiseçš„è¿”å›å€¼ä¸çŠ¶æ€ï¼ŒåŒ…æ‹¬rjectçš„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    #name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'xiaoming'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.#name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// console.log(a.#name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> p1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(resolve, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'success'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> p2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(reject, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fail'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">allSettled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([p1, p2]).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(res);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    //     {status: "fulfilled", value: "success"}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    //     {status: "rejected", reason: "fail"}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h3 id="_3-ç©ºå€¼è¿ç®—ç¬¦" tabindex="-1">3. ç©ºå€¼è¿ç®—ç¬¦?? <a class="header-anchor" href="#_3-ç©ºå€¼è¿ç®—ç¬¦" aria-label="Permalink to &quot;3. ç©ºå€¼è¿ç®—ç¬¦??&quot;">&ZeroWidthSpace;</a></h3>
<p>å¼€å‘ä¸­é€šå¸¸ä¼šç”¨||å»åšå˜é‡æˆ–è€…å€¼åˆå§‹åŒ–ï¼Œä½†æ˜¯å¯¹äºç©ºä¸²å’Œ0è¿™äº›æœ‰æ„ä¹‰å€¼ï¼Œä¼šæœ‰ä¸€äº›æ„æ–™ä¹‹å¤–çš„ç»“æœæ­¤æ—¶å°±å¯ä»¥ç”¨??å»æ›¿ä»£</p>
<p>?? è¿ç®—ç¬¦åªä¼šæŠŠ null å’Œ undefined åˆ¤æ–­ä¸º false</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'xiaoming'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    age: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'abc'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// xiaoming</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 18</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 180</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 180</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä½¿ç”¨??</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">??</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'abc'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// xiaoming</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">??</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(user.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">??</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 180</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 0</span></span></code></pre>
</div><h3 id="_4-å¯é€‰é“¾è¿ç®—ç¬¦" tabindex="-1">4. å¯é€‰é“¾è¿ç®—ç¬¦?. <a class="header-anchor" href="#_4-å¯é€‰é“¾è¿ç®—ç¬¦" aria-label="Permalink to &quot;4. å¯é€‰é“¾è¿ç®—ç¬¦?.&quot;">&ZeroWidthSpace;</a></h3>
<p>å½“éœ€è¦è®¿é—®åµŒå¥—åœ¨å¯¹è±¡å†…éƒ¨å¥½å‡ å±‚çš„å±æ€§æ—¶,ä¸ºäº†é¿å…å‡ºç°undefindçš„æŠ¥é”™ä¼šä½¿ç”¨&amp;&amp;å»å¤„ç†ä»£ç </p>
<p>ä½¿ç”¨å¯é€‰é“¾å¯è®©ä»£ç æ›´åŠ ç®€æ´æ˜äº†</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// &#x26;&#x26;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.a.b);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ?.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(data?.a?.b);</span></span></code></pre>
</div><h3 id="_5-globalthis" tabindex="-1">5. globalThis <a class="header-anchor" href="#_5-globalthis" aria-label="Permalink to &quot;5. globalThis&quot;">&ZeroWidthSpace;</a></h3>
<p>globalThis ç›®çš„å°±æ˜¯æä¾›ä¸€ç§æ ‡å‡†åŒ–æ–¹å¼è®¿é—®å…¨å±€å¯¹è±¡ï¼Œæœ‰äº† globalThis åï¼Œä½ å¯ä»¥åœ¨ä»»æ„ä¸Šä¸‹æ–‡ï¼Œä»»æ„æ—¶åˆ»éƒ½èƒ½è·å–åˆ°å…¨å±€å¯¹è±¡</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// worker.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> self</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// node.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> global</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// browser.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window</span></span></code></pre>
</div><h2 id="es2019-es10" tabindex="-1">ES2019/ES10 <a class="header-anchor" href="#es2019-es10" aria-label="Permalink to &quot;ES2019/ES10&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-array-flat" tabindex="-1">1. Array.flat <a class="header-anchor" href="#_1-array-flat" aria-label="Permalink to &quot;1. Array.flat&quot;">&ZeroWidthSpace;</a></h3>
<p>å±•å¼€æ•°ç»„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]]]];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [1, 2, 3, 4, 5, 6, Array(4)];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [1, 2, 3, 4, 5, 6, 7, 8, 9, Array(3)];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å±•å¼€ä»»æ„å±‚çº§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Infinity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span></span></code></pre>
</div><h3 id="_2-array-flatmap" tabindex="-1">2. Array.flatMap <a class="header-anchor" href="#_2-array-flatmap" aria-label="Permalink to &quot;2. Array.flatMap&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¸ES6Array.Map()æ–¹æ³•ç›¸åŒï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒå±•å¹³ã€‚è¯¥Array.flatMap()æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå±•å¹³ä¸ºæ–°æ•°ç»„</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [x, x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [Array(2), Array(2), Array(2)]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 0: (2)[1, 2]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1: (2)[2, 4]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2: (2)[3, 6]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flatMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [v, v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [1, 2, 2, 4, 3, 6, 4, 8, 5, 10]</span></span></code></pre>
</div><h3 id="_3-string-trimstart-string-trimend" tabindex="-1">3. String.trimStart() &amp; String.trimEnd() <a class="header-anchor" href="#_3-string-trimstart-string-trimend" aria-label="Permalink to &quot;3. String.trimStart() &amp; String.trimEnd()&quot;">&ZeroWidthSpace;</a></h3>
<p>String.trimStart()å¯ç”¨äºä»å­—ç¬¦ä¸²çš„å¼€å¤´å»æ‰ç©ºç™½ã€‚String.trimEnd()å¯ç”¨äºä»å­—ç¬¦ä¸²çš„å°¾éƒ¨å»æ‰ç©ºç™½</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  greeting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  "    Hello everyone"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(greeting.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trimStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// "Hello everyone"</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> greeting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Hello world    "</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(greeting.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">trimEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// "Hello world"</span></span></code></pre>
</div><h3 id="_4-å¯é€‰-catch-binding" tabindex="-1">4. å¯é€‰ Catch Binding <a class="header-anchor" href="#_4-å¯é€‰-catch-binding" aria-label="Permalink to &quot;4. å¯é€‰ Catch Binding&quot;">&ZeroWidthSpace;</a></h3>
<p>å…è®¸å¼€å‘äººå‘˜åœ¨catchå—ä¸­ï¼Œä¸ä½¿ç”¨errorå‚æ•°çš„æƒ…å†µä¸‹ä½¿ç”¨try/catch</p>
<p>ES2019ä¹‹å‰</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // some code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // error handling code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç°åœ¨å¯ä»¥</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // some code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // error handling code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="_5-object-fromentries" tabindex="-1">5. Object.fromEntries <a class="header-anchor" href="#_5-object-fromentries" aria-label="Permalink to &quot;5. Object.fromEntries&quot;">&ZeroWidthSpace;</a></h3>
<p>Object.fromEntries()åˆ›å»ºä¸€ä¸ªå¯¹è±¡æˆ–å°†é”®å€¼å¯¹è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚å®ƒåªæ¥å—Iterable</p>
<p>ä¾‹å¦‚ï¼šObject.fromEntries(someIterable)</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> entries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"john"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"age"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fromEntries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(entries));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { name: 'john', age: 22 }</span></span></code></pre>
</div><h3 id="_6-symbol-description" tabindex="-1">6. Symbol.description <a class="header-anchor" href="#_6-symbol-description" aria-label="Permalink to &quot;6. Symbol.description&quot;">&ZeroWidthSpace;</a></h3>
<p>åªè¯»æè¿°å±æ€§ï¼Œæ˜¯ä¸€ä¸ªè¿”å›Symbolå¯¹è±¡çš„å¯é€‰æè¿°çš„å­—ç¬¦ä¸²</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mySymbol </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `My Symbol`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> symObj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mySymbol);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(symObj) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Symbol(mySymbol);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(symObj) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `Symbol(${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mySymbol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">})`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(symObj.description); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// "My Symbol"</span></span></code></pre>
</div><h2 id="es2018-es9" tabindex="-1">ES2018/ES9 <a class="header-anchor" href="#es2018-es9" aria-label="Permalink to &quot;ES2018/ES9&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-for-await-of" tabindex="-1">1. for await of <a class="header-anchor" href="#_1-for-await-of" aria-label="Permalink to &quot;1. for await of&quot;">&ZeroWidthSpace;</a></h3>
<p>for ofæ–¹æ³•èƒ½å¤Ÿéå†å…·æœ‰Symbol.iteratoræ¥å£çš„åŒæ­¥è¿­ä»£å™¨æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½éå†å¼‚æ­¥è¿­ä»£å™¨</p>
<p>for await ofå¯ä»¥ç”¨æ¥éå†å…·æœ‰Symbol.asyncIteratoræ–¹æ³•çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥è¿­ä»£</p>
<p><strong>for oféå†</strong></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">rej</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timeout)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }, timeout)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(console.log)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 500</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1200</span></span></code></pre>
</div><p><strong>for await of</strong></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">rej</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timeout)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }, timeout)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 500</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1200</span></span></code></pre>
</div><h3 id="_2-æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§" tabindex="-1">2. æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§ <a class="header-anchor" href="#_2-æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§" aria-label="Permalink to &quot;2. æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>2.1 s(dotAll)æ¨¡å¼</strong></p>
<p>å…ƒå­—ç¬¦<code>.</code>æ— æ³•åŒ¹é…æ¢è¡Œç¬¦,å¯ä»¥é€šè¿‡ s(doAll)flagè§£å†³</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">bar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">bar'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ä½¿ç”¨ s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">bar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">bar'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// true</span></span></code></pre>
</div><p><strong>2.2 å‘½åæ•è·ç»„</strong></p>
<p>åœ¨ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­ï¼Œä½¿ç”¨æ•°å­—è¿›è¡ŒåŒ¹é…å¯èƒ½ä¼šä»¤äººæ··æ·†</p>
<p>å‘½åæ•è·ç»„ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> re</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{4}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> match</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> re.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2020-01-01'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2020-01-01</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2020</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 01</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 01</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> re</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{4}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">day</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> match</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> re.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2020-01-01'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match.groups);          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { year: '2020', month: '01', day: '01' }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match.groups.year);     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2020</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match.groups.month);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 01</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(match.groups.day);      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 01</span></span></code></pre>
</div><p>ä½¿ç”¨replace</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> re</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{4}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)-(?&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">day</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{2}</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2020-09-01'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(re, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'$&#x3C;month>-$&#x3C;day>-$&#x3C;year>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 09-01-2020</span></span></code></pre>
</div><h2 id="es2017-es8" tabindex="-1">ES2017/ES8 <a class="header-anchor" href="#es2017-es8" aria-label="Permalink to &quot;ES2017/ES8&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-object-values-object-entries" tabindex="-1">1. Object.values()ï¼ŒObject.entries() <a class="header-anchor" href="#_1-object-values-object-entries" aria-label="Permalink to &quot;1. Object.values()ï¼ŒObject.entries()&quot;">&ZeroWidthSpace;</a></h3>
<p>Object.valuesæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å€¼ç”±å¯¹è±¡çš„å€¼ç»„æˆ</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, b: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(obj));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [ '1', '2' ]</span></span></code></pre>
</div><p>Object.entries()æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„,å…¶å€¼ä¸º[key,value]</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, b: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(obj));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// [ [ 'a', '1' ], [ 'b', '2' ] ]</span></span></code></pre>
</div><h3 id="_2-string-padding" tabindex="-1">2. String padding <a class="header-anchor" href="#_2-string-padding" aria-label="Permalink to &quot;2. String padding&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>String.prototype.padStart</strong></p>
<p>åœ¨å­—ç¬¦ä¸²ä¹‹å‰è¡¥å…¨å­—ç¬¦</p>
<p><strong>String.prototype.padEnd</strong></p>
<p>åœ¨å­—ç¬¦ä¸²ä¹‹åè¡¥å…¨</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'llo'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">padStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// hello</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">padEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'123'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 01231</span></span></code></pre>
</div><h3 id="_3-object-getownpropertydescriptors" tabindex="-1">3 Object.getOwnPropertyDescriptors() <a class="header-anchor" href="#_3-object-getownpropertydescriptors" aria-label="Permalink to &quot;3 Object.getOwnPropertyDescriptors()&quot;">&ZeroWidthSpace;</a></h3>
<p>è·å–æŒ‡å®šå¯¹è±¡çš„å±æ€§æè¿°ç¬¦</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getOwnPropertyDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(obj, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'a'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { value: 1, writable: true, enumerable: true, configurable: true }</span></span></code></pre>
</div><h2 id="es2016-es7" tabindex="-1">ES2016/ES7 <a class="header-anchor" href="#es2016-es7" aria-label="Permalink to &quot;ES2016/ES7&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-æ±‚å¹‚è¿ç®—ç¬¦" tabindex="-1">1. æ±‚å¹‚è¿ç®—ç¬¦** <a class="header-anchor" href="#_1-æ±‚å¹‚è¿ç®—ç¬¦" aria-label="Permalink to &quot;1. æ±‚å¹‚è¿ç®—ç¬¦**&quot;">&ZeroWidthSpace;</a></h3>
<p>æ•ˆæœè·Ÿ<code>Math.pow(x,y)</code>ä¸€è‡´</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1024</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1024</span></span></code></pre>
</div><h3 id="_2-array-prototype-includes" tabindex="-1">2. Array.prototype.includes <a class="header-anchor" href="#_2-array-prototype-includes" aria-label="Permalink to &quot;2. Array.prototype.includes&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”¨æ³•è·ŸString.prototype.includesä¸€è‡´ï¼Œå¯è¯»æ€§é«˜äºindexOf()</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// true</span></span></code></pre>
</div><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/js-es2020" target="_blank" rel="noreferrer">What's new in ECMAScript 2020 (ES2020)</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/js-es2019" target="_blank" rel="noreferrer">What's new in ECMAScript 2019 (ES2019) / ES10</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for-await...of" target="_blank" rel="noreferrer">for await...of</a></li>
<li><a href="https://2ality.com/2017/05/regexp-named-capture-groups.html" target="_blank" rel="noreferrer">ES2018: RegExp named capture groups</a></li>
<li><a href="https://github.com/tc39/proposal-regexp-named-groups" target="_blank" rel="noreferrer">TC39:RegExp Named Capture Groups</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials?q=String+padding" target="_blank" rel="noreferrer">String padding</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" target="_blank" rel="noreferrer">Object.getOwnPropertyDescriptor()</a></li>
<li><a href="https://kangax.github.io/compat-table/es2016plus/" target="_blank" rel="noreferrer">compat-table/es2016plus/</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[è§£å†³Vite-Reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜]]></title>
            <link>https://www.dmsrs.org/technology/learn/vite-react-js.html</link>
            <guid>https://www.dmsrs.org/technology/learn/vite-react-js.html</guid>
            <pubDate>Tue, 12 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
åœ¨åšå­˜é‡é¡¹ç›®æ¥å…¥Viteæµ‹è¯•æ—¶å‘ç°ï¼Œå­˜é‡ï¼ˆè€ï¼‰é¡¹ç›®ä¸­å¾ˆå¤šæ˜¯ç›´æ¥åœ¨jsä¸­ä¹¦å†™jsxè¯­æ³•ï¼Œä½¿ç”¨Viteå¯åŠ¨æ—¶å°±ä¼šæŠ›å‡ºä¸€å †é—®é¢˜`Failed to parse source`ã€‚
ä¸å«Œéº»çƒ¦å¯ä»¥è·‘ä¸ªè„šæœ¬æ‰¹]]></description>
            <content:encoded><![CDATA[<h1 id="è§£å†³vite-reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜" tabindex="-1">è§£å†³Vite-Reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜ <a class="header-anchor" href="#è§£å†³vite-reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜" aria-label="Permalink to &quot;è§£å†³Vite-Reacté¡¹ç›®ä¸­jsä½¿ç”¨jsxè¯­æ³•æŠ¥é”™çš„é—®é¢˜&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨åšå­˜é‡é¡¹ç›®æ¥å…¥Viteæµ‹è¯•æ—¶å‘ç°ï¼Œå­˜é‡ï¼ˆè€ï¼‰é¡¹ç›®ä¸­å¾ˆå¤šæ˜¯ç›´æ¥åœ¨jsä¸­ä¹¦å†™jsxè¯­æ³•ï¼Œä½¿ç”¨Viteå¯åŠ¨æ—¶å°±ä¼šæŠ›å‡ºä¸€å †é—®é¢˜<code>Failed to parse source</code>ã€‚</p>
<p>ä¸å«Œéº»çƒ¦å¯ä»¥è·‘ä¸ªè„šæœ¬<strong>æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªè§£å†³åŠæ³•</strong>ã€‚</p>
<p>ä¸ºäº†åˆ¨æ ¹çŸ¥åº•ï¼ŒåŒæ—¶ä¸ºäº†å­˜é‡é¡¹ç›®æœ€ä½æˆæœ¬çš„æ¥å…¥Viteä½¿ç”¨ï¼Œå°½åŠ›é¿å…ä¿®æ”¹ä¸šåŠ¡ä»£ç ã€‚å¾—å¯»æ‰¾å…¶å®ƒåŠæ³•è§£å†³ä¸€ä¸‹ã€‚</p>
<p>æŠ¥é”™æˆªå›¾å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNjYxMzEyNg==634016613126" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="å¤ç°é—®é¢˜" tabindex="-1">å¤ç°é—®é¢˜ <a class="header-anchor" href="#å¤ç°é—®é¢˜" aria-label="Permalink to &quot;å¤ç°é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆå§‹åŒ–demoé¡¹ç›®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># npm 6.x</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-react-app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> react-ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># npm 7+, extra double-dash is needed:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-react-app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> react-ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># yarn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-react-app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> react-ts</span></span></code></pre>
</div><p>ç›®å½•å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> App.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> App.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> favicon.svg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> logo.svg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> main.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite-env.d.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tsconfig.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite.config.ts</span></span></code></pre>
</div><p>å¯åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> dev</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNTk3NjAwNQ==634015976005" alt="å›¾ç‰‡" loading="lazy"></p>
<p>é¡µé¢æ­£å¸¸ï¼Œæ¥ä¸‹æ¥å°†<code>App.tsx</code>ä¿®æ”¹ä¸º<code>App.js</code></p>
<p>å°†ä¼šå¾—åˆ°ä¸Šè¿°çš„æŠ¥é”™</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNjA0ODYwMw==634016048603" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŸå› " tabindex="-1">åŸå›  <a class="header-anchor" href="#åŸå› " aria-label="Permalink to &quot;åŸå› &quot;">&ZeroWidthSpace;</a></h2>
<ol>
<li>Viteåœ¨å¯åŠ¨æ—¶ä¼šåš<a href="https://cn.vitejs.dev/guide/dep-pre-bundling.html#the-why" target="_blank" rel="noreferrer">ä¾èµ–çš„é¢„æ„å»º</a></li>
<li><code>é¢„æ„å»º</code>ï¼Œ<code>è¿è¡Œæ—¶</code>é»˜è®¤éƒ½åªä¼šå¯¹<code>jsx</code>ä¸<code>tsx</code>åšè¯­æ³•è½¬æ¢ã€‚ä¸ä¼šå¯¹jsåšjsxçš„è¯­æ³•è½¬æ¢ã€‚</li>
</ol>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNjg3ODYwMg==634016878602" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="è§£å†³æ–¹æ¡ˆ" tabindex="-1">è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;è§£å†³æ–¹æ¡ˆ&quot;">&ZeroWidthSpace;</a></h2>
<ol>
<li>ä¿®æ”¹ä¾èµ–é¢„æ„å»ºçš„é…ç½®</li>
<li>ä½¿ç”¨babelæ’ä»¶<code>@babel/plugin-transform-react-jsx</code>ï¼Œè®©Viteåœ¨è¿è¡Œæ—¶å¯¹jsæ–‡ä»¶è½¬æ¢</li>
</ol>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNzQyNDM2Mg==634017424362" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æŒ‰ç…§æ–‡æ¡£æè¿°åœ¨é…ç½®æ–‡ä»¶æ·»åŠ ä¸€ç‚¹é…ç½®</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  build:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rollupOptions:{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      input:[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    entries: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>é€šè¿‡é˜…è¯»<code>@vite/plugin-react</code>çš„<a href="https://github.com/vitejs/vite/tree/main/packages/plugin-react" target="_blank" rel="noreferrer">æ–‡æ¡£</a>,å‘ç°å…¶æ”¯æŒä¼ å…¥babelæ’ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @babel/plugin-transform-react-jsx</span></span></code></pre>
</div><p>æ·»åŠ æ’ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> react </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@vitejs/plugin-react'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">react</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      babel: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        plugins: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@babel/plugin-transform-react-jsx'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>å†æ¬¡å¯åŠ¨éªŒè¯,å‘ç°ä¸€ä¸ªæŠ¥é”™</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNzg4NjY4OQ==634017886689" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŸå› æ˜¯æ²¡æœ‰åœ¨App.jsä¸­å¼•å…¥<code>React</code>,å’±ä»¬å¼•å…¥ä¸€ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> React,{ useState } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'react'</span></span></code></pre>
</div><p>å¤§åŠŸå‘Šæˆ</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzNDAxODAxNTMxMw==634018015313" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ä¸¤ç§å¤„ç†æ–¹æ¡ˆ</p>
<ol>
<li>æ–‡ä»¶åç¼€ js =&gt; jsx</li>
<li>ä¿®æ”¹ä¾èµ–é¢„æ„å»ºé…ç½®ï¼Œå†æ·»åŠ babelæ’ä»¶<code>@babel/plugin-transform-react-jsx</code></li>
</ol>
<p>ç¬¬äºŒç§æ–¹æ³•ä¼šä¸€å®šç¨‹åº¦å½±å“é¡¹ç›®çš„å¯åŠ¨é€Ÿåº¦ã€‚è¯»è€…å¯ä»¥æ ¹æ®å®é™…é¡¹ç›®æƒ…å†µpickæ–¹æ¡ˆ</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºå…±äº«/äº¤æµåœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¥å…¥Viteæ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜ä¸æ€»ç»“çš„ç»éªŒ</p>
<ul>
<li><a href="https://github.com/ATQQ/demos/tree/main/vite-react-js" target="_blank" rel="noreferrer">æºç åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzNDAxNjYxMzEyNg==634016613126" length="0" type="image//mdImg/MTYzNDAxNjYxMzEyNg==634016613126"/>
        </item>
        <item>
            <title><![CDATA[æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šWeb-SDK/Library]]></title>
            <link>https://www.dmsrs.org/technology/tpl/web-sdk-tpl.html</link>
            <guid>https://www.dmsrs.org/technology/tpl/web-sdk-tpl.html</guid>
            <pubDate>Tue, 05 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[æ­¤ç³»åˆ—ä¼šä¸æ—¶ä¿±è¿›çš„ä¸æ–­æ›´æ–°
åŒ…å«Node/Web SDKï¼Œå•ç»„ä»¶ï¼Œç»„ä»¶åº“ï¼ŒEslintæ’ä»¶ï¼ŒWebpackæ’ä»¶ï¼ŒViteæ’ä»¶ï¼ŒMonoRepoç­‰ç­‰å·¥ç¨‹åŒ–ç›¸å…³èƒ½åŠ›çš„æ¨¡æ¿å»ºè®¾
 å‰è¨€
åœ¨Webå¼€å‘ä¸­ï¼Œé€šå¸¸]]></description>
            <content:encoded><![CDATA[<h1 id="æ¨¡æ¿å·¥ç¨‹æ­å»º-web-sdk-library" tabindex="-1">æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šWeb-SDK/Library <a class="header-anchor" href="#æ¨¡æ¿å·¥ç¨‹æ­å»º-web-sdk-library" aria-label="Permalink to &quot;æ¨¡æ¿å·¥ç¨‹æ­å»ºï¼šWeb-SDK/Library&quot;">&ZeroWidthSpace;</a></h1>
<p>æ­¤ç³»åˆ—ä¼šä¸æ—¶ä¿±è¿›çš„ä¸æ–­æ›´æ–°</p>
<p>åŒ…å«Node/Web SDKï¼Œå•ç»„ä»¶ï¼Œç»„ä»¶åº“ï¼ŒEslintæ’ä»¶ï¼ŒWebpackæ’ä»¶ï¼ŒViteæ’ä»¶ï¼ŒMonoRepoç­‰ç­‰å·¥ç¨‹åŒ–ç›¸å…³èƒ½åŠ›çš„æ¨¡æ¿å»ºè®¾</p>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨Webå¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šæŠŠä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªæŠ€æœ¯äº§å“åšæˆä¸€ä¸ªSDKæˆ–è€…Libraryï¼ˆåº“ï¼‰çš„å½¢å¼ï¼Œæ–¹ä¾¿è°ƒç”¨æ–¹ç›´æ¥æ¥å…¥ä½¿ç”¨</p>
<p>å…¶ä¸­åº“/SDKåˆåˆ†ä¸ºæ¡†æ¶ç›¸å…³å’Œæ¡†æ¶æ— å…³çš„ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»<strong>æ¡†æ¶æ— å…³çš„ Web JS SDK/Library</strong>å·¥ç¨‹æ¨¡æ¿æ­å»ºï¼Œä¸‹æ–‡ç»Ÿç§°ä¸º<code>Libï¼ˆåº“ï¼‰</code></p>
<h2 id="ä¸€ç‚¹å®šä¹‰" tabindex="-1">ä¸€ç‚¹å®šä¹‰ <a class="header-anchor" href="#ä¸€ç‚¹å®šä¹‰" aria-label="Permalink to &quot;ä¸€ç‚¹å®šä¹‰&quot;">&ZeroWidthSpace;</a></h2>
<p>äº§å“å®šä½æ˜¯SDKè¿˜æ˜¯å·¥å…·åº“ï¼Œå–å†³äºæ„å»ºäº§ç‰©çš„åŠŸèƒ½ä¸é€‚ç”¨èŒƒå›´ï¼Œä¸¤è€…ä¹‹é—´çš„å®šä½ä¸ç»å¯¹ï¼Œå·¥å…·åº“åœ¨ä¸æ–­çš„è¿­ä»£è¿‡ç¨‹ä¸­ä¹Ÿå¯å˜ä¸ºä¸€ä¸ªSDK</p>
<h3 id="sdk-è½¯ä»¶å¼€å‘å·¥å…·åŒ…" tabindex="-1">SDKï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰ <a class="header-anchor" href="#sdk-è½¯ä»¶å¼€å‘å·¥å…·åŒ…" aria-label="Permalink to &quot;SDKï¼ˆè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<p>åŒ…å«ä¸€äº›åˆ—åŠŸèƒ½çš„åº“ï¼Œè¿™äº›åŠŸèƒ½é€šå¸¸ç”±å¤šä¸ªåº“æˆ–è€…sdkç»„åˆæä¾›</p>
<p>å¦‚ä¸€ä¸ªè·å–å¤©æ°”çš„SDKï¼Œå¯èƒ½åŒ…å«å®šä½sdkï¼Œç½‘ç»œè¯·æ±‚åº“ï¼Œèµ„æºå¤„ç†åº“ï¼Œæ•°æ®åº“æ“ä½œsdkç­‰</p>
<h3 id="lib-åº“" tabindex="-1">Libï¼ˆåº“ï¼‰ <a class="header-anchor" href="#lib-åº“" aria-label="Permalink to &quot;Libï¼ˆåº“ï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<p>åº“æ˜¯åŠŸèƒ½çš„é›†åˆï¼Œå¦‚<code>chalk</code>,<code>loadsh</code>,<code>debug</code>ç­‰ç­‰å¸¸ç”¨å·¥å…·åº“ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—çš„å·¥å…·æ–¹æ³•æˆ–è€…æŸä¸€ç±»åŠŸèƒ½çš„æ–¹æ³•é›†åˆ</p>
<h2 id="åº“è¿è¡Œç¯å¢ƒ" tabindex="-1">åº“è¿è¡Œç¯å¢ƒ <a class="header-anchor" href="#åº“è¿è¡Œç¯å¢ƒ" aria-label="Permalink to &quot;åº“è¿è¡Œç¯å¢ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šå¸¸æ˜¯åœ¨æµè§ˆå™¨æˆ–è€…Webviewæ§ä»¶ä¸­</p>
<h2 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1">ä½¿ç”¨æ–¹æ³• <a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•" aria-label="Permalink to &quot;ä½¿ç”¨æ–¹æ³•&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;CDN&quot;">&ZeroWidthSpace;</a></h3>
<blockquote>
<p>é™æ€èµ„æºé€šå¸¸ä½¿ç”¨<code>OSS</code>å­˜å‚¨ï¼Œé€šè¿‡<code>CDN</code>ä¸‹å‘ï¼Œæ‰€ä»¥é€šå¸¸å«åš<code>é€šè¿‡CDNå¼•å…¥èµ„æº</code></p>
</blockquote>
<p>åœ¨<code>html</code>æ¨¡æ¿ä¸­é€šè¿‡<code>script</code>å¼•å…¥åº“çš„jsèµ„æºï¼ŒæŸäº›è¿˜éœ€å¼•å…¥ç›¸åº”çš„cssèµ„æº</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stylesheet"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name/style.css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"stylesheet"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name.css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name/index.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name/index.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"//cdn.example.com/path/sdk-version/sdk-name.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><h3 id="npm-package" tabindex="-1">NPM Package <a class="header-anchor" href="#npm-package" aria-label="Permalink to &quot;NPM Package&quot;">&ZeroWidthSpace;</a></h3>
<p>ç°ä»£å‰ç«¯å¼€å‘é€šå¸¸éƒ½ä¼šä½¿ç”¨å‰ç«¯æ„å»ºå·¥å…·</p>
<p>å› æ­¤é™¤äº†é€šè¿‡CDNå¼•å…¥å¤–ï¼Œå°±æ˜¯é€šè¿‡<code>åŒ…ç®¡ç†å·¥å…·</code>å°†åº“çš„ä¾èµ–å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶ååœ¨æºç ä¸­è¿›è¡Œå¼•å…¥ä½¿ç”¨</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pkgName, { methodName } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'pkgName'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'pkgName/dist/style.css'</span></span></code></pre>
</div><h2 id="å‡†å¤‡å·¥ä½œ" tabindex="-1">å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;å‡†å¤‡å·¥ä½œ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="é¡¹ç›®åˆå§‹åŒ–" tabindex="-1">é¡¹ç›®åˆå§‹åŒ– <a class="header-anchor" href="#é¡¹ç›®åˆå§‹åŒ–" aria-label="Permalink to &quot;é¡¹ç›®åˆå§‹åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> web-lib-template</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> web-lib-template</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  -y</span></span></code></pre>
</div><h3 id="gitåˆå§‹åŒ–" tabindex="-1">Gitåˆå§‹åŒ– <a class="header-anchor" href="#gitåˆå§‹åŒ–" aria-label="Permalink to &quot;Gitåˆå§‹åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span></span></code></pre>
</div><p><code>.gitignore</code>å†…å®¹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">node_modules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dist</span></span></code></pre>
</div><h3 id="å®‰è£…ä¾èµ–" tabindex="-1">å®‰è£…ä¾èµ– <a class="header-anchor" href="#å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;å®‰è£…ä¾èµ–&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œä½¿ç”¨æ–°ä¸€ä»£çš„åŒ…ç®¡ç†å·¥å…· <a href="https://www.pnpm.cn/" target="_blank" rel="noreferrer">pnpm</a></p>
<p>å®‰è£…pnpmæŒ‡ä»¤</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pnpm</span></span></code></pre>
</div><p>è£…ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> typescript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> rimraf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> eslint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tslib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> core-js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @rollup/plugin-typescript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @microsoft/api-extractor</span></span></code></pre>
</div><ul>
<li><code>@microsoft/api-extractor</code>ï¼šæ±‡æ€»äº§ç‰©ä¸­çš„ç±»å‹å®šä¹‰</li>
<li><code>@rollup/plugin-typescript</code>ï¼šç”¨äºæ„å»ºé˜¶æ®µTSçš„è½¬æ¢</li>
<li><code>core-js</code>ï¼šç”¨äºjs polyfillæ”¯æŒ</li>
<li><code>tslib</code>ï¼šä¸ºTSæä¾›ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼ŒRuntime library for TypeScript helper functions</li>
<li><code>eslint</code>ï¼šä»£ç è§„èŒƒ</li>
<li><code>vite</code>ï¼šå¼€å‘é˜¶æ®µæµ‹è¯•ï¼Œä¸åº“çš„æœ€ç»ˆæ„å»ºï¼ˆRollupæä¾›æ„å»ºèƒ½åŠ›ï¼‰</li>
<li><code>rimraf</code>ï¼šæ›¿ä»£<code>rm -rf</code>æŒ‡ä»¤ç”¨äºæ¸…ç†ä¸éœ€è¦çš„èµ„æº</li>
<li><code>typescript</code>ï¼šTSæ”¯æŒ</li>
</ul>
<h3 id="typescripté…ç½®" tabindex="-1">typescripté…ç½® <a class="header-anchor" href="#typescripté…ç½®" aria-label="Permalink to &quot;typescripté…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ›å»º<code>tsconfig.json</code>é…ç½®æ–‡ä»¶</p>
<p>åªåŒ…å«ä¸€äº›åŸºç¡€é…ç½®ä¿¡æ¯ï¼Œå…¶ä¸­</p>
<ul>
<li><code>declarationDir</code>ï¼šæ ‡è¯†ç±»å‹å®šæ–‡ä»¶çš„è¾“å‡ºç›®å½•</li>
</ul>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "compilerOptions"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "target"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ESNext"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ESNext"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "lib"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ESNext"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"DOM"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "moduleResolution"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Node"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "strict"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "sourceMap"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "resolveJsonModule"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "esModuleInterop"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noImplicitThis"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noImplicitAny"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "declaration"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "declarationDir"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./dist"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noUnusedLocals"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noUnusedParameters"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "noImplicitReturns"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "downlevelIteration"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "include"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "src/**/*"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">   ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "exclude"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "node_modules"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="åˆå§‹åŒ–srcæºç ç›®å½•" tabindex="-1">åˆå§‹åŒ–srcæºç ç›®å½• <a class="header-anchor" href="#åˆå§‹åŒ–srcæºç ç›®å½•" aria-label="Permalink to &quot;åˆå§‹åŒ–srcæºç ç›®å½•&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> constants</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> lib</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pkg.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> styles</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> second.css</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> types</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span></span></code></pre>
</div><p>ä¸€ç‚¹è¯´æ˜</p>
<ul>
<li><code>æ–‡ä»¶ src/index.ts</code>ï¼šä¸»è¦ç”¨äºæ¨¡å—å†…å®¹çš„å¯¼å‡º</li>
<li><code>ç›®å½• src/lib</code>ï¼šä¸»è¦ç”¨äºå­˜æ”¾åº“çš„æ ¸å¿ƒæºç </li>
<li><code>ç›®å½• src/types</code>ï¼šTSå®šä¹‰æ–‡ä»¶</li>
<li><code>ç›®å½• src/styles</code>ï¼šæ ·å¼æ–‡ä»¶</li>
<li><code>ç›®å½• src/constants</code>ï¼šå¸¸é‡</li>
<li><code>ç›®å½• src/utils</code>ï¼šå·¥å…·æ–¹æ³•</li>
</ul>
<p>ç®€å•æ·»åŠ ä¸€äº›æºç ï¼Œå®Œæ•´è¯·ç§»æ­¥<a href="https://github.com/ATQQ/web-lib-template" target="_blank" rel="noreferrer">GitHub</a></p>
<p><code>src/index.ts</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './lib/pkg'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { DataItem } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './types/index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
</div><h2 id="æ„å»ºç›¸å…³é…ç½®" tabindex="-1">æ„å»ºç›¸å…³é…ç½® <a class="header-anchor" href="#æ„å»ºç›¸å…³é…ç½®" aria-label="Permalink to &quot;æ„å»ºç›¸å…³é…ç½®&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="viteé…ç½®" tabindex="-1">Viteé…ç½® <a class="header-anchor" href="#viteé…ç½®" aria-label="Permalink to &quot;Viteé…ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p><code>vite.config.js</code>æ–‡ä»¶</p>
<ul>
<li>Viteæ„å»ºèƒ½åŠ›ç”±Rollupæä¾›ï¼Œå› æ­¤å¤§éƒ¨åˆ†Rollupæ’ä»¶å¯ä»¥ç›´æ¥å¤ç”¨</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> typescript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'@rollup/plugin-typescript'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> libName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'LibName'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> bundlePrefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å…¥å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/index.ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    typescript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'es5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/**/*.ts'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      esModuleInterop: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      module: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esnext'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sourcemap: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    outDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dist'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    minify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'esbuild'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      entry,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      name: libName,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      formats: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'umd'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cjs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'es'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (format </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'umd'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">bundlePrefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.min.js`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">bundlePrefix</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.js`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      input: entry,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        exports: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'auto'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    host: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0.0.0.0'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p><code>build</code>ä¸‹çš„é…ç½®é‡Šä¹‰</p>
<ul>
<li>outDirï¼šæ„å»ºè¾“å‡ºç›®å½•</li>
<li>lib
<ul>
<li>entryï¼šæ„å»ºå…¥å£æ–‡ä»¶<code>src/index.ts</code></li>
<li>nameï¼šåº“çš„åç§°ï¼ŒæŒ‚è½½åœ¨<code>globalThis</code>ä¸Šçš„åç§°</li>
<li>formatsï¼šäº§ç‰©åŒ…å«çš„æ ¼å¼ï¼Œè¿™é‡ŒæŒ‡å®šäº†å¸¸è§çš„4ç§</li>
<li>fileNameï¼šé’ˆå¯¹ä¸åŒæ ¼å¼ï¼Œä¿®æ”¹ä¸€ä¸‹äº§ç‰©çš„åç§°</li>
</ul>
</li>
</ul>
<h3 id="å®Œå–„pkg-json" tabindex="-1">å®Œå–„pkg.json <a class="header-anchor" href="#å®Œå–„pkg-json" aria-label="Permalink to &quot;å®Œå–„pkg.json&quot;">&ZeroWidthSpace;</a></h3>
<p><code>package.json</code></p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "main"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dist/index.cjs.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dist/index.es.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "types"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dist/index.d.ts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "build:dev"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"vite build -w"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "build"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"rimraf dist &#x26;&#x26; vite build"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><ol>
<li>æ·»åŠ æ„å»ºç›¸å…³æŒ‡ä»¤
<ul>
<li>å…¶ä¸­ <code>build:dev</code>ä¸»è¦ç”¨äºå¼€å‘è°ƒè¯•ï¼Œç›‘å¬æ–‡ä»¶å˜æ›´ï¼Œæœ‰å˜æ›´è‡ªåŠ¨è¿›è¡Œé‡æ–°æ„å»º</li>
</ul>
</li>
<li>è¡¨æ˜å…¥å£æ–‡ä»¶ä¿¡æ¯
<ul>
<li><code>main</code>ï¼šè®¾ç½®cjsè§„èŒƒçš„æ–‡ä»¶</li>
<li><code>module</code>ï¼›è®¾ç½®ESMè§„èŒƒçš„æ–‡ä»¶</li>
</ul>
</li>
</ol>
<h3 id="æ‰§è¡Œæ„å»º" tabindex="-1">æ‰§è¡Œæ„å»º <a class="header-anchor" href="#æ‰§è¡Œæ„å»º" aria-label="Permalink to &quot;æ‰§è¡Œæ„å»º&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build:dev</span></span></code></pre>
</div><h3 id="äº§ç‰©è¯´æ˜" tabindex="-1">äº§ç‰©è¯´æ˜ <a class="header-anchor" href="#äº§ç‰©è¯´æ˜" aria-label="Permalink to &quot;äº§ç‰©è¯´æ˜&quot;">&ZeroWidthSpace;</a></h3>
<p>æ„å»ºäº§ç‰©å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUzMjA5MTQ4MQ==633532091481" alt="å›¾ç‰‡" loading="lazy"></p>
<ul>
<li>*.cjs.jsï¼šæ„å»ºå·¥å…·å¼•ç”¨</li>
<li>*.es.jsï¼šæ”¯æŒESMçš„æ„å»ºå·¥å…·ä½¿ç”¨</li>
<li>index.min.jsï¼šCDNå¼•å…¥ä½¿ç”¨ï¼Œå…¶ä¸­UMDå…¼å®¹AMDï¼ŒcommonJSï¼Œå…¨å±€å¼•ç”¨ç­‰ç­‰æ–¹å¼</li>
</ul>
<h3 id="æ³¨æ„äº‹é¡¹" tabindex="-1">æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;æ³¨æ„äº‹é¡¹&quot;">&ZeroWidthSpace;</a></h3>
<p>é’ˆå¯¹<code>index.min.js</code>ï¼ˆCDNå¼•å…¥ä½¿ç”¨ï¼‰çš„ä¸€ç‚¹è¯´æ˜</p>
<p>å…¥å£æ–‡ä»¶é™¤ç±»å‹å¯¼å‡ºå¤–ï¼Œå¦‚æœåªåŒ…å«<code>export default VarName1</code>ï¼Œé‚£ä¹ˆ<code>globalThis.LibName</code>å°±ç­‰äº<code>VarName1</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { DataItem } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './types/index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç¼–è¯‘å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "object"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "undefined"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> define </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "function"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> define.amd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(factory) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (global </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "undefined"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> global </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> self, global.LibName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  "use strict"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Demo1;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>å¦‚æœåŒ…å«å…¶å®ƒå¯¼å‡º<code>export const vaeName2</code>ï¼Œé‚£ä¹ˆ<code>globalThis.LibName</code>å°±ç­‰äº<code>VarName1.default</code></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { DataItem } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './types/index'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç¼–è¯‘å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">global</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "object"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "undefined"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> define </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "function"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> define.amd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"exports"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], factory) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (global </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "undefined"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> globalThis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> global </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> self, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(global.LibName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">exports2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  "use strict"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Demo2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  exports2.Demo2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Demo2;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…³é”®ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  exports2[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Demo1;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(exports2, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"__esModule"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, { value: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  exports2[Symbol.toStringTag] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "Module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>å¦‚æœçš„ç¡®éœ€è¦æœ‰å¯¼å‡ºå¤šä¸ªï¼Œé‚£ä¹ˆå»ºè®®</p>
<ul>
<li>æ–¹å¼1ï¼šéƒ½æ˜¯å…·åçš„å¯¼å‡º</li>
<li>æ–¹å¼2ï¼šé€šè¿‡defaultå¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«LibName</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ–¹å¼1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fun1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> var1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LibName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ–¹å¼2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LibName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  fun1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  var1:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  libName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="å¼€å‘æµ‹è¯•" tabindex="-1">å¼€å‘æµ‹è¯• <a class="header-anchor" href="#å¼€å‘æµ‹è¯•" aria-label="Permalink to &quot;å¼€å‘æµ‹è¯•&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="pkg" tabindex="-1">PKG <a class="header-anchor" href="#pkg" aria-label="Permalink to &quot;PKG&quot;">&ZeroWidthSpace;</a></h3>
<p>åœ¨å·¥ç¨‹ä¸­æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼Œåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼ˆæ‰§è¡Œä¸€æ¬¡å³å¯ï¼‰</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUwMzk3NDAzOA==633503974038" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åœ¨è¦æµ‹è¯•çš„é¡¹ç›®ä¸­å¼•ç”¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> pkgName</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUwNDM0NDkwMQ==633504344901" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¿è¡Œç¤ºä¾‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUwNDYyMDY3Mg==633504620672" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="cdn-1" tabindex="-1">CDN <a class="header-anchor" href="#cdn-1" aria-label="Permalink to &quot;CDN&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ¬åœ°åœ¨./distç›®å½•ä¸‹èµ·ä¸€ä¸ªServeræœåŠ¡ï¼Œæ¨èä½¿ç”¨<code>http-server</code></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># å®‰è£…http-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> http-server</span></span></code></pre>
</div><p>åœ¨ distç›®å½•ä¸‹æ‰§è¡Œ<code>http-server</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUwNDkzMDA5Nw==633504930097" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æµ‹è¯•é¡µé¢ä¸­å¼•å…¥</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"http://127.0.0.1:8080/index.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LibName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'test'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sayHello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzUzMjk5MTk0MA==633532991940" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="vite" tabindex="-1">Vite <a class="header-anchor" href="#vite" aria-label="Permalink to &quot;Vite&quot;">&ZeroWidthSpace;</a></h3>
<p>viteæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ”¯æŒESMçš„Serverï¼Œåœ¨é¡¹ç›®ä¸­æµ‹è¯•ä½¿ç”¨å®Œå…¨æ²¡é—®é¢˜ä»–</p>
<p>æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª<code>index.html</code>,åœ¨å…¶ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç </p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> PkG </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './src/index.ts'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PkG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sayHello</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p><code>pkg.json</code>ä¸­åŠ å…¥å¯åŠ¨æŒ‡ä»¤</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "serve"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"vite"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¯åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> serve</span></span></code></pre>
</div><h2 id="cssèµ„æºå¤„ç†" tabindex="-1">CSSèµ„æºå¤„ç† <a class="header-anchor" href="#cssèµ„æºå¤„ç†" aria-label="Permalink to &quot;CSSèµ„æºå¤„ç†&quot;">&ZeroWidthSpace;</a></h2>
<p>cssèµ„æºçš„å¤„ç†æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¸‹é¢ä»‹ç»å‡ ç§å¸¸è§çš„</p>
<p>æµ‹è¯•æ ·å¼</p>
<div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  font-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">48</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">px</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="å¤–éƒ¨æ ·å¼è¡¨" tabindex="-1">å¤–éƒ¨æ ·å¼è¡¨ <a class="header-anchor" href="#å¤–éƒ¨æ ·å¼è¡¨" aria-label="Permalink to &quot;å¤–éƒ¨æ ·å¼è¡¨&quot;">&ZeroWidthSpace;</a></h3>
<p>ç›´æ¥åœ¨å…¥å£æ–‡ä»¶<code>src/index.ts</code>ä¸­å¼•å…¥</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './styles/demo.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
</div><p><code>build</code>äº§ç‰©åŒ…å«ä¸€ä¸ª<code>style.css</code>æ–‡ä»¶ï¼Œé‡Œé¢å³ä¸ºä¹¦å†™çš„æ ·å¼</p>
<p>äºæ˜¯æ­¤ç§æ–¹å¼å¼•å…¥sdkçš„è¯ï¼Œè¿˜éœ€è¦é¢å¤–å¼•å…¥ä¸€ä¸ªcssèµ„æº</p>
<h3 id="style-æ ‡ç­¾" tabindex="-1">style æ ‡ç­¾ <a class="header-anchor" href="#style-æ ‡ç­¾" aria-label="Permalink to &quot;style æ ‡ç­¾&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯ä»¥ç®—ä½œ<strong>css in js</strong>çš„ä¸€ç§</p>
<p>å…ˆç¼–å†™2ä¸ªå·¥å…·æ–¹æ³•</p>
<ul>
<li>hï¼šç®€åŒ–åˆ›å»ºæ ‡ç­¾</li>
<li>addStyleDomï¼šå‘æŒ‡å®šDomä¸‹æ’å…¥<code>style</code>æ ‡ç­¾</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆ›å»ºHtmlElement</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tag</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ ‡ç­¾å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@returns</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tag)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * é€šè¿‡styleæ ‡ç­¾å‘ç›®æ ‡DOMæ·»åŠ cssæ ·å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> target</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> ç›®æ ‡DOM</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> style</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ ·å¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> addStyleDom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> styleDom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'style'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleDom.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(styleDom)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> style </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './styles/demo.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { addStyleDom } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addStyleDom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(document.documentElement, style);</span></span></code></pre>
</div><p>äºæ˜¯æ­¤ç§æ–¹å¼ä¼šå°†csså†…å®¹å†™å…¥åˆ°jsä»£ç ä¸­ï¼Œåœ¨è¿è¡Œæ—¶è‡ªåŠ¨é€šè¿‡styleèŠ‚ç‚¹æ’å…¥åˆ°æ–‡æ¡£èŠ‚ç‚¹ä¸­</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzc1NzUzNDYzNg==633757534636" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="scss-lessæ”¯æŒ" tabindex="-1">scss/lessæ”¯æŒ <a class="header-anchor" href="#scss-lessæ”¯æŒ" aria-label="Permalink to &quot;scss/lessæ”¯æŒ&quot;">&ZeroWidthSpace;</a></h3>
<p>Viteå†…ç½®å¯¹è¿™ä¸¤ä¸ªé¢„å¤„ç†è¯­è¨€çš„æ”¯æŒï¼Œåªéœ€è¦å®‰è£…ç›¸åº”çš„ä¾èµ–å°±è¡Œ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> less</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> sass</span></span></code></pre>
</div><p>ä½¿ç”¨</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './styles/demo.scss'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> style </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './styles/demo.less'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
</div><h2 id="å‘å¸ƒ" tabindex="-1">å‘å¸ƒ <a class="header-anchor" href="#å‘å¸ƒ" aria-label="Permalink to &quot;å‘å¸ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>è¦è®©åˆ«äººä½¿ç”¨ï¼Œé‚£å°±å¾—å°†npmåŒ…å‘å¸ƒä¸Šçº¿</p>
<h3 id="npm" tabindex="-1">NPM <a class="header-anchor" href="#npm" aria-label="Permalink to &quot;NPM&quot;">&ZeroWidthSpace;</a></h3>
<p>çº¿ä¸Š<a href="https://www.npmjs.com/" target="_blank" rel="noreferrer">npm</a>æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œè°ƒç”¨<code>npm login</code>è¿›è¡Œç™»å½•</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> login</span></span></code></pre>
</div><p>å‘å¸ƒå‰è®°å¾—å…ˆbuildï¼Œç„¶åcommitæš‚å­˜åŒºçš„ä»£ç ï¼Œæ¸…ç†å·¥ä½œåŒºçš„å˜åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span></span></code></pre>
</div><p>æ¥ç€å‡çº§ç‰ˆæœ¬</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> patch</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzc1ODgzNzI3OA==633758837278" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å‘å¸ƒ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> publish</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzg0NTE0MDEzMQ==633845140131" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="cdnèµ„æº" tabindex="-1">CDNèµ„æº <a class="header-anchor" href="#cdnèµ„æº" aria-label="Permalink to &quot;CDNèµ„æº&quot;">&ZeroWidthSpace;</a></h3>
<p>ç®€å•ä¸€ç‚¹å°±ä½¿ç”¨<a href="https://unpkg.com/" target="_blank" rel="noreferrer">UNPKG</a>,å¯ä»¥è¯»å–å‘å¸ƒåˆ°npmä¸Šçš„é™æ€èµ„æº</p>
<p>ä¸ºäº†é€Ÿåº¦æ›´å¿«çš„è¯å¯ä»¥å°†èµ„æºä¸Šä¼ åˆ°å¤§é™†çš„<code>OSS</code>ä¸Šï¼Œå†é€šè¿‡<code>CDN</code>ä¸‹å‘</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://unpkg.com/tpl-web-lib@0.0.1/dist/index.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><h2 id="demo" tabindex="-1">Demo <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;Demo&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ•ˆæœ" tabindex="-1">æ•ˆæœ <a class="header-anchor" href="#æ•ˆæœ" aria-label="Permalink to &quot;æ•ˆæœ&quot;">&ZeroWidthSpace;</a></h3>
<p>ä¼šå‘ä½ çš„é¡µé¢ä¸­å¿ƒä½ç½®æ·»åŠ ä¸€ä¸ª<code>tag</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzg1NDMyNjkzNw==633854326937" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="npm-1" tabindex="-1">npm <a class="header-anchor" href="#npm-1" aria-label="Permalink to &quot;npm&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># npm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tpl-web-lib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># yarn</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tpl-web-lib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># pnpm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tpl-web-lib</span></span></code></pre>
</div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> libName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'tpl-web-lib'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> libName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code></pre>
</div><h3 id="cdn-2" tabindex="-1">cdn <a class="header-anchor" href="#cdn-2" aria-label="Permalink to &quot;cdn&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://unpkg.com/tpl-web-lib@latest/dist/index.min.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LibName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æ–‡ç« æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»äº†æ•´ä¸ªæ­å»ºè¿‡ç¨‹ï¼Œç¬”è€…æ°´å¹³æœ‰é™ï¼Œå¦‚æœ‰é”™è¯¯è¿˜è¯·æ–§æ­£</p>
<p>ç»è¿‡ä¸€äº›æ€è€ƒï¼ˆæ–‡ç« ç¯‡å¹…ä¸ç›¸å…³æ€§ï¼‰ï¼Œå…³äºä¸€äº›å·¥ç¨‹é€šç”¨çš„èƒ½åŠ›ï¼Œå¦‚<code>eslint</code>ï¼Œ<code>api-extractor</code>ï¼Œ<code>prettier</code>ï¼Œ<code>jest</code>ï¼Œ<code>husky</code>ç­‰ç­‰å°†ä¼šåœ¨åç»­æ–‡ç« ä¸­ä¸“é—¨ä»‹ç»</p>
<blockquote>
<p>æ–‡ä¸­æ‰€æ¶‰åŠ<a href="https://github.com/ATQQ/web-lib-template" target="_blank" rel="noreferrer">æºç ä»“åº“</a>åœ°å€ï¼š<a href="https://github.com/ATQQ/web-lib-template" target="_blank" rel="noreferrer">https://github.com/ATQQ/web-lib-template</a></p>
</blockquote>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMzUzMjA5MTQ4MQ==633532091481" length="0" type="image//mdImg/MTYzMzUzMjA5MTQ4MQ==633532091481"/>
        </item>
        <item>
            <title><![CDATA[å†…å®¹é¢„å‘Š-æœ€è¿‘å‡†å¤‡æ•´ç†çš„å†…å®¹]]></title>
            <link>https://www.dmsrs.org/_configDoc/top/notice.html</link>
            <guid>https://www.dmsrs.org/_configDoc/top/notice.html</guid>
            <pubDate>Mon, 04 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[ã€21å¹´å½’æ¡£ã€‘å†…å®¹é¢„å‘Š
ç”±äºç –å¤ªçƒ«æ‰‹ï¼Œè¿™éƒ¨åˆ†å†…å®¹é¸½äº†æœ‰å¤§åŠå¹´äº†ï¼Œäº‰å–21Q4å®Œå–„å…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹
ä½ ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç•™ä¸‹æ‰€é‡åˆ°çš„ç›¸å…³é¢è¯•é¢˜å“Ÿ
 éšç¬”å†…å®¹
* Node.js ä¸­çš„ESM
* æ¨¡å—è”é‚¦
* ]]></description>
            <content:encoded><![CDATA[<h1 id="ã€21å¹´å½’æ¡£ã€‘å†…å®¹é¢„å‘Š" tabindex="-1">ã€21å¹´å½’æ¡£ã€‘å†…å®¹é¢„å‘Š <a class="header-anchor" href="#ã€21å¹´å½’æ¡£ã€‘å†…å®¹é¢„å‘Š" aria-label="Permalink to &quot;ã€21å¹´å½’æ¡£ã€‘å†…å®¹é¢„å‘Š&quot;">&ZeroWidthSpace;</a></h1>
<p>ç”±äºç –å¤ªçƒ«æ‰‹ï¼Œè¿™éƒ¨åˆ†å†…å®¹é¸½äº†æœ‰å¤§åŠå¹´äº†ï¼Œäº‰å–21Q4å®Œå–„å…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç•™ä¸‹æ‰€é‡åˆ°çš„ç›¸å…³é¢è¯•é¢˜å“Ÿ</p>
<h2 id="éšç¬”å†…å®¹" tabindex="-1">éšç¬”å†…å®¹ <a class="header-anchor" href="#éšç¬”å†…å®¹" aria-label="Permalink to &quot;éšç¬”å†…å®¹&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>Node.js ä¸­çš„ESM</li>
<li>æ¨¡å—è”é‚¦</li>
<li>monorepo
<ul>
<li>learn</li>
<li>yarn</li>
<li>pnpm</li>
</ul>
</li>
<li>Vite
<ul>
<li>åŸç†</li>
<li>æ’ä»¶æœºåˆ¶</li>
<li>miniç‰ˆå®ç°</li>
</ul>
</li>
<li>NCC</li>
<li>bundleä¸chunk</li>
<li>web SDKå¼€å‘
<ul>
<li>å·¥ç¨‹æ¨¡æ¿</li>
<li>é€šç”¨é¼ æ ‡æŒ‡é’ˆSDK</li>
<li>ç›‘æ§sdkå®ç°</li>
</ul>
</li>
<li>Node SDK
<ul>
<li>å·¥ç¨‹æ¨¡æ¿åˆ›å»º</li>
</ul>
</li>
<li>å‰ç«¯æ°´å°å®ç°</li>
<li>Nginx
<ul>
<li>å­¦ä¹ </li>
<li>njs</li>
</ul>
</li>
<li>npx</li>
<li>pnpm yarn npm ä½¿ç”¨å¯¹æ¯”</li>
<li>ä¸€é”®å¼•å…¥å·¥ç¨‹å·¥å…·çš„CLIå·¥å…·å¼€å‘</li>
<li>viteæ’ä»¶å¼€å‘å®è·µ</li>
</ul>
<h2 id="æµè§ˆå™¨ä¸“é¢˜" tabindex="-1">ğŸŒ<a href="./../../bigWeb/browser/">æµè§ˆå™¨ä¸“é¢˜</a> <a class="header-anchor" href="#æµè§ˆå™¨ä¸“é¢˜" aria-label="Permalink to &quot;:earth_asia:[æµè§ˆå™¨ä¸“é¢˜](./../../bigWeb/browser/index.md)&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./../../bigWeb/browser/core.html">å†…æ ¸</a></li>
<li><a href="./../../bigWeb/browser/render.html">æ¸²æŸ“æœºåˆ¶</a></li>
<li><a href="./../../bigWeb/browser/block.html">é˜»å¡æ¸²æŸ“</a></li>
<li><a href="./../../bigWeb/browser/cache.html">ç¼“å­˜æœºåˆ¶</a></li>
<li><a href="./../../bigWeb/browser/storage.html">æœ¬åœ°å­˜å‚¨</a></li>
<li><a href="./../../bigWeb/browser/safe.html">å®‰å…¨</a></li>
<li><a href="./../../bigWeb/browser/cors.html">è·¨åŸŸä¸è·¨ç«™</a></li>
<li><a href="./../../bigWeb/browser/eventloop.html">event loop</a></li>
<li><a href="./../../bigWeb/browser/problem.html">å¸¸è§é¢è¯•é¢˜</a></li>
</ul>
<h2 id="æ ¡æ‹›é¢è¯•" tabindex="-1">ğŸ“<a href="./../../bigWeb/browser/">æ ¡æ‹›é¢è¯•</a> <a class="header-anchor" href="#æ ¡æ‹›é¢è¯•" aria-label="Permalink to &quot;:pencil:[æ ¡æ‹›é¢è¯•](./../../bigWeb/browser/index.md)&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./../../offer/campus/javascript.html">JS</a></li>
<li><a href="./../../offer/campus/internet.html">è®¡ç½‘</a></li>
<li><a href="./../../offer/campus/css.html">CSS</a></li>
<li><a href="./../../offer/campus/html.html">HTML</a></li>
<li>æ“ä½œç³»ç»Ÿ</li>
<li>æ¡†æ¶</li>
<li>ã€‚ã€‚ã€‚æœªå®Œå¾…ç»­</li>
</ul>
<h2 id="æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜" tabindex="-1">ğŸš€æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜ <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜" aria-label="Permalink to &quot;:rocket:æ€§èƒ½ä¼˜åŒ–ä¸“é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>æµè§ˆå™¨</li>
<li>é¦–å±</li>
<li>ç™½å±</li>
<li>é•¿åˆ—è¡¨</li>
<li>å›¾ç‰‡</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<h2 id="å¤§å‰ç«¯ç›¸å…³æ¦‚å¿µ" tabindex="-1">âš¡å¤§å‰ç«¯ç›¸å…³æ¦‚å¿µ <a class="header-anchor" href="#å¤§å‰ç«¯ç›¸å…³æ¦‚å¿µ" aria-label="Permalink to &quot;:zap:å¤§å‰ç«¯ç›¸å…³æ¦‚å¿µ&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="./../../technology/theory/serverless.html">Serverless</a></li>
<li>cssæ¶æ„</li>
<li>å¾®å‰ç«¯</li>
<li>lowCode</li>
<li>å®¹å™¨åŒ–</li>
<li>æ™ºèƒ½åŒ–</li>
<li>è·¨ç«¯</li>
<li>å°ç¨‹åº</li>
<li>....</li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä¸ºä»€ä¹ˆ'\x1B'.length===1ï¼Ÿ\xä¸\uçŸ¥è¯†å»¶ä¼¸]]></title>
            <link>https://www.dmsrs.org/technology/learn/ux.html</link>
            <guid>https://www.dmsrs.org/technology/learn/ux.html</guid>
            <pubDate>Mon, 04 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
å…ˆè®²ä¸€ä¸‹èƒŒæ™¯ï¼Œå†è¯´åŸå› 
å¤§å¤šæ•°åº“éƒ½ä¼šåœ¨æ—¥å¿—ä¸­ä½¿ç”¨`chalk`åº“ä¸ºconsoleçš„å†…å®¹è¿›è¡Œä¸Šè‰²
è¢«`chalk`å¤„ç†åï¼Œå…¶åŸæœ¬çš„å†…å®¹ä¼šè¢«â€˜\x1B...â€™æ‰€åŒ…è£¹
```js
console.lo]]></description>
            <content:encoded><![CDATA[<h1 id="ä¸ºä»€ä¹ˆ-x1b-length-1-xä¸-uçŸ¥è¯†å»¶ä¼¸" tabindex="-1">ä¸ºä»€ä¹ˆ'\x1B'.length === 1ï¼Ÿ\xä¸\uçŸ¥è¯†å»¶ä¼¸ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-x1b-length-1-xä¸-uçŸ¥è¯†å»¶ä¼¸" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆ'\x1B'.length === 1ï¼Ÿ\xä¸\uçŸ¥è¯†å»¶ä¼¸&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>å…ˆè®²ä¸€ä¸‹èƒŒæ™¯ï¼Œå†è¯´åŸå› </p>
<p>å¤§å¤šæ•°åº“éƒ½ä¼šåœ¨æ—¥å¿—ä¸­ä½¿ç”¨<code>chalk</code>åº“ä¸ºconsoleçš„å†…å®¹è¿›è¡Œä¸Šè‰²</p>
<p>è¢«<code>chalk</code>å¤„ç†åï¼Œå…¶åŸæœ¬çš„å†…å®¹ä¼šè¢«â€˜\x1B...â€™æ‰€åŒ…è£¹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'green'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'green'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)]);</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzE1NzQ3MjA5OQ==633157472099" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åœ¨å¼€å‘<a href="https://github.com/ATQQ/vite-plugin-monitor" target="_blank" rel="noreferrer">vite-plugin-monitor</a>æ—¶ï¼Œä¸ºäº†è·å–åŸå§‹çš„æ—¥å¿—å†…å®¹ï¼ˆä¸Šè‰²ä¹‹å‰ï¼‰ï¼Œéœ€è¦å°†ä¸Šè‰²åçš„å­—ç¬¦ä¸²è¿˜åŸ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">\x1B[34mgreen\x1B[39m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> green</span></span></code></pre>
</div><p>åœ¨ä½¿ç”¨æ­£åˆ™å¤„ç†å†…å®¹çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªé—®é¢˜</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x1B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç»“æœï¼Ÿï¼Ÿ</span></span></code></pre>
</div><p>é€šè¿‡<code>.length</code>æŸ¥çœ‹å…¶é•¿åº¦ï¼Œç»“æœå°±å¦‚æ ‡é¢˜æ‰€ç¤º</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzE1ODMwMzk5Ng==633158303996" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŸå› " tabindex="-1">åŸå›  <a class="header-anchor" href="#åŸå› " aria-label="Permalink to &quot;åŸå› &quot;">&ZeroWidthSpace;</a></h2>
<p>åæ–œæ <code>&quot;\&quot;</code>é€šå¸¸æ ‡è¯†è½¬ä¹‰å­—ç¬¦ï¼Œå¦‚<code>\n(æ¢è¡Œç¬¦)</code>,<code>\t(åˆ¶è¡¨ç¬¦)</code></p>
<p>è€Œ<code>\x</code>å°±æ ‡è¯†16è¿›åˆ¶ï¼Œåé¢è·Ÿä¸Šä¸¤ä½16è¿›åˆ¶æ•°</p>
<p>ä¸æ­¤åŒæ—¶è¿˜æœ‰<code>\u</code>ä¹Ÿæ˜¯æ ‡è¯†16è¿›åˆ¶ï¼Œä½†å…¶åé¢éœ€è·Ÿä¸Š4ä½16è¿›åˆ¶æ•°</p>
<p>å› æ­¤è¿™é‡Œçš„<code>\x1B</code>å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå­—ç¬¦</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x41</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'A'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">   // true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'A'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\u0041</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // true</span></span></code></pre>
</div><h2 id="x" tabindex="-1">\x <a class="header-anchor" href="#x" aria-label="Permalink to &quot;\x&quot;">&ZeroWidthSpace;</a></h2>
<p><code>\xhh</code>åŒ¹é…ä¸€ä¸ªä»¥ä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼ˆ<code>\x00</code>-<code>\xFF</code>ï¼‰è¡¨ç¤ºçš„å­—ç¬¦</p>
<p>ä¸»è¦ç”¨äº<a href="https://tool.oschina.net/commons?type=4" target="_blank" rel="noreferrer">ASCIIç </a>çš„è¡¨ç¤º</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x41</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> â€˜</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">â€™</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'A'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fromCharCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x61</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> â€˜aâ€™</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'a'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fromCharCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">97</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><code>\x</code>åå¿…é¡»è·Ÿç€ä¸¤ä½16è¿›åˆ¶çš„å­—ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå…¶ä¸­ <code>A</code>-<code>F</code> ä¸åŒºåˆ†å¤§å°å†™</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">1'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // Uncaught SyntaxError: Invalid hexadecimal escape sequence</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">fg'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> // Uncaught SyntaxError: Invalid hexadecimal escape sequence</span></span></code></pre>
</div><h2 id="u" tabindex="-1">\u <a class="header-anchor" href="#u" aria-label="Permalink to &quot;\u&quot;">&ZeroWidthSpace;</a></h2>
<p><code>\uhhhh</code>åŒ¹é…ä¸€ä¸ªä»¥å››ä½åå…­è¿›åˆ¶æ•°ï¼ˆ<code>\u0000</code>-<code>\uFFFF</code>ï¼‰è¡¨ç¤ºçš„ Unicode å­—ç¬¦ã€‚</p>
<p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¸¸è§äºåŒ¹é…ä¸­æ–‡å­—ç¬¦</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[\u4e00-\u9fa5]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä¸­æ–‡'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">r.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'English'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// false</span></span></code></pre>
</div><h2 id="å¸¸è§„å­—ç¬¦ä¸unicodeå­—ç¬¦äº’è½¬" tabindex="-1">å¸¸è§„å­—ç¬¦ä¸Unicodeå­—ç¬¦äº’è½¬ <a class="header-anchor" href="#å¸¸è§„å­—ç¬¦ä¸unicodeå­—ç¬¦äº’è½¬" aria-label="Permalink to &quot;å¸¸è§„å­—ç¬¦ä¸Unicodeå­—ç¬¦äº’è½¬&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="str2unicode" tabindex="-1">str2Unicode <a class="header-anchor" href="#str2unicode" aria-label="Permalink to &quot;str2Unicode&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>ä½¿ç”¨<code>String.prototype.charCodeAt</code>è·å–æŒ‡å®šä½ç½®çš„ Unicode ç ç‚¹ï¼ˆåè¿›åˆ¶è¡¨ç¤ºï¼‰</li>
<li>ä½¿ç”¨<code>String.prototype.toString</code>å°†å…¶è½¬ä¸ºåå…­è¿›åˆ¶å­—ç¬¦,è½¬ä¸º16è¿›åˆ¶å­—ç¬¦ä¸ä¼šè‡ªåŠ¨è¡¥0</li>
<li>é€šè¿‡<code>String.prototype.padStart</code>è¿›è¡Œè¡¥<code>0</code></li>
</ol>
<p>ç¼–å†™çš„é€šç”¨å¤„ç†æ–¹æ³•å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> str2Unicode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">u${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">charCodeAt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">str2Unicode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1aä¸­æ–‡'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// '\\u0031\\u0061\\u4e2d\\u6587'</span></span></code></pre>
</div><h3 id="unicode2str" tabindex="-1">unicode2Str <a class="header-anchor" href="#unicode2str" aria-label="Permalink to &quot;unicode2Str&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>é€šè¿‡æ­£åˆ™<code>/\\u[\da-f]{4}/g</code>åŒ¹é…å‡ºæ‰€æœ‰çš„unicodeå­—ç¬¦</li>
<li>ä½¿ç”¨<code>Number</code>å°†<code>0x${matchStr}</code>è½¬æ¢ä¸º10è¿›åˆ¶æ•°</li>
<li>ä½¿ç”¨<code>String.fromCodePoint</code>å°†unicodeç ç‚¹è½¬ä¸ºå­—ç¬¦</li>
<li>ä½¿ç”¨<code>String.prototype.replace</code>è¿›è¡Œé€å­—ç¬¦çš„è½¬æ¢</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> unicode2Str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> unicodeList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">[\da-f]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">{4}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> unicodeList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">u</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(u, String.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fromCodePoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`0x${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, str)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unicode2Str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">u0061</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">u4e2dæ–‡'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1aä¸­æ–‡</span></span></code></pre>
</div><h2 id="è¿˜åŸchalkå¤„ç†åçš„å­—ç¬¦ä¸²" tabindex="-1">è¿˜åŸchalkå¤„ç†åçš„å­—ç¬¦ä¸² <a class="header-anchor" href="#è¿˜åŸchalkå¤„ç†åçš„å­—ç¬¦ä¸²" aria-label="Permalink to &quot;è¿˜åŸchalkå¤„ç†åçš„å­—ç¬¦ä¸²&quot;">&ZeroWidthSpace;</a></h2>
<p>è‡ªå·±ä»0-1å†™ä¸€ä¸ªæ­£åˆ™éš¾å…ä¼šæœ‰è®¸å¤šè¾¹ç•Œæƒ…å†µè€ƒè™‘ä¸å‘¨å…¨ï¼Œäºæ˜¯åœ¨chalkçš„READMEä¸­æ‰¾åˆ°äº†<a href="https://github.com/chalk/ansi-regex" target="_blank" rel="noreferrer">chalk/ansi-regex</a>è¿™ä¸ªåº“</p>
<p>å¯ä»¥å°†è‰²å€¼ç›¸å…³çš„ <code>ANSIè½¬ä¹‰ç </code> åŒ¹é…å‡ºæ¥</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ansiRegex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'ansi-regex'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\u001B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[4mcake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\u001B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[0m'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ansiRegex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//=> ['\u001B[4m', '\u001B[0m']</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\u001B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[4mcake</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\u001B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">[0m'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ansiRegex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({onlyFirst: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//=> ['\u001B[4m']</span></span></code></pre>
</div><p>ç¼–å†™ä¸€ä¸‹å¤„ç†æ–¹æ³•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> resetChalkStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ansiRegex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æµ‹è¯•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">green</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'green'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">greenBright</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'greenBright'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">green</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'green'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">greenBright</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'greenBright'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resetChalkStr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">chalk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">green</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'green'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">chalk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">greenBright</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'greenBright'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzMzMzExNzEzOA==633333117138" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>é‡æ‹¾äº†ä¸€ä¸‹<code>\x</code>ä¸<code>\u</code>ç›¸å…³çš„å†…å®¹ï¼Œçªç„¶é¢å¤–æƒ³åˆ°ä¸€ä¸ªç‚¹ï¼Œä½¿ç”¨\uå»åšå­—ç¬¦ä¸²çš„åŠ è§£å¯†(ä¸‹æ¥å†æ‹ä¸€æ‹)</p>
<p>è§£å†³äº†ä¸€ä¸ª<code>chalk</code>ç›¸å…³çš„é—®é¢˜â€œè¿˜åŸç»ˆç«¯ä¸­çš„å½©è‰²å†…å®¹â€</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMzE1NzQ3MjA5OQ==633157472099" length="0" type="image//mdImg/MTYzMzE1NzQ3MjA5OQ==633157472099"/>
        </item>
        <item>
            <title><![CDATA[Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸‹ï¼‰]]></title>
            <link>https://www.dmsrs.org/technology/learn/vite-plugin-monitor3.html</link>
            <guid>https://www.dmsrs.org/technology/learn/vite-plugin-monitor3.html</guid>
            <pubDate>Fri, 01 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡ä»‹ç»äº†Viteå¯åŠ¨ï¼ŒHMRç­‰æ—¶é—´çš„è·å–ã€‚
ä½†å„é˜¶æ®µè¯¦ç»†çš„è€—æ—¶ä¿¡æ¯ï¼Œåªèƒ½é€šè¿‡debugçš„æ—¥å¿—è·å–
æœ¬æ–‡å°±å®ç°ä¸€ä¸‹debugæ—¥å¿—çš„æ‹¦æˆª
 æ’ä»¶æ•ˆæœé¢„è§ˆ
 --debugåšäº†ä»€ä¹ˆ
é¡¹ç›®å¯åŠ¨æŒ‡ä»¤
]]></description>
            <content:encoded><![CDATA[<h1 id="viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸‹" tabindex="-1">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸‹ï¼‰ <a class="header-anchor" href="#viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸‹" aria-label="Permalink to &quot;Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸‹ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./vite-plugin-monitor2.html">ä¸Šä¸€ç¯‡</a>ä»‹ç»äº†Viteå¯åŠ¨ï¼ŒHMRç­‰æ—¶é—´çš„è·å–ã€‚</p>
<p>ä½†å„é˜¶æ®µè¯¦ç»†çš„è€—æ—¶ä¿¡æ¯ï¼Œåªèƒ½é€šè¿‡debugçš„æ—¥å¿—è·å–</p>
<p>æœ¬æ–‡å°±å®ç°ä¸€ä¸‹debugæ—¥å¿—çš„æ‹¦æˆª</p>
<h2 id="æ’ä»¶æ•ˆæœé¢„è§ˆ" tabindex="-1">æ’ä»¶æ•ˆæœé¢„è§ˆ <a class="header-anchor" href="#æ’ä»¶æ•ˆæœé¢„è§ˆ" aria-label="Permalink to &quot;æ’ä»¶æ•ˆæœé¢„è§ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzA4MTY0NTkzNA==633081645934" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="debugåšäº†ä»€ä¹ˆ" tabindex="-1">--debugåšäº†ä»€ä¹ˆ <a class="header-anchor" href="#debugåšäº†ä»€ä¹ˆ" aria-label="Permalink to &quot;--debugåšäº†ä»€ä¹ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>é¡¹ç›®å¯åŠ¨æŒ‡ä»¤</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vite</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --debug</span></span></code></pre>
</div><p>åœ¨æºç ä¸­æœç´¢ <code>--debug</code>ï¼Œå¯ä»¥åœ¨<a href="https://github.com/vitejs/vite/blob/63c7a88cadfff1d9fb10f63415a7132bf5eec483/packages/vite/bin/vite.js#L14" target="_blank" rel="noreferrer">vite/packages/vite/bin/vite.js</a>æ–‡ä»¶ä¸­å®šä½åˆ°ç›®æ ‡ä»£ç </p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> debugIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.argv.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">findIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(?:-d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">--debug)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(arg))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (debugIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.argv[debugIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite:*'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // support debugging multiple flags with comma-separated list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">','</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `vite:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">','</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¯ä»¥çœ‹åˆ°å¦‚æœä½¿ç”¨äº†<code>--debug</code>æˆ–è€…<code>-d</code>å‚æ•°ï¼Œ<code>process.env</code>ä¸ŠæŒ‚è½½<code>DEBUG</code>å˜é‡æ ‡è¯†å¼€å¯äº†Debug</p>
<h2 id="å®šä½æ‰“å°æ—¥å¿—æ–¹æ³•" tabindex="-1">å®šä½æ‰“å°æ—¥å¿—æ–¹æ³• <a class="header-anchor" href="#å®šä½æ‰“å°æ—¥å¿—æ–¹æ³•" aria-label="Permalink to &quot;å®šä½æ‰“å°æ—¥å¿—æ–¹æ³•&quot;">&ZeroWidthSpace;</a></h2>
<p>debugä¸‹æ¯æ¡æ—¥å¿—éƒ½æ˜¯ä»¥<code>vite:label</code>å¼€å¤´ï¼Œæ¯”å¦‚</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vite:load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 1ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">   [fs] /src/router/routes/index.ts</span></span></code></pre>
</div><p>å…¨å±€æœä¸€ä¸‹<code>vite:load</code>å°±å®šä½åˆ°äº†å¦‚ä¸‹çš„<a href="https://github.com/vitejs/vite/blob/63c7a88cadfff1d9fb10f63415a7132bf5eec483/packages/vite/src/node/server/transformRequest.ts#L23" target="_blank" rel="noreferrer">ä»£ç </a>ï¼Œå¯ä»¥çœ‹åˆ°<code>createDebugger</code>æ˜¯è¿”å›äº†ä¸€ä¸ªå¯ä»¥æ‰“å°æ—¥å¿—çš„æ–¹æ³•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  createDebugger,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../utils'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> debugLoad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createDebugger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite:load'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isDebug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ..code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isDebug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> debugLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timeFrom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">loadStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} [fs] ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">prettyUrl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><code>createDebugger</code> çš„æºç å¦‚ä¸‹ï¼Œå…¶è¿”å›ä¸€ä¸ªè‡ªå®šå‡½æ•°ï¼Œç®€å•æ‹ä¸€ä¸‹å°±èƒ½çœ‹å‡ºï¼Œè´Ÿè´£æ‰“å°çš„æ–¹æ³•æ˜¯<code>log(msg,...args)</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'debug'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createDebugger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  namespace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ViteDebugScope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> DebuggerOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Debugger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'log'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(namespace)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">onlyWhenFocused</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> focus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> onlyWhenFocused </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'string'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> onlyWhenFocused </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> namespace</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (filter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">msg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filter)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (onlyWhenFocused </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(focus)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(msg, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶ä¸­<code>log</code>å®ä¾‹é€šè¿‡<code>debug</code>æ–¹æ³•åˆ›å»ºï¼Œä½†è¿™ä¸ª<code>debug</code>æ–¹æ³•æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“<code>visionmedia/debug</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzA5MTM2MjM0Mg==633091362342" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¿™ä¸ªæ–¹åº“è™½å°ï¼Œèƒ½åœ¨<code>Vite</code>ä¸­è¢«ç”¨ä¸Šæƒ³å¿…ä¹Ÿä¸ç®€å•ï¼Œ<a href="https://github1s.com/visionmedia/debug/blob/HEAD/src/node.js" target="_blank" rel="noreferrer">åœ¨çº¿æŸ¥çœ‹æºç </a></p>
<h2 id="debugæ–¹æ³•æºç åˆ†æ" tabindex="-1">debugæ–¹æ³•æºç åˆ†æ <a class="header-anchor" href="#debugæ–¹æ³•æºç åˆ†æ" aria-label="Permalink to &quot;debugæ–¹æ³•æºç åˆ†æ&quot;">&ZeroWidthSpace;</a></h2>
<p>å…¥å£æ–‡ä»¶æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œç›´æ¥å»çœ‹<code>./node.js</code>ä¸­çš„é€»è¾‘</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'undefined'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'renderer'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.browser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.__nwjs) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./browser.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">	module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./node.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™éƒ¨åˆ†ä»£ç ä¸€å…±åªæœ‰<strong>264</strong>è¡Œï¼Œå…³é”®ä»£ç å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> log;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.stderr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(util.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./common'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p><strong>./common.js</strong>ä¸­éƒ¨åˆ†ä»£ç </p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	createDebug.debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> createDebug;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	createDebug.default </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> createDebug;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> self</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> debug;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">			const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> logFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> self.log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> createDebug.log;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">			logFn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(self, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">		}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">		return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> debug;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">	return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> createDebug;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> setup;</span></span></code></pre>
</div><p>åˆ°æ­¤èƒ½å¤Ÿç¡®å®šæ—¥å¿—çš„æ‰“å°éƒ½æ˜¯é€šè¿‡<code>process.stderr.write</code>æ–¹æ³•è¾“å‡ºçš„å†…å®¹</p>
<p>è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„å°±æ˜¯ï¼Œè¾“å‡ºå†…å®¹ä¸ä¼šç›´æ¥æ¢è¡Œ</p>
<p>é‚£ä¹ˆæˆ‘ä»¬åœ¨æ’ä»¶ä¸­é‡æ–°å®šä¹‰ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•å°±èƒ½æ‹¦æˆªåˆ°æ‰“å°çš„å†…å®¹</p>
<h2 id="debugæ—¥å¿—æ‹¦æˆªå®ç°" tabindex="-1">debugæ—¥å¿—æ‹¦æˆªå®ç° <a class="header-anchor" href="#debugæ—¥å¿—æ‹¦æˆªå®ç°" aria-label="Permalink to &quot;debugæ—¥å¿—æ‹¦æˆªå®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>å®šä¹‰æ’ä»¶å…¥å‚</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     * æ˜¯å¦åœ¨ç»ˆç«¯ä¸­è¾“å‡ºåŸæ¥çš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     * é»˜è®¤å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    monitor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MonitorCallback</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     * debugå›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    debug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> DebugCallback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç›´æ¥åœ¨è°ƒç”¨æ’ä»¶æ–¹æ³•çš„æ—¶å€™è¿›è¡Œ<code>write</code>æ–¹æ³•é‡å†™ï¼Œå…·ä½“å®ç°é€»è¾‘å¦‚ä¸‹</p>
<ul>
<li>å¯ç”¨äº†<code>--debug</code>ï¼Œä¼ å…¥äº†<code>monitor</code>æˆ–<code>debug</code>æ–¹æ³•æ‰é‡æ–°å®šä¹‰writeæ–¹æ³•</li>
<li>å°†è·å–åˆ°çš„æ—¥å¿—ä¿¡æ¯åšç®€å•è§£æï¼Œé€šè¿‡<code>monitor</code>æ–¹æ³•ä¼ é€’ç»™å¤–éƒ¨</li>
<li>åŸå§‹å‚æ•°ä¼ é€’ç»™å¤–éƒ¨çš„debugæ–¹æ³•</li>
</ul>
<p>å…¶ä¸­è§£æå‡ºçš„å‡ ä¸ªå‚æ•°å‡ ä¸ªå‚æ•°ä¸åŸæ—¥å¿—å†…å®¹å¯¹åº”å…³ç³»å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMzA5MzM0NDMxNg==633093344317" alt="å›¾ç‰‡" loading="lazy"></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Plugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { PluginOptions } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './types'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ops</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PluginOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ops;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¦‚æœdebugæ–¹æ³•ä¸”å¯åŠ¨æ—¶æ·»åŠ äº†--debugå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> debug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> monitor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.stderr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(process.stderr, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'write'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> _write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // logä¸ºtrueæ‰æ‰§è¡ŒåŸæ¥çš„æ‰“å°é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (log </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> argv[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'string'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            process.stdout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(argv[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> argv[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">          // è§£ææ—¥å¿—çš„labelä¸æ‰“å°çš„æ—¶é—´ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (originStr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">vite:(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [])[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> time1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (originStr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [])[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> time2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (originStr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">\+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">)ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [])[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> monitor) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tag, time, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              time1: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              time2: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(time2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              originValue: originStr,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (debug) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">argv);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite-plugin-monitor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'serve'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ°æ­¤æ‹¦æˆªæ—¥å¿—çš„featureå°±å®Œæˆäº†,æœ€åˆå®šä¸‹ç›®æ ‡ä¹Ÿå·²å®Œæˆ</p>
<h2 id="ä½“éªŒæ’ä»¶" tabindex="-1">ä½“éªŒæ’ä»¶ <a class="header-anchor" href="#ä½“éªŒæ’ä»¶" aria-label="Permalink to &quot;ä½“éªŒæ’ä»¶&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p><a href="https://github.com/ATQQ/vite-plugin-monitor/tree/main/#readme" target="_blank" rel="noreferrer">æ’ä»¶æºç </a></p>
</blockquote>
<p>å®‰è£…ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite-plugin-monitor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --dev</span></span></code></pre>
</div><p>å¼•å…¥æ’ä»¶ï¼Œä¿®æ”¹<strong>vite.config.js</strong>æ–‡ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> vitePluginMonitor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite-plugin-monitor'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    vitePluginMonitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // log: false,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">originData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">originValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> originVal</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(originValue)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(label, time1, time2, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}ms`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // æ‰“å°å®Œæ•´æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // process.stdout.write(str)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>å¯åŠ¨æŒ‡ä»¤ä¸­æ·»åŠ <code>--debug</code></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vite</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --debug</span></span></code></pre>
</div><p>é€šè¿‡<code>monitor</code>ä¸<code>debug</code>æ–¹æ³•ä¸­å°±èƒ½æ‹¿åˆ°åŸå§‹çš„æ—¥å¿—å’Œç®€å•å¤„ç†åçš„æ—¥å¿—ï¼Œåœ¨æ­¤å¤„<strong>åŠ å…¥è‡ªå®šä¹‰çš„åŸ‹ç‚¹ç›‘æ§ä»£ç å³å¯</strong></p>
<p><strong>ä¸€ç‚¹è¡¥å……ï¼š</strong> åœ¨<code>log</code>ä¸º<code>false</code>çš„æ—¶ï¼Œå¹¶ä¸”å®šä¹‰äº†<code>monitor</code>æˆ–<code>debug</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåŸæ¥çš„æ—¥å¿—å†…å®¹éƒ½å°†ä¼šè¢«è¿™ä¸¤ä¸ªæ–¹æ³•æ‹¦æˆª</p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›®å‰å·²ç»èƒ½å¤Ÿå®Œå…¨æ‹¦æˆªåˆ°debugä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œä½†å†…å®¹ç”±äºæœ‰å½©è‰²æ‰“å°ç›¸å…³çš„å­—ç¬¦ï¼Œæå–ä¿¡æ¯æ¯”è¾ƒéº»çƒ¦</p>
<p>ä¸‹ä¸€æ­¥å°†å¯¹æ—¥å¿—çš„æå–å†åšä¸€äº›æ ¼å¼åŒ–ï¼Œç¡®ä¿èƒ½å¤Ÿè§£æå‡ºå®Œæ•´çš„æ—¥å¿—å†…å®¹</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMzA4MTY0NTkzNA==633081645934" length="0" type="image//mdImg/MTYzMzA4MTY0NTkzNA==633081645934"/>
        </item>
        <item>
            <title><![CDATA[Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸Šï¼‰]]></title>
            <link>https://www.dmsrs.org/technology/learn/vite-plugin-monitor1.html</link>
            <guid>https://www.dmsrs.org/technology/learn/vite-plugin-monitor1.html</guid>
            <pubDate>Mon, 27 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
æœ€è¿‘åœ¨webpacké¡¹ç›®é‡Œæ¥å…¥äº†Viteï¼ˆdev modeï¼‰ï¼Œä¸ºå¼€å‘ææ•ˆã€‚æ•ˆæœæ˜¯çœŸçš„çŒ›ã€‚
é¡¹ç›®å¯åŠ¨é€Ÿåº¦æå‡70%-80%ï¼ŒHMRç›´æ¥ç¢¾å‹webpack dev server
ä¸ºäº†æ›´åŠ ç²¾å‡†çš„è®¡ç®—æ”¶]]></description>
            <content:encoded><![CDATA[<h1 id="viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸Š" tabindex="-1">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸Šï¼‰ <a class="header-anchor" href="#viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸Š" aria-label="Permalink to &quot;Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸Šï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ€è¿‘åœ¨webpacké¡¹ç›®é‡Œæ¥å…¥äº†Viteï¼ˆdev modeï¼‰ï¼Œä¸ºå¼€å‘ææ•ˆã€‚æ•ˆæœæ˜¯çœŸçš„çŒ›ã€‚</p>
<p>é¡¹ç›®å¯åŠ¨é€Ÿåº¦æå‡70%-80%ï¼ŒHMRç›´æ¥ç¢¾å‹webpack dev server</p>
<p>ä¸ºäº†æ›´åŠ ç²¾å‡†çš„è®¡ç®—æ”¶ç›Šï¼Œå°±éœ€è¦å°†Viteå¯åŠ¨ç›¸å…³çš„æŒ‡æ ‡è¿›è¡Œä¸ŠæŠ¥ï¼ˆå¯åŠ¨æ—¶é—´ï¼ŒHMRï¼Œé¡µé¢åŠ è½½ç­‰ç­‰æ—¶é—´ï¼‰</p>
<p>ä¸ºæ­¤å°±è¦é€šè¿‡å¼€å‘æ’ä»¶æ”¶é›†è¿™äº›ä¿¡æ¯ï¼Œç„¶åé€šè¿‡åŸ‹ç‚¹ä¸ŠæŠ¥sdkä¸ŠæŠ¥åˆ°æ•°æ®åˆ†æçš„å¹³å°</p>
<h2 id="é‡åˆ°çš„é—®é¢˜" tabindex="-1">é‡åˆ°çš„é—®é¢˜ <a class="header-anchor" href="#é‡åˆ°çš„é—®é¢˜" aria-label="Permalink to &quot;é‡åˆ°çš„é—®é¢˜&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šè¿‡æŸ¥é˜…<a href="https://vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a>å¹¶æœªæ‰¾åˆ°ç›¸å…³çš„é’©å­ç›´æ¥è·å–åˆ°è¿™äº›æŒ‡æ ‡</p>
<p>ä½†åœ¨å¼€å‘çš„æ—¶å€™æ·»åŠ  <code>--debug</code>å°±èƒ½å¾ˆè¯¦ç»†çš„çœ‹åˆ°æ‰€æœ‰èµ„æºçš„å¤„ç†æ—¶é—´ï¼ŒHMRï¼Œè¯¦ç»†çš„å¯åŠ¨æ—¶é—´ç­‰ç­‰</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "dev"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"vite --debug"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> dev</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjcyMjY1NzQxMQ==632722657411" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¸ºæ­¤åªèƒ½é€šè¿‡ä¸€äº›hackçš„æ‰‹æ®µè·å–è¿™äº›æŒ‡æ ‡äº†ï¼Œä¸‹é¢å°†å±•å¼€è¯¦ç»†çš„ä»‹ç»</p>
<h2 id="æœŸæœ›" tabindex="-1">æœŸæœ› <a class="header-anchor" href="#æœŸæœ›" aria-label="Permalink to &quot;æœŸæœ›&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šè¿‡å‘ç›®æ ‡å·¥ç¨‹å¼•å…¥æ’ä»¶ï¼Œé€šè¿‡ç‰¹å®šçš„å›æ‰å‡½æ•°å³å¯è·å–åˆ°<code>debug</code>æ¨¡å¼ä¸‹åé¦ˆçš„å„ç§ä¿¡æ¯</p>
<h2 id="å‡†å¤‡å·¥ä½œ" tabindex="-1">å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;å‡†å¤‡å·¥ä½œ&quot;">&ZeroWidthSpace;</a></h2>
<p>æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹å¼€å‘æ­¥éª¤</p>
<h3 id="åˆå§‹åŒ–å·¥ç¨‹" tabindex="-1">åˆå§‹åŒ–å·¥ç¨‹ <a class="header-anchor" href="#åˆå§‹åŒ–å·¥ç¨‹" aria-label="Permalink to &quot;åˆå§‹åŒ–å·¥ç¨‹&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ›å»ºæ’ä»¶ç›®å½•</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite-plugin-monitor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite-plugin-monitor</span></span></code></pre>
</div><p>åˆå§‹åŒ–<code>pkg.json</code></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -y</span></span></code></pre>
</div><p>å®‰è£…å¿…è¦ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> typescript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @types/node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> rimraf</span></span></code></pre>
</div><p>æ·»åŠ å¿…è¦çš„ä¸¤ä¸ªæŒ‡ä»¤<code>dev</code>,<code>build</code>ï¼Œé…ç½®å…¥å£æ–‡ä»¶<code>dist/index.js</code></p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "main"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dist/index.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "scripts"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "dev"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"tsc -w -p ."</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "build"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"rimraf dist &#x26;&#x26; tsc -p ."</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…¶ä¸­<code>dev</code>ç¯å¢ƒä¸‹æ·»åŠ äº†<code>-w(--watch)</code>å‚æ•°ï¼Œå½“æ–‡ä»¶æœ‰å˜åŠ¨æ—¶ï¼Œä»¥ä¾¿å®æ—¶çš„è¿›è¡Œæ›´æ–°</p>
<p><code>rimraf</code>çš„ä½œç”¨æ˜¯æ›¿ä»£<code>rm -rf</code>æŒ‡ä»¤ï¼Œä¸”æ˜¯è·¨å¹³å°çš„ï¼Œwindowsä¸‹åŒæ ·ç”Ÿæ•ˆ</p>
<p>æ’ä»¶ä½¿ç”¨<code>typescript</code>å¼€å‘ï¼Œæ›´æœ‰åŠ©äºæ’ä»¶åç»­çš„ç»´æŠ¤</p>
<p>å…¶ä¸­<code>build</code>ç›´æ¥ä½¿ç”¨<code>typescript</code>æä¾›çš„é»˜è®¤<code>tsc</code>æŒ‡ä»¤ï¼Œå¯¹tsç›´æ¥è¿›è¡Œè½¬æ¢</p>
<p>æ ¹ç›®å½•åˆ›å»º <code>tsconfig.json</code> å†…å®¹å¦‚ä¸‹</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "compilerOptions"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "target"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"es2015"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "moduleResolution"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"node"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "strict"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "declaration"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "noUnusedLocals"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "esModuleInterop"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "outDir"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"dist"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "module"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"commonjs"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "lib"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ESNext"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"DOM"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "sourceMap"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "include"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./src"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span></code></pre>
</div><p>åœ¨ <code>src</code> ç›®å½•ä¸‹è¿›è¡Œå¼€å‘ï¼Œé‡Œé¢å­˜æ”¾æˆ‘ä»¬çš„æºç </p>
<h3 id="ç›®å½•ç»“æ„" tabindex="-1">ç›®å½•ç»“æ„ <a class="header-anchor" href="#ç›®å½•ç»“æ„" aria-label="Permalink to &quot;ç›®å½•ç»“æ„&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ€ç»ˆç›®å½•å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     # æ’ä»¶å…¥å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> types</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # ç±»å‹å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> utils</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">     â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # å·¥å…·æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> tsconfig.json</span></span></code></pre>
</div><h3 id="ç®€å•æ’ä»¶ç¤ºä¾‹" tabindex="-1">ç®€å•æ’ä»¶ç¤ºä¾‹ <a class="header-anchor" href="#ç®€å•æ’ä»¶ç¤ºä¾‹" aria-label="Permalink to &quot;ç®€å•æ’ä»¶ç¤ºä¾‹&quot;">&ZeroWidthSpace;</a></h3>
<p>æ ¹æ®æ’ä»¶å¼€å‘æ–‡æ¡£ï¼Œåœ¨<code>src/index.ts</code>æ–‡ä»¶ä¸‹ç¼–å†™å¦‚ä¸‹ç®€å•çš„ä»£ç ;</p>
<ul>
<li>nameï¼šæ ‡è¯†æ’ä»¶çš„åç§°</li>
<li>applyï¼šæ ‡è¯†æ’ä»¶åœ¨å“ªä¸ªæ—¶æœŸå·¥ä½œ(serve|build)ï¼Œé»˜è®¤éƒ½ä¼šè°ƒç”¨</li>
<li>configï¼šè¿™ä¸ªé’©å­æ¥æ”¶åŸå§‹ç”¨æˆ·é…ç½®ï¼ˆå‘½ä»¤è¡Œé€‰é¡¹æŒ‡å®šçš„ä¼šä¸é…ç½®æ–‡ä»¶åˆå¹¶ï¼‰å’Œä¸€ä¸ªæè¿°é…ç½®ç¯å¢ƒçš„å˜é‡</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Plugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite-plugin-monitor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'serve'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">userConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(userConfig);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(env)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å¯ä»¥åšè¿›ä¸€æ­¥çš„ä¿®æ”¹ï¼Œä¼šè‡ªåŠ¨åˆå…¥å½“å‰çš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸€ä¸ªæ‰“å°Viteé…ç½®çš„æ’ä»¶å°±æå®šäº†ï¼Œä¸‹é¢å°±æ˜¯æµ‹è¯•æˆ‘ä»¬å¼€å‘çš„æ’ä»¶</p>
<h3 id="æœ¬åœ°æµ‹è¯•æ’ä»¶" tabindex="-1">æœ¬åœ°æµ‹è¯•æ’ä»¶ <a class="header-anchor" href="#æœ¬åœ°æµ‹è¯•æ’ä»¶" aria-label="Permalink to &quot;æœ¬åœ°æµ‹è¯•æ’ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>é¦–å…ˆæ˜¯è½¬æ¢æˆ‘ä»¬çš„<code>ts</code>=&gt; <code>js</code> ï¼Œæ‰§è¡Œå‰é¢é…ç½®çš„æŒ‡ä»¤<code>yarn dev</code>ï¼Œå°±ä¼šçœ‹è§ç”Ÿæˆäº†ä¸€ä¸ªdistç›®å½•ï¼Œé‡Œé¢æœ‰è½¬æ¢åçš„ä»£ç </p>
<p>æ¥ç€æ‰§è¡Œ<code>npm link</code>åœ¨å…¨å±€ç”Ÿæˆä¸€ä¸ªè½¯è¿æ¥ï¼ŒæŒ‡å‘å½“å‰é¡¹ç›®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span></span></code></pre>
</div><p>åœ¨ä¸€ä¸ªviteé¡¹ç›®é‡Œçš„æ‰§è¡Œ<code>npm link vite-plugin-monitor</code>(monitoræ ¹æ®å®é™…æƒ…å†µæ›¿æ¢)ï¼Œå‘ç›®æ ‡é¡¹ç›®åŠ å…¥æ­¤ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite-plugin-monitor</span></span></code></pre>
</div><p>æ¥ç€å°±å¯ä»¥åœ¨Viteé¡¹ç›®çš„<code>vite.config.js</code>é…ç½®æ–‡ä»¶ä¸­åŠ å…¥æˆ‘ä»¬çš„æ’ä»¶äº†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@vitejs/plugin-vue'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> vitePluginMonitor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite-plugin-monitor'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// https://vitejs.dev/config/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    vitePluginMonitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æ¥ç€é€šè¿‡é…ç½®çš„æŒ‡ä»¤å¯åŠ¨<code>vite</code>ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬æ’ä»¶çš„æ‰“å°çš„é…ç½®æ–‡ä»¶å†…å®¹äº†</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjc1NTgxNDM4Nw==632755814387" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç”±äºæ˜¯é€šè¿‡è½¯è¿æ¥çš„æ–¹å¼å¼•å…¥çš„æ’ä»¶ï¼Œé‚£ä¹ˆåœ¨æ’ä»¶å·¥ç¨‹é‡Œçš„ä»»æ„æ›´æ”¹éƒ½ä¼šå®æ—¶ç”Ÿæ•ˆï¼Œä¹Ÿå°±é¿å…äº†é¢‘ç¹çš„æ‰§è¡Œ<code>yarn add file:localProjectDir</code></p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»äº†<code>monitor</code>æ’ä»¶å¼€å‘çš„èƒŒæ™¯ï¼Œè¦è§£å†³çš„é—®é¢˜ï¼Œç›®æ ‡ä»¥åŠå¼€å‘æ’ä»¶æ‰€éœ€çš„ä¸€äº›åˆ—å‡†å¤‡å·¥ä½œ</p>
<p><a href="./vite-plugin-monitor2.html">ä¸‹ä¸€ç¯‡æ–‡ç« </a>å°†è¯¦ç»†ä»‹ç»åŠŸèƒ½çš„å®ç°</p>
<p>æŸ¥çœ‹ï¼š<a href="https://github.com/ATQQ/vite-plugin-monitor" target="_blank" rel="noreferrer">ä»“åº“æºç </a></p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMjcyMjY1NzQxMQ==632722657411" length="0" type="image//mdImg/MTYzMjcyMjY1NzQxMQ==632722657411"/>
        </item>
        <item>
            <title><![CDATA[Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸­ï¼‰]]></title>
            <link>https://www.dmsrs.org/technology/learn/vite-plugin-monitor2.html</link>
            <guid>https://www.dmsrs.org/technology/learn/vite-plugin-monitor2.html</guid>
            <pubDate>Mon, 27 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†å¼€å‘æ’ä»¶æ‰€éœ€çš„å‡†å¤‡å·¥ä½œï¼Œä»¥åŠæ­¤æ¬¡è¦å¼€å‘çš„æ’ä»¶å°†è¦è§£å†³çš„é—®é¢˜
 åŠŸèƒ½å¼€å‘
æœ‰äº†å‰æ–‡çš„é“ºå«å†…å®¹ï¼Œä¸‹é¢å°±æ˜¯åŠŸèƒ½å¼€å‘
 è·å–å¯åŠ¨è€—æ—¶
é¡¹ç›®å¯åŠ¨åä¼šåœ¨ç»ˆç«¯ä¸­è¾“å‡º`ready in xx]]></description>
            <content:encoded><![CDATA[<h1 id="viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸­" tabindex="-1">Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸­ï¼‰ <a class="header-anchor" href="#viteæ’ä»¶å¼€å‘çºªå®-vite-plugin-monitor-ä¸­" aria-label="Permalink to &quot;Viteæ’ä»¶å¼€å‘çºªå®ï¼švite-plugin-monitorï¼ˆä¸­ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./vite-plugin-monitor1.html">ä¸Šä¸€ç¯‡</a>æ–‡ç« ä¸»è¦ä»‹ç»äº†å¼€å‘æ’ä»¶æ‰€éœ€çš„å‡†å¤‡å·¥ä½œï¼Œä»¥åŠæ­¤æ¬¡è¦å¼€å‘çš„æ’ä»¶å°†è¦è§£å†³çš„é—®é¢˜</p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ‰äº†å‰æ–‡çš„é“ºå«å†…å®¹ï¼Œä¸‹é¢å°±æ˜¯åŠŸèƒ½å¼€å‘</p>
<h3 id="è·å–å¯åŠ¨è€—æ—¶" tabindex="-1">è·å–å¯åŠ¨è€—æ—¶ <a class="header-anchor" href="#è·å–å¯åŠ¨è€—æ—¶" aria-label="Permalink to &quot;è·å–å¯åŠ¨è€—æ—¶&quot;">&ZeroWidthSpace;</a></h3>
<p>é¡¹ç›®å¯åŠ¨åä¼šåœ¨ç»ˆç«¯ä¸­è¾“å‡º<code>ready in xxms</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjkyMjIxNzI0Nw==632922217247" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¸ºæ­¤å’±ä»¬ä½¿ç”¨Vs Codeåœ¨<a href="https://github1s.com/vitejs/vite" target="_blank" rel="noreferrer">æºç </a>ä¸­æœä¸€ä¸‹è¿™ä¸ªå…³é”®å­—</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjkyMjU5MDI2Mg==632922590262" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°æ­¤éƒ¨åˆ†ä»£ç åœ¨æºç ä¸­å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server.config.logger.info</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// @ts-ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (global.__vite_start_time) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // @ts-ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> startupDuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> performance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> global.__vite_start_time</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">chalk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cyan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`ready in ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Math</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ceil</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">startupDuration</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}ms.`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™ä¸ª<code>performance.now()</code>ç­‰åŒäº<code>Date.now()</code>å³å½“å‰æ—¶é—´ï¼Œé€šè¿‡<code>global.__vite_start_time</code>å°±èƒ½è·å–åˆ°æœåŠ¡å¯åŠ¨æ—¶é—´</p>
<p>æˆ‘ä»¬å°±ä»è¿™ä¸ª<code>info</code>æ–¹æ³•å…¥æ‰‹ï¼Œç»™å®ƒé‡å®šä¹‰ä¸€ä¸‹ï¼Œé€šè¿‡<code>configureServer</code>é’©å­å¯ä»¥è·å–åˆ°serverå®ä¾‹</p>
<p><strong>index.ts</strong></p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Plugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Monitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> startTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> global.__vite_start_time</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'vite-plugin-monitor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'serve'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server.config.logger;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // æ‹¦æˆªinfoæ–¹æ³•çš„è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      server.config.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> _info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // è°ƒç”¨åŸinfoæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        info.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // é€šè¿‡å­—ç¬¦ä¸²å†…å®¹è¿›è¡Œä¸€ä¸ªç®€å•çš„åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (str.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ready in'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'startupDuration'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¯åŠ¨ä¸€ä¸ªé¡¹ç›®çœ‹çœ‹æ•ˆæœï¼Œæˆäº†ã€‚
<img src="https://img.cdn.sugarat.top/mdImg/MTYzMjkyMzY1MjAzMg==632923652032" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="hmræ—¶é—´è·å–" tabindex="-1">HMRæ—¶é—´è·å– <a class="header-anchor" href="#hmræ—¶é—´è·å–" aria-label="Permalink to &quot;HMRæ—¶é—´è·å–&quot;">&ZeroWidthSpace;</a></h3>
<p>çƒ­æ›´æ–°æ—¶ï¼Œç»ˆç«¯ä¸­ä¼šå‡ºç°ä¸‹é¢çš„æ—¥å¿—</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjkyNDA0MzU2OQ==632924043569" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŒç†æºç é‡Œæœä¸€æœï¼Œèƒ½å¤Ÿå®šä½å‡ºå¦‚ä¸‹å†…å®¹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    updates</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">green</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`hmr update `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { clear: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, timestamp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>æš‚ä»¥æ‰“å°è¿™ä¸ªæ—¥å¿—çš„æ—¶é—´ä½œä¸ºHMRå¼€å§‹çš„æ—¶é—´</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> server.config.logger;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server.config.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> _info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  info.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (str.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hmr update'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
</div><p>è§¦å‘HMRæ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå‘å‡ºä¸€ä¸ªè·å–èµ„æºçš„è¯·æ±‚ï¼Œè¯·æ±‚æºå¸¦äº†ä¸€ä¸ªimportå‚æ•°ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªå‚æ•°æ¥æ ‡è¯†è¿™ä¸ªç‰¹å®šçš„è¯·æ±‚</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http://localhost:8080/src/pages/home/index.vue?import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x26;t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">1632924377207</span></span></code></pre>
</div><p>é’©å­ä¸­çš„serverå®ä¾‹åŒ…å«<code>middlewares</code>å±æ€§å¯ä»¥å‘ä¸Šæ·»åŠ è‡ªå®šä¹‰çš„ä¸­é—´ä»¶å¤„ç†æ–¹æ³•</p>
<ul>
<li>é€šè¿‡URLå®ä¾‹è§£æ<code>search</code>å‚æ•°ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦åŒ…å«<code>import&amp;</code></li>
<li>é‡å®šä¹‰<code>end</code>æ–¹æ³•ï¼Œåœ¨èµ„æºä¼ å›åˆ°å®¢æˆ·ç«¯åæ‰“å°è€—æ—¶</li>
</ul>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">server.middlewares.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">search</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req.url, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`http://${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">req</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">headers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    search.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'import&#x26;'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> _end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // åœ¨èµ„æºè¿”å›åæ‰“å°è€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      end.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> startTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>äº‹å®ä¸Šé€šè¿‡<code>--debug</code>å¯åŠ¨æœåŠ¡ï¼Œèƒ½çœ‹åˆ°åœ¨HMRæ—¶ä¼šæ‰“å°4ä¸ªæ—¶é—´</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMjkyNTQzMzEwNw==632925433107" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç›®å‰æ–¹æ³•ä»…ä»…å¾—åˆ°äº†<code>vite:hmr</code>éƒ¨åˆ†çš„æ—¶é—´ï¼Œä¸å®é™…è€—æ—¶è¿˜æœ‰ä¸€ä¸ä¸å·®å¼‚</p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯åªèƒ½é€šè¿‡<code>--debug</code>çœ‹åˆ°ï¼Œä¸‹ä¸€æ­¥çš„è®¡åˆ’å°±æ˜¯hackï¼Œæ¨¡æ‹Ÿä¸€ä¸‹debugä¸‹çš„è¡Œä¸ºï¼Œå°†debugçš„æ‰“å°çš„æ•°æ®éƒ½æ‹¦æˆªä¸‹æ¥
ç”±äºæ—¶é—´å…³ç³»ï¼Œè¿™éƒ¨åˆ†hackè¿˜æ²¡å®Œæˆã€‚å‡†å¤‡å‡æœŸæŠ½æ—¶é—´å®ç°ä¸€ä¸‹ã€‚ä¸‹ä¸€ç¯‡æ–‡ç« å°†è¯¦ç»†çš„ä»‹ç»æœ€ç»ˆå®ç°ã€‚</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMjkyMjIxNzI0Nw==632922217247" length="0" type="image//mdImg/MTYzMjkyMjIxNzI0Nw==632922217247"/>
        </item>
        <item>
            <title><![CDATA[é©¬ä¸Šä¸­ç§‹äº†ï¼ŒæŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…”]]></title>
            <link>https://www.dmsrs.org/technology/learn/mid-autumn-festival.html</link>
            <guid>https://www.dmsrs.org/technology/learn/mid-autumn-festival.html</guid>
            <pubDate>Sat, 11 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
é©¬ä¸Šä¸­ç§‹èŠ‚å•¦ï¼Œæ˜é‡‘åˆå¼€å§‹æ•´æ´»äº†ï¼Œæ°å·§æœ€è¿‘å‡†å¤‡åšçš„å·¥å…·ä¼šæ¶‰åŠåˆ°é¼ æ ‡æŒ‡é’ˆçš„å˜åŠ¨ï¼Œå°±é¡ºæ‰‹å…ˆå†™ä¸ªdemoè¹­è¹­æ´»åŠ¨äº†ã€‚
é¡ºä¾¿æå‰ç¥å¤§å®¶ğŸ‘ä¸­ç§‹èŠ‚å¿«ä¹ã€‚
å½“ç„¶è¿™ä¸ªé¼ æ ‡æŒ‡é’ˆçš„å˜åŠ¨åªåœ¨Webåº”ç”¨ä¸­ç”Ÿæ•ˆ
æ–¹ä¾¿çš„è¯]]></description>
            <content:encoded><![CDATA[<h1 id="é©¬ä¸Šä¸­ç§‹äº†-æŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…”" tabindex="-1">é©¬ä¸Šä¸­ç§‹äº†ï¼ŒæŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…” <a class="header-anchor" href="#é©¬ä¸Šä¸­ç§‹äº†-æŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…”" aria-label="Permalink to &quot;é©¬ä¸Šä¸­ç§‹äº†ï¼ŒæŠŠé¼ æ ‡æŒ‡é’ˆå˜ä¸ºå°ç‰å…”&quot;">&ZeroWidthSpace;</a></h1>
<blockquote>
<p>æˆ‘æ­£åœ¨å‚åŠ ä¸­ç§‹åˆ›æ„æŠ•ç¨¿å¤§èµ›ï¼Œè¯¦æƒ…è¯·çœ‹ï¼š<a href="https://juejin.cn/post/7003154195826081800" target="_blank" rel="noreferrer">ä¸­ç§‹åˆ›æ„æŠ•ç¨¿å¤§èµ›</a>â€</p>
</blockquote>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>é©¬ä¸Šä¸­ç§‹èŠ‚å•¦ï¼Œæ˜é‡‘åˆå¼€å§‹<a href="https://juejin.cn/post/7003154195826081800" target="_blank" rel="noreferrer">æ•´æ´»</a>äº†ï¼Œæ°å·§æœ€è¿‘å‡†å¤‡åšçš„å·¥å…·ä¼šæ¶‰åŠåˆ°é¼ æ ‡æŒ‡é’ˆçš„å˜åŠ¨ï¼Œå°±é¡ºæ‰‹å…ˆå†™ä¸ªdemoè¹­è¹­æ´»åŠ¨äº†ã€‚</p>
<p>é¡ºä¾¿æå‰ç¥å¤§å®¶ğŸ‘ä¸­ç§‹èŠ‚å¿«ä¹ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªé¼ æ ‡æŒ‡é’ˆçš„å˜åŠ¨åªåœ¨Webåº”ç”¨ä¸­ç”Ÿæ•ˆ</p>
<p>æ–¹ä¾¿çš„è¯å¯ä»¥<a href="https://juejin.cn/post/7006592666846625823" target="_blank" rel="noreferrer">åŸæ–‡</a>æˆ³ä¸ªèµ</p>
<h2 id="æ•ˆæœå¦‚ä¸‹" tabindex="-1">æ•ˆæœå¦‚ä¸‹ <a class="header-anchor" href="#æ•ˆæœå¦‚ä¸‹" aria-label="Permalink to &quot;æ•ˆæœå¦‚ä¸‹&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMTM0MDYwODYyOQ==631340608629" alt="å›¾ç‰‡" loading="lazy"></p>
<p>emmmmm...åŠ¨å›¾æ—¶é—´è¾ƒé•¿ï¼Œéœ€è¦ç­‰ä¸€ä¼šå„¿æ•ˆæœæ‰å‡ºæ¥</p>
<h2 id="ç ä¸Šä½“éªŒ" tabindex="-1">ç ä¸Šä½“éªŒ <a class="header-anchor" href="#ç ä¸Šä½“éªŒ" aria-label="Permalink to &quot;ç ä¸Šä½“éªŒ&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨devtoolsä¸­è¿è¡Œä¸‹é¢è¿™æ®µç¥ç§˜ä»£ç å³å¯ï¼Œå®ç°æºç è§<a href="https://github.com/ATQQ/demos/blob/main/yuebingCursor/index.js" target="_blank" rel="noreferrer">æ­¤å¤„</a></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'https://img.cdn.sugarat.top/demo/js-sdk/zq-rabbit/0.0.2/index.js'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script)</span></span></code></pre>
</div><p>å°†æ­¤éƒ¨åˆ†ä»£ç åŠ å…¥åˆ°ç›®æ ‡é¡µé¢ä¸­å³å¯</p>
<h2 id="å®ç°æ€è·¯" tabindex="-1">å®ç°æ€è·¯ <a class="header-anchor" href="#å®ç°æ€è·¯" aria-label="Permalink to &quot;å®ç°æ€è·¯&quot;">&ZeroWidthSpace;</a></h2>
<p>ä»åŠ¨å›¾ä¸­çœ‹åˆ°å…±æœ‰ä¸¤ç§å…ƒç´ ï¼š</p>
<ol>
<li>é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œé¼ æ ‡è¢«æ›¿æ¢æˆäº†ç‰å…”</li>
<li>ç‰å…”çš„å°¾å·´å¤„è·Ÿç€ä¸€ä¸²æœˆé¥¼ğŸ¥®</li>
</ol>
<p>ä¸‹é¢é€šè¿‡QAçš„æ–¹å¼ï¼Œå°†å¼€å‘ä¸­æ¶‰åŠåˆ°çš„é—®é¢˜å…ˆè¿‡ä¸€ä¸‹ã€‚</p>
<h3 id="è·å¾—é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®" tabindex="-1">è·å¾—é¼ æ ‡æŒ‡é’ˆçš„ä½ç½® <a class="header-anchor" href="#è·å¾—é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®" aria-label="Permalink to &quot;è·å¾—é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡ç›‘å¬<code>window</code>ä¸Šçš„<code>mousemove</code>äº‹ä»¶ï¼Œå³å¯è·å–åˆ°é¼ æ ‡ç§»åŠ¨æ—¶çš„ä½ç½®å‚æ•°</p>
<h3 id="éšè—åŸæ¥çš„æŒ‡é’ˆ" tabindex="-1">éšè—åŸæ¥çš„æŒ‡é’ˆ <a class="header-anchor" href="#éšè—åŸæ¥çš„æŒ‡é’ˆ" aria-label="Permalink to &quot;éšè—åŸæ¥çš„æŒ‡é’ˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>cssæœ‰ä¸€ä¸ªå±æ€§<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/cursor" target="_blank" rel="noreferrer">cursor</a>å¯ä»¥ç”¨äºè®¾ç½®æŒ‡é’ˆçš„ç±»å‹ã€‚æˆ‘ä»¬å°†æ•è·äº‹ä»¶çš„dom(event.target)çš„cursorè®¾ç½®ä¸º<code>none</code>å³å¯</p>
<h3 id="å®ç°æŒ‡é’ˆçš„å˜æ›´" tabindex="-1">å®ç°æŒ‡é’ˆçš„å˜æ›´ <a class="header-anchor" href="#å®ç°æŒ‡é’ˆçš„å˜æ›´" aria-label="Permalink to &quot;å®ç°æŒ‡é’ˆçš„å˜æ›´&quot;">&ZeroWidthSpace;</a></h3>
<p>è§£å†³äº†ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªç®€å•çš„<code>dom</code>å…ƒç´ æ¥æ›¿ä»£æˆ‘ä»¬çš„æŒ‡é’ˆï¼Œé€šè¿‡å®æ—¶è·å–åˆ°é¼ æ ‡çš„ä½ç½®ï¼Œå®æ—¶æ›´æ–°æˆ‘ä»¬çš„domå…ƒç´ ä½ç½®å³å¯</p>
<h3 id="å®ç°é¼ æ ‡è½¨è¿¹" tabindex="-1">å®ç°é¼ æ ‡è½¨è¿¹ <a class="header-anchor" href="#å®ç°é¼ æ ‡è½¨è¿¹" aria-label="Permalink to &quot;å®ç°é¼ æ ‡è½¨è¿¹&quot;">&ZeroWidthSpace;</a></h3>
<p>æ¯ä¸ªä¸€æ®µæ—¶é—´ï¼ˆå¦‚30msï¼‰è®°å½•ä¸€ä¸‹é¼ æ ‡çš„ä½ç½®ï¼Œç„¶åä¸ç»˜åˆ¶æŒ‡é’ˆä¸€æ ·çš„é€»è¾‘ï¼Œå°†è½¨è¿¹ç”¨æœˆé¥¼ğŸ¥®ç»˜åˆ¶å‡ºæ¥</p>
<p>è¿™é‡Œåªæè¿°äº†å¼€å‘ä¸­åˆæœŸä¼šé‡åˆ°çš„é—®é¢˜ï¼Œè¿˜æœ‰ä¸€äº›å…¶å®ƒé—®é¢˜å°†åœ¨ä¸‹é¢è¯¦ç»†å®ç°éƒ¨åˆ†è¿›è¡Œä»‹ç»</p>
<h2 id="ç‰å…”æŒ‡é’ˆå®ç°" tabindex="-1">ç‰å…”æŒ‡é’ˆå®ç° <a class="header-anchor" href="#ç‰å…”æŒ‡é’ˆå®ç°" aria-label="Permalink to &quot;ç‰å…”æŒ‡é’ˆå®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›‘å¬<code>mousemove</code>äº‹ä»¶ï¼Œè·å–æŒ‡é’ˆç›¸å¯¹å±å¹•é¡¶éƒ¨ä¸å·¦ä¾§ä½ç½®ä¿¡æ¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mousemove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>åˆ›å»ºä¸€ä¸ªå…ƒç´ ï¼Œè®¾ç½®å…¶èƒŒæ™¯å›¾ä¸ºç‰å…”ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°ä¸»æ–‡æ¡£ä¸­ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›ä½ç½®/å½¢çŠ¶ç›¸å…³çš„csså±æ€§ã€‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '30px'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cursor.id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'cursor'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    addStyles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cursor, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    #cursor{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        background-image:url(https://img.cdn.sugarat.top/mdImg/MTYzMTMyNDYwNTgzMQ==631324605831);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        width:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        height:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        background-size:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        position:fixed;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        display:none;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        cursor:none;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        transform: translate(-30%, -20%);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cursor)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cursor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cursor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createCursor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å·¥å…·æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> addStyles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">styles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> style</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'style'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    style.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> styles</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(style)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'div'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tag)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç¼–å†™æ›´æ–°ç‰å…”ä½ç½®çš„æ–¹æ³•<code>refreshCursorPos</code>ï¼Œå¹¶åœ¨ä¸€æ®µæ—¶é—´åï¼Œè®©æŒ‡é’ˆæ¢å¤åŸçŠ¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> refreshCursorPos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cursor.style.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'block'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cursor.style.cursor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'none'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cursor.style.left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}px`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    cursor.style.top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}px`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä¸€æ®µæ—¶é—´åéšè—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (refreshCursorPos.timer) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(refreshCursorPos.timer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    refreshCursorPos.timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        cursor.style.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'none'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸æ­¤å‰çš„æ–¹æ³•ç»“åˆï¼Œå¹¶å°†ç›®æ ‡å…ƒç´ çš„æŒ‡é’ˆéšè—ä¸€æ®µæ—¶é—´ï¼Œéšè—ä¸æ¢å¤è¿™é‡Œç”¨<code>WeakMap</code>æ¥åšä¸€ä¸ªè¾…åŠ©ï¼Œå­˜å‚¨èŠ‚ç‚¹ä¸å®šæ—¶å™¨çš„æ˜ å°„å…³ç³»ï¼Œåšä¸ªç®€å•çš„é˜²æŠ–</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> weakMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> WeakMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mousemove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // éšè—æ•è·mousemoveäº‹ä»¶çš„å…ƒç´ çš„æŒ‡é’ˆï¼Œå¹¶åœ¨ä¸€æ®µæ—¶é—´åæ¢å¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    e.target.style.cursor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'none'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> weakMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(e.target)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timer){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(timer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        e.target.style.cursor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'auto'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    weakMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(e.target,timer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ›´æ–°ç‰å…”ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    refreshCursorPos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(clientX, clientY)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>åˆ°è¿™é‡Œä½ ä»¥ä¸ºå°±ç»“æŸäº†ï¼Ÿå½“ç„¶æ²¡æœ‰ï¼Œæ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä½ çš„ç‰å…”æŒ‡é’ˆæ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYzMTM0NDc3ODMwMQ==631344778301" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å½“æœˆå…”å‡ºç°çš„æ—¶å€™ï¼Œæ— æ³•æ­£å¸¸ç‚¹å‡»è·³é“¾ï¼Œé€‰æ‹©æ–‡å­—å…ƒç´ </p>
<p>åŸå› æ˜¯ç”±äºï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½è¢«ä½ çš„&quot;æœˆå…”&quot;æ‰€æ•è·äº†</p>
<p>å¦‚ä½•é¿å…äº‹ä»¶è¢«ç›®æ ‡å…ƒç´ æ•è·ï¼Ÿ é€šè¿‡cssè®¾ç½®å…ƒç´ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/pointer-events" target="_blank" rel="noreferrer">pointer-events</a>å±æ€§ä¸º<code>none</code>å³å¯ï¼Œè®¾ç½®ä¸º<code>none</code>åï¼Œç›®æ ‡å…ƒç´ æ°¸è¿œä¸ä¼šæˆä¸ºé¼ æ ‡äº‹ä»¶çš„<code>target</code></p>
<p>äºæ˜¯ä¸º<code>#cursor</code>å…ƒç´ çš„cssï¼Œæ·»ä¸Šä¸€è¡Œæ ·å¼<code>pointer-events: none;</code>å³å¯</p>
<h2 id="æœˆé¥¼è½¨è¿¹å®ç°" tabindex="-1">æœˆé¥¼è½¨è¿¹å®ç° <a class="header-anchor" href="#æœˆé¥¼è½¨è¿¹å®ç°" aria-label="Permalink to &quot;æœˆé¥¼è½¨è¿¹å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ‰äº†ä¸Šé¢å®ç°ç‰å…”æŒ‡é’ˆçš„ç»éªŒå®ç°æœˆé¥¼è½¨è¿¹å°±å¾ˆå®¹æ˜“äº†</p>
<p>æ¯ä¸ªæœˆé¥¼å…ƒç´ å‡ç”¨ä¸€ä¸ªdivç»˜åˆ¶ï¼Œå°†æœˆé¥¼çš„åˆå§‹æ ·å¼è¡¨å…ˆåŠ å…¥åˆ°é¡µé¢ä¸­</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> orbitSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '40px'</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addStyles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(document.body, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    .orbit{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        background-image:url(https://img.cdn.sugarat.top/mdImg/MTYzMTMyNDMwODg2Nw==631324308867);</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        width:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">orbitSize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        height:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">orbitSize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        background-size:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">orbitSize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">orbitSize</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        position:fixed;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        display:none;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        cursor:none;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        pointer-events: none;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>æœˆé¥¼è½¨è¿¹ä¸Šé™çš„æœˆé¥¼è®¾ç½®ä¸º<strong>5</strong>ä¸ªï¼Œç®€å•çš„å¾ªç¯åˆ›å»ºä¸€ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ybCounts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 5</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> domList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ybCounts; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    d.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'orbit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    domList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(d)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(d)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ›å»ºä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æŒ‡é’ˆæœ€è¿‘çš„<strong>5</strong>ä¸ªä½ç½®ï¼Œä¸€ä¸ªä¸´æ—¶å˜é‡ç”¨äºåç»­è¾…åŠ©å­˜å‚¨è½¨è¿¹ç‚¹ä¿¡æ¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> posList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span></code></pre>
</div><p>ç¼–å†™<code>refreshOrbit</code>æ–¹æ³•ç”¨äºæ›´æ–°è½¨è¿¹ï¼š</p>
<ul>
<li>ç”±äºè½¨è¿¹æœ‰ä¸ªç¼©æ”¾çš„æ•ˆæœï¼Œè¶Šåˆ°åé¢çš„åœ†é¥¼è¶Šå°ï¼Œè¿™é‡Œé€šè¿‡<code>maxScale</code>ç¡®å®šæœ€å¤§çš„æ”¾å¤§å€æ•°</li>
<li>æ ¹æ®è½¨è¿¹ç‚¹ä¸ªæ•°ï¼Œç¡®å®šæ¯ä¸ª<code>æœˆé¥¼</code>æœ€ç»ˆçš„ç¼©æ”¾å€æ•°</li>
<li>æ ¹æ®å­˜å‚¨çš„æŒ‡é’ˆä½ç½®ä¿¡æ¯ï¼Œä¸€ä¸€å¯¹åº”çš„æ›´æ–°æœˆé¥¼ä½ç½®å³å¯</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> refreshOrbit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ·æ–°ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> maxScale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1.5</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> minScale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> maxScale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> domList.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    posList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> domList[idx]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        dom.style.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'block'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        dom.style.left </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}px`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        dom.style.top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}px`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        dom.style.transform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `scale(${</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> minScale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}) translate(10%,10%)`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (dom.timer) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            clearTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dom.timer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        dom.timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            dom.style.display </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'none'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nowTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // éš”ä¸€æ®µæ—¶é—´å­˜å‚¨ä¸€ä¸ª</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nowTime) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nowTime</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    posList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        x, y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åªå­˜å‚¨é™å®šçš„ä¸ªæ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (posList.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ybCounts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        posList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ—¶é—´å›æ‰ä¸­è°ƒç”¨æ›´æ–°è½¨è¿¹çš„æ–¹æ³•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mousemove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ...çœç•¥å…¶å®ƒä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ›´æ–°æœˆé¥¼è½¨è¿¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    refreshOrbit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(clientX, clientY)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h2 id="æ”¯æŒç§»åŠ¨ç«¯" tabindex="-1">æ”¯æŒç§»åŠ¨ç«¯ <a class="header-anchor" href="#æ”¯æŒç§»åŠ¨ç«¯" aria-label="Permalink to &quot;æ”¯æŒç§»åŠ¨ç«¯&quot;">&ZeroWidthSpace;</a></h2>
<p>è¿™ä¸ªç®€å•ï¼Œç›‘å¬<code>touchmove</code>äº‹ä»¶å³å¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'touchmove'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">clientY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e.changedTouches[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    refreshCursorPos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(clientX, clientY)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ›´æ–°æœˆé¥¼è½¨è¿¹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    refreshOrbit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(clientX, clientY)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>åç»­å‡†å¤‡æŠŠè¿™ä¸ªè®¾ç½®æŒ‡é’ˆæ ·å¼çš„è„šæœ¬æŠ½æˆä¸€ä¸ªé€šç”¨çš„js sdkå’Œå¤§å®¶åˆ†äº«ï¼Œè¿™æ ·æƒ³æ€ä¹ˆæ”¹æŒ‡é’ˆæ ·å¼å°±æ€ä¹ˆæ”¹</p>
<p>å¤§å®¶æœ‰æ›´å¥½çš„æ–¹æ¡ˆå¯ä»¥è¯„è®ºåŒºäº¤æµä¸€æ³¢</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYzMTM0MDYwODYyOQ==631340608629" length="0" type="image//mdImg/MTYzMTM0MDYwODYyOQ==631340608629"/>
        </item>
        <item>
            <title><![CDATA[ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ]]></title>
            <link>https://www.dmsrs.org/technology/learn/window-var.html</link>
            <guid>https://www.dmsrs.org/technology/learn/window-var.html</guid>
            <pubDate>Wed, 01 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
åœ¨åšä¸€ä¸ªWeb JS SDKï¼ˆAï¼‰æ—¶ï¼Œå†…éƒ¨ä¼šç”¨åˆ°å¦ä¸€ä¸ªWeb JS SDKï¼ˆBï¼‰çš„æ–¹æ³•ã€‚ï¼ˆæ–‡ä¸­åç»­ç”¨A/Bä»£æ›¿ä¸¤è€…ï¼‰
Bé€šå¸¸ä¼šæä¾›Scriptå’ŒNPMåŒ…ä¸¤ç§ä½¿ç”¨æ–¹å¼
::: warning ä½¿ç”¨]]></description>
            <content:encoded><![CDATA[<h1 id="ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ" tabindex="-1">ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ <a class="header-anchor" href="#ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ" aria-label="Permalink to &quot;ä¼˜é›…çš„å¤„ç†æŒ‚è½½windowä¸Šçš„å‡½æ•°å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µ&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨åšä¸€ä¸ªWeb JS SDKï¼ˆAï¼‰æ—¶ï¼Œå†…éƒ¨ä¼šç”¨åˆ°å¦ä¸€ä¸ªWeb JS SDKï¼ˆBï¼‰çš„æ–¹æ³•ã€‚ï¼ˆæ–‡ä¸­åç»­ç”¨A/Bä»£æ›¿ä¸¤è€…ï¼‰</p>
<p>Bé€šå¸¸ä¼šæä¾›Scriptå’ŒNPMåŒ…ä¸¤ç§ä½¿ç”¨æ–¹å¼</p>
<div class="warning custom-block"><p class="custom-block-title">ä½¿ç”¨npmå¼•å…¥çš„ç¼ºç‚¹</p>
<ul>
<li>å¢åŠ åŒ…ä½“ç§¯</li>
<li>å¦‚æœè¿™ä¸ªSDKè¢«Webåº”ç”¨å·²ç»å¼•å…¥è¿‡é¡µé¢ï¼Œé‚£ä¹ˆç†è®ºä¸Šå¯ç›´æ¥ä½¿ç”¨ï¼Œä¸å¿…è¦å†æ•´ä¸€ä¸ª</li>
</ul>
</div>
<p>å¦‚æœSDK BåŒ…å«scriptå¼•å…¥çš„æ–¹å¼ï¼Œç›®æ ‡é¡µé¢ä¹Ÿå­˜åœ¨å¯èƒ½ä¼šå¼•å…¥Bçš„æƒ…å†µï¼Œé‚£ä¹ˆä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Scriptå¼•å…¥ä¾èµ–çš„SDKçš„æƒ…å†µï¼šä¾‹å¦‚</p>
<ul>
<li>ç›®æ ‡é¡µé¢å·²ç»å¼•å…¥è¿‡JQueryï¼ˆç¬¦åˆSDK Açš„ä½¿ç”¨éœ€æ±‚ï¼‰ï¼Œé‚£ä¹ˆSDK Aå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å·²ç»å­˜åœ¨çš„<code>$</code>è¿›è¡Œæ“ä½œå³å¯ï¼Œä¸å¿…å†åˆ›å»ºjQueryçš„script</li>
<li>é€šå¸¸é¡µé¢éƒ½ä¼šæ¥å…¥åŸ‹ç‚¹ç›‘æ§ç­‰åŸºå»ºæœåŠ¡SDK Bï¼ŒSDK Aä¹Ÿéœ€è¦é€šè¿‡Bè¿›è¡Œæ•°æ®çš„ä¸ŠæŠ¥</li>
</ul>
<h2 id="è¡ç”Ÿéœ€æ±‚" tabindex="-1">è¡ç”Ÿéœ€æ±‚ <a class="header-anchor" href="#è¡ç”Ÿéœ€æ±‚" aria-label="Permalink to &quot;è¡ç”Ÿéœ€æ±‚&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>æŒ‚è½½åœ¨windowä¸Šçš„å‡½æ•°ä¸å­˜åœ¨æ—¶ï¼Œè‡ªåŠ¨é€šè¿‡scriptæˆ–è€…polyfillï¼ˆå«ç‰‡æ–¹æ³•ï¼‰è¡¥å…¨è¿™ä¸ªæ–¹æ³•</li>
<li>è°ƒç”¨æ–¹ä¾æ—§æŒ‰ç…§SDK Bçš„æ–‡æ¡£è¿›è¡Œä½¿ç”¨</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sdkB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(options)</span></span></code></pre>
</div><h2 id="è§£å†³æ–¹æ¡ˆ" tabindex="-1">è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;è§£å†³æ–¹æ¡ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç¼–å†™ä¸€ä¸ªé€šç”¨çš„å·¥å…·å‡½æ•°ï¼Œå¤„ç†ä¸Šè¿°çš„<code>è¡ç”Ÿéœ€æ±‚</code></p>
<p>æ–¹æ³•å®šä¹‰å¦‚ä¸‹</p>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> patchWindowFun</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    afterScriptLoad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    beforeAppendScript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    alreadyExistCB</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    defer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>æ€»å…±æ”¯æŒä¼ å…¥3ä¸ªå‚æ•°:</p>
<ol>
<li><code>key</code>ï¼šå¸¦åˆ¤æ–­çš„æ–¹æ³•åœ¨windowä¸Šçš„å±æ€§å</li>
<li><code>value</code>ï¼šä¸å­˜åœ¨æ—¶çš„å–å€¼ï¼ˆfunction è¡¨æ˜ç›´æ¥ä½¿ç”¨æ­¤æ–¹æ³•ä»£æ›¿ï¼Œstringç±»å‹è¡¨æ˜æ–¹æ³•æ¥æºå¤–éƒ¨åŠ è½½çš„jsèµ„æºï¼‰</li>
<li><code>options</code>ï¼šæ˜¯ä¸€äº›å¯é€‰çš„é…ç½®é¡¹ï¼Œä¸»è¦ç”¨äºå¤„ç†ä½¿ç”¨è¿‡å¤–éƒ¨jsèµ„æºåŠ è½½æ–¹æ³•çš„åœºæ™¯
<ol>
<li><code>afterScriptLoad</code>ï¼šèµ„æºåŠ è½½å®Œæˆåçš„å›æ‰</li>
<li><code>beforeAppendScript</code>ï¼šèµ„æºåŠ è½½å‰çš„å›æ‰</li>
<li><code>alreadyExistCB</code>ï¼šæ–¹æ³•å¦‚æœå·²ç»å­˜åœ¨æ‰§è¡Œçš„å›æ‰</li>
<li><code>async</code>ï¼šæ§åˆ¶scriptçš„<strong>async</strong>å±æ€§</li>
<li><code>defer</code>ï¼šæ§åˆ¶scriptçš„<strong>defer</strong>å±æ€§</li>
</ol>
</li>
</ol>
<p>ç”±äºå¤§å¤šæ•°web sdkéƒ½ä¼šå­˜åœ¨éœ€è¦è°ƒç”¨ç‰¹å®šå‡½æ•°æˆ–è€…æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µï¼Œå›ºæä¾›äº†<code>afterScriptLoad</code>,<code>beforeAppendScript</code>,<code>alreadyExistCB</code>ä¸‰ä¸ªé’©å­å‡½æ•°å¤„ç†ä¸åŒæ—¶æœºåˆå§‹åŒ–çš„æƒ…å†µ</p>
<h2 id="æ–¹æ³•å®ç°" tabindex="-1">æ–¹æ³•å®ç° <a class="header-anchor" href="#æ–¹æ³•å®ç°" aria-label="Permalink to &quot;æ–¹æ³•å®ç°&quot;">&ZeroWidthSpace;</a></h2>
<p>å¦‚æœç›®æ ‡å±æ€§å­˜åœ¨åˆ™ç›´æ¥æ‰§è¡Œç›¸åº”çš„å›æ‰ï¼Œä¸åšè¿›ä¸€æ­¥å¤„ç†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (window[key]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    alreadyExistCB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> alreadyExistCB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'already exist'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span></code></pre>
</div><p>ç›®æ ‡å±æ€§ä¸å­˜åœ¨ï¼Œä¼ å…¥çš„æ–¹æ³•å­˜åœ¨æ—¶ç›´æ¥è¿›è¡Œèµ‹å€¼</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å‡½æ•°ç›´æ¥èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span></code></pre>
</div><p>å‰©ä½™é€»è¾‘åˆ™æ˜¯å¤„ç†æ–¹æ³•ä»å¤–éƒ¨jsèµ„æºåŠ è½½çš„æƒ…å†µ</p>
<p>ç”±äºåŠ è½½scriptå¤§éƒ¨åˆ†æƒ…å†µæ˜¯å¼‚æ­¥çš„ï¼Œä¸šåŠ¡ä»£ç ä¸­å¯èƒ½å·²ç»è°ƒç”¨äº†ç›¸å…³æ–¹æ³•ï¼Œä¸ºæ­¤ä¸´æ—¶åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ”¶é›†ä¼ å…¥çš„å‚æ•°</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ä¸‹é¢çš„é€»è¾‘å°±æ˜¯å¤„ç†<code>script</code>åŠ è½½çš„é€»è¾‘</p>
<p>åœ¨jsèµ„æºåŠ è½½å®Œæˆåé€šè¿‡<code>apply</code>é…åˆ<code>forEach</code>å°†æå‰è°ƒç”¨æ–¹æ³•äº§ç”Ÿçš„å‚æ•°é‡æ–°æ­£ç¡®çš„æ‰§è¡Œä¸€æ¬¡</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">script.async </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">defer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">script.defer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">async</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">script.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  afterScriptLoad </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> afterScriptLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¤„ç†åŸæ¥æ²¡å¤„ç†çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window[key].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, param)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">beforeAppendScript </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> beforeAppendScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script)</span></span></code></pre>
</div><h2 id="å®Œæ•´æºç å¦‚ä¸‹" tabindex="-1">å®Œæ•´æºç å¦‚ä¸‹ <a class="header-anchor" href="#å®Œæ•´æºç å¦‚ä¸‹" aria-label="Permalink to &quot;å®Œæ•´æºç å¦‚ä¸‹&quot;">&ZeroWidthSpace;</a></h2>
<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> patchWindowFun</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    afterScriptLoad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    beforeAppendScript</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    alreadyExistCB</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    defer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å­˜åœ¨ä¸å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">alreadyExistCB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">afterScriptLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">beforeAppendScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (window[key]) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    alreadyExistCB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> alreadyExistCB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(key, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'already exist'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å‡½æ•°ç›´æ¥èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // script url</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'string'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.async </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">defer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.defer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">async</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      afterScriptLoad </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> afterScriptLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // å¤„ç†åŸæ¥æ²¡å¤„ç†çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      params.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">param</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        window[key].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, param)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    beforeAppendScript </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> beforeAppendScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›®å‰çš„æ–¹æ³•å®ç°ä»…é€‚ç”¨äºï¼Œ<strong>è°ƒç”¨çš„æ–¹æ³•ç›¸å¯¹ç‹¬ç«‹</strong>ä¸å½±å“æ­£å¸¸çš„äº¤äº’</p>
<p>å¦‚æœä¸šåŠ¡ä»£ç ä¾èµ–æ–¹æ³•çš„è¿”å›å€¼ï¼Œé‚£ä¹ˆå¼‚æ­¥é€šè¿‡<code>script</code>åŠ è½½çš„æ–¹æ³•æ–¹å¼å°†ä¸å¤ªé€‚ç”¨</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨]]></title>
            <link>https://www.dmsrs.org/bigWeb/js/immed-setInterval.html</link>
            <guid>https://www.dmsrs.org/bigWeb/js/immed-setInterval.html</guid>
            <pubDate>Sun, 29 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[é—®é¢˜æè¿°
éƒ¨åˆ†åœºæ™¯éœ€è¦ä½¿ç”¨å®šæ—¶å™¨å»¶è¿Ÿæˆ–è€…å¾ªç¯æ‰§è¡Œ
é€šå¸¸åœ¨å¾ªç¯åœºæ™¯ä¸‹åˆå¸Œæœ›é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ç«‹å³æ‰§è¡Œä¸€æ¬¡
å½“ç„¶è¿™ä¸ªå¤„ç†ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯çœ‹ä¸Šå»æ€»è§‰å¾—ä¸å¤ªä¼˜é›…
```js
function fn(){}
]]></description>
            <content:encoded><![CDATA[<h1 id="å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨" tabindex="-1">å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨ <a class="header-anchor" href="#å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨" aria-label="Permalink to &quot;å®ç°è°ƒç”¨å°±æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="é—®é¢˜æè¿°" tabindex="-1">é—®é¢˜æè¿° <a class="header-anchor" href="#é—®é¢˜æè¿°" aria-label="Permalink to &quot;é—®é¢˜æè¿°&quot;">&ZeroWidthSpace;</a></h2>
<p>éƒ¨åˆ†åœºæ™¯éœ€è¦ä½¿ç”¨å®šæ—¶å™¨å»¶è¿Ÿæˆ–è€…å¾ªç¯æ‰§è¡Œ</p>
<p>é€šå¸¸åœ¨å¾ªç¯åœºæ™¯ä¸‹åˆå¸Œæœ›é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ç«‹å³æ‰§è¡Œä¸€æ¬¡</p>
<p>å½“ç„¶è¿™ä¸ªå¤„ç†ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯çœ‹ä¸Šå»æ€»è§‰å¾—ä¸å¤ªä¼˜é›…</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> timer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fn,timeout)</span></span></code></pre>
</div><p>å’±çš„ç›®çš„æ˜¯æ•´ä¸ªä¼˜é›…çš„<code>setImmTimeout</code>å’Œ<code>setImmInterval</code>ï¼Œå³åœ¨è°ƒç”¨å¤Ÿä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡å›æ‰å‡½æ•°</p>
<blockquote>
<p>å…³äºå®ç°è¾ƒå‡†æ—¶çš„setTimeoutï¼Œå¯ä»¥è¿›ä¸€æ­¥é˜…è¯»<a href="https://mp.weixin.qq.com/s/JYfm8oiQmomkNnJIFWDkrQ" target="_blank" rel="noreferrer">è¿™ç¯‡æ–‡ç« </a>,æœ¬æ–‡ä¸æ¶‰åŠå®šæ—¶å™¨çš„å®ç°</p>
</blockquote>
<h2 id="å‰ç½®çŸ¥è¯†" tabindex="-1">å‰ç½®çŸ¥è¯† <a class="header-anchor" href="#å‰ç½®çŸ¥è¯†" aria-label="Permalink to &quot;å‰ç½®çŸ¥è¯†&quot;">&ZeroWidthSpace;</a></h2>
<p>å®šæ—¶å™¨çš„å‚æ•°æ„æˆ:</p>
<ol>
<li>funcï¼šè¢«è°ƒç”¨çš„å‡½æ•°</li>
<li>delayï¼šå»¶è¿Ÿçš„æ—¶é—´</li>
<li>(å¯é€‰)arg1-argNï¼šä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°</li>
</ol>
<p>è¿”å›å€¼ï¼šä¸€ä¸ªæ ‡è¯†ç›®æ ‡è®¡æ—¶å™¨çš„éé›¶æ•°å­—ï¼Œç”¨äºæ¸…æ¥šç›®æ ‡è®¡æ•°å™¨</p>
<p>å‚æ•°æ„æˆå¦‚ä¸‹ï¼Œ<code>[]</code>ä¸­åŒ…å«çš„æ˜¯å¯é€‰çš„å‚æ•°ï¼Œå¹¶ä¸æ˜¯ä¼ é€’ä¸€ä¸ªæ•°ç»„</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(func, delay, [arg1, arg2, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span></code></pre>
</div><h2 id="setimmx" tabindex="-1">setImmX <a class="header-anchor" href="#setimmx" aria-label="Permalink to &quot;setImmX&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ´ç´ çš„å®ç°æ–¹æ³•å¦‚ä¸‹ï¼Œå»¶è¿Ÿæ‰§è¡Œå‰è°ƒç”¨ä¸€æ¬¡</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setImmTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> func </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TypeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'func is not function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    func.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, args)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(func, delay, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setImmInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">delay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> func </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TypeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'func is not function'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    func.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, args)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(func, delay, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ15ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-15.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-15.html</guid>
            <pubDate>Mon, 23 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
åœ¨å‰ä¸€æœŸæ–‡ç« ä¸­å®Œå–„äº†ä¸€ä¸ªç”ŸæˆWebé¡µé¢æµè§ˆäº‹åŠ¡è¿›å±•çš„`timec page`æŒ‡ä»¤
ä½†åœ¨æ—¥`å¸¸ä½¿ç”¨å·¥å…·ä¸­å‘ç°å‘ç°äº†ä¸¤ä¸ªç—›ç‚¹ï¼š
1. ç”±äºäº‹åŠ¡ç¹å¤šï¼Œç»å¸¸ä¼šå¿˜è®°ç»“æŸä¸€ä¸ªäº‹æƒ…ï¼Œå°±å¼€å§‹äº†ä¸‹ä¸€ä¸ªäº‹æƒ…
2. ]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-15" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ15ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-15" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ15ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨å‰ä¸€æœŸæ–‡ç« ä¸­å®Œå–„äº†ä¸€ä¸ªç”ŸæˆWebé¡µé¢æµè§ˆäº‹åŠ¡è¿›å±•çš„<code>timec page</code>æŒ‡ä»¤</p>
<p>ä½†åœ¨æ—¥`å¸¸ä½¿ç”¨å·¥å…·ä¸­å‘ç°å‘ç°äº†ä¸¤ä¸ªç—›ç‚¹ï¼š</p>
<ol>
<li>ç”±äºäº‹åŠ¡ç¹å¤šï¼Œç»å¸¸ä¼šå¿˜è®°ç»“æŸä¸€ä¸ªäº‹æƒ…ï¼Œå°±å¼€å§‹äº†ä¸‹ä¸€ä¸ªäº‹æƒ…</li>
<li>åœ¨åˆ‡æ¢ä»»åŠ¡çš„æ—¶å€™éœ€è¦å®Œæ•´çš„è¾“å…¥ä»»åŠ¡åæ‰èƒ½è¿›è¡Œä»»åŠ¡çš„åˆ‡æ¢</li>
</ol>
<p>å½“ç„¶è¿˜æœ‰ä¸€äº›å…¶å®ƒçš„ç—›ç‚¹ï¼Œæœ¬æœŸç€é‡<strong>è§£å†³ç¬¬1ä¸ªç—›ç‚¹</strong></p>
<h2 id="å®šæ—¶æé†’featureå¼€å‘" tabindex="-1">å®šæ—¶æé†’Featureå¼€å‘ <a class="header-anchor" href="#å®šæ—¶æé†’featureå¼€å‘" aria-label="Permalink to &quot;å®šæ—¶æé†’Featureå¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<p>å®šæ—¶æé†’ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œ<code>timec thing -s</code>ä¿å­˜ï¼Œä½¿ç”¨ä¸€ä¸ªæç¤ºéŸ³è¿›è¡Œæç¤º</p>
<p>é¢„æœŸæŒ‡ä»¤<code>timec remind</code></p>
<ul>
<li><code>-c,--cycle [time]</code>:è®¾ç½®æé†’çš„å‘¨æœŸï¼Œå•ä½åˆ†é’Ÿï¼Œé»˜è®¤40åˆ†é’Ÿæé†’ä¸€æ¬¡</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> remind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [option]</span></span></code></pre>
</div><h3 id="æ³¨å†ŒæŒ‡ä»¤" tabindex="-1">æ³¨å†ŒæŒ‡ä»¤ <a class="header-anchor" href="#æ³¨å†ŒæŒ‡ä»¤" aria-label="Permalink to &quot;æ³¨å†ŒæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>ä½¿ç”¨<code>commander.command</code>æ³¨å†Œ<code>remind</code>æŒ‡ä»¤ï¼Œä½¿ç”¨<code>.option</code>æ–¹æ³•è®¾ç½®ä¸€ä¸ªå¯é€‰å‚æ•°<code>cycle</code>, ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥é»˜è®¤å€¼<code>'40'</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'remind'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Open auto remind music'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-c,--cycle [time]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Set the duration of the reminder cycleï¼ˆminuteï¼‰'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'40'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(remindCommand);</span></span></code></pre>
</div><p>å…·ä½“é€»è¾‘å¦‚ä¸‹:</p>
<ol>
<li>å°†<code>cycle</code>å‚æ•°è½¬ä¸ºæ•´æ•°</li>
<li>ç„¶åä½¿ç”¨å®šæ—¶å™¨<code>setTimeout</code>ï¼Œåœ¨<code>cycle*oneMinute</code>æ¯«ç§’å,æ’­æ”¾éŸ³é¢‘ä¸è‡ªåŠ¨è®°å½•</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> spawn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cross-spawn'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æé†’å‘¨æœŸï¼ˆminuteï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cmdObj.cycle;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> oneMinute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      playRemindAudio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(loop);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // è‡ªåŠ¨è®°å½•ä¸€ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCWD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">thing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timec'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'thing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, thing.name], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        cwd,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> oneMinute);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span></code></pre>
</div><p>å…¶ä¸­è‡ªåŠ¨è®°å½•çš„æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡<code>spawn</code>æ‰§è¡Œ<code>timec thing [newthing]</code>æŒ‡ä»¤å³å¯è¿›è¡Œè‡ªåŠ¨çš„äº‹ä»¶è®°å½•</p>
<p><code>playRemindAudio</code>ä¸­åŒ…å«çš„å°±æ˜¯æ’­æ”¾é¢„è®¾éŸ³é¢‘çš„é€»è¾‘</p>
<h3 id="æ’­æ”¾å£°éŸ³" tabindex="-1">æ’­æ”¾å£°éŸ³ <a class="header-anchor" href="#æ’­æ”¾å£°éŸ³" aria-label="Permalink to &quot;æ’­æ”¾å£°éŸ³&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªç®—æ˜¯çŸ¥è¯†ç›²åŒºï¼Œä»¥å‰ä»æ¥æ²¡æœ‰ä½¿ç”¨Node.jsåŸç”Ÿçš„APIæ’­æ”¾è¿‡éŸ³é¢‘</p>
<h4 id="ç³»ç»ŸæŒ‡ä»¤" tabindex="-1">ç³»ç»ŸæŒ‡ä»¤ <a class="header-anchor" href="#ç³»ç»ŸæŒ‡ä»¤" aria-label="Permalink to &quot;ç³»ç»ŸæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h4>
<p>é¦–å…ˆæƒ³åˆ°çš„æ–¹æ¡ˆå°±æ˜¯é€šè¿‡<code>spawn</code>è°ƒç”¨ç³»ç»Ÿçš„æŒ‡ä»¤æ’­æ”¾éŸ³é¢‘</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mpg123'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'url.mp3'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p>è¿™ä¸ªæ˜¯è°ƒç”¨<a href="https://mpg123.org/" target="_blank" rel="noreferrer">mpg123</a>ç³»ç»ŸæŒ‡ä»¤</p>
<p>linuxæ“ä½œç³»ç»Ÿå®‰è£…æŒ‡ä»¤å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> mpg123</span></span></code></pre>
</div><p>è°ƒç”¨ç³»ç»ŸæŒ‡ä»¤æ’­æ”¾éŸ³ä¹ï¼Œæ¯”è¾ƒæœ‰å±€é™æ€§ï¼Œå¸¸è§æ“ä½œç³»ç»Ÿæœ‰3ç§ï¼Œä¸ä¸€å®šæ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½æ”¯æŒä¸€æ ·çš„æŒ‡ä»¤</p>
<p>å¦‚æœä½¿ç”¨æ­¤ç§æ–¹å¼å°±éœ€è¦è°ƒç ”ç›®æ ‡å¹³å°ï¼Œè£…æœºå°±é»˜è®¤æ”¯æŒçš„æŒ‡ä»¤</p>
<h4 id="ç°å­˜npmåŒ…" tabindex="-1">ç°å­˜NPMåŒ… <a class="header-anchor" href="#ç°å­˜npmåŒ…" aria-label="Permalink to &quot;ç°å­˜NPMåŒ…&quot;">&ZeroWidthSpace;</a></h4>
<p>è¿™ä¸ªé—®é¢˜è‚¯å®šä¸æ˜¯å¼€å‘è€…ç¬¬ä¸€æ¬¡é‡è§ï¼Œè‚¯å®šæ˜¯æœ‰å‰è¾ˆä»¬é‡åˆ°è¿‡ï¼Œé€šè¿‡æœç´¢å¼•æ“æ£€ç´¢ï¼Œpickäº†ä¸‹è¿°ä¸¤ä¸ªï¼š</p>
<ul>
<li><a href="https://github.com/Marak/play.js#readme" target="_blank" rel="noreferrer">play</a></li>
<li><a href="https://www.npmjs.com/package/audio-play" target="_blank" rel="noreferrer">audio-play</a></li>
</ul>
<p>é¦–å…ˆæ˜¯ç¬¬ä¸€ä¸ª,API æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡<a href="https://github.com/Marak/play.js/blob/d3ca7a04d1bd58c3ad72df3088f92985742e41cc/lib/play.js#L54" target="_blank" rel="noreferrer">æŸ¥çœ‹æºç </a>ï¼Œå®é™…ä¸Šä»–ä¹Ÿæ˜¯è°ƒç”¨ç³»ç»ŸæŒ‡ä»¤æ’­æ”¾</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> play</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'play/lib/play'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">play.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'filepath.wav'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTczMTE1Mjk1MA==629731152950" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å…¶æ¬¡æ˜¯<code>audio-play</code>,éœ€è¦é…åˆ<code>audio-loader</code>ä½¿ç”¨</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> audioPlay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'audio-play'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> audioLoad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'audio-loader'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">audioLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'filepath.wav'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  audioPlay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>åœ¨<code>mac</code>ä¸Šæµ‹è¯•æ’­æ”¾æ­£å¸¸ï¼Œåœ¨linuxä¸Šä¾æ—§æ— æ³•æ­£å¸¸æ’­æ”¾</p>
<h4 id="ä½¿ç”¨ç³»ç»Ÿèœ‚é¸£å™¨" tabindex="-1">ä½¿ç”¨ç³»ç»Ÿèœ‚é¸£å™¨ <a class="header-anchor" href="#ä½¿ç”¨ç³»ç»Ÿèœ‚é¸£å™¨" aria-label="Permalink to &quot;ä½¿ç”¨ç³»ç»Ÿèœ‚é¸£å™¨&quot;">&ZeroWidthSpace;</a></h4>
<p>è¿™ä¸ªå°±æ¯”è¾ƒç®€å•ï¼Œæ‰§è¡Œä¸‹é¢ä»£ç å³å¯ï¼Œä½†æ˜¯åœ¨æˆ‘çš„linuxä¸Šæµ‹è¯•ä»ç„¶æ— æ•ˆï¼Œemmmmè£‚å¼€äº†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">process.stdout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\x07</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><h4 id="todo" tabindex="-1">TODO <a class="header-anchor" href="#todo" aria-label="Permalink to &quot;TODO&quot;">&ZeroWidthSpace;</a></h4>
<p>æ•´ç†ä¸€ç¯‡Node.jsæ’­æ”¾éŸ³é¢‘çš„å¹²è´§å®è·µæ–‡ç« ï¼Œç›®æ ‡3ç«¯é€šç”¨ä¸€ä¸ªAPI</p>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™ï¼Œä¸‹ä¸€æœŸå°†ç»§ç»­å®Œå–„<code>timec page</code>æŒ‡ä»¤</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyOTczMTE1Mjk1MA==629731152950" length="0" type="image//mdImg/MTYyOTczMTE1Mjk1MA==629731152950"/>
        </item>
        <item>
            <title><![CDATA[Nodeä¸­requireä¸fs.readFileè¯»å–JSONæ–‡ä»¶çš„å¯¹æ¯”]]></title>
            <link>https://www.dmsrs.org/technology/learn/node-require-json.html</link>
            <guid>https://www.dmsrs.org/technology/learn/node-require-json.html</guid>
            <pubDate>Thu, 19 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯
åœ¨åšæ—¶é—´ç®¡ç†å·¥å…·å‡ºç°äº†ä¸€ä¸ªé—®é¢˜
ä»£ç ä¸­ä½¿ç”¨requireè¯»å–JSONæ–‡ä»¶ï¼ŒæœåŠ¡ç«¯å¯åŠ¨åå‘ç°å½“JSONæ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨åï¼Œè¿”å›çš„ä»ç„¶æ˜¯åŸæ¥çš„JSONå†…å®¹
æœ¬ç€æ‰“ç ´ç ‚é”…é—®é“ä½çš„ç²¾ç¥ï¼Œå°±å±•å¼€äº†èµ„æ–™æŸ¥é˜…æ¢ç©¶]]></description>
            <content:encoded><![CDATA[<h1 id="nodeä¸­requireä¸fs-readfileè¯»å–jsonæ–‡ä»¶çš„å¯¹æ¯”" tabindex="-1">Nodeä¸­requireä¸fs.readFileè¯»å–JSONæ–‡ä»¶çš„å¯¹æ¯” <a class="header-anchor" href="#nodeä¸­requireä¸fs-readfileè¯»å–jsonæ–‡ä»¶çš„å¯¹æ¯”" aria-label="Permalink to &quot;Nodeä¸­requireä¸fs.readFileè¯»å–JSONæ–‡ä»¶çš„å¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨åš<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">æ—¶é—´ç®¡ç†å·¥å…·</a>å‡ºç°äº†ä¸€ä¸ªé—®é¢˜</p>
<p><a href="https://github.com/ATQQ/time-control/blob/2ce91222ac937dc10205d1153cee181985d87a5a/src/utils/index.js#L188" target="_blank" rel="noreferrer">ä»£ç </a>ä¸­ä½¿ç”¨requireè¯»å–JSONæ–‡ä»¶ï¼ŒæœåŠ¡ç«¯å¯åŠ¨åå‘ç°å½“JSONæ–‡ä»¶å‘ç”Ÿæ”¹åŠ¨åï¼Œè¿”å›çš„ä»ç„¶æ˜¯åŸæ¥çš„JSONå†…å®¹</p>
<p>æœ¬ç€æ‰“ç ´ç ‚é”…é—®é“ä½çš„ç²¾ç¥ï¼Œå°±å±•å¼€äº†èµ„æ–™æŸ¥é˜…æ¢ç©¶ï¼Œè¶æœºå­¦ä¹ ä¸€æ³¢æ–°çŸ¥è¯†</p>
<h2 id="åŸå› " tabindex="-1">åŸå›  <a class="header-anchor" href="#åŸå› " aria-label="Permalink to &quot;åŸå› &quot;">&ZeroWidthSpace;</a></h2>
<p>ç»“è®ºå…ˆè¡Œï¼Œ<code>require</code>å¼•å…¥çš„æ¨¡å—ä¼šè¢«Nodeç¼“å­˜ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªç®€å•çš„demoå®éªŒä¸€ä¸‹</p>
<h3 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">&ZeroWidthSpace;</a></h3>
<p><strong>test-module.js</strong></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> m1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test-module'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">m1.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '2'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> m2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test-module'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(m2.name);</span></span></code></pre>
</div><p>è¿è¡Œåçš„è¾“å‡ºç»“æœè¾“å‡ºå¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">2</span></span></code></pre>
</div><p>ä»è¿™å°±å¯ä»¥å¾—å‡ºç»“è®ºNodeä¼šç¼“å­˜å¼•å…¥çš„æ¨¡å—ï¼Œnameå¦‚ä½•æŸ¥çœ‹å·²ç»è¢«ç¼“å­˜çš„æ¨¡å—</p>
<h3 id="æŸ¥çœ‹ç¼“å­˜" tabindex="-1">æŸ¥çœ‹ç¼“å­˜ <a class="header-anchor" href="#æŸ¥çœ‹ç¼“å­˜" aria-label="Permalink to &quot;æŸ¥çœ‹ç¼“å­˜&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡<a href="http://nodejs.cn/api/modules/require_cache.html" target="_blank" rel="noreferrer">require.cache</a>å³å¯è·å–è¢«ç¼“å­˜çš„æ¨¡å—ï¼š</p>
<ul>
<li>è¿”å›ä¸€ä¸ªå¯¹è±¡</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> m1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test-module'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(require.cache);</span></span></code></pre>
</div><p>è¾“å‡ºå†…å®¹å¦‚ä¸‹(è¿™é‡Œå°±è´´ä¸€å¼ æˆªå›¾)
<img src="https://img.cdn.sugarat.top/mdImg/MTYyOTM4NTA0MDE2MQ==629385040161" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="åˆ é™¤ç¼“å­˜" tabindex="-1">åˆ é™¤ç¼“å­˜ <a class="header-anchor" href="#åˆ é™¤ç¼“å­˜" aria-label="Permalink to &quot;åˆ é™¤ç¼“å­˜&quot;">&ZeroWidthSpace;</a></h3>
<p>æ—¢ç„¶<code>require.cache</code>è¿”å›å†…å®¹æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„å¯¹è±¡ï¼Œnameå¯ä»¥é€šè¿‡<code>delete</code>å…³é”®å­—è¿›è¡Œç§»é™¤</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> m1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test-module'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">m1.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '2'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(m1.name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> require.cache[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">__dirname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}/test-module.js`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> m2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test-module'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(m2.name);</span></span></code></pre>
</div><p>å†…å®¹è¾“å‡ºå¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">0</span></span></code></pre>
</div><p>åŸå› æ‹å®Œåï¼Œå’±ä»¬å°±å¼€å§‹è¿›å…¥ä¸»é¢˜</p>
<p>è¿›è¡Œ<code>è¯»å–JSON</code>æ–‡ä»¶çš„å¯¹æ¯”åˆ†æ</p>
<h2 id="è¯»å–jsonå¯¹æ¯”" tabindex="-1">è¯»å–JSONå¯¹æ¯” <a class="header-anchor" href="#è¯»å–jsonå¯¹æ¯”" aria-label="Permalink to &quot;è¯»å–JSONå¯¹æ¯”&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>requireå¯ä»¥çœç•¥<code>.json</code>åç¼€</li>
<li>fs.readFileè¯»å–ä¸èƒ½çœç•¥åç¼€
test.json</li>
</ul>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"xm"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æµ‹è¯•demo</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(d1); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { name: 'xm' }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./test'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(d2); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// { name: 'xm' }</span></span></code></pre>
</div><h2 id="å…¶å®ƒå·®å¼‚" tabindex="-1">å…¶å®ƒå·®å¼‚ <a class="header-anchor" href="#å…¶å®ƒå·®å¼‚" aria-label="Permalink to &quot;å…¶å®ƒå·®å¼‚&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç¼–ç " tabindex="-1">ç¼–ç  <a class="header-anchor" href="#ç¼–ç " aria-label="Permalink to &quot;ç¼–ç &quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>requireåªèƒ½æŒ‰<code>utf-8</code>æ ¼å¼è¯»å–</li>
<li>fs.readFile<code>Sync</code>å¯ä»¥<strong>è®¾ç½®ç¼–ç æ ¼å¼</strong></li>
</ul>
<h3 id="å¼‚æ­¥åŒæ­¥" tabindex="-1">å¼‚æ­¥åŒæ­¥ <a class="header-anchor" href="#å¼‚æ­¥åŒæ­¥" aria-label="Permalink to &quot;å¼‚æ­¥åŒæ­¥&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>requireæ˜¯åŒæ­¥è¯»å–</li>
<li>é€šè¿‡<code>fs</code>æ—¢å¯ä»¥åŒæ­¥è¯»å–ä¹Ÿå¯ä»¥å¼‚æ­¥è¯»å–</li>
</ul>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li><code>require</code>æ”¯æŒç¼“å­˜</li>
<li><code>require</code>åªèƒ½æŒ‰UTF-8è¯»å–å†…å®¹</li>
<li><code>require</code>æ˜¯åŒæ­¥çš„</li>
<li><code>require</code>è¯»å–JSONæ–‡ä»¶å¯ä»¥çœç•¥<code>.json</code>åç¼€</li>
</ul>
<h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ¬æ–‡å†…å®¹æ¯”è¾ƒç²¾ç®€ï¼Œå¯¹äºå…¼èŒå­¦Nodeçš„åŒå­¦å¯èƒ½ä¼šæ¼æ‰æ­¤éƒ¨åˆ†çŸ¥è¯†</p>
<p>åç»­å°†ç»§ç»­æ›´æ–°<code>æ—¶é—´ç®¡ç†å·¥å…·</code>çš„å®è·µå†…å®¹</p>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyOTM4NTA0MDE2MQ==629385040161" length="0" type="image//mdImg/MTYyOTM4NTA0MDE2MQ==629385040161"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ14ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-14.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-14.html</guid>
            <pubDate>Wed, 18 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­å®Œå–„äº†`timec page`æŒ‡ä»¤çš„å‰åç«¯äº¤äº’é€»è¾‘,æœ¬æœŸå°†å®Œå–„è¿™ä¸ªæŒ‡ä»¤æ‰“å¼€é¡µé¢çš„åŠŸèƒ½
 æœ¬æœŸæ•ˆæœé¢„è§ˆ
 åŠŸèƒ½å¼€å‘
 å®Œå–„å¯è§†åŒ–é¡µé¢
ç”±äºé¡¹ç›®é‡‡ç”¨çš„Vue3ï¼Œæ‰€ä»¥æ¥å…¥Element ]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-14" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ14ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-14" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ14ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­å®Œå–„äº†<code>timec page</code>æŒ‡ä»¤çš„å‰åç«¯äº¤äº’é€»è¾‘,æœ¬æœŸå°†å®Œå–„è¿™ä¸ªæŒ‡ä»¤æ‰“å¼€é¡µé¢çš„åŠŸèƒ½</p>
<h2 id="æœ¬æœŸæ•ˆæœé¢„è§ˆ" tabindex="-1">æœ¬æœŸæ•ˆæœé¢„è§ˆ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœé¢„è§ˆ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœé¢„è§ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTMwMDY4MzQwNA==timec-page.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å®Œå–„å¯è§†åŒ–é¡µé¢" tabindex="-1">å®Œå–„å¯è§†åŒ–é¡µé¢ <a class="header-anchor" href="#å®Œå–„å¯è§†åŒ–é¡µé¢" aria-label="Permalink to &quot;å®Œå–„å¯è§†åŒ–é¡µé¢&quot;">&ZeroWidthSpace;</a></h3>
<p>ç”±äºé¡¹ç›®é‡‡ç”¨çš„Vue3ï¼Œæ‰€ä»¥æ¥å…¥<a href="https://element-plus.gitee.io/" target="_blank" rel="noreferrer">Element UI Plusç»„ä»¶åº“</a></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> element-plus</span></span></code></pre>
</div><p>ç›´æ¥å…¨é‡å¼•å…¥é¥¿äº†ä¹ˆUIï¼Œå› ä¸ºä¸éœ€è¦Buildï¼Œæ‰€ä»¥ä¸è€ƒè™‘åŒ…ä½“ç§¯å¸¦æ¥çš„å½±å“ï¼Œå…¶æ¬¡ä½¿ç”¨äº†Viteä¹Ÿä¸ç”¨æ‹…å¿ƒå½±å“å¯åŠ¨é€Ÿåº¦</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ElementPlus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'element-plus'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'element-plus/lib/theme-chalk/index.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './App.vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(App);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ElementPlus);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'#app'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p>é€‰ç”¨æ—¥å†ç»„ä»¶<code>el-calendar</code>ï¼Œç›´æ¥ä½¿ç”¨çš„åŒ–ï¼Œé»˜è®¤æ ·å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTI5ODQxMTA5Ng==629298411096" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’æ§½è‡ªå®šä¹‰æ¯ä¸ªå•å…ƒæ ¼çš„å†…å®¹ï¼ŒæœŸæœ›æ¯ä¸ªå•å…ƒæ ¼çš„å¤§æ¦‚ç»“æ„å¦‚ä¸‹</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"day"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">strong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>1&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">strong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>0h&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"tasks"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>ä»»åŠ¡å&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>0.5h&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>ä»»åŠ¡å2&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>0.53h&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>é˜…è¯»ç»„ä»¶æ–‡æ¡£é€šè¿‡<code>#dateCell</code>æ’æ§½è¿›è¡Œå†…å®¹è‡ªå®šä¹‰</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-calendar</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> #dateCell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{ data }"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &#x3C;!-- è‡ªå®šä¹‰ --></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-calendar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>å…¶ä¸­<code>data</code>æœ‰ä¸€ä¸ªå±æ€§<code>day</code>ï¼Œå…¶æ˜¯ä¸€ä¸ªå…·ä½“çš„æ—¥æœŸï¼Œæ ¼å¼ä¸º<code>yyyy-MM-dd</code>,ä¾‹å¦‚2021-08-18</p>
<p>ä¸ºäº†å±•ç¤ºå‡ºè¿™æ ·çš„æ•°æ®ï¼Œå…ˆè®¾è®¡å‡ºä¸€ä¸ªå•å…ƒæ ¼æ‰€éœ€æ•°æ®çš„JSONç»“æ„ï¼Œä¸‹é¢æ˜¯ç¬¬ä¸€ç‰ˆçš„æ•°æ®ç»“æ„åŒ…å«ï¼š</p>
<ul>
<li>ä¸€å¤©æ€»è€—æ—¶</li>
<li>ä»»åŠ¡åˆ—è¡¨
<ul>
<li>ä»»åŠ¡å</li>
<li>ä»»åŠ¡è€—æ—¶
<ul>
<li>äº‹ä»¶åˆ—è¡¨
<ul>
<li>äº‹ä»¶å</li>
<li>äº‹ä»¶è€—æ—¶</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  tasks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æµ‹è¯•'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      things: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å†™æ–‡æ¡£'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span></code></pre>
</div><p>ä½†ä½¿ç”¨çš„æ—¶å€™å‘ç°ï¼Œæ¯ä¸€é¡¹è¦åœ¨æ’æ§½ä¸­ä½¿ç”¨ï¼Œæ’æ§½æ²¡æœ‰æš´éœ²<code>v-for</code>æ¸²æŸ“çš„æ–¹æ³•ï¼Œåªæœ‰èƒ½æ‹¿åˆ°ç»™äºˆçš„æ—¥æœŸï¼Œé‚£ä¹ˆæ¸²æŸ“çš„æ•°æ®ç»“æ„åªèƒ½æ˜¯ä¸ªK-Vçš„å¯¹è±¡</p>
<p>ä¼˜åŒ–åçš„æ•°æ®ç»“æ„å¦‚ä¸‹,å¯¹å¤–åŒ…äº†ä¸€å±‚</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> oneDay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  '2021-08-18'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:item</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>äºæ˜¯ä¹é¡µé¢çš„ä»£ç å°±èƒ½æ¢³ç†å‡ºç¬¬ä¸€ç‰ˆï¼ŒåŒ…å«æ¸²æŸ“æ¯ä¸€å¤©çš„æ•°æ®ï¼ˆæ—¶é—´+ä»»åŠ¡ï¼‰ï¼Œä½†å¹¶æœªåŒ…å«ä¸Šthingsçš„æ•°æ®</p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-calendar</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> #dateCell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{ data }"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"day"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">strong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ parseDay(data.day) }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">strong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ sumData[data.day]?.time || '0h' }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"tasks"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"sumData[data.day]?.tasks?.length"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"(v,idx) in sumData[data.day].tasks"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> :key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"idx"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ v.title }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ v.time }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-calendar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { reactive, ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseDay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">day;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sumData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  '2021-08-18'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tasks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æµ‹è¯•'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        things: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å†™æ–‡æ¡£'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'5.55h'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>è¿™é‡Œthingsçš„æ•°æ®ç”¨<code>Popover å¼¹å‡ºæ¡†</code>æ¸²æŸ“</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTI5OTQ1Mzk2Ng==629299453966" alt="å›¾ç‰‡" loading="lazy"></p>
<p>äºæ˜¯ä¹å°†æ¸²æŸ“tasksçš„é€»è¾‘å°å°æ”¹åŠ¨ä¸€ä¸‹ï¼Œå°±æˆäº†ä¸‹é¢è¿™ç§ï¼Œå…¶ä¸­<code>#reference</code>æ’æ§½æ ‡è¯†è¢«åŒ…è£¹çš„å†…å®¹ï¼Œé»˜è®¤æ’æ§½æ˜¯å¼¹çª—çš„å†…å®¹ï¼Œå¼¹çª—çš„æ ‡é¢˜å³å½“å¤©çš„æ—¥æœŸ<code>data.day</code></p>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"tasks"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"sumData[data.day]?.tasks?.length"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"(v,idx) in sumData[data.day].tasks"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> :key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"idx"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-popover</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"v?.things?.length"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> placement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"right"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> :title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"data.day"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> :width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"click"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> #reference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ v.title }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ v.time }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ol</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"things"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> v-for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"(t,idx) in v.things"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> :key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"idx"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ t.title }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>{{ t.time }}&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">el-popover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>åˆ°æ­¤é¡µé¢æ¸²æŸ“é€»è¾‘å°±æå®šäº†</p>
<p>æ¥ä¸‹æ¥æ˜¯ä»æ¥å£æ‹¿å–æ•°æ®ï¼Œç„¶åæ ¼å¼åŒ–è¿›è¡Œå±•ç¤ºçš„é€»è¾‘:</p>
<ol>
<li>å¼•å…¥è·å–æ¯æ—¥æ•°æ®æ¥å£æ–¹æ³•<code>getEveryDayData</code></li>
<li>éå†è¿”å›çš„æ•°æ®ï¼Œç„¶åå¯¹æ¯ä¸€é¡¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</li>
<li>é€šè¿‡<code>Object.assign</code>å°†æ–°çš„æ•°æ®èµ‹ç»™æ—§æ•°æ®<code>sumData</code></li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { getEveryDayData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../api'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sumData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> reactive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> refresData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEveryDayData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sumData,{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parseOneDay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ¥å£è¿”å›çš„æ•°æ®ç»“æ„å¦‚ä¸‹</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTI5OTg2NjczMw==629299866733" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ²¡æ³•ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å’±ä»¬æ¸…æ´—æ ¼å¼åŒ–ä¸€ä¸‹ï¼Œæ ¼å¼åŒ–æ•°æ®çš„æ–¹æ³•<code>parseOneDay</code>é€»è¾‘å¦‚ä¸‹:</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–å¯¹è±¡ï¼ŒåŒ…å«<code>time</code>å’Œ<code>tasks</code>å±æ€§</li>
<li>å¤„ç†æ‹¿åˆ°çš„æ¥å£æ•°æ®</li>
<li>éå†å…¶<code>tasks</code>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåˆå§‹çš„ä»»åŠ¡ï¼ŒåŒ…å«ä»»åŠ¡åï¼Œæ¶ˆè€—æ—¶é—´ï¼Œäº‹ä»¶åˆ—è¡¨ç­‰å±æ€§</li>
<li>éå†æ¯ä¸ª<code>task</code>çš„äº‹ä»¶åˆ—è¡¨ï¼Œæ—¶é—´ç´¯åŠ å³ä¸ºå¯¹åº”ä»»åŠ¡çš„è€—æ—¶</li>
<li>ä»»åŠ¡æ—¶é—´ç´¯åŠ å°±æ˜¯å½“å¤©çš„æ€»è€—æ—¶</li>
</ul>
</li>
<li>è¿”å›çš„æ•°æ®åŠ ä¸Šæ—¥æœŸtitleåŒ…ä¸€å±‚</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseOneDay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tasks: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">data.title) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sumTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  data.tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      title: t.title,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      things: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> taskTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    t.things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">thing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      taskTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      task.things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title: content,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}h`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    task.time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">taskTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}h`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sumTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> taskTime</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    o.tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(task)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  o.time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sumTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}h`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    [data.title]: o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ•°æ®å¤„ç†å®Œæ¯•åå°±æ˜¯è°ƒç”¨,å°†è°ƒç”¨é€»è¾‘æ”¾åˆ°<code>onMounted</code>é’©å­ä¸­ï¼Œå¹¶å°†æ‰§è¡Œé€»è¾‘æ”¾å…¥<code>setInterval</code>å®šæ—¶å™¨ä¸­ï¼Œé€šè¿‡æ¥å£è½®è®­è¾¾åˆ°æ•°æ®å®æ—¶å±•ç¤ºçš„æ•ˆæœ</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { onMounted } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'vue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    refresData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>æ—¶é—´ç´§å¼ ï¼Œæœ¬æ–‡çš„ä»£ç å¯èƒ½æœ‰ç‚¹shiï¼Œåç»­ä¼šæŠ½æ—¶é—´åœ¨ä»“åº“ä¸­è¿›è¡Œä¼˜åŒ–</p>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™ï¼Œä¸‹ä¸€æœŸå°†ç»§ç»­å®Œå–„é¡¹ç›®çš„äº¤äº’å’ŒåŠŸèƒ½</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyOTMwMDY4MzQwNA==timec-page.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ13ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-13.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-13.html</guid>
            <pubDate>Mon, 16 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­åŠ å…¥äº†ä¸€ä¸ªå¯åŠ¨WebæœåŠ¡çš„æŒ‡ä»¤`timec page`
æœ¬æœŸå°±ç»§ç»­å®Œå–„è¿™ä¸ªæŒ‡ä»¤çš„æ•ˆæœ
 æœ¬æœŸæ•ˆæœé¢„è§ˆ
 åŠŸèƒ½å¼€å‘
 Webä¾§
æ‹Ÿé‡‡ç”¨Vue3å¼€å‘é¡µé¢
å®‰è£…é¡¹ç›®ä¾èµ–
```sh
ya]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-13" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ13ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-13" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ13ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­åŠ å…¥äº†ä¸€ä¸ªå¯åŠ¨WebæœåŠ¡çš„æŒ‡ä»¤<code>timec page</code></p>
<p>æœ¬æœŸå°±ç»§ç»­å®Œå–„è¿™ä¸ªæŒ‡ä»¤çš„æ•ˆæœ</p>
<h2 id="æœ¬æœŸæ•ˆæœé¢„è§ˆ" tabindex="-1">æœ¬æœŸæ•ˆæœé¢„è§ˆ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœé¢„è§ˆ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœé¢„è§ˆ&quot;">&ZeroWidthSpace;</a></h2>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="webä¾§" tabindex="-1">Webä¾§ <a class="header-anchor" href="#webä¾§" aria-label="Permalink to &quot;Webä¾§&quot;">&ZeroWidthSpace;</a></h3>
<p>æ‹Ÿé‡‡ç”¨Vue3å¼€å‘é¡µé¢</p>
<p>å®‰è£…é¡¹ç›®ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vue@next</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @vue/compiler-sfc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @vitejs/plugin-vue</span></span></code></pre>
</div><p>å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåŸºäºVite+Vue3çš„æ¨¡æ¿é¡¹ç›®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> my-vue-app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vue</span></span></code></pre>
</div><p>å®Œæˆåçš„ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">my-vue-app</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> public</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> favicon.ico</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> App.vue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> components</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite.config.js</span></span></code></pre>
</div><p>æˆ‘ä»¬å°†<code>vite.config.js</code>,<code>main.js</code>,<code>components</code>,<code>App.vue</code>,<code>index.html</code>è¿™äº”éƒ¨åˆ†çš„å†…å®¹æ‹·è´åˆ°æˆ‘ä»¬é¡¹ç›®çš„<code>src/page</code>ç›®å½•ä¸‹</p>
<p>æ‹·è´å®Œåçš„ç›®å½•å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> App.vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> assets</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> logo.png</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> components</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> HelloWorld.vue</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite.config.js</span></span></code></pre>
</div><p>æ¥ç€æ”¹é€ ä¸€ä¸‹<code>timec page</code>æŒ‡ä»¤ä¸­çš„é€»è¾‘:</p>
<ul>
<li>å®šä½åˆ°<code>vite.config.js</code>æ–‡ä»¶çš„ä½ç½®</li>
<li>ä½¿ç”¨<code>--config</code>æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®</li>
<li>åœ¨<code>spawn</code>è°ƒç”¨çš„æ–¹æ³•ä¸­ä¼ å…¥è®¾ç½®é…ç½®æ–‡ä»¶çš„å‚æ•°</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> viteConfigPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/page/vite.config.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serveService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules/.bin/vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/page'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--host'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, viteConfigPath], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cwd,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ã€‚ã€‚ã€‚code</span></span></code></pre>
</div><p>åˆ°è¿™ä¸€æ­¥å‰ç«¯å·¥ç¨‹çš„åŸºæœ¬å†…å®¹ç®—æ­å¥½äº†ï¼Œé¡µé¢å±•ç¤ºéœ€è¦çš„æ•°æ®ï¼Œéœ€é€šè¿‡Nodeç›¸å…³çš„APIæ‰èƒ½è·å–ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>é¡µé¢ä½¿ç”¨SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰æ–¹æ¡ˆ</li>
<li>æ·»åŠ ä¸€ä¸ªåç«¯æœåŠ¡ï¼Œé€šè¿‡æ¥å£è°ƒç”¨ä¼ é€’æ‰€éœ€è¦çš„æ•°æ®</li>
</ol>
<p>é¡¹ç›®é‡‡ç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼Œä¸‹é¢å±•å¼€ä»‹ç»ä¸€ä¸‹ç®€å•åç«¯æœåŠ¡çš„æ­å»º</p>
<h3 id="æœåŠ¡ç«¯" tabindex="-1">æœåŠ¡ç«¯ <a class="header-anchor" href="#æœåŠ¡ç«¯" aria-label="Permalink to &quot;æœåŠ¡ç«¯&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™é‡Œä½¿ç”¨è‡ªå·±DIYçš„ç©å…·æ¡†æ¶<code>flash-wolves</code></p>
<p>å®‰è£…ä¾èµ–</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> flash-wolves</span></span></code></pre>
</div><p>ç¼–å†™åŸºæœ¬è°ƒç”¨é€»è¾‘,åœ¨src/pageä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code>server.js</code></p>
<ul>
<li>ä½¿ç”¨<code>Node</code>æ‰§è¡Œè¿™3è¡Œä»£ç ï¼Œè¿™æ ·ä¸€ä¸ªç®€å•çš„åç«¯æœåŠ¡å°±åœ¨3001ç«¯å£å¯åŠ¨äº†</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">Fw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'flash-wolves'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Fw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p>ç¼–å†™2ä¸ªæ¥å£ï¼š</p>
<ol>
<li>è·å–é…ç½®æ–‡ä»¶</li>
<li>è·å–æ‰€æœ‰çš„æ•°æ®ï¼ˆæŒ‰å¤©åŒºåˆ†ï¼‰</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">recordFilepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath)));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'not set default recordFilepath'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'/config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p><strong>åœ¨ä»€ä¹ˆæ—¶å€™å¯åŠ¨è¿™ä¸ªæœåŠ¡ï¼Ÿ</strong></p>
<p>å½“ç„¶æ˜¯å’Œå¯åŠ¨WebæœåŠ¡çš„æ—¶å€™ä¸€èµ·å¯åŠ¨</p>
<p>è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨<code>timec page</code>æŒ‡ä»¤ä¸­æ·»åŠ å¯åŠ¨åç«¯æœåŠ¡çš„é€»è¾‘:</p>
<ol>
<li>åŒæ ·ä½¿ç”¨<code>spawn</code>åˆ›å»ºå­è¿›ç¨‹å¯åŠ¨åç«¯æœåŠ¡</li>
<li>åœ¨å®¢æˆ·ç«¯æœåŠ¡å…³é—­çš„æ—¶å€™ï¼Œæ€æ­»è¿™ä¸ªåç«¯æœåŠ¡çš„å­è¿›ç¨‹</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/page/server.js'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cwd,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">serveService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'close'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">kill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'SIGSTOP'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p><strong>å®¢æˆ·ç«¯å¦‚ä½•è®¿é—®è¿™äº›æ¥å£ï¼Ÿ</strong>ï¼š</p>
<ol>
<li>ä¸ºäº†é™ä½é¡¹ç›®å¤æ‚æ€§ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨fetchæ–¹æ³•è·å–åç«¯æ¥å£çš„æ•°æ®</li>
<li>å•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶<code>src/page/api.js</code>å­˜æ”¾è¿™äº›é€»è¾‘</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://localhost:3000/config'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEveryDayData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'http://localhost:3001/json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>ç”±äºWebä¼šå—åŒæºç­–ç•¥é™åˆ¶ï¼Œè¿™é‡Œåœ¨<code>Fw</code>å®ä¾‹åŒ–å‡½æ•°é‡ŒåŠ å…¥ä»¥ä¸‹é€»è¾‘å¼€å¯CORSï¼Œè§£å†³è·¨åŸŸé—®é¢˜</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Fw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¼€å¯CORS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> req;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…è®¸è·¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Access-Control-Allow-Origin'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, req.headers.origin);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è·¨åŸŸå…è®¸çš„headerç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Access-Control-Allow-Headers'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'*'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…è®¸è·¨åŸŸæºå¸¦cookie</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Access-Control-Allow-Credentials'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'true'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å…è®¸çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Access-Control-Allow-Methods'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'PUT, GET, POST, DELETE, OPTIONS'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // è®¾ç½®å“åº”å¤´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Content-Type'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'application/json;charset=utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // å¯¹é¢„æ£€è¯·æ±‚æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'OPTIONS'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.statusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 204</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>è¿™æ ·ç®€å•çš„å‰åç«¯é€»è¾‘å°±éƒ½å†™å¥½äº†,ä¸‹é¢å°±æ˜¯ä¸€é”®å¯åŠ¨</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> page</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™ï¼Œä¸‹ä¸€æœŸå°†ç»§ç»­å®Œå–„<code>timec page</code>æŒ‡ä»¤</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ12ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-12.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-12.html</guid>
            <pubDate>Sun, 15 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
åˆç‰ˆçš„åŠŸèƒ½å·²ç»å®Œæˆçš„å·®ä¸å¤šäº†ï¼Œåç»­ä¸»è¦æ˜¯ä¼˜åŒ–ä¸€ä¸‹ä½“éªŒå’Œäº¤äº’
æœ¬æ–‡å°†ä¸ºæ’ä»¶æ¥å…¥`å½©è‰²æ‰“å°`äº¤äº’æ—¥å¿—ï¼ŒåŠ å…¥å¯åŠ¨webæœåŠ¡çš„æŒ‡ä»¤ï¼ˆç”¨äºåç»­ç¼–å†™å¯è§†åŒ–çš„é¡µé¢ï¼‰
 æœ¬æœŸæ•ˆæœé¢„è§ˆ

 åŠŸèƒ½å¼€å‘
 å½©è‰²æ—¥å¿—
]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-12" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ12ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-12" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ12ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>åˆç‰ˆçš„åŠŸèƒ½å·²ç»å®Œæˆçš„å·®ä¸å¤šäº†ï¼Œåç»­ä¸»è¦æ˜¯ä¼˜åŒ–ä¸€ä¸‹ä½“éªŒå’Œäº¤äº’</p>
<p>æœ¬æ–‡å°†ä¸ºæ’ä»¶æ¥å…¥<code>å½©è‰²æ‰“å°</code>äº¤äº’æ—¥å¿—ï¼ŒåŠ å…¥å¯åŠ¨webæœåŠ¡çš„æŒ‡ä»¤ï¼ˆç”¨äºåç»­ç¼–å†™å¯è§†åŒ–çš„é¡µé¢ï¼‰</p>
<h2 id="æœ¬æœŸæ•ˆæœé¢„è§ˆ" tabindex="-1">æœ¬æœŸæ•ˆæœé¢„è§ˆ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœé¢„è§ˆ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœé¢„è§ˆ&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>æŒ‡ä»¤æœ‰äº›å¤šï¼Œæ¼”ç¤ºå¯èƒ½æœ‰äº›å•°å—¦</p>
</blockquote>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTAzMzQyMjQ0OQ==timec12.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å½©è‰²æ—¥å¿—" tabindex="-1">å½©è‰²æ—¥å¿— <a class="header-anchor" href="#å½©è‰²æ—¥å¿—" aria-label="Permalink to &quot;å½©è‰²æ—¥å¿—&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªæ˜¯ç›´æ¥å¼•å…¥äº†<a href="https://github.com/chalk/chalk" target="_blank" rel="noreferrer">chalk</a>è¿™ä¸ªç¬¬ä¸‰æ–¹åº“</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> chalk</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># or</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> chalk</span></span></code></pre>
</div><p>ä½¿ç”¨çš„æ—¶å€™éå¸¸ç®€å•ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œè¯¦ç»†çš„å¯ä»¥ç›´æ¥å»çœ‹<a href="https://github.com/chalk/chalk/blob/main/readme.md" target="_blank" rel="noreferrer">å®˜æ–¹çš„ç¤ºä¾‹</a></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¼•å…¥ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> chalk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'chalk'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ‰“å°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yellow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hello'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'world'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTAzMzYyNTg5NQ==629033625895" alt="å›¾ç‰‡" loading="lazy"></p>
<p>é¡¹ç›®ä¸­è¿›è¡Œç®€å•çš„å°è£…:</p>
<ul>
<li>é¡¹ç›®ä¸­ä¸ç›´æ¥ä½¿ç”¨ <code>console.log</code></li>
<li>å¯¹å¤–æš´éœ²<code>print</code>æ–¹æ³•ä»£æ›¿<code>log</code></li>
<li>printæ–¹æ³•é¢ä¸ºæ·»åŠ ä¸‰ä¸ªé»˜è®¤çš„æ–¹æ³•å±æ€§
<ul>
<li>success:ç»¿è‰²</li>
<li>fail:çº¢è‰²</li>
<li>advice:è“è‰²</li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> console;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">str);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(print, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">green</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'success:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">str);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">red</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fail:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">str);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  advice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chalk.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">blue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'advice:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">str);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../src/utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'default'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">print.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æˆåŠŸæ–‡æ¡ˆ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">print.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å¤±è´¥æç¤º'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">print.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">advice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å»ºè®®æ–‡æ¡ˆ'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTAzMzkyMDI0Mg==629033920242" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åˆ©ç”¨å°è£…çš„è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œé…åˆchalkçš„ä¸€äº›é»˜è®¤æ–¹æ³•ä¾¿å®Œæˆäº†æ‰“å°æ—¥å¿—çš„æ”¹é€ </p>
<h3 id="å¯åŠ¨webæœåŠ¡" tabindex="-1">å¯åŠ¨WebæœåŠ¡ <a class="header-anchor" href="#å¯åŠ¨webæœåŠ¡" aria-label="Permalink to &quot;å¯åŠ¨WebæœåŠ¡&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªåŠŸèƒ½çš„ç›®çš„æ˜¯é€šè¿‡ä¸€ä¸ªæŒ‡ä»¤ï¼Œå³å¯è¿è¡Œå‡ºä¸€ä¸ªWebé¡µé¢</p>
<p>é€šè¿‡Webé¡µé¢ç»“åˆå¯è§†åŒ–åº“ï¼Œæ›´åŠ è¯¦ç»†ç”ŸåŠ¨çš„å±•ç¤ºæ•°æ®</p>
<p>æ·»åŠ ä¸€ä¸ªæ–°çš„æŒ‡ä»¤<code>timec page</code>:</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'page'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Use Page show report'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // ..code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span></code></pre>
</div><p>è¿™é‡Œå‡†å¤‡ç”¨<a href="https://vitejs.dev/" target="_blank" rel="noreferrer">Vite</a>æ¥å¯åŠ¨è¿™ä¸ªæœ¬åœ°æœåŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite</span></span></code></pre>
</div><p>åˆ›å»ºé¡µé¢ç›¸å…³ç›®å½•ä¸æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> page</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.html</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> main.js</span></span></code></pre>
</div><p>index.htmlå†…å®¹å¦‚ä¸‹ï¼Œä¸€ä¸ªå¾ˆç®€å•çš„å†…å®¹</p>
<ul>
<li>ä½¿ç”¨<code>&lt;script type=&quot;module&quot; src=&quot;js-url&quot;&gt;&lt;/script&gt;</code>å¼•å…¥jsèµ„æº</li>
</ul>
<div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"en"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"UTF-8"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"X-UA-Compatible"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"IE=edge"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"viewport"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"width=device-width, initial-scale=1.0"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>Document&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>ğŸš€hello worldğŸš€&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>åŠŸèƒ½æ­£åœ¨å®Œå–„ä¸­&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &#x3C;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"module"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./main.js"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">>&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&#x3C;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">></span></span></code></pre>
</div><p>ä¸‹é¢ç¼–å†™è°ƒç”¨Viteå¯ç”¨æœåŠ¡çš„é€»è¾‘:</p>
<ul>
<li>å¼•å…¥Nodeè‡ªå¸¦çš„<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noreferrer">child_process</a>æ¨¡å—</li>
<li>ä½¿ç”¨<code>child_process.spawn(command[, args][, options])</code>æ–¹æ³•è¿è¡ŒshellæŒ‡ä»¤ï¼ˆå¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ï¼‰
<ul>
<li>å…¶ä¸­optionsä¸­çš„cwdå‚æ•°ç”¨äºæè¿°å­è¿›ç¨‹çš„å·¥ä½œç›®å½•</li>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ‰§è¡Œçš„æŒ‡ä»¤</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦æ·»åŠ çš„å‚æ•°</li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> child_process</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'child_process'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serveService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> child_process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules/.bin/vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/page'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--host'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cwd,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">serveService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'close'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
</div><p>å®‰è£…<code>Vite</code>åå°±ä¼šåœ¨<code>node_modules/.bin/vite</code>ä¸‹åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶é‡Œä¼šæœ‰å¦‚ä¸‹ä¸€è¡Œæ³¨é‡Šä»£ç </p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#!/usr/bin/env node</span></span></code></pre>
</div><p>æ¥ç€å°±æ˜¯æŒ‡å®š<code>index.html</code>çš„ç›®å½•ï¼Œæ‰§è¡Œ<code>./node_modules/.bin/vite --help</code>å¯çœ‹åˆ°å¦‚ä¸‹æç¤ºä¿¡æ¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Usage:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> vite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [root]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Commands:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  [root]           </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [root]     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  optimize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [root]  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  preview</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [root]</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  ....</span></span></code></pre>
</div><p>å’±ä»¬ç›´æ¥ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šæ–‡ä»¶æ‰€åœ¨ç›®å½•å³å¯ï¼ŒåŠ ä¸Š<code>--host</code> optionåå°†ä¼šæä¾›ä¸€ä¸ªå±€åŸŸç½‘çš„åœ°å€è®¿é—®ï¼Œåƒä¸‹é¢è¿™æ ·</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyOTAzNjc5Nzg4OA==629036797888" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åŒä¸€å±€åŸŸç½‘çš„å…¶å®ƒè®¾å¤‡ä¹Ÿå¯é€šè¿‡è¿™ä¸ªåœ°å€è®¿é—®è¿™ä¸ªé¡µé¢çš„ä¿¡æ¯</p>
<h3 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h3>
<p>ç›´æ¥ä½¿ç”¨<code>child_process.spawn</code>åœ¨windowsä¸Šä¼šæœ‰<a href="https://github.com/moxystudio/node-cross-spawn" target="_blank" rel="noreferrer">ä¸€äº›å…¼å®¹æ€§é—®é¢˜</a></p>
<p>é¡¹ç›®ä¸­ä½¿ç”¨<a href="https://github.com/moxystudio/node-cross-spawn" target="_blank" rel="noreferrer">cross-spawn</a>æ¥æ›¿ä»£ç›´æ¥ä½¿ç”¨<code>child_process.spwan</code></p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> cross-spawn</span></span></code></pre>
</div><p>æ›´æ–°ä¸Šé¢çš„å¯åŠ¨ä»£ç </p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> spawn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'cross-spawn'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'page'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Use Page show report'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serveService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'node_modules/.bin/vite'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'src/page'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'--host'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      cwd,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      stdio: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'inherit'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    serveService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'close'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(code);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span></code></pre>
</div><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™ï¼Œä¸‹ä¸€æœŸå°†ç»§ç»­å®Œå–„<code>timec page</code>æŒ‡ä»¤</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyOTAzMzQyMjQ0OQ==timec12.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ11ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-11.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-11.html</guid>
            <pubDate>Thu, 12 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
é€šè¿‡å‰é¢10ç¯‡æ–‡ç« çš„ä»‹ç»ï¼Œå’±ä»¬çš„ç¬¬ä¸€ç‰ˆå·®ä¸å¤šè¿­ä»£å®Œæ¯•
ç”±äºä¹‹å‰æ—¶é—´å¾ˆç´§ï¼Œä»£ç è´¨é‡å ªå¿§ï¼Œè¿™ç¯‡ä¸»è¦æ¥åšä¸€ä¸‹ä»£ç çš„ä¼˜åŒ–å·¥ä½œä»‹ç»
 ä»£ç ä¼˜åŒ–
 ç›®å½•ç»“æ„
å½“å‰çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œæ‰€æœ‰çš„ccommandæ³¨å†Œé€»]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-11" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ11ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-11" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆ11ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p>é€šè¿‡<a href="https://juejin.cn/column/6973496830654939166" target="_blank" rel="noreferrer">å‰é¢10ç¯‡æ–‡ç« </a>çš„ä»‹ç»ï¼Œå’±ä»¬çš„ç¬¬ä¸€ç‰ˆå·®ä¸å¤šè¿­ä»£å®Œæ¯•</p>
<p>ç”±äºä¹‹å‰æ—¶é—´å¾ˆç´§ï¼Œä»£ç è´¨é‡å ªå¿§ï¼Œè¿™ç¯‡ä¸»è¦æ¥åšä¸€ä¸‹ä»£ç çš„ä¼˜åŒ–å·¥ä½œä»‹ç»</p>
<h2 id="ä»£ç ä¼˜åŒ–" tabindex="-1">ä»£ç ä¼˜åŒ– <a class="header-anchor" href="#ä»£ç ä¼˜åŒ–" aria-label="Permalink to &quot;ä»£ç ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ç›®å½•ç»“æ„" tabindex="-1">ç›®å½•ç»“æ„ <a class="header-anchor" href="#ç›®å½•ç»“æ„" aria-label="Permalink to &quot;ç›®å½•ç»“æ„&quot;">&ZeroWidthSpace;</a></h3>
<p>å½“å‰çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œæ‰€æœ‰çš„ccommandæ³¨å†Œé€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å‡åœ¨<code>./bin/index.js</code>æ–‡ä»¶ä¸­</p>
<p>ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œé¦–å…ˆå’±ä»¬æŠŠé‡Œé¢çš„ä¸œè¥¿æ‹†åˆ†ä¸€ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">/time-control</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> README.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> output</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> template</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> yarn.lock</span></span></code></pre>
</div><p>æ‹†åˆ†åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œ<code>src</code>å¢åŠ ä¸€ä¸ª<code>command</code>ç›®å½•,ç›®å½•ä¸‹æ¯ä¸ªæŒ‡ä»¤å¯¹åº”ä¸€ä¸ªcommandæ–‡ä»¶</p>
<p>ç„¶åé€šè¿‡<code>index.js</code>æ–‡ä»¶å°†è¿™äº›æŒ‡ä»¤æ±‡æ€»ï¼Œç»Ÿä¸€å¯¹å¤–æš´éœ²</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">/time-control</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> command</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> command1.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> command2.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> index.js</span></span></code></pre>
</div><p>å…·ä½“ç¤ºä¾‹å¦‚ä¸‹</p>
<p><code>src/command/command1.js</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">param1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">param2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p><code>src/command/index.js</code></p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> command1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./command1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    command1,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™æ ·åœ¨<code>bin/index,js</code>æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥å³å¯ï¼Œä¾‹å¦‚åˆå§‹åŒ–é¡¹ç›®æŒ‡ä»¤</p>
<p>è¿™æ ·ä¸šåŠ¡é€»è¾‘å’ŒæŒ‡ä»¤æ³¨å†Œé€»è¾‘å°±åˆ†å¼€äº†ï¼Œç»´æŠ¤ä¹Ÿæ›´åŠ ä¾¿æ·</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">initCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./../src/command'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆå§‹åŒ–é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"init &#x3C;projectName>"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'i'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'init project'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(initCommand)</span></span></code></pre>
</div><h3 id="é‡å¤ä»£ç " tabindex="-1">é‡å¤ä»£ç  <a class="header-anchor" href="#é‡å¤ä»£ç " aria-label="Permalink to &quot;é‡å¤ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<p>æŒ‡ä»¤çš„é€»è¾‘ä¸­ï¼Œæœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œç›´æ¥CVçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç è½¬æˆå…¬å…±æ–¹æ³•</p>
<p><code>src/utils/index.js</code>:</p>
<ul>
<li>ä¾‹å¦‚ä¸‹é¢å‡ ä¸ªç®€å•ï¼Œè€Œä½¿ç”¨åœ°æ–¹åˆå¾ˆå¤šçš„</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–å‘½ä»¤æ‰§è¡Œè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getCWD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../../.config/record.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–è¾“å‡ºæ–‡ä»¶çš„é»˜è®¤æ–‡ä»¶å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getOutFilename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'timec-res'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æœ´ç´ ä»£ç " tabindex="-1">æœ´ç´ ä»£ç  <a class="header-anchor" href="#æœ´ç´ ä»£ç " aria-label="Permalink to &quot;æœ´ç´ ä»£ç &quot;">&ZeroWidthSpace;</a></h3>
<p>æ¯«ç§’è½¬æ—¶åˆ†ç§’ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯æ ¼å¼åŒ–æ—¶é—´å±•ç¤ºï¼Œæ—§çš„é€»è¾‘å¦‚ä¸‹ï¼Œéå¸¸çš„æœ´å®æ— åï¼Œå¯è¯»æ€§ä¹Ÿä¸æ˜¯å¤ªé«˜</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> mmsToNormal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">mms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> day</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    day </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">day</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}å¤© `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> day </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hour</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    hour </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">hour</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}æ—¶ `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> hour </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> minute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    minute </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">minute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}åˆ† `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> minute </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}ç§’`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¦‚æœåªæ˜¯å±•ç¤ºæ—¶åˆ†ç§’çš„ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å·²æ³¨å†Œçš„formatæ–¹æ³•:</p>
<ul>
<li>å…¶ä¸­<code>+date.format('dd')</code>çš„ç›®çš„æ˜¯æŠŠè·å–åˆ°çš„æ—¥æœŸè½¬æˆæ•°å­—</li>
<li>ç„¶åå‡å»1å³å¯å¾—åˆ°è¿‡å»çš„å¤©æ•°</li>
<li>æ—¶åˆ†ç§’å°±ç›´æ¥æ ¼å¼åŒ–å³å¯</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">mms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dd'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}å¤©${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'hhæ—¶mmåˆ†ssç§’'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> str</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™æ ·ä»£ç å¯ä»¥è¯´ä¼˜åŒ–åˆ°äº†ä¸€è¡Œçš„æ ·å­ï¼ˆé™¤å¼€formatæ–¹æ³•çš„å…·ä½“å®ç°ï¼‰</p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ä»£ç è¿˜åœ¨å®Œå–„ä¸­ï¼Œæ˜å¤©å†å¤§å¤§ä¼˜åŒ–ä¸€éå’Œå¤§å®¶åˆ†äº«</p>
<p>é¡ºä¾¿æ¥å…¥ä¸€ä¸ªç”Ÿæˆé¡µé¢çš„é€»è¾‘(è®¡åˆ’æ˜¯æ¥å…¥Vite)</p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆåï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-10.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-10.html</guid>
            <pubDate>Wed, 11 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦è¯¦ç»†ä»‹ç»äº†å·¥å…·çš„ä½¿ç”¨ï¼Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»æ”¯æŒäº†ä¸å°‘æŒ‡ä»¤äº†
æœ¬æœŸä¸»è¦åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼Œæ–°å¢ä¸€ä¸ªæŒ‡ä»¤
* `timec report [option] [filenames...]`ï¼šå¯¼å‡ºæŠ¥]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆåï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆåï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-9.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦è¯¦ç»†ä»‹ç»äº†å·¥å…·çš„ä½¿ç”¨ï¼Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»æ”¯æŒäº†ä¸å°‘æŒ‡ä»¤äº†</p>
<p>æœ¬æœŸä¸»è¦åšä¸€äº›ä¼˜åŒ–å·¥ä½œï¼Œæ–°å¢ä¸€ä¸ªæŒ‡ä»¤</p>
<ul>
<li><code>timec report [option] [filenames...]</code>ï¼šå¯¼å‡ºæŠ¥å‘Š
<ul>
<li>å¯ä»¥ä¸ä¼ å…¥ä»»ä½•å¯é€‰çš„å‚æ•°ï¼Œç›´æ¥ä½¿ç”¨å’±ä»¬é…ç½®çš„è‡ªåŠ¨è®°å½•äº‹åŠ¡çš„æ–‡ä»¶åœ°å€</li>
<li>è¿™ä¸ªæŒ‡ä»¤ä¸»è¦æ˜¯å°†å¯¼å‡ºæŠ¥å‘Šçš„æŒ‡ä»¤æŠ½ç¦»å‡ºæ¥</li>
</ul>
</li>
</ul>
<h2 id="åŠŸèƒ½ä¼˜åŒ–" tabindex="-1">åŠŸèƒ½ä¼˜åŒ– <a class="header-anchor" href="#åŠŸèƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;åŠŸèƒ½ä¼˜åŒ–&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æŠ¥å‘Šå¯¼å‡º" tabindex="-1">æŠ¥å‘Šå¯¼å‡º <a class="header-anchor" href="#æŠ¥å‘Šå¯¼å‡º" aria-label="Permalink to &quot;æŠ¥å‘Šå¯¼å‡º&quot;">&ZeroWidthSpace;</a></h3>
<p>æ³¨å†Œä¸€ä¸ªæ–°çš„<code>command</code>,å°†åŸæœ‰çš„optionç§»åŠ¨ä¸‹æ¥</p>
<p>å…¶ä¸­å½“<code>[param]</code>åé¢å¸¦æœ‰<code>...</code> =&gt; <code>[param...]</code>æ—¶ï¼Œæ ‡è¯†è¿™ä¸ªå‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå³å¯ä»¥è·å–è¾“å…¥çš„å¤šä¸ªå€¼</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"report [filenames...]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Automatic generation of time management reports'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-D, --day [date]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One day'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-M, --month [month]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One month'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-Y, --year [year]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One year'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-R, --range [startDate_endDate]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'A time period'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filenames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // ...code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span></code></pre>
</div><p>ä»é…ç½®æ–‡ä»¶ä¸­è·å–åˆ°è®°å½•æ–‡ä»¶çš„ä½ç½®</p>
<p>å¦‚æœæ²¡æœ‰è¾“å…¥æ–‡ä»¶åä¸”æ²¡æœ‰æŒ‡å®šé»˜è®¤è®°å½•æ–‡ä»¶ï¼Œé‚£ä¹ˆæŠ›å‡ºæç¤ºä¿¡æ¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">recordFilepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (filenames.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">recordFilepath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} is not exist`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'you can use "timec upPath &#x3C;recordFilepath>" set it'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¦‚æœæ²¡æœ‰è¾“å…¥æ–‡ä»¶ï¼Œå°±è¯»å–é…ç½®çš„æ–‡ä»¶ä¸­çš„å†…å®¹</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilesContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filenames.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [recordFilepath] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filenames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, filename)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}))</span></span></code></pre>
</div><p>åç»­çš„é€»è¾‘ä¸å˜ï¼Œè·ŸåŸæ¥çš„ä¸€è‡´ï¼Œè¿™é‡Œé¢å¤–æ·»åŠ äº†ä¸€ä¸ªå…œåº•é€»è¾‘</p>
<p>å½“æ²¡æœ‰æŒ‡å®šè¾“å‡ºæ—¶é—´èŒƒå›´çš„æ—¶å€™ï¼Œè¾“å‡º<code>1970-2970</code>ï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰çš„æ•°æ®</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...more code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (month) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> year</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFullYear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-01`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å…œåº•(ä¸Šä¸‹1000å¹´,å¸Œæœ›ä»£ç è¿˜åœ¨)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1970-01-01'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2970-01-01'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><h4 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h4>
<p>ç›´æ¥å¯¼å‡ºé»˜è®¤å…¨éƒ¨çš„æ•°æ®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> report</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODY4ODMwNjgyNg==628688306826" alt="å›¾ç‰‡" loading="lazy"></p>
<p>å¯¼å‡ºæŸå¤©</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> report</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 2021-08-11</span></span></code></pre>
</div><p>å¯¼å‡ºä»Šå¹´æŸæœˆ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> report</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -M</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 8</span></span></code></pre>
</div><p>å¯¼å‡ºæŸå¹´</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> report</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -Y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 2021</span></span></code></pre>
</div><p>å¯¼å‡ºä¸€æ®µæ—¶é—´</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> report</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 2021-08-01_2021-08-11</span></span></code></pre>
</div><h3 id="å¯¼å‡ºmd-json" tabindex="-1">å¯¼å‡ºMD/JSON <a class="header-anchor" href="#å¯¼å‡ºmd-json" aria-label="Permalink to &quot;å¯¼å‡ºMD/JSON&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™éƒ¨åˆ†é€»è¾‘åŸæ¥å’Œä¸Šè¿°éƒ¨åˆ†é€»è¾‘è€¦åˆåœ¨ä¸€èµ·ï¼Œè¿™é‡Œä¹Ÿå°†å…¶æ‹†åˆ†å‡ºæ¥</p>
<p>é¢„æœŸçš„æŒ‡ä»¤<code>timec output [option] [filenames...]</code></p>
<p>é€»è¾‘è·Ÿä¸Šè¿°ç›¸åŒï¼Œé»˜è®¤ä¼šä»¥é…ç½®ä¸­çš„<code>defaultFilepath</code>ä½œä¸ºè¾“å…¥æ–‡ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'output [filenames...]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-j, --json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export result as json description file'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-m, --markdown'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export the result as a markdown file'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-t, --time'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export the result with time'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filenames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ...code æ·»åŠ è·Ÿä¸Šè¿°ä¸€æ ·çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>åç»­é€»è¾‘åŸºæœ¬ä¸€è‡´</p>
<ol>
<li>åˆ¤æ–­æ˜¯å¦æœ‰è¾“å…¥æ–‡ä»¶</li>
<li>åˆ¤æ–­æ˜¯å¦é…ç½®äº†é»˜è®¤è¾“å…¥æ–‡ä»¶</li>
<li>è·å–æ–‡ä»¶å†…å®¹</li>
<li>åˆ¤æ–­ä½¿ç”¨çš„option</li>
<li>è°ƒç”¨å¯¹åº”çš„é€»è¾‘</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 1.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (filenames.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x26;&#x26;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath)){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 2.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// 3.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆ¤æ–­è¾“å…¥çš„option</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">markdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json){</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...</span></span></code></pre>
</div><p>ä¼˜åŒ–åçš„æŒ‡ä»¤å¦‚ä¸‹</p>
<p>å¯¼å‡ºjson</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> output</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -j</span></span></code></pre>
</div><p>å¯¼å‡ºmd</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> output</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -m</span></span></code></pre>
</div><p>optionå¯ä»¥ç»„åˆä½¿ç”¨</p>
<p>ä½¿ç”¨è‡ªå®šä¹‰çš„è¾“å…¥æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> output</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -mj</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ./file1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ./file2</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODY4OTE3MzkxMg==628689173912" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›®å‰çš„æŒ‡ä»¤å¦‚ä¸‹<code>timec --help</code></p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODY4OTY0MDQzMA==628689640430" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç°åœ¨çš„ä»£ç å°±åƒshiâ›°ï¼Œä¸‹ä¸€æœŸå’Œå¤§å®¶ä¸€èµ·ä¼˜åŒ–ä¸€ä¸‹</p>
<p>æ•´æ´ä»£ç å°±è¦æ¥äº†</p>
<p>ç„¶ååç»­å†åšä¸€ä¸ªå¯è§†åŒ–çš„åŠŸèƒ½ï¼Œå°†æŠ¥å‘Šé€šè¿‡ä¸€ä¸ªç½‘é¡µå±•ç¤ºå‡ºæ¥</p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODY4ODMwNjgyNg==628688306826" length="0" type="image//mdImg/MTYyODY4ODMwNjgyNg==628688306826"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¹ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-9.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-9.html</guid>
            <pubDate>Tue, 10 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦é˜è¿°äº†è‡ªåŠ¨è®°å½•äº‹åŠ¡çš„é€»è¾‘
é€šè¿‡å‰é¢8ç¯‡æ–‡ç« çš„ä»‹ç»ï¼Œè¿™ä¸ªå·¥å…·ç›®å‰å·²ç»èƒ½å¤Ÿè¿›è¡Œåˆæ­¥çš„ä½¿ç”¨
æœ¬æ–‡å°†ä»å¤´åˆ°å°¾çš„ä»‹ç»ä¸€ä¸‹å·²ç»å¼€å‘çš„æ ¸å¿ƒåŠŸèƒ½çš„ä½¿ç”¨
 ä½¿ç”¨
 å®‰è£…
1. éœ€è¦ç”µè„‘ä¸Šå®‰è£…Node]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¹" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¹ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¹" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¹ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-8.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†è‡ªåŠ¨è®°å½•äº‹åŠ¡çš„é€»è¾‘</p>
<p>é€šè¿‡<a href="https://juejin.cn/column/6973496830654939166" target="_blank" rel="noreferrer">å‰é¢8ç¯‡æ–‡ç« </a>çš„ä»‹ç»ï¼Œè¿™ä¸ªå·¥å…·ç›®å‰å·²ç»èƒ½å¤Ÿè¿›è¡Œåˆæ­¥çš„ä½¿ç”¨</p>
<p>æœ¬æ–‡å°†ä»å¤´åˆ°å°¾çš„ä»‹ç»ä¸€ä¸‹å·²ç»å¼€å‘çš„æ ¸å¿ƒåŠŸèƒ½çš„ä½¿ç”¨</p>
<h2 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-label="Permalink to &quot;å®‰è£…&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>éœ€è¦ç”µè„‘ä¸Šå®‰è£…Node</li>
<li>å¦‚æœä¾èµ–æ‰¾ä¸åˆ°ï¼Œè¯·å…ˆå°†npmæºåˆ‡æ¢ä¸ºå®˜æ–¹æº</li>
</ol>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> https://registry.npmjs.org/</span></span></code></pre>
</div><p>å®‰è£…</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> time-control</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNTM4NTM2Mg==628605385362" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="æŸ¥çœ‹æ”¯æŒçš„æŒ‡ä»¤" tabindex="-1">æŸ¥çœ‹æ”¯æŒçš„æŒ‡ä»¤ <a class="header-anchor" href="#æŸ¥çœ‹æ”¯æŒçš„æŒ‡ä»¤" aria-label="Permalink to &quot;æŸ¥çœ‹æ”¯æŒçš„æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>é€šè¿‡8å¤©çš„ä¸æ‡ˆåŠªåŠ›ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å¼€å‘å‡ºäº†å¾ˆå¤šçš„æŒ‡ä»¤ï¼Œä¸‹é¢å°†æ¼”ç¤ºä¸€ä¸‹æ ¸å¿ƒçš„å‡ ä¸ªï¼š</p>
<ul>
<li>è‡ªåŠ¨è®°å½•</li>
<li>ç”Ÿæˆå‘¨æŠ¥/æ—¥æŠ¥/æœˆæŠ¥ï¼ˆæ—¶é—´æŠ¥å‘Šï¼‰</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --help</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNTY3NDEyOA==628605674128" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="é¡¹ç›®åˆå§‹åŒ–" tabindex="-1">é¡¹ç›®åˆå§‹åŒ– <a class="header-anchor" href="#é¡¹ç›®åˆå§‹åŒ–" aria-label="Permalink to &quot;é¡¹ç›®åˆå§‹åŒ–&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ›å»ºä¸€ä¸ªç”¨äºè®°å½•çš„é¡¹ç›®</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> timeLog</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNjAzNjY5OQ==628606036700" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="åˆ›å»ºæ–‡ä»¶" tabindex="-1">åˆ›å»ºæ–‡ä»¶ <a class="header-anchor" href="#åˆ›å»ºæ–‡ä»¶" aria-label="Permalink to &quot;åˆ›å»ºæ–‡ä»¶&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ›å»ºä¸€ä¸ªç”¨äºè‡ªåŠ¨å†™å…¥å†…å®¹çš„æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> auto.md</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNjE1MTM1OQ==628606151359" alt="å›¾ç‰‡" loading="lazy"></p>
<p>åˆ›å»ºçš„æ¨¡æ¿æ–‡ä»¶ä¼šæœ‰ä¸€äº›å†…å®¹ï¼Œå¯ä»¥æ‰‹åŠ¨æ¸…é™¤ä¸€ä¸‹</p>
<h3 id="è®¾ç½®æ–‡ä»¶è·¯å¾„" tabindex="-1">è®¾ç½®æ–‡ä»¶è·¯å¾„ <a class="header-anchor" href="#è®¾ç½®æ–‡ä»¶è·¯å¾„" aria-label="Permalink to &quot;è®¾ç½®æ–‡ä»¶è·¯å¾„&quot;">&ZeroWidthSpace;</a></h3>
<p>è®¾ç½®è‡ªåŠ¨è®°å½•æ–‡ä»¶çš„è·¯å¾„</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> upPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ./auto.md</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNjM0MDE3Mw==628606340173" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="ä»»åŠ¡ç®¡ç†" tabindex="-1">ä»»åŠ¡ç®¡ç† <a class="header-anchor" href="#ä»»åŠ¡ç®¡ç†" aria-label="Permalink to &quot;ä»»åŠ¡ç®¡ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>æŸ¥çœ‹æ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> task</span></span></code></pre>
</div><p>åˆ›å»ºæ–°çš„ä»»åŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p>åˆ‡æ¢ä»»åŠ¡,è¿™é‡Œå’Œåˆ›å»ºä»»åŠ¡ä¸€æ ·çš„æŒ‡ä»¤ä¸å‚æ•°</p>
<p>å¦‚æœä»»åŠ¡å·²å­˜åœ¨å°±é€‰æ‹©ä½¿ç”¨è¿™ä¸ªä»»åŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p>åˆ é™¤å·²å­˜åœ¨çš„ä»»åŠ¡</p>
<ul>
<li>åŠ ä¸Š<code>-d</code>optionå°±ä»£è¡¨æ˜¯ç§»é™¤è¿™ä¸ªä»»åŠ¡</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNjUzOTc3NA==628606539774" alt="å›¾ç‰‡" loading="lazy"></p>
<h3 id="äº‹åŠ¡ç®¡ç†" tabindex="-1">äº‹åŠ¡ç®¡ç† <a class="header-anchor" href="#äº‹åŠ¡ç®¡ç†" aria-label="Permalink to &quot;äº‹åŠ¡ç®¡ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> thing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p>æŸ¥çœ‹å½“å‰è¿›è¡Œä¸­çš„äº‹åŠ¡</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> thing</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNjg0MDEzMQ==628606840131" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ç»“æŸå½“å‰äº‹åŠ¡</p>
<ul>
<li>åŠ ä¸Š<code>-s</code>å‚æ•°å³å¯</li>
<li>ç»“æŸäº‹åŠ¡ï¼Œä¼šè‡ªåŠ¨å°†åˆšåˆšè¿›è¡Œçš„äº‹åŠ¡è®°å½•åˆ°æ–‡ä»¶ä¸­</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> thing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -s</span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzAyMDIxNg==628607020216" alt="å›¾ç‰‡" loading="lazy"></p>
<p>ä¸åˆ‡æ¢äº‹åŠ¡ï¼Œç›´æ¥å¼€å§‹æ–°çš„äº‹åŠ¡</p>
<ul>
<li>å°†è¿›è¡Œä¸­çš„ç›´æ¥ç»“æŸï¼Œç„¶åå°†ç»“æœå†™å…¥æ–‡ä»¶ä¸­</li>
<li>ç„¶åå¼€å§‹æ–°çš„äº‹åŠ¡</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> thing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzIyMjE2Nw==628607222167" alt="å›¾ç‰‡" loading="lazy"></p>
<p>æ³¨ï¼šäº‹åŠ¡è®°å½•çš„æ•°å­—æ˜¯ï¼Œäº‹åŠ¡çš„è€—æ—¶ï¼Œå•ä½æ˜¯å°æ—¶ï¼ˆhoursï¼‰ä¿ç•™5ä½å°æ•°</p>
<p>äº‹åŠ¡ç›¸å…³çš„æ“ä½œåˆ°è¿™å°±æ¼”ç¤ºå®Œæ¯•äº†</p>
<p>æœ‰äº†äº‹åŠ¡è®°å½•çš„æ•°æ®ï¼Œä¸‹é¢å°±æ˜¯ç”ŸæˆæŠ¥å‘Šäº†</p>
<p>ä¸‹é¢å°†ä»‹ç»åˆ°æˆ·å¯¼å‡ºåŠŸèƒ½</p>
<h3 id="å¤šæ ·åŒ–å¯¼å‡º" tabindex="-1">å¤šæ ·åŒ–å¯¼å‡º <a class="header-anchor" href="#å¤šæ ·åŒ–å¯¼å‡º" aria-label="Permalink to &quot;å¤šæ ·åŒ–å¯¼å‡º&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="å¯¼å‡ºä¸ºjson" tabindex="-1">å¯¼å‡ºä¸ºJSON <a class="header-anchor" href="#å¯¼å‡ºä¸ºjson" aria-label="Permalink to &quot;å¯¼å‡ºä¸ºJSON&quot;">&ZeroWidthSpace;</a></h4>
<p>å¼€å‘è€…ä»¬å¯ä»¥ç”¨è¿™ä¸²jsonï¼Œè‡ªå·±è¿›è¡Œä¸ªæ€§åŒ–çš„åˆ†æ</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -oj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">filepat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzQ0ODc3Mg==628607448772" alt="å›¾ç‰‡" loading="lazy"></p>
<h4 id="å¯¼å‡ºmarkdown" tabindex="-1">å¯¼å‡ºMarkdown <a class="header-anchor" href="#å¯¼å‡ºmarkdown" aria-label="Permalink to &quot;å¯¼å‡ºMarkdown&quot;">&ZeroWidthSpace;</a></h4>
<p>åŠ ä¸Š<code>-t</code>é€‰é¡¹å¯ä¸ºmdæ–‡ä»¶åŠ ä¸Šè¯¦ç»†çš„è€—æ—¶ï¼ŒåŒ…å«<code>äº‹åŠ¡</code>ï¼Œ<code>ä»»åŠ¡</code>ï¼Œ<code>å¤©</code>ç»´åº¦</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -omt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">filepat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzU2MzYzMQ==628607563631" alt="å›¾ç‰‡" loading="lazy"></p>
<h4 id="ç”Ÿæˆæ—¥æŠ¥" tabindex="-1">ç”Ÿæˆæ—¥æŠ¥ <a class="header-anchor" href="#ç”Ÿæˆæ—¥æŠ¥" aria-label="Permalink to &quot;ç”Ÿæˆæ—¥æŠ¥&quot;">&ZeroWidthSpace;</a></h4>
<p>æŒ‡å®šè¦æŸ¥çœ‹çš„æ—¥æœŸå’Œåˆ†æçš„æ–‡ä»¶å³å¯ï¼š</p>
<ul>
<li>ç”Ÿæˆçš„æŠ¥å‘ŠåŒ…å«ï¼Œä¸€å¤©çš„æ€»è€—æ—¶ï¼ŒæŸä¸ªä»»åŠ¡çš„æ€»è€—æ—¶</li>
</ul>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">dat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">filepat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzczNjE2Nw==628607736167" alt="å›¾ç‰‡" loading="lazy"></p>
<h4 id="ç”ŸæˆæœˆæŠ¥" tabindex="-1">ç”ŸæˆæœˆæŠ¥ <a class="header-anchor" href="#ç”ŸæˆæœˆæŠ¥" aria-label="Permalink to &quot;ç”ŸæˆæœˆæŠ¥&quot;">&ZeroWidthSpace;</a></h4>
<p>é€šè¿‡<code>-M</code>æŒ‡å®šè¦æŸ¥çœ‹çš„æœˆä»½å³å¯</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -M</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">mont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">filepat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwNzg5NzAxNA==628607897014" alt="å›¾ç‰‡" loading="lazy"></p>
<h4 id="ä¸€æ®µæ—¶é—´çš„æŠ¥å‘Š" tabindex="-1">ä¸€æ®µæ—¶é—´çš„æŠ¥å‘Š <a class="header-anchor" href="#ä¸€æ®µæ—¶é—´çš„æŠ¥å‘Š" aria-label="Permalink to &quot;ä¸€æ®µæ—¶é—´çš„æŠ¥å‘Š&quot;">&ZeroWidthSpace;</a></h4>
<p>å¯ä»¥ç”¨è¿™ä¸ªç”Ÿæˆå‘¨æŠ¥ï¼Œä»»æ„æ—¶é—´èŒƒå›´çš„æŠ¥å‘Š</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">startTime_endTim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &#x3C;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">filepat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">></span></span></code></pre>
</div><p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODYwODAxNjQ2Ng==628608016466" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h2>
<p>æ ¸å¿ƒçš„åŠŸèƒ½åŸºæœ¬éƒ½è¯¦ç»†ä»‹ç»å®Œæ¯•ï¼Œæ¼”ç¤ºè¿‡ç¨‹ä¸­å‘ç°äº†ä¸€äº›bugï¼Œç•™åˆ°ä¸‹æœŸè¿›è¡Œä¼˜åŒ–</p>
<p>æ•°æ®å±•ç¤ºè¿™ä¸€å—åç»­ä¹Ÿå°†ä¸ºå¤§å®¶å¸¦æ¥ä¸°å¯Œçš„åŠŸèƒ½ï¼Œçµæ„Ÿè¿˜åœ¨ï¼Œåªå·®æ—¶é—´</p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODYwNTM4NTM2Mg==628605385362" length="0" type="image//mdImg/MTYyODYwNTM4NTM2Mg==628605385362"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…«ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-8.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-8.html</guid>
            <pubDate>Mon, 09 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦é˜è¿°äº†åˆ é™¤ä»»åŠ¡ä¸äº‹ç‰©ç®¡ç†ç›¸å…³çš„æŒ‡ä»¤å¼€å‘
æœ¬æ–‡å°†ç€é‡ä»‹ç»ä¸Šæ–‡æ²¡è®²è§£å®Œçš„éƒ¨åˆ†`writeRecord`æ–¹æ³•ï¼Œå°†è®°å½•çš„äº‹ç‰©è‡ªåŠ¨è¾“å‡ºåˆ°é…ç½®çš„æ–‡ä»¶ä¸­
 æœ¬æœŸæ•ˆæœ

 åŠŸèƒ½å¼€å‘
 è‡ªåŠ¨è®°å½•äº‹åŠ¡]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å…«" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…«ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å…«" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…«ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-7.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†åˆ é™¤ä»»åŠ¡ä¸äº‹ç‰©ç®¡ç†ç›¸å…³çš„æŒ‡ä»¤å¼€å‘</p>
<p>æœ¬æ–‡å°†ç€é‡ä»‹ç»ä¸Šæ–‡æ²¡è®²è§£å®Œçš„éƒ¨åˆ†<code>writeRecord</code>æ–¹æ³•ï¼Œå°†è®°å½•çš„äº‹ç‰©è‡ªåŠ¨è¾“å‡ºåˆ°é…ç½®çš„æ–‡ä»¶ä¸­</p>
<h2 id="æœ¬æœŸæ•ˆæœ" tabindex="-1">æœ¬æœŸæ•ˆæœ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>æ¼”ç¤ºè¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ªbugï¼Œèµ¶ç´§ä¿®å¤ä¸€ä¸‹</p>
</blockquote>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODUyMTgxOTI4Mw==628521819283" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="è‡ªåŠ¨è®°å½•äº‹åŠ¡" tabindex="-1">è‡ªåŠ¨è®°å½•äº‹åŠ¡ <a class="header-anchor" href="#è‡ªåŠ¨è®°å½•äº‹åŠ¡" aria-label="Permalink to &quot;è‡ªåŠ¨è®°å½•äº‹åŠ¡&quot;">&ZeroWidthSpace;</a></h3>
<p>é¦–å…ˆè¡¥é½æ‰“å°äº‹åŠ¡è€—æ—¶çš„é€»è¾‘</p>
<ul>
<li>ä»è·å–çš„é…ç½®æ–‡ä»¶ä¸­è§£æ„å‡ºäº‹åŠ¡å¯¹è±¡<code>thing</code>,åŒ…å«ä¸¤ä¸ªå±æ€§
<ul>
<li>name</li>
<li>startTime</li>
</ul>
</li>
<li>ä½¿ç”¨<code>new Date(startTime)</code>è½¬æ¢å¼€å§‹æ—¥æœŸ</li>
<li>è°ƒç”¨<code>mmsToNormal</code>è®¡ç®—å½“å‰æ—¶é—´ä¸å¼€å§‹æ—¶é—´çš„å·®å€¼</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">thing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(thing.startTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`äº‹åŠ¡è€—æ—¶:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mmsToNormal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
</div><p><code>mmsToNormal</code>æ–¹æ³•éå¸¸æœ´ç´ ï¼Œå°†ä¸€ä¸ªæ¯«ç§’è¡¨ç¤ºçš„æ—¶é—´æ¢æˆ<code>å¤©ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’</code></p>
<ul>
<li>å…¶ä¸­æ•°å­—å–æ•´é‡‡ç”¨ä½è¿ç®—ç¬¦<code>&gt;&gt;</code>,å³ç§»0ä½</li>
<li>é€çº§å–å€¼</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> mmsToNormal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">mms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> day</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> day </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hour</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> hour </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> minute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    mms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> minute </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 60</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">day</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}å¤© ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">hour</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}æ—¶ ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">minute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}åˆ† ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}ç§’`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åœ¨ç»“æŸå½“å‰äº‹åŠ¡å’Œç›´æ¥å¼€å§‹æ–°çš„äº‹åŠ¡çš„æ—¶å€™éƒ½ä¼šæ‰“å°è¿™ä¸ªä»»åŠ¡çš„è€—æ—¶ï¼Œç„¶åå°†å…¶ç»“æœå†™å…¥åˆ°mdä¸­</p>
<p>å¼€å§‹æ–°ä»»åŠ¡çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰“å°è€—æ—¶</li>
<li>è¾“å‡ºè®°å½•åˆ°æ–‡ä»¶ä¸­</li>
<li>æ›´æ–°äº‹åŠ¡çš„å€¼ä¸ºæœ€æ–°çš„äº‹åŠ¡</li>
<li>æ›´æ–°é…ç½®</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`äº‹åŠ¡è€—æ—¶:${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mmsToNormal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeRecord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath, task, thing.name, thing.startTime)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing.startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config))</span></span></code></pre>
</div><p>ä¸‹é¢å¼€å§‹ä»‹ç»<code>writeRecord</code>çš„å®ç°,æ¥æ”¶4ä¸ªå‚æ•°</p>
<ul>
<li>filePathï¼šè¾“å‡ºç›®æ ‡æ–‡ä»¶çš„è·¯å¾„</li>
<li>taskï¼šå½“å‰è¿›è¡Œä¸­çš„ä»»åŠ¡å</li>
<li>thingï¼šå½“å‰è¿›è¡Œä¸­çš„äº‹åŠ¡å</li>
<li>startTimeï¼šäº‹åŠ¡å¼€å§‹æ—¶é—´</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> writeRecord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">thing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">startTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ...code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é€šè¿‡<code>getJSON</code>ä¸<code>getFileContent</code>æ–¹æ³•åˆåŠ›å°†è¾“å‡ºç›®æ ‡æ–‡ä»¶è½¬ä¸º<code>json</code></p>
<p>å°†å¼€å§‹æ—¶é—´è½¬ä¸º<code>Date</code>å¯¹è±¡ï¼Œè°ƒç”¨<code>Date.prototype.format</code>æ–¹æ³•è·å–äº‹åŠ¡å¼€å§‹æ—¶é—´çš„æ—¥æœŸ</p>
<p>å…¶ä¸­<code>format</code>æ–¹æ³•çš„é€»è¾‘æ¥æºä¸<a href="https://blog.csdn.net/meizz/article/details/405708" target="_blank" rel="noreferrer">ç½‘ä¸Šå¤§ç¥å†™çš„æ­£åˆ™</a></p>
<p>äº‹åŠ¡æŒç»­æ—¶é—´ä¿ç•™5ä½å°æ•°</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filePath))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(startTime)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'yyyy-MM-dd'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> hours</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 3600000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>å¯¼å‡ºjsonä½¿ç”¨çš„æ˜¯<code>outPutMarkdown</code>æ–¹æ³•ï¼Œé»˜è®¤å¯¼å‡ºç»“æœä¸ä¼šå¸¦<code>æ—¶é—´</code>ï¼Œä¾‹å¦‚</p>
<div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold"># æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">## ä»»åŠ¡å</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> content</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹åŠ¡2</span></span></code></pre>
</div><p>é€šè¿‡ä¿®æ”¹è·å–çš„jsonï¼Œå°†contentå†…å®¹åŠ ä¸Šæ—¶é—´ï¼ŒåŠ ä¸Šæ—¶é—´åçš„è¾“å‡ºç»“æœ</p>
<div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold"># æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">## ä»»åŠ¡å</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> content time</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹åŠ¡2 0.02</span></span></code></pre>
</div><p>ä¿®æ”¹åŸæ•°æ®<code>content</code>åŠ ä¸Š<code>time</code>çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡reduceæ–¹æ³•éå†æ‰€æœ‰çš„tasks</li>
<li>é€šè¿‡mapæ–¹æ³•å°†æ‰€æœ‰taskä¸­çš„thingsè¯»å–å‡ºæ¥</li>
<li>è°ƒç”¨flatæ–¹æ³•å±•å¼€æ•°ç»„</li>
<li>å†éå†æ¯ä¸€ä¸ªthingï¼Œä¸ºå…¶contentåŠ ä¸Šæ—¶é—´</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> things</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> json.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> things</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.things).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(things)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, [])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> t</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    t.content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">content</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>ä¸‹é¢å¼€å§‹æ ¸å¿ƒé€»è¾‘</p>
<p>éå†<code>json</code>åˆ¤æ–­äº‹åŠ¡å¯¹åº”çš„æ—¥æœŸæ˜¯å¦å·²ç»å­˜åœ¨</p>
<p>ä¸å­˜åœ¨åˆ™ä¸ºå½“å¤©çš„é¦–ä¸ªæ•°æ®ï¼Œç›´æ¥å‘jsonå¯¹è±¡ä¸­æ’å…¥è¿™ä¸ªå®Œæ•´çš„å¯¹è±¡å³å¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dayIdx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> json.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">findIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> title)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (dayIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        tasks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                title: task,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                things: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">hours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    json.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(item)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filePath, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">outPutMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¦‚æœä¸æ˜¯å½“å¤©é¦–ä¸ªäº‹åŠ¡ï¼Œæ¥ç€å°±åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæ–°çš„ä»»åŠ¡</p>
<p>éå†è¿™ä¸€å¤©æ•°æ®ä¸­çš„æ¯ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ¤æ–­ä»»åŠ¡åæ˜¯å¦å’Œå½“å‰çš„ä»»åŠ¡ä¸€è‡´</p>
<ul>
<li>å¦‚æœæ˜¯ï¼Œåˆ™å°†è¿™ä¸ªä»»åŠ¡åŠäº‹åŠ¡ç›¸å…³æ•°æ®æ’å…¥åˆ°è¿™ä¸€å¤©çš„æ•°æ®ä¸­</li>
<li><code>dataItem</code>è¡¨ç¤ºè¿™ä¸€å¤©çš„æ•°æ®</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dataItem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> json[dayIdx]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> taskIdx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataItem.tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">findIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> task)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ–°çš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (taskIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    dataItem.tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title: task,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        things: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">hours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filePath, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">outPutMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æœ€åå°±æ˜¯ç›´æ¥å°†äº‹åŠ¡æ’å…¥åˆ°æ—§çš„ä»»åŠ¡å½“ä¸­</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> taskItem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataItem.tasks[taskIdx]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">taskItem.things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">hours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    time: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'0'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filePath, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">outPutMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span></code></pre>
</div><p>åˆ°æ­¤<code>timc thing [option] [name]</code>æŒ‡ä»¤åŸºæœ¬å¼€å‘å®Œæ¯•</p>
<ul>
<li><code>--stop,-s</code>:ç»“æŸå½“å‰äº‹åŠ¡</li>
</ul>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODUyMTgxOTI4Mw==628521819283" length="0" type="image//mdImg/MTYyODUyMTgxOTI4Mw==628521819283"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸ƒï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-7.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-7.html</guid>
            <pubDate>Sun, 08 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[# åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸ƒï¼‰

## å‰è¨€
[ä¸Šä¸€ç¯‡æ–‡ç« ](./time-tools-6.md)ä¸»è¦é˜è¿°äº†å¤šç§æ—¥æœŸçš„æ•°æ®å¯¼å‡ºä¸ä»»åŠ¡ç®¡ç†ç›¸å…³çš„æŒ‡ä»¤å¼€å‘

æœ¬æ–‡å°†ä¼šæ¶‰åŠæŒ‡ä»¤ï¼š
1. åˆ é™¤æŒ‡å®šä»»åŠ¡:`timec task -d [name]`
   1. æ·»åŠ äº†ä¸€ä¸ª`option`å‚æ•°`-d`ï¼Œæ ‡è¯†è¦ç§»é™¤è¿™ä¸ªä»»åŠ¡
2. è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®:`timec upPath <recordFilepath>`
   1. ç”¨æˆ·åç»­é€šè¿‡æŒ‡ä»¤æ·»åŠ /å®Œæˆäº‹åŠ¡å‡ä¼šåœ¨æ­¤è®°å½•
3. å¼€å§‹/ç»“æŸå…·ä½“çš„äº‹åŠ¡ï¼š`timec thing -s [name]`
   1. å…¶ä¸­`-s`æ ‡è¯†ï¼Œæ˜¯å¦æš‚å­˜ä»»åŠ¡çŠ¶æ€çš„å¯é€‰å‚æ•°

## æœ¬æœŸæ•ˆæœ
TODOï¼š è¡¥ä¸€å¼ å›¾

## åŠŸèƒ½å¼€å‘
### åˆ é™¤ä»»åŠ¡æŒ‡ä»¤
è¿™ä¸ªåŠŸèƒ½åªéœ€åœ¨æ˜¨å¤©å¼€å‘çš„ä»»åŠ¡ç®¡ç†æŒ‡ä»¤çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªå¯é€‰æŒ‡ä»¤å³å¯
* é¦–å…ˆä½¿ç”¨`option`æ–¹æ³•æ³¨å†Œ`--del`å¯é€‰å‚æ•°
* é€šè¿‡è§£æ„ä»`cmdObj`ä¸Šæ‹¿åˆ°`del`çš„å€¼
```js
commander.command("task [name]")
    .option('-d, --del', 'Delete task or thing')
    .action((name, cmdObj) => {
        const { del } = cmdObj
        // ...code
    }
```

å¦‚æœdelçš„å€¼ä¸ºtrueï¼Œè¡¨æ˜è®¾ç½®äº†delè¿™ä¸ªoption
* ä½¿ç”¨spliceæ–¹æ³•ï¼Œä»ä»»åŠ¡æ•°ç»„ä¸­åˆ é™¤è¿™ä¸€é¡¹
* åˆ é™¤åæ›´æ–°é…ç½®æ–‡ä»¶
  * å¦‚æœä»»åŠ¡è¢«æ¸…ç©ºäº†ï¼Œé‚£ä¹ˆå°†`defaultTaskIdx`ç½®ä¸º-1
  * å¦åˆ™ä»¥å½“å‰ä»»åŠ¡åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ï¼Œä½œä¸ºæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡

```js
const idx = tasks.findIndex(v => v === name)

if (del) {
    tasks.splice(idx, 1)
    console.log(`del ${name} success`);
    config.defaultTaskIdx = tasks.length ? 0 : -1
    if (config.defaultTaskIdx === 0) {
        console.log('now use taskï¼š', tasks[config.defaultTaskIdx]);
    }
}

writeFileSync(configPath, JSON.stringify(config))
```
åˆ é™¤ä»»åŠ¡çš„åŠŸèƒ½ï¼Œå°±ç®€ç®€å•å•çš„æå®šäº†

### è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®

#### åŠŸèƒ½èƒŒæ™¯
åœ¨æœªå¼•å…¥é€šè¿‡æŒ‡ä»¤è®°å½•æ‰€åšä»»åŠ¡çš„è€—æ—¶æ—¶

éœ€è¦æ‰‹åŠ¨å°†è¿™äº›è®°å½•æ·»åŠ åˆ°è®°å½•æ–‡ä»¶ä¸­

æœŸæœ›åç»­èƒ½é€šè¿‡æŒ‡ä»¤ï¼Œå°±è‡ªåŠ¨è®¡ç®—äº‹åŠ¡è€—æ—¶ï¼Œç„¶åå°†è®°å½•è‡ªåŠ¨å†™åˆ°ç›®æ ‡æ–‡ä»¶ä¸­

å¦‚æœç›®æ ‡æ–‡ä»¶çš„åœ°å€æ˜¯æ‹¼åœ¨å‚æ•°ä¸­ï¼Œéš¾å…åœ¨æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ç¨æ˜¾éº»çƒ¦

ä¸ºäº†é¿å…è¿™ä¸ªå°éº»çƒ¦ï¼Œå°±å°†ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­

#### æŒ‡ä»¤å¼€å‘
å…¶ä¸­å­˜å‚¨ä½ç½®å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„`recordFilepath`å±æ€§
```json
{
    "recordFilepath":"/Users/sugar/Documents/fe-project/time-control/test.md"
}
```

é€šè¿‡`commander.command`æ³¨å†ŒæŒ‡ä»¤ï¼Œè®¾ç½®ä¸º`upPath <recordFilepath>`
* emmè¿™ä¸ªå‘½åæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªï¼Œæš‚æ—¶æ²¡æƒ³åˆ°æ›´å¥½çš„å‘½åæ–¹å¼ï¼Œåç»­åœ¨ä¼˜åŒ–é˜¶æ®µç»Ÿä¸€æ›´æ–°

```js
/**
 * æ›´æ”¹é»˜è®¤è®°å½•æ–‡ä»¶çš„ä½ç½®
 */
commander.command("upPath <recordFilepath>")
    // .alias('urp')
    .description('update config recordFilepath')
    .action((recordFilePath) => {
        // ...code
    })
```

é€šè¿‡æŒ‡ä»¤æ‰§è¡Œç›®å½•`cwd`ä¸ä¼ å…¥çš„æ–‡ä»¶ç›¸å¯¹è·¯å¾„`recordFilePath`å¾—åˆ°è¾“å‡ºæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„

ç„¶åå°†è¿™ä¸ªç»å¯¹è·¯å¾„èµ‹å€¼ç»™é…ç½®æ–‡ä»¶çš„`recordFilePath`å±æ€§

é€šè¿‡`fs.existsSync`æ–¹æ³•ï¼Œåˆ¤æ–­è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±è‡ªåŠ¨åˆ›å»º

æœ€åé€šè¿‡`fs.writeFileSync`æ›´æ–°é…ç½®æ–‡ä»¶
```js
const config = require(configPath)
const fullPath = path.resolve(cwd, recordFilePath)
config.recordFilepath = fullPath
if (!existsSync(fullPath)) {
    // è‡ªåŠ¨åˆ›å»ºç©ºæ–‡ä»¶
    createFile(fullPath, '', false)
}
writeFileSync(configPath, JSON.stringify(config))
console.log('set recordFilePath successï¼š', fullPath);
```

è®¾ç½®è¾“å‡ºæ–‡ä»¶è·¯å¾„çš„æŒ‡ä»¤å¼€å‘åˆ°è¿™å°±å®Œæ¯•äº†


### äº‹åŠ¡ç®¡ç†æŒ‡ä»¤å¼€å‘
æœŸæœ›é€šè¿‡ç®€å•çš„`timec thing -s [name]`,å³å¯å®Œæˆäº‹åŠ¡çš„æ·»åŠ ï¼Œç»“æŸï¼Œè‡ªåŠ¨å†™å…¥åˆ°æ–‡ä»¶

å…¶ä¸­`--stop`optionæ˜¯å¯é€‰çš„ï¼Œæ ‡è¯†ç»“æŸè¿™ä¸ªå·¥ä½œï¼Œå°†å…¶å†™å…¥åˆ°æ–‡ä»¶ä¹‹ä¸­å»

é¦–å…ˆæ³¨å†ŒæŒ‡ä»¤ï¼Œç„¶åä»é…ç½®æ–‡ä»¶ä¸­å–å‡ºç›¸å…³çš„é…ç½®é¡¹ç›®

å…¶ä¸­`thing`å±æ€§çš„ç»“æ„å¦‚ä¸‹
```json
{
    "name":"abc",
    "startTime":"2021-08-08 22:18:19"
}
```
åˆ†åˆ«å­˜æ”¾å½“å‰è¿›è¡Œä¸­çš„äº‹åŠ¡åå’Œäº‹åŠ¡å¼€å§‹æ—¶é—´

```js
commander.command("thing [name]")
    .option('-s, --stop', 'stop a thing ')
    .description('update config recordFilepath')
    .action((name, cmdObj) => {
        const config = require(configPath)
        const { thing, recordFilepath, tasks, defaultTaskIdx } = config
        const task = tasks[defaultTaskIdx]
        
    })
```

é¦–å…ˆåšä¸€äº›åˆ¤æ–­ï¼Œé¿å…å¼•å‘é”™è¯¯
1. åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†å†™å‡ºæ–‡ä»¶è·¯å¾„
2. åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†ä»»åŠ¡

å¦‚æœæ²¡æœ‰è®¾ç½®ï¼ŒæŠ›å‡ºå“åº”æç¤ºä¿¡æ¯
```js
const s = new Date(thing.startTime)

if (!existsSync(recordFilepath)) {
    console.log(`${recordFilepath} is not exist`);
    console.log('you can use "timec upPath <recordFilepath>" set it');
    return
}
if (!task) {
    console.log('not set task');
    console.log('you can use "timec task [name]" set it');
    return
}

```

å¦‚æœæ²¡æœ‰ä¼ å…¥äº‹ä»¶åç§°`name`ï¼Œè¡¨ç¤ºä½¿ç”¨æŸ¥è¯¢åŠŸèƒ½ï¼Œæ‰“å°å½“å‰äº‹åŠ¡çš„åŸºæœ¬ä¿¡æ¯
* åç§°
* å¼€å§‹æ—¶é—´
* å·²ç»æŒç»­äº†å¤šä¹…ï¼ˆæš‚æ—¶æ¯«ç§’ä»£æ›¿ï¼‰ï¼ŒTODOï¼šåç»­ä¼˜åŒ–

å¦‚æœè®¾ç½®äº†ç»“æŸçš„æ ‡å¿—`stop`ï¼Œåˆ™å°†è¿™ä¸ªäº‹åŠ¡çš„è®°å½•å†™å…¥åˆ°æ–‡ä»¶ä¹‹ä¸­å»ï¼Œæ›´æ–°é…ç½®æ–‡ä»¶

```js
      
if (!name) {
    if (!thing.name) {
        console.log('Events not in progress');
        return
    }
    const { stop } = cmdObj
    if (stop) {
        writeRecord(recordFilepath, task, thing.name, thing.startTime)
        thing.name = ''
        thing.startTime = ''
        writeFileSync(configPath, JSON.stringify(config))
        return
    }
    console.log(']]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¸ƒ" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸ƒï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¸ƒ" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸ƒï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-6.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†å¤šç§æ—¥æœŸçš„æ•°æ®å¯¼å‡ºä¸ä»»åŠ¡ç®¡ç†ç›¸å…³çš„æŒ‡ä»¤å¼€å‘</p>
<p>æœ¬æ–‡å°†ä¼šæ¶‰åŠæŒ‡ä»¤ï¼š</p>
<ol>
<li>åˆ é™¤æŒ‡å®šä»»åŠ¡:<code>timec task -d [name]</code>
<ol>
<li>æ·»åŠ äº†ä¸€ä¸ª<code>option</code>å‚æ•°<code>-d</code>ï¼Œæ ‡è¯†è¦ç§»é™¤è¿™ä¸ªä»»åŠ¡</li>
</ol>
</li>
<li>è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®:<code>timec upPath &lt;recordFilepath&gt;</code>
<ol>
<li>ç”¨æˆ·åç»­é€šè¿‡æŒ‡ä»¤æ·»åŠ /å®Œæˆäº‹åŠ¡å‡ä¼šåœ¨æ­¤è®°å½•</li>
</ol>
</li>
<li>å¼€å§‹/ç»“æŸå…·ä½“çš„äº‹åŠ¡ï¼š<code>timec thing -s [name]</code>
<ol>
<li>å…¶ä¸­<code>-s</code>æ ‡è¯†ï¼Œæ˜¯å¦æš‚å­˜ä»»åŠ¡çŠ¶æ€çš„å¯é€‰å‚æ•°</li>
</ol>
</li>
</ol>
<h2 id="æœ¬æœŸæ•ˆæœ" tabindex="-1">æœ¬æœŸæ•ˆæœ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<p>TODOï¼š è¡¥ä¸€å¼ å›¾</p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åˆ é™¤ä»»åŠ¡æŒ‡ä»¤" tabindex="-1">åˆ é™¤ä»»åŠ¡æŒ‡ä»¤ <a class="header-anchor" href="#åˆ é™¤ä»»åŠ¡æŒ‡ä»¤" aria-label="Permalink to &quot;åˆ é™¤ä»»åŠ¡æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>è¿™ä¸ªåŠŸèƒ½åªéœ€åœ¨æ˜¨å¤©å¼€å‘çš„ä»»åŠ¡ç®¡ç†æŒ‡ä»¤çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªå¯é€‰æŒ‡ä»¤å³å¯</p>
<ul>
<li>é¦–å…ˆä½¿ç”¨<code>option</code>æ–¹æ³•æ³¨å†Œ<code>--del</code>å¯é€‰å‚æ•°</li>
<li>é€šè¿‡è§£æ„ä»<code>cmdObj</code>ä¸Šæ‹¿åˆ°<code>del</code>çš„å€¼</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"task [name]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-d, --del'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Delete task or thing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ...code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span></code></pre>
</div><p>å¦‚æœdelçš„å€¼ä¸ºtrueï¼Œè¡¨æ˜è®¾ç½®äº†delè¿™ä¸ªoption</p>
<ul>
<li>ä½¿ç”¨spliceæ–¹æ³•ï¼Œä»ä»»åŠ¡æ•°ç»„ä¸­åˆ é™¤è¿™ä¸€é¡¹</li>
<li>åˆ é™¤åæ›´æ–°é…ç½®æ–‡ä»¶
<ul>
<li>å¦‚æœä»»åŠ¡è¢«æ¸…ç©ºäº†ï¼Œé‚£ä¹ˆå°†<code>defaultTaskIdx</code>ç½®ä¸º-1</li>
<li>å¦åˆ™ä»¥å½“å‰ä»»åŠ¡åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ï¼Œä½œä¸ºæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡</li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">findIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> name)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (del) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(idx, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`del ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} success`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    config.defaultTaskIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (config.defaultTaskIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'now use taskï¼š'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, tasks[config.defaultTaskIdx]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config))</span></span></code></pre>
</div><p>åˆ é™¤ä»»åŠ¡çš„åŠŸèƒ½ï¼Œå°±ç®€ç®€å•å•çš„æå®šäº†</p>
<h3 id="è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®" tabindex="-1">è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½® <a class="header-anchor" href="#è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®" aria-label="Permalink to &quot;è®¾ç½®è®°å½•é»˜è®¤è¾“å‡ºä½ç½®&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="åŠŸèƒ½èƒŒæ™¯" tabindex="-1">åŠŸèƒ½èƒŒæ™¯ <a class="header-anchor" href="#åŠŸèƒ½èƒŒæ™¯" aria-label="Permalink to &quot;åŠŸèƒ½èƒŒæ™¯&quot;">&ZeroWidthSpace;</a></h4>
<p>åœ¨æœªå¼•å…¥é€šè¿‡æŒ‡ä»¤è®°å½•æ‰€åšä»»åŠ¡çš„è€—æ—¶æ—¶</p>
<p>éœ€è¦æ‰‹åŠ¨å°†è¿™äº›è®°å½•æ·»åŠ åˆ°è®°å½•æ–‡ä»¶ä¸­</p>
<p>æœŸæœ›åç»­èƒ½é€šè¿‡æŒ‡ä»¤ï¼Œå°±è‡ªåŠ¨è®¡ç®—äº‹åŠ¡è€—æ—¶ï¼Œç„¶åå°†è®°å½•è‡ªåŠ¨å†™åˆ°ç›®æ ‡æ–‡ä»¶ä¸­</p>
<p>å¦‚æœç›®æ ‡æ–‡ä»¶çš„åœ°å€æ˜¯æ‹¼åœ¨å‚æ•°ä¸­ï¼Œéš¾å…åœ¨æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ç¨æ˜¾éº»çƒ¦</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªå°éº»çƒ¦ï¼Œå°±å°†ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­</p>
<h4 id="æŒ‡ä»¤å¼€å‘" tabindex="-1">æŒ‡ä»¤å¼€å‘ <a class="header-anchor" href="#æŒ‡ä»¤å¼€å‘" aria-label="Permalink to &quot;æŒ‡ä»¤å¼€å‘&quot;">&ZeroWidthSpace;</a></h4>
<p>å…¶ä¸­å­˜å‚¨ä½ç½®å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„<code>recordFilepath</code>å±æ€§</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "recordFilepath"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"/Users/sugar/Documents/fe-project/time-control/test.md"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>é€šè¿‡<code>commander.command</code>æ³¨å†ŒæŒ‡ä»¤ï¼Œè®¾ç½®ä¸º<code>upPath &lt;recordFilepath&gt;</code></p>
<ul>
<li>emmè¿™ä¸ªå‘½åæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªï¼Œæš‚æ—¶æ²¡æƒ³åˆ°æ›´å¥½çš„å‘½åæ–¹å¼ï¼Œåç»­åœ¨ä¼˜åŒ–é˜¶æ®µç»Ÿä¸€æ›´æ–°</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * æ›´æ”¹é»˜è®¤è®°å½•æ–‡ä»¶çš„ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"upPath &#x3C;recordFilepath>"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // .alias('urp')</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'update config recordFilepath'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">recordFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ...code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>é€šè¿‡æŒ‡ä»¤æ‰§è¡Œç›®å½•<code>cwd</code>ä¸ä¼ å…¥çš„æ–‡ä»¶ç›¸å¯¹è·¯å¾„<code>recordFilePath</code>å¾—åˆ°è¾“å‡ºæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„</p>
<p>ç„¶åå°†è¿™ä¸ªç»å¯¹è·¯å¾„èµ‹å€¼ç»™é…ç½®æ–‡ä»¶çš„<code>recordFilePath</code>å±æ€§</p>
<p>é€šè¿‡<code>fs.existsSync</code>æ–¹æ³•ï¼Œåˆ¤æ–­è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±è‡ªåŠ¨åˆ›å»º</p>
<p>æœ€åé€šè¿‡<code>fs.writeFileSync</code>æ›´æ–°é…ç½®æ–‡ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fullPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, recordFilePath)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config.recordFilepath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fullPath</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fullPath)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è‡ªåŠ¨åˆ›å»ºç©ºæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fullPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'set recordFilePath successï¼š'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, fullPath);</span></span></code></pre>
</div><p>è®¾ç½®è¾“å‡ºæ–‡ä»¶è·¯å¾„çš„æŒ‡ä»¤å¼€å‘åˆ°è¿™å°±å®Œæ¯•äº†</p>
<h3 id="äº‹åŠ¡ç®¡ç†æŒ‡ä»¤å¼€å‘" tabindex="-1">äº‹åŠ¡ç®¡ç†æŒ‡ä»¤å¼€å‘ <a class="header-anchor" href="#äº‹åŠ¡ç®¡ç†æŒ‡ä»¤å¼€å‘" aria-label="Permalink to &quot;äº‹åŠ¡ç®¡ç†æŒ‡ä»¤å¼€å‘&quot;">&ZeroWidthSpace;</a></h3>
<p>æœŸæœ›é€šè¿‡ç®€å•çš„<code>timec thing -s [name]</code>,å³å¯å®Œæˆäº‹åŠ¡çš„æ·»åŠ ï¼Œç»“æŸï¼Œè‡ªåŠ¨å†™å…¥åˆ°æ–‡ä»¶</p>
<p>å…¶ä¸­<code>--stop</code>optionæ˜¯å¯é€‰çš„ï¼Œæ ‡è¯†ç»“æŸè¿™ä¸ªå·¥ä½œï¼Œå°†å…¶å†™å…¥åˆ°æ–‡ä»¶ä¹‹ä¸­å»</p>
<p>é¦–å…ˆæ³¨å†ŒæŒ‡ä»¤ï¼Œç„¶åä»é…ç½®æ–‡ä»¶ä¸­å–å‡ºç›¸å…³çš„é…ç½®é¡¹ç›®</p>
<p>å…¶ä¸­<code>thing</code>å±æ€§çš„ç»“æ„å¦‚ä¸‹</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"abc"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "startTime"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2021-08-08 22:18:19"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ†åˆ«å­˜æ”¾å½“å‰è¿›è¡Œä¸­çš„äº‹åŠ¡åå’Œäº‹åŠ¡å¼€å§‹æ—¶é—´</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"thing [name]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-s, --stop'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'stop a thing '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'update config recordFilepath'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">thing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">recordFilepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">defaultTaskIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> task</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks[defaultTaskIdx]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>é¦–å…ˆåšä¸€äº›åˆ¤æ–­ï¼Œé¿å…å¼•å‘é”™è¯¯</p>
<ol>
<li>åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†å†™å‡ºæ–‡ä»¶è·¯å¾„</li>
<li>åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†ä»»åŠ¡</li>
</ol>
<p>å¦‚æœæ²¡æœ‰è®¾ç½®ï¼ŒæŠ›å‡ºå“åº”æç¤ºä¿¡æ¯</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(thing.startTime)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">recordFilepath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} is not exist`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'you can use "timec upPath &#x3C;recordFilepath>" set it'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">task) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'not set task'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'you can use "timec task [name]" set it'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å¦‚æœæ²¡æœ‰ä¼ å…¥äº‹ä»¶åç§°<code>name</code>ï¼Œè¡¨ç¤ºä½¿ç”¨æŸ¥è¯¢åŠŸèƒ½ï¼Œæ‰“å°å½“å‰äº‹åŠ¡çš„åŸºæœ¬ä¿¡æ¯</p>
<ul>
<li>åç§°</li>
<li>å¼€å§‹æ—¶é—´</li>
<li>å·²ç»æŒç»­äº†å¤šä¹…ï¼ˆæš‚æ—¶æ¯«ç§’ä»£æ›¿ï¼‰ï¼ŒTODOï¼šåç»­ä¼˜åŒ–</li>
</ul>
<p>å¦‚æœè®¾ç½®äº†ç»“æŸçš„æ ‡å¿—<code>stop</code>ï¼Œåˆ™å°†è¿™ä¸ªäº‹åŠ¡çš„è®°å½•å†™å…¥åˆ°æ–‡ä»¶ä¹‹ä¸­å»ï¼Œæ›´æ–°é…ç½®æ–‡ä»¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing.name) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Events not in progress'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (stop) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        writeRecord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(recordFilepath, task, thing.name, thing.startTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        thing.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        thing.startTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'------'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`-name:     ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`-start:    ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'yyyy-MM-dd hh:mm:ss'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // TODOï¼šæ—¶åˆ†ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`-duration: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} mss`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'------'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å…·ä½“çš„è¾“å‡ºåˆ°æ–‡ä»¶çš„æ–¹æ³•<code>writeRecord</code>é€»è¾‘ç¨å¾®æœ‰äº›å¤æ‚ï¼Œä»Šæ—¥æ—¶é—´å®åœ¨æœ‰é™ï¼Œæ˜æ—¥å†è¯¦ç»†åˆ†æ</p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…­ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-6.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-6.html</guid>
            <pubDate>Sat, 07 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦é˜è¿°äº†ç”Ÿæˆä¸€æ®µæ—¶é—´å†…çš„æŠ¥å‘ŠæŒ‡ä»¤ï¼š
* `timec -or --range &lt;startTime
æœ‰æ—¶å€™æœŸæœ›ç›´æ¥å¯¼å‡ºçš„æŸä¸€å¤©ï¼ŒæŸä¸€æœˆï¼Œç”šè‡³æŸä¸€å¹´çš„æ•°æ®ï¼Œä¸ºæ­¤å°†ä¼šæ‹“å±•å‡ ä¸ªæ—¥æœŸç›¸]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å…­" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…­ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å…­" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå…­ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-5.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†ç”Ÿæˆä¸€æ®µæ—¶é—´å†…çš„æŠ¥å‘ŠæŒ‡ä»¤ï¼š</p>
<ul>
<li><code>timec -or --range &lt;startTime&gt;_&lt;endTime&gt; &lt;filename1&gt; &lt;filename1&gt; .....</code></li>
</ul>
<p>æœ‰æ—¶å€™æœŸæœ›ç›´æ¥å¯¼å‡ºçš„æŸä¸€å¤©ï¼ŒæŸä¸€æœˆï¼Œç”šè‡³æŸä¸€å¹´çš„æ•°æ®ï¼Œä¸ºæ­¤å°†ä¼šæ‹“å±•å‡ ä¸ªæ—¥æœŸç›¸å…³çš„æŒ‡ä»¤</p>
<ul>
<li>æŸä¸€å¤©ï¼š<code>timec -or --day [date]</code></li>
<li>æŸä¸€æœˆï¼š<code>timec -or --month [month]</code>
<ul>
<li>å°†é»˜è®¤ä¸ºä»Šå¹´</li>
</ul>
</li>
<li>æŸä¸€å¹´ï¼š<code>timec -or --year [year]</code></li>
<li>æŸå¹´æŸæœˆï¼š<code>timec -or -Y [year] -M [month]</code>
<ul>
<li><code>--month</code> ä¸ <code>--year</code>ç»„åˆä½¿ç”¨</li>
<li>å…¶ä¸­<code>-M</code>ï¼Œ<code>-Y</code>åˆ†åˆ«æ˜¯ä¸Šè¿°ä¸¤ä¸ªæŒ‡ä»¤çš„ç¼©å†™</li>
</ul>
</li>
</ul>
<p>é™¤äº†è¿™éƒ¨åˆ†å†…å®¹ï¼Œæœ¬èŠ‚ä¹Ÿå°†ä¼šè¿›å…¥æ–°çš„ç¯‡ç« ï¼Œå¼€å§‹å¼€å‘<strong>ä½¿ç”¨æŒ‡ä»¤ç®¡ç†ä»»åŠ¡ä¸äº‹åŠ¡</strong></p>
<p>æœ¬æ–‡å°†ä¼šæ¶‰åŠä»»åŠ¡ç›¸å…³çš„æŒ‡ä»¤å¼€å‘ï¼š<code>timec task [name]</code></p>
<h2 id="æœ¬æœŸæ•ˆæœ" tabindex="-1">æœ¬æœŸæ•ˆæœ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODM0OTA5MTk2NQ==Kapture%202021-08-07%20at%2023.10.56.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>æœ¬éƒ¨åˆ†å°†ä¼šçœç•¥äº”å®˜ä»£ç (å‰å‡ ç¯‡æ–‡ç« å·²å‡ºç°è¿‡)</p>
</blockquote>
<h3 id="æ—¥æœŸç›¸å…³æŒ‡ä»¤" tabindex="-1">æ—¥æœŸç›¸å…³æŒ‡ä»¤ <a class="header-anchor" href="#æ—¥æœŸç›¸å…³æŒ‡ä»¤" aria-label="Permalink to &quot;æ—¥æœŸç›¸å…³æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="å…·ä½“åˆ°å¤©" tabindex="-1">å…·ä½“åˆ°å¤© <a class="header-anchor" href="#å…·ä½“åˆ°å¤©" aria-label="Permalink to &quot;å…·ä½“åˆ°å¤©&quot;">&ZeroWidthSpace;</a></h4>
<p>é¦–å…ˆæ˜¯æŒ‡å®šåˆ°æŸä¸€å¤©:</p>
<ul>
<li>é€šè¿‡<code>option</code>æ³¨å†Œå¯é€‰å‚æ•°</li>
<li>é€šè¿‡<code>cmdObj</code>çš„dayå±æ€§æ‹¿åˆ°ç”¨æˆ·ä¼ å…¥çš„å€¼</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-D, --day [date]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One day'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// çœç•¥actions code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span></code></pre>
</div><p>å¯¹è¾“å‡ºæŠ¥å‘Šçš„å‡½æ•°è¿›è¡Œæ”¹é€ å°è£…:</p>
<ul>
<li>å‚æ•°åˆ†åˆ«æ˜¯<code>å¼€å§‹æ—¶é—´</code>ä¸<code>ç»“æŸæ—¶é—´</code>
<ul>
<li>è¿™æ ·å…¶ä½™å‡ ä¸ªå¯é€‰å‚æ•°æŒ‡ä»¤ä¹Ÿå¯ç›´æ¥å¤ç”¨</li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> outPutPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`report-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">outFileName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getJSONByRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content, s, e)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (json.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> outPutReport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outPutPath, data, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`å¯¼å‡ºæˆåŠŸ`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ¤æ–­æ—¥æœŸæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ç›´æ¥å¯¼å‡º</p>
<ul>
<li>å¼€å§‹ä¸ç»“æŸæ—¶é—´éƒ½æ˜¯ä¼ å…¥çš„æ—¥æœŸ</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (day) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(day, day)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="å…·ä½“åˆ°æœˆ" tabindex="-1">å…·ä½“åˆ°æœˆ <a class="header-anchor" href="#å…·ä½“åˆ°æœˆ" aria-label="Permalink to &quot;å…·ä½“åˆ°æœˆ&quot;">&ZeroWidthSpace;</a></h4>
<p>è€è§„çŸ©å…ˆæ³¨å†Œç›¸å…³æŒ‡ä»¤</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-M, --month [month]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One month'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>å¦‚æœåªæœ‰æœˆï¼Œé‚£ä¹ˆé»˜è®¤å¹´å°±æ˜¯ä»Šå¹´ï¼Œèµ·æ­¢æ—¶é—´åˆ†åˆ«æ˜¯</p>
<ul>
<li><code>nowYear-month-01</code></li>
<li><code>nowYear-month-days</code></li>
</ul>
<p><strong>æ’æ’­ä¸€æ¡æŠ€å·§</strong>ï¼šå¦‚ä½•å¿«é€Ÿè·å–æŸå¹´æŸæœˆçš„å¤©æ•°:</p>
<ol>
<li><code>Date</code>æ„é€ å‡½æ•°æ”¯æŒä¼ å…¥å¹´,æœˆ,æ—¥ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°é‡è½½</li>
<li>å…¶ä¸­æœˆæ˜¯<code>ä»0å¼€å§‹è®¡ç®—</code>ï¼š&quot;1-12&quot;åˆ†åˆ«å¯¹åº”&quot;0-11&quot;</li>
<li>å½“æ—¥éƒ¨åˆ†çš„å‚æ•°ä¼ å…¥0æ—¶ï¼Œè¡¨ç¤ºä¸Šæœˆæœ€åä¸€å¤©çš„æ—¥æœŸ</li>
<li>æ­¤æ—¶å†è°ƒç”¨<code>getDate</code>æ–¹æ³•è·å–æ—¥æœŸï¼Œåˆ™è·å–åˆ°ç›®æ ‡æœˆä»½çš„å¤©æ•°</li>
</ol>
<p>ä¾‹å¦‚ï¼š2021-08æœˆçš„å¤©æ•°ï¼š</p>
<ul>
<li><code>new Date(2021,8,0)</code></li>
<li>æ ‡è¯†<code>2021å¹´9æœˆ</code>å¼€å§‹çš„å‰ä¸€å¤©æ—¥æœŸï¼Œå³<code>2021å¹´8æœˆ31æ—¥</code></li>
<li><code>getDate</code>è¿”å›ç»“æœå³ä¸º<code>31</code></li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> days</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(year,month,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code></pre>
</div><p>å¯¼å‡ºé€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»Šå¹´çš„å¹´ä»½é€šè¿‡<code>new Date().getFullYear()</code>è·å–</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (month) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> year</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFullYear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-01`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="å…·ä½“åˆ°å¹´" tabindex="-1">å…·ä½“åˆ°å¹´ <a class="header-anchor" href="#å…·ä½“åˆ°å¹´" aria-label="Permalink to &quot;å…·ä½“åˆ°å¹´&quot;">&ZeroWidthSpace;</a></h4>
<p>å¦‚æœæ˜¯å¹´ï¼Œé‚£ä¹ˆèµ·æ­¢æ—¶é—´åˆ†åˆ«å°±æ˜¯ï¼š</p>
<ul>
<li><code>year-01-01</code></li>
<li><code>year-12-31</code></li>
</ul>
<p>è¿™ä¸ªæ²¡å¾—å¤ªå¤šè¯´æ³•ï¼Œè½»è½¦ç†Ÿè·¯å†™å¥½</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-Y, --year [year]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'One year'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ...more code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (year) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-01-01`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-12-31`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="å…·ä½“åˆ°æŸå¹´æŸæœˆ" tabindex="-1">å…·ä½“åˆ°æŸå¹´æŸæœˆ <a class="header-anchor" href="#å…·ä½“åˆ°æŸå¹´æŸæœˆ" aria-label="Permalink to &quot;å…·ä½“åˆ°æŸå¹´æŸæœˆ&quot;">&ZeroWidthSpace;</a></h4>
<p>è¿™ä¸ªå°±æ˜¯-Mä¸-Yå‚æ•°ç»„åˆä½¿ç”¨æ—¶çš„åœºæ™¯</p>
<p>åªéœ€è¦å°†ä¸Šè¿°ä¸¤ç§å¯¼å‡ºæ–¹å¼çš„é€»è¾‘åšä¸€ä¸ªåˆå¹¶å³å¯ï¼Œé€»è¾‘ç®€å•</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (year </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> month) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-01`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">year</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">month</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å‡ ä¸ªæ—¥æœŸç›¸å…³çš„æŒ‡ä»¤æå®Œï¼Œæ¥ç€å°±å¼€å§‹æ•´ä»»åŠ¡ç›¸å…³çš„æŒ‡ä»¤</p>
<h3 id="ä»»åŠ¡ç®¡ç†æŒ‡ä»¤" tabindex="-1">ä»»åŠ¡ç®¡ç†æŒ‡ä»¤ <a class="header-anchor" href="#ä»»åŠ¡ç®¡ç†æŒ‡ä»¤" aria-label="Permalink to &quot;ä»»åŠ¡ç®¡ç†æŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h3>
<p>æŒ‡ä»¤æ ¼å¼å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">timec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [name]</span></span></code></pre>
</div><p><code>name</code>å‚æ•°æ˜¯å¯é€‰çš„ï¼Œæœ‰å¦‚ä¸‹å‡ ç§é€»è¾‘:</p>
<ul>
<li>å½“nameä¸ºç©ºæ—¶ï¼Œå±•ç¤ºæ‰€æœ‰çš„ä»»åŠ¡ï¼Œå¹¶æ ‡è®°æ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡</li>
<li>å½“nameä¸å­˜åœ¨æ—¶ï¼Œå°†å…¶æ·»åŠ è¿›ä»»åŠ¡åˆ—è¡¨</li>
<li>å½“nameå­˜åœ¨æ—¶ï¼Œå°†å…¶è®¾ç½®ä¸ºæ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡</li>
</ul>
<p>ç†æ¸…é€»è¾‘åï¼Œè¿›å…¥å¼€å‘</p>
<h4 id="åˆå§‹åŒ–é…ç½®æ–‡ä»¶" tabindex="-1">åˆå§‹åŒ–é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#åˆå§‹åŒ–é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;åˆå§‹åŒ–é…ç½®æ–‡ä»¶&quot;">&ZeroWidthSpace;</a></h4>
<p>åœ¨é¡¹ç›®å·¥ç¨‹çš„æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª<code>.config/record.json</code>æ–‡ä»¶</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">/Users/sugar/Documents/fe-project/time-control</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> src</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> .config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€â”€â”€â””â”€â”€record.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> test2.md</span></span></code></pre>
</div><p>é…ç½®æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "recordFilepath"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "tasks"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "defaultTaskIdx"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "thing"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">""</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "startTime"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2021-01-01"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "endTime"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2021-12-31"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "pauseTime"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2021-12-26"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™é‡Œå°†ä¸»è¦ç”¨åˆ°<code>tasks</code>ä¸<code>defaultTaskIdx</code>ä¸¤ä¸ªå±æ€§ï¼Œå‰è€…è®°å½•æ‰€æœ‰çš„ä»»åŠ¡ï¼Œåè€…è®°å½•å½“å‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡</p>
<h4 id="æ³¨å†ŒæŒ‡ä»¤" tabindex="-1">æ³¨å†ŒæŒ‡ä»¤ <a class="header-anchor" href="#æ³¨å†ŒæŒ‡ä»¤" aria-label="Permalink to &quot;æ³¨å†ŒæŒ‡ä»¤&quot;">&ZeroWidthSpace;</a></h4>
<p>ä½¿ç”¨<code>commander.command</code>æ³¨å†ŒæŒ‡ä»¤ï¼š</p>
<ul>
<li>å…¶ä¸­ä½¿ç”¨<code>[]</code>åŒ…è£¹çš„å‚æ•°æ ‡è¯†å¯é€‰å‚æ•°</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆ›å»ºä»»åŠ¡ã€åˆ‡æ¢ä»»åŠ¡ã€æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"task [name]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'t'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'check tasks/add task/checkout task'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ...code åæ–‡ä»‹ç»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>é…ç½®æ–‡ä»¶çš„è·¯å¾„</p>
<ul>
<li>é€šè¿‡<code>__dirname</code>ä¸é…ç½®æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„å®šä½é…ç½®æ–‡ä»¶</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> configPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'../.config/record.json'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>é€šè¿‡<code>require</code>æ–¹æ³•å¼•å…¥jsoné…ç½®æ–‡ä»¶</p>
<ul>
<li>å¼•å…¥çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ— éœ€è°ƒç”¨<code>JSON.parse</code>è¿›è¡Œè½¬æ¢</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath)</span></span></code></pre>
</div><p>ä¸‹é¢å°±åˆ°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ä»£ç </p>
<ul>
<li>å…ˆåˆ¤æ–­æ˜¯å¦ä¼ å…¥ä»»åŠ¡å<code>name</code>
<ul>
<li>æ²¡æœ‰ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œæœ‰åˆ™é¡ºåºæ‰“å°ï¼Œæ— åˆ™æ‰“å°æç¤ºä¿¡æ¯</li>
</ul>
</li>
<li>å¦‚æœä»»åŠ¡åä¸å­˜åœ¨ï¼Œåˆ™åŠ å…¥ä»»åŠ¡åˆ—è¡¨<code>tasks</code>
<ul>
<li>å­˜åœ¨ï¼Œåˆ™å°†è¿™ä¸ªä»»åŠ¡è®¾ç½®ä¸ºæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ï¼Œå³æ›´æ–°<code>defaultTaskIdx</code>çš„å€¼</li>
</ul>
</li>
<li>æœ€åæ›´æ–°é…ç½®æ–‡ä»¶çš„å†…å®¹</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">defaultTaskIdx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">findIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tasks.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'no tasks, you can use command add task'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'timec task [name]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '[ ]'</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">defaultTaskIdx){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            mark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '[*]'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(mark,v);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tasks.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        config.defaultTaskIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'add task success'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    config.defaultTaskIdx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> idx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'now use taskï¼š'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,tasks[idx]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(configPath,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(config))</span></span></code></pre>
</div><p>è¿™ä¸ªæŒ‡ä»¤å°±å¼€å‘å®Œäº†ï¼Œæ—¶é—´ä»“ä¿ƒï¼Œä»£ç è´¨é‡å¯èƒ½ä¸ä¼šå¤ªé«˜</p>
<p>TODOï¼šåç»­ä¼˜åŒ–</p>
<h3 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">&ZeroWidthSpace;</a></h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢å·²ç»æ”¯æŒå¦‚ä¸‹æŒ‡ä»¤ï¼š</p>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODM0NzIwOTYxMw==628347209613" alt="å›¾ç‰‡" loading="lazy"></p>
<p>è¿™äº›æŒ‡ä»¤éƒ½è¿˜ä¸æ˜¯æœ€ç»ˆç‰ˆæœ¬ï¼Œç”±äºæ—¶é—´å¤ªç´§å‡‘ï¼Œè®¾è®¡æ—¶é—´ä¹Ÿè¾ƒçŸ­ï¼ŒåæœŸä¼šä¸æ–­å®Œå–„</p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–æŒç»­å…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a>çš„çŠ¶æ€</p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODM0OTA5MTk2NQ==Kapture%202021-08-07%20at%2023.10.56.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆäº”ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-5.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-5.html</guid>
            <pubDate>Fri, 06 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦é˜è¿°äº†ä¸¤ä¸ªæŒ‡ä»¤çš„å¼€å‘ï¼š
* åˆå§‹åŒ–é¡¹ç›®æ¨¡æ¿æŒ‡ä»¤ï¼š`timec init &lt;projectName
* åˆå§‹åŒ–è®°å½•æ¨¡æ¿æŒ‡ä»¤ï¼š`timec create &lt;filename]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-äº”" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆäº”ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-äº”" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆäº”ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-4.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†ä¸¤ä¸ªæŒ‡ä»¤çš„å¼€å‘ï¼š</p>
<ul>
<li>åˆå§‹åŒ–é¡¹ç›®æ¨¡æ¿æŒ‡ä»¤ï¼š<code>timec init &lt;projectName&gt;</code></li>
<li>åˆå§‹åŒ–è®°å½•æ¨¡æ¿æŒ‡ä»¤ï¼š<code>timec create &lt;filename&gt;</code></li>
</ul>
<p>æœ¬èŠ‚å°†ä¸»è¦ä»‹ç»ï¼š<strong>è‡ªåŠ¨ç”Ÿæˆä¸€æ®µæ—¶é—´å†…çš„æŠ¥å‘Š</strong></p>
<p>æœŸæœ›æ•ˆæœçš„æŒ‡ä»¤ä¸ºï¼š<code>timec -or --range &lt;startTime&gt;_&lt;endTime&gt; &lt;filename1&gt; &lt;filename1&gt; .....</code></p>
<h2 id="æœ¬æœŸæ•ˆæœ" tabindex="-1">æœ¬æœŸæ•ˆæœ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h2>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODI2NDU4MDE2Ng==time-control5.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="ä¸€å®šæ—¶é—´èŒƒå›´å†…çš„æŠ¥å‘Šç”Ÿæˆ" tabindex="-1">ä¸€å®šæ—¶é—´èŒƒå›´å†…çš„æŠ¥å‘Šç”Ÿæˆ <a class="header-anchor" href="#ä¸€å®šæ—¶é—´èŒƒå›´å†…çš„æŠ¥å‘Šç”Ÿæˆ" aria-label="Permalink to &quot;ä¸€å®šæ—¶é—´èŒƒå›´å†…çš„æŠ¥å‘Šç”Ÿæˆ&quot;">&ZeroWidthSpace;</a></h3>
<p>å¯ç”¨äºå‘¨æŠ¥ï¼Œæ—¥æŠ¥ï¼ŒæœˆæŠ¥çš„ç»Ÿè®¡æ•°æ®ç”Ÿæˆï¼Œæ–¹ä¾¿è‡ªå·±å¤ç›˜ä¸€å‘¨æ‰€åšçš„äº‹æƒ…</p>
<h4 id="æŒ‡ä»¤æ³¨å†Œ" tabindex="-1">æŒ‡ä»¤æ³¨å†Œ <a class="header-anchor" href="#æŒ‡ä»¤æ³¨å†Œ" aria-label="Permalink to &quot;æŒ‡ä»¤æ³¨å†Œ&quot;">&ZeroWidthSpace;</a></h4>
<blockquote>
<p>æ³¨æ„ï¼šçœç•¥äº†å‰å‡ ç¯‡é‡Œå·²ç»å‡ºç°è¿‡çš„æŒ‡ä»¤é€»è¾‘</p>
</blockquote>
<p>è½»è½¦ç†Ÿè·¯ï¼Œä½¿ç”¨optionæ–¹æ³•æ³¨å†Œæ–°çš„å¯é€‰å‚æ•°ï¼š</p>
<ul>
<li>-rï¼šä»£è¡¨è¦è¾“å‡ºæŠ¥å‘Š</li>
<li>-Rï¼šä»£è¡¨è¦è¾“å‡ºçš„äº‹ä»¶èŒƒå›´</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¯¼å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;filenames...>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¤šä¸ªæ–‡ä»¶/ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-o, --output'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export analysis results'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-r, --report'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export the result as a md report'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-R, --range [startDate_endDate]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'A time period'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // .action</span></span></code></pre>
</div><p>å†æ·»åŠ ç®€å•çš„åˆ¤æ–­é€»è¾‘ï¼š</p>
<ul>
<li><code>-r</code>å¯¹åº”çš„æ˜¯<code>report</code>å±æ€§ï¼Œä¸º<code>true</code>è¡¨æ˜å¯ç”¨äº†è¿™ä¸ªoption</li>
<li><code>-R</code>å¯¹åº”<code>range</code>å±æ€§ï¼Œå…¶å€¼ä¸º<code>string</code>ç±»å‹
<ul>
<li>å¼€å§‹ä¸ç»“æŸæ—¶é—´ä½¿ç”¨ä¸‹åˆ’çº¿<code>_</code>åˆ†å‰²</li>
</ul>
</li>
<li>ä¸»è¦å…³æ³¨<code>getJSONByRange</code>ä¸<code>outPutReport</code>è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°</li>
<li>å†…å®¹çš„è¯»å–é€»è¾‘(<code>content</code>)ï¼Œåœ¨å‰å‡ ç¯‡çš„æ–‡ç« å·²ç»è¯¦ç»†ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filenames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">report</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // å¯¼å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (output) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> outFileName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'res'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(report){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(range){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">startTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">endTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> range.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'_'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                    // createFile(getFilePath(cwd, `report-${outFileName}.md`),outPutReport(getJSONByRange(content,startTime,endTime)),false)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                    // æ–¹ä¾¿è§‚å¯Ÿè°ƒç”¨ç»“æ„ï¼Œå±•å¼€å¦‚ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> outPutPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`report-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">outFileName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getJSONByRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content,startTime,endTime)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> outPutReport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(json)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(outPutPath,data,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><h4 id="èŒƒå›´å†…çš„jsonè·å–" tabindex="-1">èŒƒå›´å†…çš„jsonè·å– <a class="header-anchor" href="#èŒƒå›´å†…çš„jsonè·å–" aria-label="Permalink to &quot;èŒƒå›´å†…çš„jsonè·å–&quot;">&ZeroWidthSpace;</a></h4>
<p>è¿™ä¸ªé€»è¾‘ç›¸å¯¹ç®€å•ï¼š</p>
<ol>
<li>å…ˆè°ƒç”¨<code>getJSON</code>æ–¹æ³•å°†ä¼ å…¥çš„å†…å®¹è½¬ä¸ºjsonå¯¹è±¡
<ul>
<li>å…¶ä¸­æ¯ä¸€é¡¹æ•°æ®çš„<code>title</code>ä¸º<code>yyyy-mm-dd</code>çš„æ—¥æœŸ</li>
</ul>
</li>
<li>å…ˆè°ƒç”¨<code>sort</code>æ–¹æ³•å¯¹æ•°æ®æŒ‰æ—¶é—´ä»å°åˆ°å¤§æ’åº</li>
<li>åœ¨ä½¿ç”¨<code>filter</code>æ–¹æ³•å¯¹æ•°æ®æŒ‰ç…§ä¼ å…¥çš„èµ·æ­¢æ—¶é—´è¿›è¡Œè¿‡æ»¤ç­›é€‰</li>
<li>æœ€åä¾¿äº§ç”Ÿäº†æ‰€éœ€è¦çš„ç»“æœ</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getJSONByRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">startTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">endTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fileContent)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä»å°åˆ°å¤§æ’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    jsonSchema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(b.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(v.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(startTime)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(endTime)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x26;&#x26;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&#x3C;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> e</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="jsonè½¬æŠ¥å‘Šå†…å®¹" tabindex="-1">JSONè½¬æŠ¥å‘Šå†…å®¹ <a class="header-anchor" href="#jsonè½¬æŠ¥å‘Šå†…å®¹" aria-label="Permalink to &quot;JSONè½¬æŠ¥å‘Šå†…å®¹&quot;">&ZeroWidthSpace;</a></h4>
<p>æœŸæœ›çš„æŠ¥å‘Šå†…å®¹æ ¼å¼å¦‚ä¸‹</p>
<div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold"># å¼€å§‹æ—¶é—´ - ç»“æŸæ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">**æ€»è€—æ—¶**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> xxx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">## ä»»åŠ¡å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">>è€—æ—¶ï¼šyyyy</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶1</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶2</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold">## ä»»åŠ¡å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">>è€—æ—¶ï¼šyyyy</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶1</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶2</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> äº‹ä»¶3</span></span></code></pre>
</div><p>ç»“æ„å®šä¸‹æ¥åï¼Œå’±ä»¬å¼€å§‹å¯¹jsonæ•°æ®è¿›è¡Œæ“åˆ€</p>
<p>JSONæ•°æ®ç»“æ„å¦‚ä¸‹ï¼ˆå¤ä¹ ä¸€ä¸‹ï¼‰</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"2021-08-03"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "tasks"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä»»åŠ¡1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "things"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.2"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"aç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.3"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"bç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
</div><p>é¦–å…ˆä½¿ç”¨ä¸€ä¸ªæ•°ç»„å­˜æ”¾æ¯ä¸€è¡Œçš„æ•°æ®çš„ç»“æœï¼ˆæœ€ç»ˆmdçš„æ¯ä¸€è¡Œï¼‰</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è®°å½•æ€»è€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sumTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span></code></pre>
</div><p>å¼€å§‹ç»“æŸæ—¶é—´åˆ†åˆ«ä¸º<code>json</code>å¯¹è±¡çš„ç¬¬ä¸€é¡¹å’Œæœ€åä¸€é¡¹çš„title</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> startDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].title</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> endDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema[jsonSchema.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].title</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`# ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">startDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} è‡³ ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">endDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p>ç¡®å®šæ—¶é—´ä¹‹åï¼Œå°±æ˜¯ä»»åŠ¡çš„å½’ç±»</p>
<blockquote>
<p>åé¢å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯ä½¿ç”¨<code>Array.prototype.reduce</code>ï¼Œä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥MDNæŸ¥è¯¢ä¸€ä¸‹</p>
</blockquote>
<p>å…ˆå°†æ‰€æœ‰ä»»åŠ¡æ”¶è¿›åŒä¸€ä¸ªæ•°ç»„é‡Œï¼š</p>
<ul>
<li>éå†ç„¶åç”¨<code>concat</code>é“¾æ¥è¿™äº›æ•°ç»„</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¿‡æ»¤å‡ºæ‰€æœ‰çš„tasks</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> allTasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(current.tasks)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},[])</span></span></code></pre>
</div><p>åˆå¹¶ç›¸åŒä»»åŠ¡(task)çš„äº‹åŠ¡(things)</p>
<p>åˆå¹¶å‰</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä»»åŠ¡1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "things"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.2"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"aç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä»»åŠ¡1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "things"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.3"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"bç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
</div><p>åˆå¹¶å</p>
<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "title"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ä»»åŠ¡1"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "things"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.2"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"aç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "time"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"0.3"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "content"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"bç»„ä»¶"</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
</div><p>ç¡®å®šå¥½å‰åçš„ç»“æ„åï¼Œé€»è¾‘ä»£ç å°±å®¹æ˜“ä¹¦å†™äº†:</p>
<ul>
<li>å¦‚æœ<code>pre</code>ä¸ºç©ºæ•°ç»„åˆ™ç›´æ¥å­˜å…¥</li>
<li>éå†å·²ç»å­˜å…¥çš„å†…å®¹ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›¸åŒçš„ä»»åŠ¡
<ul>
<li>ä¸å­˜åœ¨ï¼Œåˆ™åŠ å…¥<code>pre</code></li>
<li>å­˜åœ¨ï¼Œåˆ™å°†å…¶thingsåŠ å…¥<code>pre.things</code></li>
</ul>
</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// åˆå¹¶ç›¸åŒçš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> tasks</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> allTasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">current</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(pre.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(current)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sameTask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">v.title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">current.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sameTask){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        pre.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(current)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sameTask.things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">current.things)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},[])</span></span></code></pre>
</div><p>ç»“æ„æ•´ç†å®Œæ¯•ï¼Œæ¥ç€å°±æ˜¯å†…å®¹çš„ç”Ÿæˆäº†:</p>
<ul>
<li>ä½¿ç”¨<code>for...of</code> éå†æ¯ä¸€ä¸ªä»»åŠ¡</li>
<li>å†…éƒ¨ä½¿ç”¨<code>Array.prototype.map</code>éå†äº‹åŠ¡
<ul>
<li>éå†çš„åŒæ—¶å°†ä»»åŠ¡æ—¶é—´è®¡ç®—å‡ºæ¥</li>
</ul>
</li>
<li>ä¸€ä¸ªä»»åŠ¡éå†å®Œï¼Œå…ˆæ·»åŠ ä»»åŠ¡è€—æ—¶ï¼Œå†æ·»åŠ äº‹åŠ¡åˆ—è¡¨</li>
<li>æœ€åï¼Œå°†æ‰€æœ‰ä»»åŠ¡ä½¿ç”¨çš„æ€»æ—¶é—´åˆ©ç”¨æ•°ç»„çš„<code>splice</code>æ–¹æ³•ï¼Œå°†å…¶æ’å…¥ç»“æœç¬¬äºŒé¡¹</li>
</ul>
<p>åˆ°æ­¤ï¼Œç”ŸæˆèŒƒå›´æŠ¥å‘Šçš„é€»è¾‘å°±å®Œæˆäº†</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> taskItem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`## ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">taskItem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">title</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> taskTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> things </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> taskItem.things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">thing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        taskTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `* ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">content</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`>è€—æ—¶ï¼š${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">taskTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">things)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sumTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> taskTime</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">splice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`**æ€»è€—æ—¶** ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sumTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toFixed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre>
</div><p><a href="https://github.com/ATQQ/time-control/pull/2/files" target="_blank" rel="noreferrer">æœ¬éƒ¨åˆ†çš„å®Œæ•´ä»£ç åœ°å€</a></p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–å…ˆå…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a></p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODI2NDU4MDE2Ng==time-control5.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå››ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-4.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-4.html</guid>
            <pubDate>Thu, 05 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[å‰è¨€
ä¸Šä¸€ç¯‡æ–‡ç« ä¸»è¦é˜è¿°äº†ï¼š
* æ‰¹é‡markdownè½¬jsoné€»è¾‘
* åˆå¹¶å¤šä¸ªmdçš„ä¸­è®°å½•çš„å†…å®¹ï¼Œå¹¶æŒ‰æ—¶é—´æ’åº
æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»çš„å¼€å‘:
* åˆå§‹åŒ–é¡¹ç›®æ¨¡æ¿æŒ‡ä»¤ï¼š`timec init &lt;pr]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å››" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå››ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-å››" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆå››ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-3.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸»è¦é˜è¿°äº†ï¼š</p>
<ul>
<li>æ‰¹é‡markdownè½¬jsoné€»è¾‘</li>
<li>åˆå¹¶å¤šä¸ªmdçš„ä¸­è®°å½•çš„å†…å®¹ï¼Œå¹¶æŒ‰æ—¶é—´æ’åº</li>
</ul>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»çš„å¼€å‘:</p>
<ul>
<li>åˆå§‹åŒ–é¡¹ç›®æ¨¡æ¿æŒ‡ä»¤ï¼š<code>timec init &lt;projectName&gt;</code></li>
<li>åˆå§‹åŒ–è®°å½•æ¨¡æ¿æŒ‡ä»¤ï¼š<code>timec create &lt;filename&gt;</code></li>
</ul>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="åˆå§‹åŒ–æ¨¡æ¿é¡¹ç›®" tabindex="-1">åˆå§‹åŒ–æ¨¡æ¿é¡¹ç›® <a class="header-anchor" href="#åˆå§‹åŒ–æ¨¡æ¿é¡¹ç›®" aria-label="Permalink to &quot;åˆå§‹åŒ–æ¨¡æ¿é¡¹ç›®&quot;">&ZeroWidthSpace;</a></h3>
<h4 id="ç®€è¿°" tabindex="-1">ç®€è¿° <a class="header-anchor" href="#ç®€è¿°" aria-label="Permalink to &quot;ç®€è¿°&quot;">&ZeroWidthSpace;</a></h4>
<p>ç”¨æˆ·è¾“å…¥ç®€å•çš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥è‡ªåŠ¨åˆ›å»ºå‡ºä¸€ä¸ªæ—¶é—´ç®¡ç†æ¨¡æ¿å·¥ç¨‹</p>
<p>æ¨¡æ¿å·¥ç¨‹ç»“æ„å¦‚ä¸‹</p>
<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">project</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> README.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â”œâ”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> study</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> README.md</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> work</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">   â””â”€â”€</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> README.md</span></span></code></pre>
</div><h4 id="å·¥ä½œæµç¨‹" tabindex="-1">å·¥ä½œæµç¨‹ <a class="header-anchor" href="#å·¥ä½œæµç¨‹" aria-label="Permalink to &quot;å·¥ä½œæµç¨‹&quot;">&ZeroWidthSpace;</a></h4>
<ol>
<li>ç»ˆç«¯è¾“å…¥æŒ‡ä»¤</li>
<li>è·å–åˆ°æŒ‡ä»¤æ‰§è¡Œç›®å½•ï¼ˆcmdï¼‰ä¸ç”¨æˆ·è¾“å…¥çš„é¡¹ç›®åç§°</li>
<li>åˆ©ç”¨<code>existsSync</code>åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨
<ol>
<li>ç›®å½•ä¸å­˜åœ¨çš„ï¼Œåˆ©ç”¨<code>fs.mkdirSync</code>åˆ›å»ºç›®å½•</li>
</ol>
</li>
<li>é€šè¿‡<code>fs.writeFileSync</code>åˆ›å»ºæ–‡ä»¶ï¼Œå°†æ–‡ä»¶å†™å…¥åˆ°ç”¨æˆ·çš„å½“å‰ç›®å½•ä¸‹
<ol>
<li>æ–‡ä»¶å†…å®¹æ¥æºäºæŒ‡å®šé™æ€èµ„æºç›®å½•ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰</li>
</ol>
</li>
</ol>
<h4 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">&ZeroWidthSpace;</a></h4>
<p>æ³¨å†Œ<code>init</code>æŒ‡ä»¤ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>commander.command</code>APIæ³¨å†Œ</li>
<li>ä»actionå›æ‰ä¸­æ‹¿åˆ° è®¾ç½®çš„<code>&lt;projectName&gt;</code>å‚æ•°</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆå§‹åŒ–é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"init &#x3C;projectName>"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'i'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'init project'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">projectName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">initProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, projectName)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`åˆå§‹åŒ– ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">projectName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} æˆåŠŸ`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">projectName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} å·²å­˜åœ¨`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>æ¥ä¸‹æ¥æ˜¯å…·ä½“çš„<code>initProject</code>é€»è¾‘:</p>
<ul>
<li>cmdï¼š<code>process.cwd()</code>æŒ‡ä»¤æ‰§è¡Œç›®å½•</li>
<li>projectNameï¼šç”¨æˆ·è¾“å…¥çš„é¡¹ç›®å</li>
</ul>
<ol>
<li>åˆ¤æ–­ç›®æ ‡ç›®å½•æ˜¯å¦å­˜åœ¨
<ol>
<li>ä¸å­˜åœ¨åˆ™åˆ›å»º</li>
<li>å­˜åœ¨åˆ™æŠ›å‡º<code>å·²ç»å­˜åœ¨</code>è­¦å‘Š</li>
</ol>
</li>
<li>å°†æ¨¡æ¿æ–‡ä»¶çš„å†…å®¹å…ˆè¯»å…¥</li>
<li>é€šè¿‡<code>createDir</code>æ–¹æ³•åˆ›å»ºç›®å½•</li>
<li>é€šè¿‡<code>createFile</code>æ–¹æ³•å°†å†…å®¹å†™åˆ°ç›®æ ‡ç›®å½•</li>
</ol>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é™æ€èµ„æºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> assetsDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'assets'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readmeContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(assetsDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'README.md'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> demoContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(assetsDir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'demo.md'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆå§‹åŒ–ä¸€ä¸ªæ¨¡æ¿é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cwd</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> é¡¹ç›®ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> projectName</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> é¡¹ç›®åç§°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> initProject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">projectName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, projectName)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // åˆ›å»ºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'README.md'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), readmeContent)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        createDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'work'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        createDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'study'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'work'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'README.md'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), demoContent)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'study'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'README.md'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), demoContent)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆ›å»ºä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path, { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} å·²å­˜åœ¨`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>è¿™æ ·åˆå§‹åŒ–ä¸€ä¸ªæ¨¡æ¿é¡¹ç›®çš„æµç¨‹å°±å®Œæˆäº†</p>
<h3 id="åˆå§‹åŒ–è®°å½•æ¨¡æ¿" tabindex="-1">åˆå§‹åŒ–è®°å½•æ¨¡æ¿ <a class="header-anchor" href="#åˆå§‹åŒ–è®°å½•æ¨¡æ¿" aria-label="Permalink to &quot;åˆå§‹åŒ–è®°å½•æ¨¡æ¿&quot;">&ZeroWidthSpace;</a></h3>
<p>æœ‰æ¨¡æ¿é¡¹ç›®å°±æœ‰æ¨¡æ¿æ–‡ä»¶</p>
<p>è¿™éƒ¨åˆ†ä¸»è¦é˜è¿°ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶çš„æµç¨‹</p>
<p>é¦–å…ˆæ³¨å†Œ<code>create &lt;filename&gt;</code> æŒ‡ä»¤</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆ›å»ºä¸€ä¸ªæ—¶é—´è®°å½•æ¨¡æ¿æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"create &#x3C;filename>"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'c'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'create template note file'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createTemplateFIle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, filename)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} åˆ›å»ºæˆåŠŸ`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} å·²å­˜åœ¨`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>ä¸»è¦é€»è¾‘æ˜¯<code>createTemplateFIle</code>æ–¹æ³•é‡Œ</p>
<p>è¿™é‡Œçš„æ€è·¯å°±æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºåˆ›å»ºæ¨¡æ¿æ–‡ä»¶çš„ç›®å½•é»˜è®¤æ˜¯æŒ‡ä»¤å‘½ä»¤çš„ç›®å½•</p>
<p>ä¸€è¡Œä»£ç å°±æå®šæ–‡ä»¶çš„å†™å‡º</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆå§‹åŒ–ä¸€ä¸ªæ¨¡æ¿è®°å½•æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cwd</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ–‡ä»¶ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filename</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> æ–‡ä»¶åç§°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createTemplateFIle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, filename), demoContent)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h3 id="æœ¬æœŸæ•ˆæœ" tabindex="-1">æœ¬æœŸæ•ˆæœ <a class="header-anchor" href="#æœ¬æœŸæ•ˆæœ" aria-label="Permalink to &quot;æœ¬æœŸæ•ˆæœ&quot;">&ZeroWidthSpace;</a></h3>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODE3NDI1NTI1Mg==timec4.gif" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>ä¸‹ä¸€æœŸæ ¹æ®å·²æœ‰çš„åŠŸèƒ½æ•´ä¸ªå‘¨æŠ¥ç”Ÿæˆ</strong>(é¸½äº†ä¸€æœŸ)</p>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–å…ˆå…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a></p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODE3NDI1NTI1Mg==timec4.gif" length="0" type="image/gif"/>
        </item>
        <item>
            <title><![CDATA[åšä¸€ä¸ªCLç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸‰ï¼‰]]></title>
            <link>https://www.dmsrs.org/works/time-tools/time-tools-3.html</link>
            <guid>https://www.dmsrs.org/works/time-tools/time-tools-3.html</guid>
            <pubDate>Wed, 04 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[# åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸‰ï¼‰

## å‰è¨€
[ä¸Šä¸€ç¯‡æ–‡ç« ](./time-tools-2.md)å®Œæˆäº†**markdownè½¬JSON**çš„é€»è¾‘ä¸ **è‡ªå®šä¹‰æŒ‡ä»¤çš„æ·»åŠ **ä»‹ç»

æœ¬æ–‡å°†è¯¦ç»†è®²è§£ä¸€äº› ä»è¾“å…¥æŒ‡ä»¤`timec -oj filepath1 filepath2 ....` åˆ°æ­£ç¡®æ‰§è¡Œçš„é€»è¾‘

## åŠŸèƒ½å¼€å‘
### æ‰¹é‡MDè½¬JSONè¯¦ç»†é€»è¾‘
å°†ä¼ å…¥çš„ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„
* å…¶ä¸­`process.cwd()`æ ‡è¯†å‘½ä»¤çš„æ‰§è¡Œç›®å½•
```js
const path = require('path')
// é¦–å…ˆè·å¾—å‘½ä»¤æ‰§è¡Œç›®å½•
const cwd = process.cwd()

// å°†ä¼ å…¥çš„ç›¸å¯¹æ–‡ä»¶è·¯å¾„æ‰¹é‡è½¬ä¸ºç»å¯¹è·¯å¾„
filenames = filenames.map(f=>{
  return path.join(cwd,f)
})
```

æ‰¹é‡è·å–å¤šä¸ªæ–‡ä»¶çš„å†…å®¹:
* ä½¿ç”¨`fs.readFileSync`è·å–å•ä¸ªæ–‡ä»¶çš„å†…å®¹
* åˆ©ç”¨`Array.prototype.reduce`åˆå¹¶å¤šä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä»¥`\n`åˆ†å‰²
```js
const fs = require('fs')

/**
 * è·å–æ–‡ä»¶å†…å®¹
 * @param {string} filepath 
 */
function getFileContent(filepath) {
    return fs.readFileSync(filepath, { encoding: 'utf-8' })
}
/**
 * è·å–å¤šä¸ªæ–‡ä»¶çš„å†…å®¹
 * @param {string[]} files 
 */
function getFilesContent(files) {
    return files.reduce((pre, now) => {
        pre += '\n'
        pre += getFileContent(now)
        return pre
    }, '')
}
```
å°†MDè½¬ä¸ºJSONå¹¶è¾“å‡ºåˆ°æ–‡ä»¶ï¼š
* è½¬ä¸ºJSONçš„è¯¦ç»†é€»è¾‘çœ‹ä¸Šä¸€ç¯‡æ–‡ç« çš„ä»‹ç»
* åˆ›å»ºæ–‡ä»¶æ—¶éœ€åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨æ–°çš„åç§°ï¼Œé¿å…è¦†ç›–å†…å®¹

```js
// è·å–æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹
const content = getFilesContent(filenames)

let outFileName = 'res'
// è½¬ä¸ºJSONå¯¹è±¡ï¼Œå¹¶æ‰§è¡ŒJSON.stringify
createFile(path.join(cwd, `${outFileName}.json`), outputJson(content), false)

// ]]></description>
            <content:encoded><![CDATA[<h1 id="åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¸‰" tabindex="-1">åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸‰ï¼‰ <a class="header-anchor" href="#åšä¸€ä¸ªcliç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·-ä¸‰" aria-label="Permalink to &quot;åšä¸€ä¸ªCLIç‰ˆçš„æ—¶é—´ç®¡ç†å·¥å…·ï¼ˆä¸‰ï¼‰&quot;">&ZeroWidthSpace;</a></h1>
<h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">&ZeroWidthSpace;</a></h2>
<p><a href="./time-tools-2.html">ä¸Šä¸€ç¯‡æ–‡ç« </a>å®Œæˆäº†<strong>markdownè½¬JSON</strong>çš„é€»è¾‘ä¸ <strong>è‡ªå®šä¹‰æŒ‡ä»¤çš„æ·»åŠ </strong>ä»‹ç»</p>
<p>æœ¬æ–‡å°†è¯¦ç»†è®²è§£ä¸€äº› ä»è¾“å…¥æŒ‡ä»¤<code>timec -oj filepath1 filepath2 ....</code> åˆ°æ­£ç¡®æ‰§è¡Œçš„é€»è¾‘</p>
<h2 id="åŠŸèƒ½å¼€å‘" tabindex="-1">åŠŸèƒ½å¼€å‘ <a class="header-anchor" href="#åŠŸèƒ½å¼€å‘" aria-label="Permalink to &quot;åŠŸèƒ½å¼€å‘&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="æ‰¹é‡mdè½¬jsonè¯¦ç»†é€»è¾‘" tabindex="-1">æ‰¹é‡MDè½¬JSONè¯¦ç»†é€»è¾‘ <a class="header-anchor" href="#æ‰¹é‡mdè½¬jsonè¯¦ç»†é€»è¾‘" aria-label="Permalink to &quot;æ‰¹é‡MDè½¬JSONè¯¦ç»†é€»è¾‘&quot;">&ZeroWidthSpace;</a></h3>
<p>å°†ä¼ å…¥çš„ç›¸å¯¹è·¯å¾„è½¬ç»å¯¹è·¯å¾„</p>
<ul>
<li>å…¶ä¸­<code>process.cwd()</code>æ ‡è¯†å‘½ä»¤çš„æ‰§è¡Œç›®å½•</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'path'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// é¦–å…ˆè·å¾—å‘½ä»¤æ‰§è¡Œç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å°†ä¼ å…¥çš„ç›¸å¯¹æ–‡ä»¶è·¯å¾„æ‰¹é‡è½¬ä¸ºç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">filenames </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filenames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd,f)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
</div><p>æ‰¹é‡è·å–å¤šä¸ªæ–‡ä»¶çš„å†…å®¹:</p>
<ul>
<li>ä½¿ç”¨<code>fs.readFileSync</code>è·å–å•ä¸ªæ–‡ä»¶çš„å†…å®¹</li>
<li>åˆ©ç”¨<code>Array.prototype.reduce</code>åˆå¹¶å¤šä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä»¥<code>\n</code>åˆ†å‰²</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'fs'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> filepath</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filepath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filepath, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–å¤šä¸ªæ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string[]}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilesContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        pre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        pre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(now)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>å°†MDè½¬ä¸ºJSONå¹¶è¾“å‡ºåˆ°æ–‡ä»¶ï¼š</p>
<ul>
<li>è½¬ä¸ºJSONçš„è¯¦ç»†é€»è¾‘çœ‹ä¸Šä¸€ç¯‡æ–‡ç« çš„ä»‹ç»</li>
<li>åˆ›å»ºæ–‡ä»¶æ—¶éœ€åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨æ–°çš„åç§°ï¼Œé¿å…è¦†ç›–å†…å®¹</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è·å–æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilesContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filenames)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> outFileName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'res'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è½¬ä¸ºJSONå¯¹è±¡ï¼Œå¹¶æ‰§è¡ŒJSON.stringify</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">outFileName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.json`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">outputJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> outputJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> content</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {boolean}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> judgeRepeat</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">judgeRepeat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path, content, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (judgeRepeat) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} å·²å­˜åœ¨`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getNoRepeatFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(path), content, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'utf-8'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>æ ¹æ®å·²å­˜åœ¨çš„è·¯å¾„ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„è·¯å¾„é€»è¾‘å¦‚ä¸‹</p>
<ul>
<li>å¾€æ–‡ä»¶åæœ«å°¾æ·»åŠ ä¸€ä¸ªè‡ªå¢çš„æ•°å­—
<ul>
<li>é€šè¿‡<code>path.parse</code>æ–¹æ³•è§£æè·¯å¾„ ï¼ˆ/user/home/abc.txtï¼‰
<ul>
<li>dirï¼šç›®å½• ï¼ˆ/user/homeï¼‰</li>
<li>nameï¼šæ–‡ä»¶å ï¼ˆabcï¼‰</li>
<li>extï¼šæ–‡ä»¶åç¼€ ï¼ˆ.txtï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>å¦‚æœæ•°å­—å­˜åœ¨åˆ™è‡ªå¢è¿™ä¸ªæ•°å­—ï¼Œç›´è‡³æ•°å­—ä¸å­˜åœ¨</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * è·å–ä¸åŸæ–‡ä»¶ä¸é‡å¤çš„ä¸€ä¸ªæ–‡ä»¶è·¯ç»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@param</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {string}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> originPath</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getNoRepeatFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">originPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(originPath)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(originPath)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> originPath</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">num</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ext</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">))) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">num</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ext</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>åˆ°æ­¤ä» <code>MDè¯»å–</code> -&gt; <code>è½¬æ¢ä¸ºJSON</code> -&gt; <code>å†™å‡ºåˆ°æ–‡ä»¶</code> æµç¨‹éƒ½æ‹†è§£é˜è¿°å®Œæ¯•</p>
<h3 id="åˆå¹¶mdè®°å½•å¹¶æŒ‰æ—¶é—´æ’åº" tabindex="-1">åˆå¹¶MDè®°å½•å¹¶æŒ‰æ—¶é—´æ’åº <a class="header-anchor" href="#åˆå¹¶mdè®°å½•å¹¶æŒ‰æ—¶é—´æ’åº" aria-label="Permalink to &quot;åˆå¹¶MDè®°å½•å¹¶æŒ‰æ—¶é—´æ’åº&quot;">&ZeroWidthSpace;</a></h3>
<p>å’±ä»¬å†ç»™å®ƒæ·»åŠ ä¸€ä¸ª<code>--markdown</code>optionsç”¨ä¸åç»­çš„åˆå¹¶å¤šä¸ªmarkdowné€»è¾‘</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">commander.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&#x3C;filenames...>'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å¤šä¸ªæ–‡ä»¶/ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'-m, --markdown'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Export the result as a markdown file'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filenames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cmdObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">markdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> cmdObj</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // å¯¼å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (output) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> outFileName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'res'</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // è·å–æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹ï¼ˆåŒä¸Šï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilesContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(filenames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, filename)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (markdown) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                createFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(cwd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">outFileName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.md`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">outPutMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getJSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(content),time), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span></code></pre>
</div><p>ä»£ç æ¶‰åŠåˆ°çš„å…¶å®ƒå‡½å‰é¢äº›æ–‡ç« å·²ç»åšäº†è¯¦ç»†ä»‹ç»</p>
<p>ä¸‹é¢å›´ç»•<code>outPutMarkdown</code>é€»è¾‘å±•å¼€:</p>
<ul>
<li>å…ˆè·å–æ‰€æœ‰mdæ–‡ä»¶çš„å†…å®¹ï¼Œå†è°ƒç”¨<code>getJSON</code>æ–¹æ³•è½¬ä¸ºJSONå¯¹è±¡</li>
<li>è°ƒç”¨<code>sort</code>æ–¹æ³•å¯¹titleï¼ˆæ—¶é—´ï¼‰è¿›è¡Œæ’åº</li>
<li>å°†æ’åºåçš„jsonå¯¹è±¡ï¼Œè°ƒç”¨<code>getEverydayData</code>è¯¦ç»†è½¬æ¢æ¯ä¸€å¤©çš„æ•°æ®</li>
</ul>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> outPutMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">jsonSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">withTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ä»å°åˆ°å¤§æ’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    jsonSchema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonSchema.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(a.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> d2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(b.title)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> d2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getEverydayData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(jsonSchema, withTime))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><p>éå†æ¯ä¸€å¤©çš„æ•°æ®ï¼Œåˆ©ç”¨<code>reduce</code>åµŒå¥—é…åˆ<code>unshift</code>æ–¹æ³•</p>
<p>ä»æ¯ä¸€ä¸ªå…·ä½“äº‹ä»¶(ä»¥ <code>*</code> å¼€å¤´)å¼€å§‹éå†ï¼Œè§£æäº‹ä»¶çš„å†…å®¹å’Œæ¶ˆè€—æ—¶é—´ï¼Œç„¶åç´¯åŠ å¾—å‡ºä»»åŠ¡è€—æ—¶ä¸æ¯ä¸€å¤©çš„è€—æ—¶</p>
<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" v-pre=""><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEverydayData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">timeDesc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">withTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æŒ‰å¤©ä»»åŠ¡æ—¶é—´æ±‡æ€»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    timeDesc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">oneDay</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> _oneRes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> oneDay</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">things</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> task</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> sum</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> things.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">reduce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">pre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">thing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // æŸä»¶äº‹æƒ…å†µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> thing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                _oneRes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`* ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">content</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} -- ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fixedNum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">thing.time)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // æŸä¸€ä¸ªä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            _oneRes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`## ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">title</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} -- ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fixedNum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> pre </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> sum</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // ä¸€å¤©çš„æ ‡é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        _oneRes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">unshift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`# ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">title</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} -- ${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fixedNum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_oneRes, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å»æ‰ç»Ÿè®¡çš„æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">withTime) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\s</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
</div><h4 id="æŒ‡ä»¤æ•ˆæœ" tabindex="-1">æŒ‡ä»¤æ•ˆæœ <a class="header-anchor" href="#æŒ‡ä»¤æ•ˆæœ" aria-label="Permalink to &quot;æŒ‡ä»¤æ•ˆæœ&quot;">&ZeroWidthSpace;</a></h4>
<p><img src="https://img.cdn.sugarat.top/mdImg/MTYyODA4ODA3Mzk5Mg==628088073992" alt="å›¾ç‰‡" loading="lazy"></p>
<h2 id="å…¶å®ƒ" tabindex="-1">å…¶å®ƒ <a class="header-anchor" href="#å…¶å®ƒ" aria-label="Permalink to &quot;å…¶å®ƒ&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>ä¸‹ä¸€æœŸæ ¹æ®å·²æœ‰çš„åŠŸèƒ½æ•´ä¸ªå‘¨æŠ¥ç”Ÿæˆ</strong></p>
<p>ç”±äºæ¯å¤©ç©ºé—²æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å°±å…ˆåˆ°è¿™</p>
<p>å¦‚æœè¯»è€…è¿˜æ„Ÿè§‰æ„çŠ¹æœªå°½ï¼Œæ•¬è¯·æœŸå¾…åç»­æ›´æ–°ï¼Œæˆ–å…ˆå…³æ³¨ä¸€ä¸‹<a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“</a></p>
<p>æ¬¢è¿è¯„è®ºåŒºæéœ€æ±‚ï¼Œäº¤æµæ¢è®¨</p>
<p>æœ¬ç³»åˆ—ä¼šä¸æ–­çš„æ›´æ–°è¿­ä»£ï¼Œç›´è‡³äº§å“åˆä»£å®Œæˆ</p>
<ul>
<li><a href="https://github.com/ATQQ/time-control" target="_blank" rel="noreferrer">ä»“åº“åœ°å€</a></li>
</ul>
]]></content:encoded>
            <enclosure url="https://img.cdn.sugarat.top/mdImg/MTYyODA4ODA3Mzk5Mg==628088073992" length="0" type="image//mdImg/MTYyODA4ODA3Mzk5Mg==628088073992"/>
        </item>
    </channel>
</rss>